# TITRE  MURAKAMI 9.35 FISSURE SEMI-ELLIPTIQUE DEBOUCHANT A LA PEAU
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
#        INTERNE D'UN TUBE EPAIS SOUS PRESSION
#

DEBUT( CODE=_F( NOM = 'SSLV310A',NIV_PUB_WEB='INTERNET'))

MA=LIRE_MAILLAGE(FORMAT='MED',)

MO=AFFE_MODELE(   MAILLAGE=MA, 
                        AFFE=_F(  TOUT = 'OUI',
                               PHENOMENE = 'MECANIQUE',
                               MODELISATION = '3D')
                )

MA=MODI_MAILLAGE( reuse=MA,   MAILLAGE=MA,
                  ORIE_PEAU_3D=_F(  GROUP_MA = ( 'LEVREINS', 'SPRES', ) )
                     )


MA=DEFI_GROUP(reuse=MA,
               MAILLAGE=MA,
               CREA_GROUP_NO=(_F(NOM='LFF',
                                 NOEUD=('N2613', 'N2610', 'N2867',
                                        'N2864', 'N2863', 'N2858',
                                        'N3203', 'N3200', 'N3499',
                                        'N3496', 'N4072',
                                        'N4066', 'N4632', 'N4626',
                                        'N5093', 'N5087', 'N5548',
                                        'N5542', 'N5919', 'N5913',
                                        'N6186', 'N6180', 'N6426',
                                        'N6420', 'N6658', 'N6652',
                                        'N6841', 'N6835', 'N6957',
                                        'N6951', 'N6971', 'N6965',
                                        'N6962',
                                             ),),),
              )

#Barsoum
MA = MODI_MAILLAGE(reuse = MA,
                  MAILLAGE = MA,
                  MODI_MAILLE=_F(OPTION='NOEUD_QUART',
                                 GROUP_NO_FOND='LFF'),
                 );

MAT1=DEFI_MATERIAU(    ELAS=_F(  E = 2.E+11,
                                NU = 0.3)
                     )

CHMAT=AFFE_MATERIAU(   MAILLAGE=MA,
                             AFFE=_F(  GROUP_MA = 'VMAT',
                                    MATER = MAT1)
                     )

MA=DEFI_GROUP( reuse=MA,   MAILLAGE=MA, 
                     CREA_GROUP_NO=_F( 
                        GROUP_MA = ( 'SYME3',  'SYME2',  'SYME1', 
                                     'SPRES',  'LEVREINS',
                                   ))
                 )

CH=AFFE_CHAR_MECA( MODELE=MO,
                   DDL_IMPO=( _F(  GROUP_NO = 'SYME1',     DX = 0.),
                              _F(  GROUP_NO = 'PI3',       DY = 0.),
                              _F(  GROUP_NO = 'SYME2',     DZ = 0.),
                              _F(  GROUP_NO = 'SYME3',     DZ = 0.)),
                   PRES_REP=( _F(  GROUP_MA = 'LEVREINS',  PRES =  75.E6),
                              _F(  GROUP_MA = 'SPRES',     PRES =  75.E6))
                    )

CHAMDEPL=MECA_STATIQUE(        MODELE=MO,
                              CHAM_MATER=CHMAT,
                                   EXCIT=_F( CHARGE = CH)
                          )


FISS1=DEFI_FOND_FISS(         MAILLAGE=MA,
                              SYME='OUI',
                              FOND_FISS=_F(NOEUD = ( 'N2613', 'N2610', 'N2867',
                                                     'N2864', 'N2863', 'N2858',
                                                     'N3203', 'N3200', 'N3499',
                                                     'N3496', 'N4072',
                                                     'N4066', 'N4632', 'N4626',
                                                     'N5093', 'N5087', 'N5548',
                                                     'N5542', 'N5919', 'N5913',
                                                     'N6186', 'N6180', 'N6426',
                                                     'N6420', 'N6658', 'N6652',
                                                     'N6841', 'N6835', 'N6957',
                                                     'N6951', 'N6971', 'N6965',
                                                     'N6962',
                                                   ),

                                                   ),
                               LEVRE_SUP=_F(  GROUP_MA = 'LEVREINS'),
                      )

#
#
#----------------------------------------------------------------------
#                           COURONNE
#----------------------------------------------------------------------
#
# DEFINITION DES RAYONS DES COURONNES DU CHAMPS THETA
#
#
# PREMIERE COURONNE
#
RAY_INF1=DEFI_CONSTANTE(   VALE=5.E-4)

RAY_SUP1=DEFI_CONSTANTE(   VALE=1.25E-3)

MOD_T1=DEFI_CONSTANTE(   VALE=1.    )

THETA1=CALC_THETA(      MODELE=MO,
                         FOND_FISS=FISS1,
                        THETA_3D=_F(  TOUT = 'OUI',
                                   MODULE_FO = MOD_T1,
                                   R_INF_FO = RAY_INF1,
                                   R_SUP_FO = RAY_SUP1)
                    )

G0_C1=CALC_G(         OPTION='CALC_G_GLOB',
                      RESULTAT=CHAMDEPL,
                      THETA=_F(THETA=THETA1),
                       )

#
# CALCUL DE G LOCAL AVEC THETA_LEGENDRE
#
GLO1_LE5=CALC_G(         RESULTAT=CHAMDEPL,
                         THETA=_F(FOND_FISS=FISS1,
                                  R_INF_FO=RAY_INF1,
                                  R_SUP_FO=RAY_SUP1),
                         )

GLOC1=CALC_G(            RESULTAT=CHAMDEPL,
                         THETA=_F(FOND_FISS=FISS1,
                                  R_INF_FO=RAY_INF1,
                                  R_SUP_FO=RAY_SUP1,),
                         )

#
# DEUXIEME COURONNE
#
RAY_INF2=DEFI_CONSTANTE(   VALE=1.25E-3)

RAY_SUP2=DEFI_CONSTANTE(   VALE=2.E-3)

THETA2=CALC_THETA(      MODELE=MO,
                         FOND_FISS=FISS1,
                        THETA_3D=_F(  TOUT = 'OUI',
                                   MODULE_FO = MOD_T1,
                                   R_INF_FO = RAY_INF2,
                                   R_SUP_FO = RAY_SUP2)
                    )

#
G0_C2=CALC_G (        OPTION='CALC_G_GLOB',
                      RESULTAT=CHAMDEPL,
                      THETA=_F(THETA=THETA2),
                       )

#
# CALCUL DE G LOCAL AVEC THETA_LEGENDRE
#
GLO2_LE5=CALC_G(        RESULTAT=CHAMDEPL,
                        THETA=_F(FOND_FISS=FISS1, 
                                 R_INF_FO=RAY_INF2,
                                 R_SUP_FO=RAY_SUP2),
                         )

GLOC2=CALC_G(           RESULTAT=CHAMDEPL,
                        THETA=_F(FOND_FISS=FISS1,
                                 R_INF_FO=RAY_INF2,
                                 R_SUP_FO=RAY_SUP2),
                         )

#
# TROISIEME COURONNE
#
RAY_INF3=DEFI_CONSTANTE(   VALE=2.E-3)

RAY_SUP3=DEFI_CONSTANTE(   VALE=2.5E-3)

#
THETA3=CALC_THETA(     MODELE=MO,
                        FOND_FISS=FISS1,
                        THETA_3D=_F(  TOUT = 'OUI',
                                   MODULE_FO = MOD_T1,
                                   R_INF_FO = RAY_INF3,
                                   R_SUP_FO = RAY_SUP3)
                    )

G0_C3=CALC_G(          OPTION='CALC_G_GLOB',
                       RESULTAT=CHAMDEPL,
                       THETA=_F(THETA=THETA3),
                       )

#
# CALCUL DE G LOCAL AVEC THETA_LEGENDRE
#
GLO3_LE4=CALC_G(               RESULTAT=CHAMDEPL,
                               THETA=_F(FOND_FISS=FISS1,
                                        R_INF_FO=RAY_INF3,
                                        R_SUP_FO=RAY_SUP3),
                               LISSAGE=_F( DEGRE=4),
                         )

GLOC3=CALC_G(                 RESULTAT=CHAMDEPL,
                              THETA=_F(FOND_FISS=FISS1,
                                       R_INF_FO=RAY_INF3,
                                       R_SUP_FO=RAY_SUP3,),
                              LISSAGE=_F(DEGRE=4,),
                         )

#
# TEST DE G
#
# 1ERE COURONNE
#
# ANGLE POLAIRE = 0
#

TEST_TABLE(PRECISION=0.20000000000000001,
           VALE_CALC=8955.881453927,
           VALE_REFE=7686.4200000000001,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC1,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N2613',),
           )

#
# ANGLE POLAIRE = 14.1
#

TEST_TABLE(PRECISION=0.040000000000000001,
           VALE_CALC=6881.4136237151,
           VALE_REFE=6676.2600000000002,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC1,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N3203',),
           )

#
# ANGLE POLAIRE = 30.9
#

TEST_TABLE(PRECISION=0.10000000000000001,
           VALE_CALC=6230.4423462715,
           VALE_REFE=5777.9799999999996,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC1,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N4066',),
           )

#
# ANGLE POLAIRE = 45.0
#

TEST_TABLE(PRECISION=0.10000000000000001,
           VALE_CALC=6074.4379324556,
           VALE_REFE=5598.9200000000001,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC1,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N5548',),
           )

#
# ANGLE POLAIRE = 59.1
#

TEST_TABLE(PRECISION=0.10000000000000001,
           VALE_CALC=6075.571558515,
           VALE_REFE=5700.8599999999997,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC1,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N6180',),
           )

#
# ANGLE POLAIRE = 75.9
#

TEST_TABLE(PRECISION=0.050000000000000003,
           VALE_CALC=6067.3673035177,
           VALE_REFE=5782.6400000000003,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC1,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N6835',),
           )

#
# ANGLE POLAIRE = 90.0
#

TEST_TABLE(PRECISION=0.059999999999999998,
           VALE_CALC=6238.7913515026,
           VALE_REFE=5889.04,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC1,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N6962',),
           )

#
# 2IEME COURONNE
#
# ANGLE POLAIRE = 0
#

TEST_TABLE(PRECISION=0.14999999999999999,
           VALE_CALC=8825.5962557986,
           VALE_REFE=7686.4200000000001,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC2,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N2613',),
           )

#
# ANGLE POLAIRE = 14.1
#

TEST_TABLE(PRECISION=7.0000000000000001E-3,
           VALE_CALC=6714.0788765147,
           VALE_REFE=6676.2600000000002,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC2,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N3203',),
           )

#
# ANGLE POLAIRE = 30.9
#

TEST_TABLE(PRECISION=0.050000000000000003,
           VALE_CALC=6055.1019080845,
           VALE_REFE=5777.9799999999996,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC2,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N4066',),
           )

#
# ANGLE POLAIRE = 45.0
#

TEST_TABLE(PRECISION=0.050000000000000003,
           VALE_CALC=5854.8767118486,
           VALE_REFE=5598.9200000000001,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC2,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N5548',),
           )

#
# ANGLE POLAIRE = 59.1
#

TEST_TABLE(PRECISION=0.029999999999999999,
           VALE_CALC=5826.8515944466,
           VALE_REFE=5700.8599999999997,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC2,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N6180',),
           )

#
# ANGLE POLAIRE = 75.9
#

TEST_TABLE(PRECISION=0.10000000000000001,
           VALE_CALC=5854.0618962104,
           VALE_REFE=5782.6400000000003,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC2,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N6835',),
           )

#
# ANGLE POLAIRE = 90.0
#

TEST_TABLE(PRECISION=1.E-2,
           VALE_CALC=5867.9833389426,
           VALE_REFE=5889.04,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC2,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N6962',),
           )

#
# 3IEME COURONNE
#
# ANGLE POLAIRE = 0
#

TEST_TABLE(PRECISION=0.14999999999999999,
           VALE_CALC=8767.6331424506,
           VALE_REFE=7686.4200000000001,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC3,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N2613',),
           )

#
# ANGLE POLAIRE = 14.1
#

TEST_TABLE(PRECISION=7.0000000000000001E-3,
           VALE_CALC=6720.1134250161,
           VALE_REFE=6676.2600000000002,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC3,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N3203',),
           )

#
# ANGLE POLAIRE = 30.9
#

TEST_TABLE(PRECISION=0.050000000000000003,
           VALE_CALC=6035.2940542313,
           VALE_REFE=5777.9799999999996,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC3,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N4066',),
           )

#
# ANGLE POLAIRE = 45.0
#

TEST_TABLE(PRECISION=0.050000000000000003,
           VALE_CALC=5849.1305151527,
           VALE_REFE=5598.9200000000001,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC3,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N5548',),
           )

#
# ANGLE POLAIRE = 59.1
#

TEST_TABLE(PRECISION=0.029999999999999999,
           VALE_CALC=5848.615386273,
           VALE_REFE=5700.8599999999997,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC3,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N6180',),
           )

#
# ANGLE POLAIRE = 75.9
#

TEST_TABLE(PRECISION=1.2E-2,
           VALE_CALC=5846.4969573095,
           VALE_REFE=5782.6400000000003,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC3,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N6835',),
           )

#
# ANGLE POLAIRE = 90.0
#

TEST_TABLE(PRECISION=7.0000000000000001E-3,
           VALE_CALC=5927.2928418073,
           VALE_REFE=5889.04,
           REFERENCE='NON_DEFINI',
           NOM_PARA='G',
           TABLE=GLOC3,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N6962',),
           )

#
# TEST DE NON REGRESSION DE LA VALEUR DE G
#

TEST_TABLE(
           VALE_CALC=171.02607619424,
           NOM_PARA='G',
           TABLE=G0_C1,)

TEST_TABLE(
           VALE_CALC=165.43078297911,           
           NOM_PARA='G',
           TABLE=G0_C2,)

TEST_TABLE(
           VALE_CALC=165.43184265719,
           NOM_PARA='G',
           TABLE=G0_C3,)

FIN( )
#
