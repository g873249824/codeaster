# MODIF  DATE 08/02/2010   AUTEUR HAELEWYN J.HAELEWYN 
# TITRE THERMO-HYDRATATION D'UN CYLINDRE DE BETON 3D 3D_DIAG HEXA8 PENTA6 TETRA4
# tpnl301a.para = tps_job 600 mem_job 100Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2010  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
# CAS TEST TPNL301A
# RESPONSABLE HAELEWYN J.HAELEWYN
DEBUT(CODE=_F(NOM='TPNL301A',
              NIV_PUB_WEB='INTERNET',),
      DEBUG=_F(SDVERI='OUI',),);

MAILTH=LIRE_MAILLAGE(FORMAT='MED',
                     INFO=2,);

MODELETH=AFFE_MODELE(MAILLAGE=MAILTH,
                     AFFE=_F(TOUT='OUI',
                             PHENOMENE='THERMIQUE',
                             MODELISATION='3D',),);

MODDIAG=AFFE_MODELE(MAILLAGE=MAILTH,
                    AFFE=_F(TOUT='OUI',
                            PHENOMENE='THERMIQUE',
                            MODELISATION='3D_DIAG',),);

#------------------------------------------------------------------
# Definition des constantes materiaux
#------------------------------------------------------------------
# definition des teneurs en eau dans le beton [litre/m3]
# Le beton
# CONDUCTION EN KJ/H/M/K

COND=DEFI_FONCTION(NOM_PARA='TEMP',VALE=(0.,6.,
                         300.,6.,
                         ),PROL_DROITE='LINEAIRE',PROL_GAUCHE='LINEAIRE',);

# DEFINITION DE L'AFFINITE FONCTION DU DEGRE D'HYDRATATION

AA = FORMULE(VALE=
         '1586000*HYDR*HYDR*HYDR*HYDR*HYDR-5224000*HYDR*HYDR*HYDR*HYDR+6432000*HYDR*HYDR*HYDR-3530500*HYDR*HYDR+730000*HYDR+6510',
             NOM_PARA='HYDR',);

LL=DEFI_LIST_REEL(DEBUT=0.0,
                  INTERVALLE=_F(JUSQU_A=1.0,
                                PAS=0.01,),);

AFF=CALC_FONC_INTERP(FONCTION=AA,
                     LIST_PARA=LL,
                     NOM_RESU='AFF',
                     NOM_PARA='HYDR',
                     PROL_DROITE='CONSTANT',
                     PROL_GAUCHE='EXCLU',);

# ENTHALPIE EN KJ/H/M

ENTH=DEFI_FONCTION(NOM_PARA='TEMP',VALE=(0.,0.,
                         10.0,24000.0,
                         ),PROL_DROITE='LINEAIRE',PROL_GAUCHE='LINEAIRE',);

BETON=DEFI_MATERIAU(THER_HYDR=_F(LAMBDA=COND,
                                 BETA=ENTH,
                                 AFFINITE=AFF,
                                 CHALHYDR=1.4904e5,
                                 QSR_K=4700.0,),);

# -------------------------------------------------
#   Definition des temps caracteristiques
# ------------------------------------------------
#temps 1 jour
tps_1j = 24.0;


#temps 5 jours
tps_5j = (5.0 * tps_1j);


#temps 1 an
tps_1an = (365.25 * tps_1j);

tps_10an = (10 * tps_1an);


#temps 1 mois
tps_1m = (tps_1an / 12.0);


#temps 10 mois
tps_10m = (10.0 * tps_1m);

t49h = 49;

t730h = 730;


# -------------------------------------------------
#   Definition des listes d'instants
# ------------------------------------------------

LINIT=DEFI_LIST_REEL(DEBUT=-10.0,
                     INTERVALLE=_F(JUSQU_A=0.0,
                                   NOMBRE=2,),);

LINST=DEFI_LIST_REEL(DEBUT=-1.0,
                     INTERVALLE=(_F(JUSQU_A=0.0,
                                    NOMBRE=1,),
                                 _F(JUSQU_A=t49h,
                                    NOMBRE=49,),
                                 _F(JUSQU_A=t730h,
                                    NOMBRE=681,),),);

# ---------------------------------------------------------------------------------
#   Calcul Hydrique / Sechage
# ---------------------------------------------------------------------------------
#Champ de temperature

CHMATTH=AFFE_MATERIAU(MAILLAGE=MAILTH,
                      AFFE=_F(TOUT='OUI',
                              MATER=BETON,),
                      AFFE_VARC=_F(TOUT='OUI',
                                   NOM_VARC='TEMP',
                                   VALE_REF=15.0,),);

TEMP_INT=DEFI_FONCTION(NOM_PARA='INST',VALE=(-1000.0,40.0,
                             tps_10an,40.0,
                             ),PROL_DROITE='CONSTANT',PROL_GAUCHE='CONSTANT',);

TEMP_EXT=DEFI_FONCTION(NOM_PARA='INST',VALE=(-1000.0,15.0,
                             tps_10an,15.0,
                             ),PROL_DROITE='CONSTANT',PROL_GAUCHE='CONSTANT',);

CL_THER=AFFE_CHAR_THER_F(MODELE=MODELETH,
                         TEMP_IMPO=(_F(GROUP_NO='SEXTERI',
                                       TEMP=TEMP_EXT,),
                                    _F(GROUP_NO='SINTERI',
                                       TEMP=TEMP_INT,),),);

CHARDIAG=AFFE_CHAR_THER_F(MODELE=MODDIAG,
                          TEMP_IMPO=(_F(GROUP_NO='SEXTERI',
                                        TEMP=TEMP_EXT,),
                                     _F(GROUP_NO='SINTERI',
                                        TEMP=TEMP_INT,),),);
Ti = 40.0;

Te = 15.0;

Re = 21.0;

Ri = 20.0;


line=DEFI_MATERIAU(THER=_F(LAMBDA=6.0,
                           RHO_CP=2400.0,),);

matline=AFFE_MATERIAU(MAILLAGE=MAILTH,
                      AFFE=_F(TOUT='OUI',
                              MATER=line,),);

THINI=THER_NON_LINE(MODELE=MODELETH,
                    CHAM_MATER=CHMATTH,
                    EXCIT=_F(CHARGE=CL_THER,),
                    INCREMENT=_F(LIST_INST=LINIT,),
                    ETAT_INIT=_F(STATIONNAIRE='OUI',),);

TINIDIAG=THER_NON_LINE(MODELE=MODDIAG,
                       CHAM_MATER=CHMATTH,
                       EXCIT=_F(CHARGE=CHARDIAG,),
                       INCREMENT=_F(LIST_INST=LINIT,),
                       ETAT_INIT=_F(STATIONNAIRE='OUI',),);

RESUTHER=THER_NON_LINE(MODELE=MODELETH,
                       CHAM_MATER=CHMATTH,
                       COMP_THER_NL=_F(RELATION='THER_HYDR',),
                       EXCIT=_F(CHARGE=CL_THER,),
                       INCREMENT=_F(LIST_INST=LINST,),
                       ETAT_INIT=_F(EVOL_THER=THINI,),);

RESUDIAG=THER_NON_LINE(MODELE=MODDIAG,
                       CHAM_MATER=CHMATTH,
                       COMP_THER_NL=_F(RELATION='THER_HYDR',),
                       EXCIT=_F(CHARGE=CHARDIAG,),
                       INCREMENT=_F(LIST_INST=LINST,),
                       ETAT_INIT=_F(EVOL_THER=THINI,),);

TT=POST_RELEVE_T(ACTION=_F(OPERATION='EXTRACTION',
                           INTITULE='TT',
                           RESULTAT=RESUTHER,
                           NOM_CHAM='TEMP',
                           GROUP_NO='X205',
                           TOUT_CMP='OUI',),);

TTDIAG=POST_RELEVE_T(ACTION=_F(OPERATION='EXTRACTION',
                               INTITULE='TTDIAG',
                               RESULTAT=RESUDIAG,
                               NOM_CHAM='TEMP',
                               GROUP_NO='X205',
                               TOUT_CMP='OUI',),);

TEST_TABLE(TABLE=TT,
           TYPE_TEST='MAX',
           NOM_PARA='TEMP',
           VALE=48.7557,
           PRECISION=0.02,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=TTDIAG,
           TYPE_TEST='MAX',
           NOM_PARA='TEMP',
           VALE=48.7557,
           PRECISION=0.02,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=TT,
           TYPE_TEST='MAX',
           NOM_PARA='TEMP',
           VALE=49.6968351727,
           REFERENCE='NON_REGRESSION',
           VERSION='10.1.6',);

TEST_TABLE(TABLE=TTDIAG,
           TYPE_TEST='MAX',
           NOM_PARA='TEMP',
           VALE=49.5968112321,
           REFERENCE='NON_REGRESSION',
           VERSION='10.1.6',);

TM1=CREA_CHAMP(TYPE_CHAM='NOEU_TEMP_R',
               OPERATION='EXTR',
               RESULTAT=THINI,
               NOM_CHAM='TEMP',
               INST=0.0,);

TM1D=CREA_CHAMP(TYPE_CHAM='NOEU_TEMP_R',
                OPERATION='EXTR',
                RESULTAT=TINIDIAG,
                NOM_CHAM='TEMP',
                INST=0.0,);

T5j=CREA_CHAMP(TYPE_CHAM='NOEU_TEMP_R',
               OPERATION='EXTR',
               RESULTAT=RESUTHER,
               NOM_CHAM='TEMP',
               INST=t49h,);

T5JD=CREA_CHAMP(TYPE_CHAM='NOEU_TEMP_R',
                OPERATION='EXTR',
                RESULTAT=RESUDIAG,
                NOM_CHAM='TEMP',
                INST=t49h,);

T1m=CREA_CHAMP(TYPE_CHAM='NOEU_TEMP_R',
               OPERATION='EXTR',
               RESULTAT=RESUTHER,
               NOM_CHAM='TEMP',
               INST=t730h,);

T1MD=CREA_CHAMP(TYPE_CHAM='NOEU_TEMP_R',
                OPERATION='EXTR',
                RESULTAT=RESUDIAG,
                NOM_CHAM='TEMP',
                INST=t730h,);

TEST_RESU(CHAM_NO=(_F(CHAM_GD=TM1,
                      GROUP_NO='X205',
                      NOM_CMP='TEMP',
                      VALE=27.3475,
                      PRECISION=0.01,
                      REFERENCE='ANALYTIQUE',),
                   _F(CHAM_GD=TM1D,
                      GROUP_NO='X205',
                      NOM_CMP='TEMP',
                      VALE=27.3475,
                      PRECISION=0.01,
                      REFERENCE='ANALYTIQUE',),
                   _F(CHAM_GD=T5j,
                      GROUP_NO='X205',
                      NOM_CMP='TEMP',
                      VALE=48.5973,
                      PRECISION=0.015,
                      REFERENCE='ANALYTIQUE',),
                   _F(CHAM_GD=T5JD,
                      GROUP_NO='X205',
                      NOM_CMP='TEMP',
                      VALE=48.5973,
                      PRECISION=0.01,
                      REFERENCE='ANALYTIQUE',),
                   _F(CHAM_GD=T1m,
                      GROUP_NO='X205',
                      NOM_CMP='TEMP',
                      VALE=27.7087,
                      PRECISION=0.01,
                      REFERENCE='ANALYTIQUE',),
                   _F(CHAM_GD=T1MD,
                      GROUP_NO='X205',
                      NOM_CMP='TEMP',
                      VALE=27.7087,
                      PRECISION=0.01,
                      REFERENCE='ANALYTIQUE',),),);

TEST_RESU(CHAM_NO=(_F(CHAM_GD=TM1,
                      GROUP_NO='X205',
                      NOM_CMP='TEMP',
                      VALE=27.5,
                      REFERENCE='NON_REGRESSION',
                      VERSION='10.1.6',),
                   _F(CHAM_GD=TM1D,
                      GROUP_NO='X205',
                      NOM_CMP='TEMP',
                      VALE=27.5,
                      REFERENCE='NON_REGRESSION',
                      VERSION='10.1.6',),
                   _F(CHAM_GD=T5j,
                      GROUP_NO='X205',
                      NOM_CMP='TEMP',
                      VALE=49.2726737098,
                      REFERENCE='NON_REGRESSION',
                      VERSION='10.1.6',),
                   _F(CHAM_GD=T5JD,
                      GROUP_NO='X205',
                      NOM_CMP='TEMP',
                      VALE=49.0544082397,
                      REFERENCE='NON_REGRESSION',
                      VERSION='10.1.6',),
                   _F(CHAM_GD=T1m,
                      GROUP_NO='X205',
                      NOM_CMP='TEMP',
                      VALE=27.8682707195,
                      REFERENCE='NON_REGRESSION',
                      VERSION='10.1.6',),
                   _F(CHAM_GD=T1MD,
                      GROUP_NO='X205',
                      NOM_CMP='TEMP',
                      VALE=27.8685155201,
                      REFERENCE='NON_REGRESSION',
                      VERSION='10.1.6',),),);

RESUTHER=CALC_NO(reuse =RESUTHER,
                 RESULTAT=RESUTHER,
                 OPTION='HYDR_NOEU_ELGA',);

RESUDIAG=CALC_NO(reuse =RESUDIAG,
                 RESULTAT=RESUDIAG,
                 OPTION='HYDR_NOEU_ELGA',);

H49h=CREA_CHAMP(TYPE_CHAM='NOEU_HYDR_R',
                OPERATION='EXTR',
                RESULTAT=RESUTHER,
                NOM_CHAM='HYDR_NOEU_ELGA',
                INST=t49h,);

H49D=CREA_CHAMP(TYPE_CHAM='NOEU_HYDR_R',
                OPERATION='EXTR',
                RESULTAT=RESUDIAG,
                NOM_CHAM='HYDR_NOEU_ELGA',
                INST=t49h,);

H730h=CREA_CHAMP(TYPE_CHAM='NOEU_HYDR_R',
                 OPERATION='EXTR',
                 RESULTAT=RESUTHER,
                 NOM_CHAM='HYDR_NOEU_ELGA',
                 INST=t730h,);

H730D=CREA_CHAMP(TYPE_CHAM='NOEU_HYDR_R',
                 OPERATION='EXTR',
                 RESULTAT=RESUDIAG,
                 NOM_CHAM='HYDR_NOEU_ELGA',
                 INST=t730h,);

TEST_RESU(CHAM_NO=(_F(CHAM_GD=H49h,
                      GROUP_NO='X205',
                      NOM_CMP='HYDR',
                      VALE=0.4738,
                      PRECISION=0.035,
                      REFERENCE='ANALYTIQUE',),
                   _F(CHAM_GD=H49D,
                      GROUP_NO='X205',
                      NOM_CMP='HYDR',
                      VALE=0.4738,
                      PRECISION=0.04,
                      REFERENCE='ANALYTIQUE',),
                   _F(CHAM_GD=H730h,
                      GROUP_NO='X205',
                      NOM_CMP='HYDR',
                      VALE=0.956,
                      PRECISION=0.01,
                      REFERENCE='ANALYTIQUE',),
                   _F(CHAM_GD=H730D,
                      GROUP_NO='X205',
                      NOM_CMP='HYDR',
                      VALE=0.956,
                      PRECISION=0.01,
                      REFERENCE='ANALYTIQUE',),),);

TEST_RESU(CHAM_NO=(_F(CHAM_GD=H49h,
                      GROUP_NO='X205',
                      NOM_CMP='HYDR',
                      VALE=0.458654842567,
                      REFERENCE='NON_REGRESSION',
                      VERSION='10.1.6',),
                   _F(CHAM_GD=H49D,
                      GROUP_NO='X205',
                      NOM_CMP='HYDR',
                      VALE=0.456749878232,
                      REFERENCE='NON_REGRESSION',
                      VERSION='10.1.6',),
                   _F(CHAM_GD=H730D,
                      GROUP_NO='X205',
                      NOM_CMP='HYDR',
                      VALE=0.954885120882,
                      REFERENCE='NON_REGRESSION',
                      VERSION='10.1.6',),
                   _F(CHAM_GD=H730h,
                      GROUP_NO='X205',
                      NOM_CMP='HYDR',
                      VALE=0.954541675076,
                      REFERENCE='NON_REGRESSION',
                      VERSION='10.1.6',),),);

FIN();
