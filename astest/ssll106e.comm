# MODIF  DATE 11/06/2012   AUTEUR PELLET J.PELLET 
# RESPONSABLE PROIX J.M.PROIX
# TITRE TUBE DROIT SOUMIS A PLUSIEURS CHARGEMENTS - ELEMENT TUYAU 4 NOEUDS AVEC MECA_STATIQUE
# ssll106e.para = tps_job 60 mem_job 250Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#


DEBUT(CODE=_F(NOM='SSLL106E', NIV_PUB_WEB='INTERNET', VISU_EFICAS='NON'), DEBUG=_F(SDVERI='OUI'))

M1=LIRE_MAILLAGE();

DEFI_GROUP(reuse =M1,
              MAILLAGE=M1,
              CREA_GROUP_MA=_F(NOM='TOUT',
                               TOUT='OUI',),);

MA=CREA_MAILLAGE(MAILLAGE=M1,
                 MODI_MAILLE=_F(TOUT='OUI',
                                OPTION='SEG3_4',),);

MO=AFFE_MODELE(MAILLAGE=MA,
               AFFE=_F(TOUT='OUI',
                       PHENOMENE='MECANIQUE',
                       MODELISATION='TUYAU_3M',),);
#------CARACTERISTIQUES ELEMENTAIRES----------------------
#


CAREL=AFFE_CARA_ELEM(MODELE=MO,
                   #  INFO=2,
                     POUTRE=_F(GROUP_MA='TOUT',
                               SECTION='CERCLE',
                               CARA=('R','EP',),
                               VALE=(0.04,0.008,),
                               MODI_METRIQUE='OUI',),
                     ORIENTATION=_F(GROUP_NO='A',
                                    CARA='GENE_TUYAU',
                                    VALE=(0.0,0.0,-1.0,),),);
#-------CARACTERISTIQUES DU MATERIAUX----------------------
#




MAT=DEFI_MATERIAU(ELAS=_F(E=2.E11,
                          NU=0.3,
                          RHO=7800.0,
                          ALPHA=1.0000000000000001E-05,),);

CHMAT=AFFE_MATERIAU(MAILLAGE=MA,
                    AFFE=_F(TOUT='OUI',
                            MATER=MAT,),);

CHAR0=AFFE_CHAR_MECA(MODELE=MO,
                     DDL_IMPO=_F(GROUP_NO='A',
                                 DX=0.0,
                                 DY=0.0,
                                 DZ=0.0,
                                 DRX=0.0,
                                 DRY=0.0,
                                 DRZ=0.0,),);
# FX LOCAL
#


CHAR1=AFFE_CHAR_MECA(MODELE=MO,
                     FORCE_NODALE=_F(GROUP_NO='B',
                                     FX=400.0,
                                     FY=300.0,),);


# FY LOCAL
#


CHAR2=AFFE_CHAR_MECA(MODELE=MO,
                     FORCE_NODALE=_F(GROUP_NO='B',
                                     FX=-300.0,
                                     FY=400.0,),);


# FZ LOCAL
#


CHAR3=AFFE_CHAR_MECA(MODELE=MO,
                     FORCE_NODALE=_F(GROUP_NO='B',
                                     FZ=500.0,),);

# MX LOCAL
#


CHAR4=AFFE_CHAR_MECA(MODELE=MO,
                     FORCE_NODALE=_F(GROUP_NO='B',
                                     MX=400.0,
                                     MY=300.0,),);
# MY LOCAL
#


CHAR5=AFFE_CHAR_MECA(MODELE=MO,
                     FORCE_NODALE=_F(GROUP_NO='B',
                                     MX=-300.0,
                                     MY=400.0,),);
# MZ LOCAL
#


CHAR6=AFFE_CHAR_MECA(MODELE=MO,
                     FORCE_NODALE=_F(GROUP_NO='B',
                                     MZ=500.0,),);
# PRESSION
#


CHAR7=AFFE_CHAR_MECA(MODELE=MO,
                     FORCE_TUYAU=_F(TOUT='OUI',
                                    PRES=1.E7,),);
# GRAVITE
#


CHAR8=AFFE_CHAR_MECA(MODELE=MO,
                     FORCE_NODALE=_F(GROUP_NO='B',
                                     FX=400.0,
                                     FY=300.0,),
                     PESANTEUR=_F(GRAVITE=10.0,
                                  DIRECTION=(0.0,0.0,-1.0,),),);
# FORCE LINEIQUE
#


CHAR9=AFFE_CHAR_MECA(MODELE=MO,
                     FORCE_NODALE=_F(GROUP_NO='B',
                                     FX=400.0,
                                     FY=300.0,),
                     FORCE_POUTRE=_F(GROUP_MA='TOUT',
                                     FZ=-141.14599999999999,),);
# FORCE LINEIQUE FONCTION
#


F1=DEFI_FONCTION(NOM_PARA='X',
                 VALE=(-0.10000000000000001,-141.14599999999999,10.1,-141.14599999999999,),
                 PROL_DROITE='CONSTANT',
                 PROL_GAUCHE='CONSTANT',);

F2=DEFI_FONCTION(NOM_PARA='X',
                 VALE=(-0.10000000000000001,400.0,10.1,400.0,),
                 PROL_DROITE='CONSTANT',
                 PROL_GAUCHE='CONSTANT',);

F3=DEFI_FONCTION(NOM_PARA='X',
                 VALE=(-0.10000000000000001,300.0,10.1,300.0,),
                 PROL_DROITE='CONSTANT',
                 PROL_GAUCHE='CONSTANT',);

CHAR9B=AFFE_CHAR_MECA_F(MODELE=MO,
                        FORCE_NODALE=_F(GROUP_NO='B',
                                        FX=F2,
                                        FY=F3,),
                        FORCE_POUTRE=_F(GROUP_MA='TOUT',
                                        FZ=F1,),);

RESU=MACRO_ELAS_MULT(MODELE=MO,
                     CHAM_MATER=CHMAT,
                     CARA_ELEM=CAREL,
                     CHAR_MECA_GLOBAL=CHAR0,
                     CAS_CHARGE=(_F(NOM_CAS='CHARGE NUMERO91',
                                    CHAR_MECA=CHAR9B,
                                    SOUS_TITRE='LINEIQUE',),
                                 _F(NOM_CAS='CHARGE NUMERO 1 ',
                                    CHAR_MECA=CHAR1,
                                    SOUS_TITRE='FX LOCAL',),
                                 _F(NOM_CAS='CHARGE NUMERO 2',
                                    CHAR_MECA=CHAR2,
                                    SOUS_TITRE='FY LOCAL ',),
                                 _F(NOM_CAS='CHARGE NUMERO 3',
                                    CHAR_MECA=CHAR3,
                                    SOUS_TITRE='FZ LOCAL ',),
                                 _F(NOM_CAS='CHARGE NUMERO 4 ',
                                    CHAR_MECA=CHAR4,
                                    SOUS_TITRE='MX LOCAL',),
                                 _F(NOM_CAS='CHARGE NUMERO 5',
                                    CHAR_MECA=CHAR5,
                                    SOUS_TITRE='MY LOCAL ',),
                                 _F(NOM_CAS='CHARGE NUMERO 6',
                                    CHAR_MECA=CHAR6,
                                    SOUS_TITRE='MZ LOCAL ',),
                                 _F(NOM_CAS='CHARGE NUMERO 7',
                                    CHAR_MECA=CHAR7,
                                    SOUS_TITRE='PRESSION',),
                                 _F(NOM_CAS='CHARGE NUMERO 8',
                                    CHAR_MECA=CHAR8,
                                    SOUS_TITRE='GRAVITE',),
                                 _F(NOM_CAS='CHARGE NUMERO 9',
                                    CHAR_MECA=CHAR9,
                                    SOUS_TITRE='LINEIQUE',),),);

RESU=CALC_CHAMP(reuse=RESU,RESULTAT=RESU,CONTRAINTE=('EFGE_ELNO'),DEFORMATION=('EPSI_ELGA','DEGE_ELNO'))


RESU=CALC_CHAMP(reuse =RESU,
                RESULTAT=RESU,
                FORCE=('FORC_NODA'),);

# Validation de POST_CHAMP + NOM_CAS :
POST1=POST_CHAMP(RESULTAT=RESU, NOM_CAS='CHARGE NUMERO 2',
                    EXTR_TUYAU=_F(NOM_CHAM='SIEF_ELGA',  NUME_COUCHE=1, NIVE_COUCHE='INF', ANGLE=0,),);
TEST_RESU( RESU=_F(RESULTAT=POST1, NOM_CAS='CHARGE NUMERO 2 ', NOM_CHAM='SIEF_ELGA',
                   NOM_CMP='SIXY',  MAILLE='M1', POINT=2, VALE=-2.834704935487E+05, PRECISION=1.E-8, REFERENCE='NON_REGRESSION',))


TEST_RESU(RESU=(_F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 1 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='B',
                   VALE=5.5262100000000004E-06,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 1 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='B',
                   VALE=4.1446600000000001E-06,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 1 ',
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP='SIXX',
                   MAILLE='M1',
                   POINT=1,
                   SOUS_POINT=1,
                   VALE=2.76311E5,
                   PRECISION=0.02,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 1 ',
                   NOM_CHAM='EPSI_ELGA',
                   NOM_CMP='EPXX',
                   MAILLE='M1',
                   POINT=1,
                   SOUS_POINT=1,
                   VALE=1.3815499999999999E-06,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 1 ',
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP='N',
                   MAILLE='M1',
                   POINT=1,
                   VALE=500.0,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 2 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='B',
                   VALE=-0.052650700000000002,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 2 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='B',
                   VALE=0.070200899999999997,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 2 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRZ',
                   GROUP_NO='B',
                   VALE=0.026325299999999999,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 3 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   GROUP_NO='B',
                   VALE=0.087751099999999999,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 3 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRX',
                   GROUP_NO='B',
                   VALE=0.015795199999999999,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 3 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRY',
                   GROUP_NO='B',
                   VALE=-0.021060200000000001,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 4 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRX',
                   GROUP_NO='B',
                   VALE=0.01095134,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 4 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRY',
                   GROUP_NO='B',
                   VALE=8.2135000000000003E-3,
                   PRECISION=0.029999999999999999,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 4 ',
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP='SIXY',
                   MAILLE='M1',
                   POINT=1,
                   SOUS_POINT=1,
                   VALE=-6.750000E6,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 4 ',
                   NOM_CHAM='EPSI_ELGA',
                   NOM_CMP='EPXY',
                   MAILLE='M1',
                   POINT=1,
                   SOUS_POINT=1,
                   VALE=-8.7700000000000004E-05,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 4 ',
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP='SIXY',
                   MAILLE='M1',
                   POINT=3,
                   SOUS_POINT=231,
                   VALE=-8.420000E6,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 4 ',
                   NOM_CHAM='EPSI_ELGA',
                   NOM_CMP='EPXY',
                   MAILLE='M1',
                   POINT=3,
                   SOUS_POINT=231,
                   VALE=-1.0946E-4,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 4 ',
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP='MT',
                   MAILLE='M1',
                   POINT=1,
                   VALE=500.0,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 5 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   GROUP_NO='B',
                   VALE=-0.026325299999999999,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 5 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRX',
                   GROUP_NO='B',
                   VALE=-6.3180800000000002E-3,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 5 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRY',
                   GROUP_NO='B',
                   VALE=8.4241100000000003E-3,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 5 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='WI1',
                   GROUP_NO='B',
                   VALE=4.094E-07,
                   PRECISION=0.02,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 5 ',
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP='SIXX',
                   MAILLE='M1',
                   POINT=3,
                   SOUS_POINT=17,
                   VALE=1.3482400E7,
                   PRECISION=0.02,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 5 ',
                   NOM_CHAM='EPSI_ELGA',
                   NOM_CMP='EPXX',
                   MAILLE='M1',
                   POINT=3,
                   SOUS_POINT=17,
                   VALE=6.7399999999999998E-05,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 6 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='B',
                   VALE=-0.015795199999999999,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 6 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='B',
                   VALE=0.021060200000000001,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 6 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRZ',
                   GROUP_NO='B',
                   VALE=0.010530100000000001,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 6 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='WO1',
                   GROUP_NO='B',
                   VALE=-4.094E-07,
                   PRECISION=0.02,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 6 ',
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP='SIXX',
                   MAILLE='M1',
                   POINT=3,
                   SOUS_POINT=9,
                   VALE=1.3482400E7,
                   PRECISION=0.02,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 6 ',
                   NOM_CHAM='EPSI_ELGA',
                   NOM_CMP='EPXX',
                   MAILLE='M1',
                   POINT=3,
                   SOUS_POINT=9,
                   VALE=6.7399999999999998E-05,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 7 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='WO',
                   GROUP_NO='B',
                   VALE=7.3757999999999998E-06,
                   PRECISION=0.040000000000000001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 7 ',
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP='SIYY',
                   MAILLE='M1',
                   POINT=1,
                   SOUS_POINT=1,
                   VALE=4.5555600E7,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 7 ',
                   NOM_CHAM='EPSI_ELGA',
                   NOM_CMP='EPYY',
                   MAILLE='M1',
                   POINT=1,
                   SOUS_POINT=1,
                   VALE=2.2777799999999999E-4,
                   PRECISION=0.02,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 7 ',
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP='SIYY',
                   MAILLE='M1',
                   POINT=3,
                   SOUS_POINT=231,
                   VALE=3.5555600E7,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 7 ',
                   NOM_CHAM='EPSI_ELGA',
                   NOM_CMP='EPYY',
                   MAILLE='M1',
                   POINT=3,
                   SOUS_POINT=231,
                   VALE=1.7777799999999999E-4,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 8 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='B',
                   VALE=5.5262100000000004E-06,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 8 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='B',
                   VALE=4.1446600000000001E-06,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 8 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   GROUP_NO='B',
                   VALE=-0.046460000000000001,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 8 ',
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP='N',
                   MAILLE='M1',
                   POINT=1,
                   VALE=500.0,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 8 ',
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP='MFY',
                   MAILLE='M1',
                   POINT=1,
                   VALE=1764.3,
                   PRECISION=0.029999999999999999,
                   REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 9 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='B',
                   VALE=5.5262100000000004E-06,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 9 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='B',
                   VALE=4.1446600000000001E-06,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 9 ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   GROUP_NO='B',
                   VALE=-0.046460000000000001,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 9 ',
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP='N',
                   MAILLE='M1',
                   POINT=1,
                   VALE=500.0,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 9 ',
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP='MFY',
                   MAILLE='M1',
                   POINT=1,
                   VALE=1764.3,
                   PRECISION=0.029999999999999999,
                   REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO91',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='B',
                   VALE=5.5262100000000004E-06,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO91',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='B',
                   VALE=4.1446600000000001E-06,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO91',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   GROUP_NO='B',
                   VALE=-0.046460000000000001,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO91',
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP='N',
                   MAILLE='M1',
                   POINT=1,
                   VALE=500.0,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO91',
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP='MFY',
                   MAILLE='M1',
                   POINT=1,
                   VALE=1764.3,
                   PRECISION=0.029999999999999999,
                   REFERENCE='ANALYTIQUE',),),);

# Solutions analytiques pour les deformations generalisees de poutre DEGE_ELNO
L=5.0
E=2.E11
Nu=0.3
G=E/2/(1.0+Nu)
REXT=0.04
EP=0.008
import math
PI=math.pi
IF=PI*(REXT**4-(REXT-EP)**4)/4
JX=2.0*IF
SU=PI*(REXT**2-(REXT-EP)**2)
print 'SU, IF =',SU,IF

# Solution analytique chargement 1 Fx local = 500
EPXX=500./E/SU
# Solution analytique chargement 2 Fy local = 500
GAXY=500./G/SU
KZF=500*L/E/IF
# Solution analytique chargement 3 Fz local = 500
GAXZ=500./G/SU
KYF=-500*L/E/IF
# Solution analytique chargement 4 Mx local = 500
GAT=500/G/JX
# Solution analytique chargement 2 My local = 500
KYM=500/E/IF
# Solution analytique chargement 3 Mz local = 500
KZM=500/E/IF

TEST_RESU(RESU=(_F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 1 ',
                   NOM_CHAM='DEGE_ELNO',
                   NOM_CMP='EPXX',
                   MAILLE='M1',
                   NOEUD='N1',
                   VALE=EPXX,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 2 ',
                   NOM_CHAM='DEGE_ELNO',
                   MAILLE='M1',
                   NOEUD='N1',
                   NOM_CMP='GAXY',
                   VALE=GAXY,
                   PRECISION=1.1E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 3 ',
                   NOM_CHAM='DEGE_ELNO',
                   MAILLE='M1',
                   NOEUD='N1',
                   NOM_CMP='GAXZ',
                   VALE=GAXZ,
                   PRECISION=1.1E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 2 ',
                   NOM_CHAM='DEGE_ELNO',
                   MAILLE='M1',
                   NOEUD='N1',
                   NOM_CMP='KZ',
                   VALE=KZF,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 3 ',
                   NOM_CHAM='DEGE_ELNO',
                   MAILLE='M1',
                   NOEUD='N1',
                   NOM_CMP='KY',
                   VALE=KYF,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
               _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 4 ',
                   NOM_CHAM='DEGE_ELNO',
                   NOM_CMP='GAT',
                   MAILLE='M1',
                   NOEUD='N1',
                   VALE=GAT,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 5 ',
                   NOM_CHAM='DEGE_ELNO',
                   MAILLE='M1',
                   NOEUD='N1',
                   NOM_CMP='KY',
                   VALE=KYM,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=RESU,
                   NOM_CAS='CHARGE NUMERO 6 ',
                   NOM_CHAM='DEGE_ELNO',
                   MAILLE='M1',
                   NOEUD='N1',
                   NOM_CMP='KZ',
                   VALE=KZM,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),),);




# DILATATION THERMIQUE
#


TEMP=CREA_CHAMP(TYPE_CHAM='NOEU_TEMP_R',
                OPERATION='AFFE',
                MAILLAGE=MA,
                AFFE=_F(TOUT='OUI',
                        NOM_CMP='TEMP',
                        VALE=200.0,),);

TEMP0=CREA_CHAMP(TYPE_CHAM='NOEU_TEMP_R',
                 OPERATION='AFFE',
                 MAILLAGE=MA,
                 AFFE=_F(TOUT='OUI',
                         NOM_CMP='TEMP',
                         VALE=0.0,),);

TEMPV=CREA_RESU(OPERATION='AFFE',
                TYPE_RESU='EVOL_THER',
                NOM_CHAM='TEMP',
                AFFE=(
                _F(CHAM_GD=TEMP,
                   INST=0.0,),
                _F(CHAM_GD=TEMP0,
                   INST=-1.0,),),);


E_DE_T=DEFI_FONCTION(NOM_PARA='TEMP',
                     VALE=(0.0,200000000000.0,100.0,200000000000.0,),
                     PROL_DROITE='CONSTANT',
                     PROL_GAUCHE='CONSTANT',);

NU_DE_T=DEFI_CONSTANTE(VALE=0.29999999999999999,);

AL_DE_T=DEFI_CONSTANTE(VALE=1.0000000000000001E-05,);

MAT2=DEFI_MATERIAU(ELAS_FO=_F(E=E_DE_T,
                              NU=NU_DE_T,
                              RHO=7800.0,
                              TEMP_DEF_ALPHA=0.0,
                              ALPHA=AL_DE_T,),);

CHMAT2=AFFE_MATERIAU(MAILLAGE=MA,
                     AFFE=_F(TOUT='OUI',
                             MATER=MAT2,),
                      AFFE_VARC=  _F(TOUT='OUI',EVOL=TEMPV,
                      NOM_VARC='TEMP',NOM_CHAM='TEMP',VALE_REF=0.0),)


L_INST=DEFI_LIST_REEL(DEBUT=-1.0,
                      INTERVALLE=_F(JUSQU_A=0.0,
                                    NOMBRE=1,),);

REST2=STAT_NON_LINE(MODELE=MO,
                    CHAM_MATER=CHMAT2,
                    CARA_ELEM=CAREL,
                    EXCIT=(_F(CHARGE=CHAR0,),),
                    COMP_INCR=_F(RELATION='ELAS',),
                    INCREMENT=_F(LIST_INST=L_INST,),);

CALC_CHAMP(reuse =REST2, RESULTAT=REST2,
              FORCE='FORC_NODA',
              );

TEST_RESU(RESU=(_F(RESULTAT=REST2,
                   INST=0.0,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='B',
                   VALE=8.0000000000000002E-3,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST2,
                   INST=0.0,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='B',
                   VALE=6.0000000000000001E-3,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST2,
                   INST=0.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DX',
                   GROUP_NO='B',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST2,
                   INST=0.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DY',
                   GROUP_NO='B',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST2,
                   INST=0.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DZ',
                   GROUP_NO='B',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST2,
                   INST=0.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DRX',
                   GROUP_NO='B',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST2,
                   INST=0.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DRY',
                   GROUP_NO='B',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST2,
                   INST=0.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DRZ',
                   GROUP_NO='B',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   REFERENCE='ANALYTIQUE',),),);


REST=MECA_STATIQUE(MODELE=MO,
                    CHAM_MATER=CHMAT2,
                    CARA_ELEM=CAREL,
                    EXCIT=(_F(CHARGE=CHAR0,),),
                    );

CALC_CHAMP(reuse=REST,RESULTAT=REST,CONTRAINTE=('EFGE_ELNO'),DEFORMATION=('EPSI_ELGA'))


CALC_CHAMP(reuse =REST, RESULTAT=REST,
             FORCE='FORC_NODA',);

TEST_RESU(RESU=(_F(RESULTAT=REST,
                   INST=0.0,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='B',
                   VALE=8.0000000000000002E-3,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST,
                   INST=0.0,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='B',
                   VALE=6.0000000000000001E-3,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST,
                   INST=0.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DX',
                   GROUP_NO='B',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST,
                   INST=0.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DY',
                   GROUP_NO='B',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST,
                   INST=0.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DZ',
                   GROUP_NO='B',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST,
                   INST=0.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DRX',
                   GROUP_NO='B',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST,
                   INST=0.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DRY',
                   GROUP_NO='B',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST,
                   INST=0.0,
                   NOM_CHAM='FORC_NODA',
                   NOM_CMP='DRZ',
                   GROUP_NO='B',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST,
                   INST=0.0,
                   NOM_CHAM='EPSI_ELGA',
                   NOM_CMP='EPXX',
                   MAILLE='M1',
                   POINT=1,
                   SOUS_POINT=120,
                   VALE=2.E-3,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=REST,
                   INST=0.0,
                   NOM_CHAM='EPSI_ELGA',
                   NOM_CMP='EPYY',
                   MAILLE='M1',
                   POINT=1,
                   SOUS_POINT=120,
                   VALE=2.E-3,
                   PRECISION=1.E-2,
                   REFERENCE='ANALYTIQUE',),),);

MASSIN=POST_ELEM(MASS_INER=_F(TOUT='OUI',),
                 MODELE=MO,
                 CHAM_MATER=CHMAT,
                 CARA_ELEM=CAREL,);

TEST_TABLE(TABLE=MASSIN,
           FILTRE=_F(NOM_PARA='LIEU',
                     VALE_K='MA',),
           NOM_PARA='MASSE',
           VALE=70.572699999999998,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=MASSIN,
           FILTRE=_F(NOM_PARA='LIEU',
                     VALE_K='MA',),
           NOM_PARA='CDG_X',
           VALE=2.0,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=MASSIN,
           FILTRE=_F(NOM_PARA='LIEU',
                     VALE_K='MA',),
           NOM_PARA='CDG_Y',
           VALE=1.5,
           REFERENCE='ANALYTIQUE',);

TEST_TABLE(TABLE=MASSIN,
           FILTRE=_F(NOM_PARA='LIEU',
                     VALE_K='MA',),
           NOM_PARA='CDG_Z',
           VALE=0.0,
           CRITERE='ABSOLU',
           REFERENCE='ANALYTIQUE',);


RIGI=CALC_MATR_ELEM(OPTION='RIGI_MECA',
                    MODELE=MO,
                    CHAM_MATER=CHMAT,
                    CARA_ELEM=CAREL,
                    CHARGE=CHAR0,);

NUM=NUME_DDL(MATR_RIGI=RIGI,);

MACRO_MATR_ASSE(MODELE=MO,
                CHAM_MATER=CHMAT,
                CARA_ELEM=CAREL,
                CHARGE=CHAR0,
                NUME_DDL=NUM,
                SOLVEUR=_F(METHODE='LDLT',),
                MATR_ASSE=(_F(MATRICE=CO('MATASSR1'),
                              OPTION='RIGI_MECA',),
                           _F(MATRICE=CO('MATASSM1'),
                              OPTION='MASS_MECA',),),);

MODES=MODE_ITER_SIMULT(MATR_A=MATASSR1,
                       MATR_B=MATASSM1,
                       CALC_FREQ=_F(OPTION='CENTRE',
                                    FREQ=1.0,
                                    NMAX_FREQ=25,),);

TEST_RESU(RESU=(_F(RESULTAT=MODES,
                   NUME_ORDRE=1,
                   PARA='FREQ',
                   VALE=2.9022899999999998,
                   CRITERE='RELATIF',
                   PRECISION=5.0000000000000001E-3,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=2,
                   PARA='FREQ',
                   VALE=2.9022899999999998,
                   CRITERE='RELATIF',
                   PRECISION=5.0000000000000001E-3,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=3,
                   PARA='FREQ',
                   VALE=18.18967,
                   CRITERE='RELATIF',
                   PRECISION=5.0000000000000001E-3,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=4,
                   PARA='FREQ',
                   VALE=18.18967,
                   CRITERE='RELATIF',
                   PRECISION=5.0000000000000001E-3,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=5,
                   PARA='FREQ',
                   VALE=50.993673000000001,
                   CRITERE='RELATIF',
                   PRECISION=5.0000000000000001E-3,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=6,
                   PARA='FREQ',
                   VALE=50.993673000000001,
                   CRITERE='RELATIF',
                   PRECISION=5.0000000000000001E-3,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=7,
                   PARA='FREQ',
                   VALE=99.817830000000001,
                   CRITERE='RELATIF',
                   PRECISION=8.9999999999999993E-3,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=8,
                   PARA='FREQ',
                   VALE=99.817830000000001,
                   CRITERE='RELATIF',
                   PRECISION=8.9999999999999993E-3,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=9,
                   PARA='FREQ',
                   VALE=157.01900000000001,
                   CRITERE='RELATIF',
                   PRECISION=5.0000000000000001E-3,
                   REFERENCE='ANALYTIQUE',),),);

FIN();
