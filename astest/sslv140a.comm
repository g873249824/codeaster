# TITRE CALCUL DE MODULES EFFECTIFS EN PYTHON
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================

DEBUT(CODE=_F(NOM='SSLV140A', NIV_PUB_WEB='INTERNET', VISU_EFICAS='NON'), DEBUG=_F(SDVERI='OUI'))

CUBER=LIRE_MAILLAGE();

MO=AFFE_MODELE(MAILLAGE=CUBER,
               AFFE=_F(TOUT='OUI',
                       PHENOMENE='MECANIQUE',
                       MODELISATION='3D',),);

U2=DEFI_FONCTION(NOM_PARA='Y',
                 VALE=(0.0,0.0,1.0,1.0,),
                 PROL_DROITE='LINEAIRE',
                 PROL_GAUCHE='LINEAIRE',);

U3=DEFI_CONSTANTE(VALE=0.0,);

CHARGY=AFFE_CHAR_MECA_F(MODELE=MO,
                       DDL_IMPO=(_F(NOEUD='NO3',
                                    DX=U3,
                                    DY=U3,
                                    DZ=U3,),
                                 _F(GROUP_NO='FACEXZ1',
                                    DY=U3,),
                                 _F(NOEUD='NO7',
                                    DX=U3,),
                                 _F(GROUP_NO='FACEXZ2',
                                    DY=U2,),),);

MAT1=DEFI_MATERIAU(ELAS=_F(E=200000.0,
                           NU=0.3,),);

MAT2=DEFI_MATERIAU(ELAS=_F(E=100000.0,
                           NU=0.3,),);

CHMAT=AFFE_MATERIAU(MAILLAGE=CUBER,
                    AFFE=(_F(GROUP_MA='MA1',
                             MATER=MAT1,),
                          _F(GROUP_MA='MA2',
                             MATER=MAT2,),),);

MESTY=MECA_STATIQUE(MODELE=MO,
                   CHAM_MATER=CHMAT,
                   EXCIT=_F(CHARGE=CHARGY,),);

MESTY=CALC_CHAMP(reuse =MESTY,
               RESULTAT=MESTY,);

CONTR=CREA_CHAMP(TYPE_CHAM='ELGA_SIEF_R',
                 OPERATION='EXTR',
                 RESULTAT=MESTY,
                 NOM_CHAM='SIEF_ELGA',);

CHAMELG=CALC_CHAM_ELEM(MODELE=MO,
                       OPTION='COOR_ELGA',);

INT_SIYY=POST_ELEM(MODELE=MO,
                   NUME_ORDRE=1,
                   RESULTAT=MESTY,
                   INTEGRALE=_F(NOM_CHAM='SIEF_ELGA',
                                NOM_CMP=('SIYY'),
                                TOUT='OUI'),)

IMPR_TABLE(TABLE=INT_SIYY)


U1=DEFI_FONCTION(NOM_PARA='X',
                 VALE=(0.0,0.0,1.0,1.0,),
                 PROL_DROITE='LINEAIRE',
                 PROL_GAUCHE='LINEAIRE',);



CHARGX=AFFE_CHAR_MECA_F(MODELE=MO,
                       DDL_IMPO=(_F(NOEUD='NO3',
                                    DX=U3,
                                    DY=U3,
                                    DZ=U3,),
                                 _F(GROUP_NO='FACEZY1',
                                    DX=U3,),
#                                _F(GROUP_NO='FACEXY1',
#                                    DZ=U3,),
#                                _F(GROUP_NO='FACEXZ1',
#                                    DY=U3,),
                                 _F(NOEUD='NO1',
                                    DZ=U3,),
                                 _F(NOEUD='NO4',
                                    DZ=U3,),
                                 _F(NOEUD='NO10',
                                    DZ=U3,),
                                 _F(GROUP_NO='FACEZY2',
                                    DX=U1,),),);


MESTX=MECA_STATIQUE(MODELE=MO,
                   CHAM_MATER=CHMAT,
                   EXCIT=_F(CHARGE=CHARGX,),);

MESTX=CALC_CHAMP(reuse =MESTX,
               RESULTAT=MESTX,  CRITERES=('SIEQ_ELGA'));



INT_SIXX=POST_ELEM(MODELE=MO,
                   NUME_ORDRE=1,
                   RESULTAT=MESTX,
                   INTEGRALE=(_F(NOM_CHAM='SIEF_ELGA',
                                NOM_CMP=('SIXX'),
                                TOUT='OUI'),
                              _F(NOM_CHAM='SIEQ_ELGA',
                                 NOM_CMP=('VMIS'),
                                 TOUT='OUI'),),)

IMPR_TABLE(TABLE=INT_SIXX)




CONTR1=CREA_CHAMP(TYPE_CHAM='ELGA_SIEF_R',
                  OPERATION='EXTR',
                  RESULTAT=MESTX,
                  NOM_CHAM='SIEF_ELGA',);

INT_SIX1=POST_ELEM(MODELE=MO,CHAM_MATER=CHMAT,
                   CHAM_GD=CONTR1,
                   INTEGRALE=(_F (TOUT='OUI',NOM_CMP=('SIXX'),),
                              _F (TOUT='OUI',NOM_CMP=('SIYY'),),),)

IMPR_TABLE(TABLE=INT_SIX1)

CONTR2=CREA_CHAMP(TYPE_CHAM='ELGA_SIEF_R',
                  OPERATION='EXTR',
                  RESULTAT=MESTX,
                  INFO = 2,
                  NOM_CHAM='SIEQ_ELGA',);


INT_SIX2=POST_ELEM(MODELE=MO,
                   CHAM_GD=CONTR2,
                   INTEGRALE=_F (TOUT='OUI',NOM_CMP=('VMIS'),),)

IMPR_TABLE(TABLE=INT_SIX2)



INT_SIX3=POST_ELEM(MODELE=MO,
                   RESULTAT=MESTX,
                   NUME_ORDRE=1,
                   INTEGRALE=_F(NOM_CHAM='SIEQ_ELGA',
                                NOM_CMP=('VMIS'),
                                TOUT='OUI'),)
IMPR_TABLE(TABLE=INT_SIX3)


TEST_TABLE(REFERENCE='ANALYTIQUE',
           VALE_CALC= 1.50000000E+05,
           VALE_REFE=150000,
           NOM_PARA='MOYE_SIYY',
           TABLE=INT_SIYY,
           FILTRE=_F(NOM_PARA='NUME_ORDRE',
                     VALE_I=1,),
           )

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=0.02,
           VALE_CALC= 1.34734399E+05,
           VALE_REFE=133333,
           NOM_PARA='MOYE_SIXX',
           TABLE=INT_SIXX,
           FILTRE=_F(NOM_PARA='NUME_ORDRE',
                     VALE_I=1,),
           )

TEST_TABLE(REFERENCE='NON_DEFINI',
           PRECISION=0.02,
           VALE_CALC= 2.69680516E+05,
           VALE_REFE=2.69681E5,
           NOM_PARA='INTE_VMIS',
           TABLE=INT_SIXX,
           FILTRE=_F(NOM_PARA='NUME_ORDRE',
                     VALE_I=1,),
           )

TEST_TABLE(REFERENCE='NON_DEFINI',
           PRECISION=0.02,
           VALE_CALC= 1.34840258E+05,
           VALE_REFE=1.34840E5,
           NOM_PARA='MOYE_VMIS',
           TABLE=INT_SIXX,
           FILTRE=_F(NOM_PARA='NUME_ORDRE',
                     VALE_I=1,),
           )

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=0.02,
           VALE_CALC= 1.34734399E+05,
           VALE_REFE=133333,
           NOM_PARA='MOYE_SIXX',
           TABLE=INT_SIX1,)

TEST_TABLE(REFERENCE='NON_DEFINI',
           PRECISION=0.02,
           VALE_CALC= 2.69680516E+05,
           VALE_REFE=2.69681E5,
           NOM_PARA='INTE_VMIS',
           TABLE=INT_SIX2,
           )

TEST_TABLE(REFERENCE='NON_DEFINI',
           PRECISION=0.02,
           VALE_CALC= 1.34840258E+05,
           VALE_REFE=1.34840E5,
           NOM_PARA='MOYE_VMIS',
           TABLE=INT_SIX2,
           )

TEST_TABLE(REFERENCE='NON_DEFINI',
           PRECISION=0.02,
           VALE_CALC= 2.69680516E+05,
           VALE_REFE=2.69681E5,
           NOM_PARA='INTE_VMIS',
           TABLE=INT_SIX3,
           )

TEST_TABLE(REFERENCE='NON_DEFINI',
           PRECISION=0.02,
           VALE_CALC= 1.34840258E+05,
           VALE_REFE=1.34840E5,
           NOM_PARA='MOYE_VMIS',
           TABLE=INT_SIX3,
           )

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=0.02,
           VALE_CALC= 1.34734399E+05,
           VALE_REFE=133333,
           NOM_PARA='MOYE_SIXX',
           TABLE=INT_SIX1,)

FIN();
