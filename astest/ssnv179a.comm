# MODIF  DATE 03/11/2004   AUTEUR CIBHHPD L.SALMONA 
# TITRE CUBE SOUS FLUAGE VIA LA LOI LEMA_SEUIL
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2004  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
# CE CAS TEST A POUR BUT DE VERIFIER DE FACON PRECISE L'ACTIVATION 
# DU SEUIL DE FLUAGE

DEBUT(CODE=_F(NOM='SSNV179A',NIV_PUB_WEB='INTERNET'));

PRE_GIBI();

MA = LIRE_MAILLAGE();

MO = AFFE_MODELE( MAILLAGE =MA,
                  AFFE=_F(
                       TOUT ='OUI',
                       PHENOMENE = 'MECANIQUE',
                       MODELISATION = '3D',)
                 )

A=DEFI_CONSTANTE(VALE=14.143E-13);
S=DEFI_CONSTANTE(VALE=0.0788E+10);

# LA LOI EST PRISE DELIBEREMENT SOUS FORME DE FONCTION CONSTANTE
# POUR LA VALIDER

MAT = DEFI_MATERIAU(
            ELAS=_F( E = 165000., NU = 0.3,),
            LEMA_SEUIL_FO=_F( A=A, S=S,)
           )

CHMAT = AFFE_MATERIAU (MAILLAGE = MA,
                       AFFE =_F(TOUT='OUI',
                                MATER = MAT,
                                )
                       )

BLOC = AFFE_CHAR_MECA (MODELE = MO,
                       DDL_IMPO=(_F(GROUP_NO ='A',
                                   DX=0.,
                                   DY=0.,
                                   DZ=0.,),
                                 _F(GROUP_NO ='E',
                                   DX=0.,
                                   DY=0.,),
                                 _F(GROUP_NO ='D',
                                   DX=0.,),
                                 _F(GROUP_NO ='H',
                                   DX=0.,),)
                       )

PRES = AFFE_CHAR_MECA (MODELE = MO,
                          FORCE_FACE=_F (GROUP_MA = 'FORCE',
                                    FX = 220)
                          )

# LA LISTE DES INSTANTS A ETE CHOISI POUR ENCADRER AU MIEUX L'ACTIVATION 
# DU SEUIL DE FLUAGE

L_INST=DEFI_LIST_REEL(  DEBUT=0.0,
                        INTERVALLE=(_F( NOMBRE = 1,JUSQU_A = 1.E+06),
                                    _F( NOMBRE = 1,JUSQU_A = 4.08181817E+06),
                                         _F( NOMBRE = 1,JUSQU_A = 4.08181818E+06),
                                    _F( NOMBRE = 1,JUSQU_A = 4.08181819E+06),
                                    _F( NOMBRE = 1,JUSQU_A = 1.E+07),
                                    _F( PAS = 1.E+07,JUSQU_A = 12.E+07),
                                    ),
                        );

CHAM=CREA_CHAMP( OPERATION='AFFE', 
                      TYPE_CHAM='CART_IRRA_R',
                      MAILLAGE=MA,
                      AFFE=_F( TOUT='OUI',NOM_CMP = 'IRRA', VALE = 1.85),
                  );

FLUENC=CREA_RESU(  
                      OPERATION='AFFE', TYPE_RESU='EVOL_VARC',
                      NOM_CHAM='IRRA',AFFE=
                      _F( CHAM_GD = CHAM, LIST_INST=L_INST)
                      );

RESU = STAT_NON_LINE (MODELE = MO,
                      CHAM_MATER = CHMAT,
                      VARI_COMM=_F(IRRA=FLUENC),
                      EXCIT =(
                         _F( CHARGE = BLOC),
                         _F( CHARGE = PRES),),
                      COMP_INCR =_F(RELATION ='ASSE_COMBU'),
                      INCREMENT =_F(LIST_INST =L_INST),
                      NEWTON    =_F(
                                MATRICE ='TANGENTE', 
                                REAC_ITER=1 ,REAC_INCR=1,),
                      PARM_THETA = 0.5,
                      CONVERGENCE=_F(
                                RESI_GLOB_RELA = 1.E-6,
                                ITER_GLOB_MAXI = 100,
                                ITER_INTE_MAXI = 1000)
                        )

RESU=CALC_ELEM(reuse=RESU,RESULTAT=RESU,
OPTION=('VARI_ELNO_ELGA','SIEF_ELNO_ELGA'),);

RESU=CALC_NO(reuse=RESU,RESULTAT=RESU,
OPTION=('VARI_NOEU_ELGA','SIEF_NOEU_ELGA'),);

# TEST DE PASSAGE DU SEUIL ( V2 = 1 )

TEST_RESU(RESU=(_F(RESULTAT=RESU,
                  NUME_ORDRE=3,
                  NOM_CMP='V2',
                  NOM_CHAM='VARI_NOEU_ELGA',
                  GROUP_NO='A',
                  CRITERE='ABSOLU',
                  PRECISION=1.E-08,
                  VALE=1.00000000000000E+00,
                  REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RESU,
                  NUME_ORDRE=3,
                  NOM_CMP='V1',
                  NOM_CHAM='VARI_NOEU_ELGA',
                  GROUP_NO='A',
                  CRITERE='ABSOLU',
                  PRECISION=1.E-08,
                  VALE=0.0000000000000E+00,
                  REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=RESU,
                  NUME_ORDRE=3,
                  NOM_CMP='V2',
                  NOM_CHAM='VARI_NOEU_ELGA',
                  GROUP_NO='A',
                  CRITERE='ABSOLU',
                  PRECISION=1.E-08,
                  VALE=1.00000000000000E+00,
                  REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RESU,
                  NUME_ORDRE=3,
                  NOM_CMP='V1',
                  NOM_CHAM='VARI_NOEU_ELGA',
                  GROUP_NO='B',
                  CRITERE='ABSOLU',
                  PRECISION=1.E-08,
                  VALE=0.0000000000000E+00,
                  REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=RESU,
                  NUME_ORDRE=3,
                  NOM_CMP='V2',
                  NOM_CHAM='VARI_NOEU_ELGA',
                  GROUP_NO='C',
                  CRITERE='ABSOLU',
                  PRECISION=1.E-08,
                  VALE=1.00000000000000E+00,
                  REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RESU,
                  NUME_ORDRE=3,
                  NOM_CMP='V1',
                  NOM_CHAM='VARI_NOEU_ELGA',
                  GROUP_NO='A',
                  CRITERE='ABSOLU',
                  PRECISION=1.E-08,
                  VALE=0.0000000000000E+00,
                  REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=RESU,
                  NUME_ORDRE=3,
                  NOM_CMP='V2',
                  NOM_CHAM='VARI_NOEU_ELGA',
                  GROUP_NO='C',
                  CRITERE='ABSOLU',
                  PRECISION=1.E-08,
                  VALE=1.00000000000000E+00,
                  REFERENCE='NON_REGRESSION',),
                _F(RESULTAT=RESU,
                  NUME_ORDRE=3,
                  NOM_CMP='V1',
                  NOM_CHAM='VARI_NOEU_ELGA',
                  GROUP_NO='E',
                  CRITERE='ABSOLU',
                  PRECISION=1.E-08,
                  VALE=0.0000000000000E+00,
                  REFERENCE='ANALYTIQUE',),),);

# TEST SUR LES DEPLACEMENTS AU PAS FINAL


TEST_RESU(RESU=_F(RESULTAT=RESU,
                  NUME_ORDRE=16,
                  NOM_CMP='DX',
                  NOM_CHAM='DEPL',
                  GROUP_NO='B',
                  CRITERE='RELATIF',
                  PRECISION=1.E-08,
                  VALE=7.8380536700079E-02,
                  REFERENCE='NON_REGRESSION',VERSION='7.3.25'),);

TEST_RESU(RESU=_F(RESULTAT=RESU,
                  NUME_ORDRE=16,
                  NOM_CMP='DY',
                  NOM_CHAM='DEPL',
                  GROUP_NO='B',
                  CRITERE='ABSOLU',
                  PRECISION=1.E-08,
                  VALE=0.0000000000000E+00,
                  REFERENCE='NON_REGRESSION',VERSION='7.3.25'),);

TEST_RESU(RESU=_F(RESULTAT=RESU,
                  NUME_ORDRE=16,
                  NOM_CMP='DZ',
                  NOM_CHAM='DEPL',
                  GROUP_NO='B',
                  CRITERE='ABSOLU',
                  PRECISION=1.E-08,
                  VALE=0.0000000000000E+00,
                  REFERENCE='NON_REGRESSION',VERSION='7.3.25'),);



FIN();
