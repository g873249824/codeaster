# TITRE LACHER D'UN PATIN FROTTANT
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2013  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#   FICHIER DE COMMANDE ASTER DU CAS-TEST DE FROTTEMNT A 1 DDL
#

DEBUT( CODE=_F(  NOM = 'SDND101A',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

#

M=100.

K=1.E+04

G=10.

V0=1.

COULOMB=0.1

ANG=cos( pi / 4. )

#

POUTRE=LIRE_MAILLAGE( )

POUTRE=DEFI_GROUP( reuse=POUTRE,   MAILLAGE=POUTRE,
  CREA_GROUP_MA=_F(  NOM = 'TOUT', TOUT = 'OUI'))

#

MODELE=AFFE_MODELE(   MAILLAGE=POUTRE,
                         AFFE=_F( TOUT = 'OUI', PHENOMENE = 'MECANIQUE',
                        MODELISATION = 'DIS_T'))

#
CHAMPCAR=AFFE_CARA_ELEM(  MODELE=MODELE,DISCRET=(
                _F(
       GROUP_MA = 'TOUT',
 CARA = 'K_T_D_N', VALE = ( K, K, K, )),
                        _F(  GROUP_MA = 'TOUT', CARA = 'M_T_D_N', VALE = M))
                         )

#
CHARGE=AFFE_CHAR_MECA(  MODELE=MODELE,
             DDL_IMPO=_F( TOUT = 'OUI',  DY = 0., DZ = 0.0)
                        )

#

RIGIELEM=CALC_MATR_ELEM(  MODELE=MODELE,  CHARGE=CHARGE,
                         CARA_ELEM=CHAMPCAR,
                         OPTION='RIGI_MECA')

#
MASSELEM=CALC_MATR_ELEM(  MODELE=MODELE,  CHARGE=CHARGE,
                         CARA_ELEM=CHAMPCAR,
                         OPTION='MASS_MECA')

#
VECTELEM=CALC_VECT_ELEM(   CHARGE=CHARGE,  OPTION='CHAR_MECA')

#
#
NUMEROTA=NUME_DDL(   MATR_RIGI=RIGIELEM )

#
MATRRIGI=ASSE_MATRICE(MATR_ELEM=RIGIELEM,NUME_DDL=NUMEROTA)

#
MATRMASS=ASSE_MATRICE(MATR_ELEM=MASSELEM,NUME_DDL=NUMEROTA)

#
VECTASS=ASSE_VECTEUR(VECT_ELEM=VECTELEM,NUME_DDL=NUMEROTA)

#
MODES=MODE_ITER_INV(   MATR_RIGI=MATRRIGI,  MATR_MASS=MATRMASS,
                         CALC_FREQ=_F( OPTION = 'PROCHE',
                        NMAX_FREQ = 1,
                        FREQ = ( 1.5, )))


#

VITEPHYS=CREA_CHAMP( OPERATION='AFFE', PROL_ZERO='OUI', TYPE_CHAM='NOEU_DEPL_R',
MAILLAGE=POUTRE,
                             CHAM_NO=VECTASS,
                            AFFE=_F(  TOUT = 'OUI',
                                   NOM_CMP = 'DX',
                                   VALE = V0)
                          )

#
NUMEGE=NUME_DDL_GENE(   BASE=MODES,
                          STOCKAGE='DIAG' )

#
VITINI=PROJ_VECT_BASE(  BASE=MODES,  VECT_ASSE=VITEPHYS,
                          NUME_DDL_GENE=NUMEGE,
                          TYPE_VECT='VITE')

#
MASSEGEN=PROJ_MATR_BASE(  BASE=MODES,
                            NUME_DDL_GENE=NUMEGE,
                            MATR_ASSE=MATRMASS
                         )

#
RIGIDGEN=PROJ_MATR_BASE(  BASE=MODES,
                          NUME_DDL_GENE=NUMEGE,
                            MATR_ASSE=MATRRIGI
                         )

#
PLANZ=DEFI_OBSTACLE(   TYPE='PLAN_Z' )

PLANY=DEFI_OBSTACLE(   TYPE='PLAN_Y' )

#
DYNAMODA=DYNA_VIBRA(TYPE_CALCUL='TRAN',BASE_CALCUL='GENE',
                              SCHEMA_TEMPS=_F(SCHEMA='EULER',),
                              MATR_MASS=MASSEGEN,
                              MATR_RIGI=RIGIDGEN,
                              AMOR_MODAL=_F(AMOR_REDUIT=0.,),
                              ETAT_INIT=_F(  VITE = VITINI),
                              INCREMENT=_F(  INST_INIT = 0.,
                                          INST_FIN = 0.5,
                                          PAS = 0.0005),
                             CHOC=_F(  NOEUD_1 = 'NO1',
                                    OBSTACLE = PLANZ,
                                    ORIG_OBST = (-1., 0., 0.,),
                                    NORM_OBST = (0., 0., 1.,),
                                    JEU = 1.00,
                                    RIGI_NOR = 1000000.,
                                    RIGI_TAN = 0.,
                                    FROTTEMENT='COULOMB',
                                    COULOMB = 0.)
                           )

#
# W0 =  ( K / M ) ** 0.5 ;
# C  = COULOMB * M * G / K  ;
# T1 =  pi / W0  ;
# R1 = ( ( 2. * C ) - U0 ) * ANG ;
# T2 =  2. * pi / W0 ;
# R2 = ( U0 - ( 4. * C ) ) * ANG ;
# T3 =  3. * pi / W0 ;
# R3 =  ( ( 6. * C ) - U0 ) * ANG ;
# T4 =  4. * pi / W0  ;
# R4 =  ( U0 - ( 8. * C ) ) * ANG ;
#


TT=POST_DYNA_MODA_T(    RESU_GENE=DYNAMODA,
                          CHOC=_F(   INST_INIT = 0.,
                                  INST_FIN = 0.495,
                                  SEUIL_FORCE = 0.,
                                  DUREE_REPOS = 0.,
                                  OPTION = 'IMPACT',
                                  NB_CLASSE = 8)
                       )

IMPR_TABLE(    TABLE=TT,
              FILTRE=_F(  NOM_PARA = 'CALCUL',
                       VALE_K = 'IMPACT'),
             NOM_PARA=( 'NOEUD', 'CHOC', 'INSTANT', 'F_MAX',
                        'IMPULSION', 'T_CHOC', 'V_IMPACT',
                        'NB_IMPACT',  )
          )

IMPR_TABLE(    TABLE=TT,
              FILTRE=_F(  NOM_PARA = 'CALCUL',
                       VALE_K = 'GLOBAL'),
             NOM_PARA=( 'NOEUD', 'F_MAX_ABS', 'F_MAX_MOY',
                        'F_MAX_ETYPE', )
          )

IMPR_TABLE(    TABLE=TT,
              FILTRE=_F(  NOM_PARA = 'CALCUL',
                       VALE_K = 'PROBA'),
             NOM_PARA=( 'NOEUD', 'CLASSE', 'DEBUT', 'FIN',
                        'PROBA', )
          )

TEST_TABLE(VALE_CALC=9950.0,
           TOLE_MACHINE=1.E-3,
           NOM_PARA='F_MAX_ABS',
           TABLE=TT,
           FILTRE=(_F(NOM_PARA='CALCUL',
                      VALE_K='GLOBAL',),
                   _F(NOM_PARA='NOEUD',
                      VALE_K='NO1',),
                   ),
           )

TEST_TABLE(PRECISION=1.E-2,
           VALE_CALC=0.015500000,
           VALE_REFE=0.015630000000000002,
           REFERENCE='NON_DEFINI',
           NOM_PARA='INSTANT',
           TABLE=TT,
           FILTRE=(_F(NOM_PARA='CALCUL',
                      VALE_K='IMPACT',),
                   _F(NOM_PARA='NOEUD',
                      VALE_K='NO1',),
                   _F(NOM_PARA='CHOC',
                      VALE_I=1,),
                   ),
           )

TEST_TABLE(VALE_CALC=0.36099999999999999,
           TOLE_MACHINE=1.E-3,
           NOM_PARA='INSTANT',
           TABLE=TT,
           FILTRE=(_F(NOM_PARA='CALCUL',
                      VALE_K='IMPACT',),
                   _F(NOM_PARA='NOEUD',
                      VALE_K='NO1',),
                   _F(NOM_PARA='CHOC',
                      VALE_I=2,),
                   ),
           )

TEST_TABLE(VALE_CALC=9950.0,
           TOLE_MACHINE=1.E-3,
           NOM_PARA='F_MAX',
           TABLE=TT,
           FILTRE=(_F(NOM_PARA='CALCUL',
                      VALE_K='IMPACT',),
                   _F(NOM_PARA='NOEUD',
                      VALE_K='NO1',),
                   _F(NOM_PARA='CHOC',
                      VALE_I=1,),
                   ),
           )

TEST_TABLE(VALE_CALC=9950.0,
           TOLE_MACHINE=1.E-3,
           NOM_PARA='F_MAX',
           TABLE=TT,
           FILTRE=(_F(NOM_PARA='CALCUL',
                      VALE_K='IMPACT',),
                   _F(NOM_PARA='NOEUD',
                      VALE_K='NO1',),
                   _F(NOM_PARA='CHOC',
                      VALE_I=2,),
                   ),
           )

TEST_TABLE(VALE_CALC=198.05000000000001,
           TOLE_MACHINE=1.E-3,
           NOM_PARA='IMPULSION',
           TABLE=TT,
           FILTRE=(_F(NOM_PARA='CALCUL',
                      VALE_K='IMPACT',),
                   _F(NOM_PARA='NOEUD',
                      VALE_K='NO1',),
                   _F(NOM_PARA='CHOC',
                      VALE_I=2,),
                   ),
           )

TEST_TABLE(VALE_CALC=198.05000000000001,
           TOLE_MACHINE=1.E-3,
           NOM_PARA='IMPULSION',
           TABLE=TT,
           FILTRE=(_F(NOM_PARA='CALCUL',
                      VALE_K='IMPACT',),
                   _F(NOM_PARA='NOEUD',
                      VALE_K='NO1',),
                   _F(NOM_PARA='CHOC',
                      VALE_I=2,),
                   ),
           )

TEST_TABLE(PRECISION=1.E-2,
           VALE_CALC=0.031500000,
           VALE_REFE=0.031260000000000003,
           REFERENCE='NON_DEFINI',
           NOM_PARA='T_CHOC',
           TABLE=TT,
           FILTRE=(_F(NOM_PARA='CALCUL',
                      VALE_K='IMPACT',),
                   _F(NOM_PARA='NOEUD',
                      VALE_K='NO1',),
                   _F(NOM_PARA='CHOC',
                      VALE_I=2,),
                   ),
           )

TEST_TABLE(PRECISION=1.E-2,
           VALE_CALC=0.031500000,
           VALE_REFE=0.031260000000000003,
           REFERENCE='NON_DEFINI',
           NOM_PARA='T_CHOC',
           TABLE=TT,
           FILTRE=(_F(NOM_PARA='CALCUL',
                      VALE_K='IMPACT',),
                   _F(NOM_PARA='NOEUD',
                      VALE_K='NO1',),
                   _F(NOM_PARA='CHOC',
                      VALE_I=2,),
                   ),
           )

TEST_TABLE(VALE_CALC=-1.0,
           TOLE_MACHINE=1.E-3,
           NOM_PARA='V_IMPACT',
           TABLE=TT,
           FILTRE=(_F(NOM_PARA='CALCUL',
                      VALE_K='IMPACT',),
                   _F(NOM_PARA='NOEUD',
                      VALE_K='NO1',),
                   _F(NOM_PARA='CHOC',
                      VALE_I=2,),
                   ),
           )

TEST_TABLE(VALE_CALC=-1.0,
           TOLE_MACHINE=1.E-3,
           NOM_PARA='V_IMPACT',
           TABLE=TT,
           FILTRE=(_F(NOM_PARA='CALCUL',
                      VALE_K='IMPACT',),
                   _F(NOM_PARA='NOEUD',
                      VALE_K='NO1',),
                   _F(NOM_PARA='CHOC',
                      VALE_I=2,),
                   ),
           )

FIN( )
#
