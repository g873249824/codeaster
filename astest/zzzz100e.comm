# TITRE LISSAGE ENVELOPPE DE SPECTRES DE PLANCHER ET LIRE_FONCTION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================

DEBUT(CODE=_F(
              NIV_PUB_WEB='INTERNET',),
      DEBUG=_F(SDVERI='OUI',),)

spectre=LIRE_FONCTION(TYPE='NAPPE',
                      INDIC_PARA=(1,1,),
                      NOM_PARA_FONC='FREQ',
                      INDIC_ABSCISSE=(2,1,),
                      INTERPOL_FONC='LOG',
                      PROL_DROITE_FONC='CONSTANT',
                      PROL_GAUCHE_FONC='CONSTANT',
                      DEFI_FONCTION=(_F(INDIC_RESU=(2,2,),),
                                     _F(INDIC_RESU=(2,3,),),
                                     _F(INDIC_RESU=(2,4,),),
                                     _F(INDIC_RESU=(2,5,),),
                                     _F(INDIC_RESU=(2,6,),),),
                      UNITE=18,
                      NOM_PARA='AMOR',
                      NOM_RESU='ACCE',
                      INTERPOL='LOG',
                      PROL_DROITE='CONSTANT',
                      PROL_GAUCHE='CONSTANT',
                      TITRE='essai de lecture de spectre',)

res=CALC_FONCTION(LISS_ENVELOP=_F(NAPPE=spectre,),
                  NOM_PARA='AMOR',
                  NOM_RESU='ACCE',
                  NOM_PARA_FONC='FREQ',)


TEST_FONCTION(VALEUR=(_F(VALE_CALC=0.99557198,
                         CRITERE='ABSOLU',
                         VALE_PARA=(0.02, 2.138),
                         NOM_PARA=('AMOR', 'FREQ'),
                         FONCTION=res,
                         ),
                      _F(VALE_CALC=1.798722,
                         CRITERE='ABSOLU',
                         VALE_PARA=(0.02, 4.2658),
                         NOM_PARA=('AMOR', 'FREQ'),
                         FONCTION=res,
                         ),
                      _F(VALE_CALC=1.549100,
                         CRITERE='ABSOLU',
                         VALE_PARA=(0.02, 13.803800000000001),
                         NOM_PARA=('AMOR', 'FREQ'),
                         FONCTION=res,
                         ),
                      _F(VALE_CALC=0.96942900,
                         CRITERE='ABSOLU',
                         VALE_PARA=(0.050000000000000003, 2.2909000000000002),
                         NOM_PARA=('AMOR', 'FREQ'),
                         FONCTION=res,
                         ),
                      _F(VALE_CALC=1.492044,
                         CRITERE='ABSOLU',
                         VALE_PARA=(0.050000000000000003, 6.4565000000000001),
                         NOM_PARA=('AMOR', 'FREQ'),
                         FONCTION=res,
                         ),
                      _F(VALE_CALC=1.165783,
                         CRITERE='ABSOLU',
                         VALE_PARA=(0.050000000000000003, 12.022600000000001),
                         NOM_PARA=('AMOR', 'FREQ'),
                         FONCTION=res,
                         ),
                      _F(VALE_CALC=1.401266,
                         CRITERE='ABSOLU',
                         VALE_PARA=(0.10000000000000001, 6.0255999999999998),
                         NOM_PARA=('AMOR', 'FREQ'),
                         FONCTION=res,
                         ),
                      _F(VALE_CALC=1.196594,
                         CRITERE='ABSOLU',
                         VALE_PARA=(0.10000000000000001, 9.1201000000000008),
                         NOM_PARA=('AMOR', 'FREQ'),
                         FONCTION=res,
                         ),
                      _F(VALE_CALC=0.49810900,
                         CRITERE='ABSOLU',
                         VALE_PARA=(0.14999999999999999, 2.2909000000000002),
                         NOM_PARA=('AMOR', 'FREQ'),
                         FONCTION=res,
                         ),
                      _F(VALE_CALC=0.99949900,
                         CRITERE='ABSOLU',
                         VALE_PARA=(0.14999999999999999, 7.9432999999999998),
                         NOM_PARA=('AMOR', 'FREQ'),
                         FONCTION=res,
                         ),
                      _F(VALE_CALC=0.49810900,
                         CRITERE='ABSOLU',
                         VALE_PARA=(0.20000000000000001, 2.2909000000000002),
                         NOM_PARA=('AMOR', 'FREQ'),
                         FONCTION=res,
                         ),
                      _F(VALE_CALC=0.92695496,
                         CRITERE='ABSOLU',
                         VALE_PARA=(0.20000000000000001, 7.9432999999999998),
                         NOM_PARA=('AMOR', 'FREQ'),
                         FONCTION=res,
                         ),
                      ),
              )

IMPR_FONCTION(FORMAT='TABLEAU',
              COURBE=_F(FONCTION=res,),
              UNITE=8,)

# TEST LIRE_FONCTION COMPLEXE
fc1 = LIRE_FONCTION(TYPE='FONCTION_C',
                    UNITE=38,
                    NOM_PARA='INST')

fc2 = LIRE_FONCTION(TYPE='FONCTION_C',
                    FORMAT_C='MODULE_PHASE',
                    UNITE=38,
                    INDIC_PARA=(2, 1),
                    INDIC_MODU=(2, 2),
                    INDIC_PHAS=(2, 3),
                    NOM_PARA='INST')

TEST_FONCTION(VALEUR=(_F(CRITERE='ABSOLU',
                         VALE_CALC_C=(1+10j),
                         VALE_REFE_C=(1+10j),
                         VALE_PARA=0.10000000000000001,
                         REFERENCE='ANALYTIQUE',
                         NOM_PARA='INST',
                         FONCTION=fc1,),
                      _F(CRITERE='ABSOLU',
                         VALE_CALC_C=(1+10j),
                         VALE_REFE_C=(1+10j),
                         VALE_PARA=0.10000000000000001,
                         REFERENCE='ANALYTIQUE',
                         NOM_PARA='INST',
                         FONCTION=fc2,),
                      ),
              )

FIN()
