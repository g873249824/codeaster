# TITRE SYSTEME MAS RES A 8 DDL (AMORTISSEMENT VISQ. PROPORTION.)
# ======================================================================
# COPYRIGHT (C) 1991 - 2013  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#      1) DYNAMIQUE TRANSITOIRE BASE MODALE
#      2) DYNAMIQUE TRANSITOIRE DIRECT

DEBUT(CODE=_F(NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='NON'))

#

RESSORT=LIRE_MAILLAGE( )

#

MODELE=AFFE_MODELE(  MAILLAGE=RESSORT,
                       AFFE=_F(  TOUT = 'OUI', PHENOMENE = 'MECANIQUE',
                              MODELISATION = 'DIS_TR') )

#
CHAMPCAR=AFFE_CARA_ELEM(  MODELE=MODELE,DISCRET=(

                _F(  MAILLE = ('E1', 'E2', 'E3', 'E4', 'E5', 'E6', 'E7', 'E8', ),
                          CARA = 'K_TR_D_L',
                          VALE = (1.E5, 0., 0., 0., 0., 0.,)),

                _F(  MAILLE = ('E1', 'E2', 'E3', 'E4', 'E5', 'E6', 'E7', 'E8', ),
                          CARA = 'M_TR_L',
                          VALE = (0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0., 0., 0., 0., 0., 0., 0., 0., )),

                _F(  MAILLE = ('E1', 'E2', 'E3', 'E4', 'E5', 'E6', 'E7', 'E8', ),
                          CARA = 'A_TR_L',
                          VALE = (0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0., 0., 0., 0., 0., 0., 0., 0., )),

                _F(  MAILLE = ('E9', ),
                          CARA = 'K_TR_L',
                          VALE = (1.E5,    0., 0., 0., 0., 0., 0., 0.,   0., 0.,
                                  0.,    0., 0., 0., 0., 0., 0., 0.,   0., 0.,
                                  0., -1.E5, 0., 0., 0., 0., 0., 1.E5, 0., 0.,
                                  0.,    0., 0., 0., 0., 0., 0., 0.,   0., 0.,
                                  0.,    0., 0., 0., 0., 0., 0., 0.,   0., 0.,
                                  0.,    0., 0., 0., 0., 0., 0., 0.,   0., 0.,
                                  0.,    0., 0., 0., 0., 0., 0., 0.,   0., 0.,
                                  0.,    0., 0., 0., 0., 0., 0., 0.,      )),

                _F(  GROUP_MA = 'AMOR_L',
                          CARA = 'A_TR_D_L',
                          VALE = ( 50., 0., 0., 0., 0., 0., )),

                _F(  MAILLE = 'E8',
                          CARA = 'A_TR_L',
                          VALE = ( 50.,   0., 0., 0., 0., 0., 0., 0.,  0., 0.,
                                  0.,   0., 0., 0., 0., 0., 0., 0.,  0., 0.,
                                  0., -50., 0., 0., 0., 0., 0., 50., 0., 0.,
                                  0.,   0., 0., 0., 0., 0., 0., 0.,  0., 0.,
                                  0.,   0., 0., 0., 0., 0., 0., 0.,  0., 0.,
                                  0.,   0., 0., 0., 0., 0., 0., 0.,  0., 0.,
                                  0.,   0., 0., 0., 0., 0., 0., 0.,  0., 0.,
                                  0.,   0., 0., 0., 0., 0., 0., 0.,      )),

                _F(  MAILLE = 'P1',
                          CARA = 'A_TR_D_N',
                          VALE = ( 50., 0., 0., 0., 0., 0.,            )),

                _F(  MAILLE = 'P8',
                          CARA = 'A_TR_N',
                          VALE = ( 50., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
                                  0.,                           )),

                _F(  GROUP_MA = 'P',
                          CARA = 'M_TR_D_N',
                          VALE = ( 10., 0., 0., 0., 0., 0., 0., 0., 0., 0.,)),

                _F(  MAILLE = ( 'E9', ),
                          CARA = 'M_TR_L',
                          VALE = ( 10., 0., 10., 0., 0., 10., 0., 0.,  0., 0.,
                                  0., 0., 0.,  0., 0., 0.,  0., 0.,  0., 0.,
                                  0., 0., 0.,  0., 0., 0.,  0., 10., 0., 0.,
                                  0., 0., 0.,  0., 0., 10., 0., 0.,  0., 0.,
                                  0., 0., 0.,  0., 10., 0., 0., 0.,  0., 0.,
                                  0., 0., 0.,  0., 0., 0.,  0., 0.,  0., 0.,
                                  0., 0., 0.,  0., 0., 0.,  0., 0.,  0., 0.,
                                  0., 0., 0.,  0., 0., 0.,  0., 0.,      )))
                        )

#
CHARGE=AFFE_CHAR_MECA(  MODELE=MODELE,DDL_IMPO=(
                         _F(  TOUT = 'OUI',
                                    DY = 0., DZ = 0., DRX = 0., DRY = 0., DRZ = 0.),
                                  _F(  NOEUD = ('N1','N10',),  DX = 0.))  )

EFFORT=AFFE_CHAR_MECA(  MODELE=MODELE,
                         FORCE_NODALE=_F(  NOEUD = 'N5', FX = 1.)  )

RIGIELEM=CALC_MATR_ELEM(  MODELE=MODELE,       OPTION='RIGI_MECA',
                            CARA_ELEM=CHAMPCAR,  CHARGE=CHARGE     )

MASSELEM=CALC_MATR_ELEM(  MODELE=MODELE,  OPTION='MASS_MECA_DIAG',
                            CARA_ELEM=CHAMPCAR,  CHARGE=CHARGE     )

AMORELEM=CALC_MATR_ELEM(  MODELE=MODELE,       OPTION='AMOR_MECA',
                            CARA_ELEM=CHAMPCAR,  CHARGE=CHARGE     )

EFFOELEM=CALC_VECT_ELEM(  OPTION='CHAR_MECA',
                            CARA_ELEM=CHAMPCAR,  CHARGE=EFFORT     )

NUMEROTA=NUME_DDL(  MATR_RIGI=RIGIELEM,
                      METHODE='LDLT',
                     RENUM='SANS')

MATRRIGI=ASSE_MATRICE(  MATR_ELEM=RIGIELEM,  NUME_DDL=NUMEROTA )

MATRMASS=ASSE_MATRICE(  MATR_ELEM=MASSELEM,  NUME_DDL=NUMEROTA )

MATRAMOR=ASSE_MATRICE(  MATR_ELEM=AMORELEM,  NUME_DDL=NUMEROTA )

VECTASS=ASSE_VECTEUR(  VECT_ELEM=EFFOELEM,  NUME_DDL=NUMEROTA )

#
#-------------------------------------------------
# DEFINITION DES INSTANTS DE CALCUL DE LA SOLUTION
#-------------------------------------------------
#

L_INST=( 0.090,  0.184,  0.272,  0.365,  0.455,  0.544,  0.633,  0.724,
             0.812,  0.904,  0.993,  1.089,  1.182,  1.271,  1.362,  1.452, )

LISTR8=DEFI_LIST_REEL(  VALE=L_INST )

# LISTR8 = DEFI_LIST_REEL( DEBUT: 0.09
#                          INTERVALLE:( JUSQU_A: 0.27 , NOMBRE: 2 )
#                                     ( JUSQU_A: 0.37 , NOMBRE: 1 )
#                                     ( JUSQU_A: 0.46 , NOMBRE: 1 )
#                                     ( JUSQU_A: 0.54 , NOMBRE: 1 )
#                                     ( JUSQU_A: 1.08 , NOMBRE: 6 )
#                                     ( JUSQU_A: 1.18 , NOMBRE: 1 )
#                                     ( JUSQU_A: 1.45 , NOMBRE: 3 ) ) ;
#
#
#-----------------------
# FONCTION D'EXCITATION
#-----------------------
#
FONCTIO1=DEFI_FONCTION(  NOM_PARA='INST',  NOM_RESU='ALPHA',
                          VALE=( 0., 1.,  1., 1.,  1.0000001, 0., ),
                          PROL_DROITE='CONSTANT'               )

#
#-----------------------------------------------------------------
#             TRANSITOIRE MODAL SCHEMA EULER
#-----------------------------------------------------------------
#
MODES=CALC_MODES(MATR_RIGI=MATRRIGI,
                 OPTION='AJUSTE',
                 CALC_FREQ=_F(FREQ=( 5.,10.,15.,20.,24.,27.,30.,32.,),
                              ),
                 MATR_MASS=MATRMASS,
                 )


PROJ_BASE(  BASE=MODES,
            STOCKAGE = 'PLEIN',
            MATR_ASSE_GENE=(
             _F(
                             MATRICE = CO("MASSEGEN"),
                             MATR_ASSE = MATRMASS),
             _F(
                             MATRICE = CO("RIGIDGEN"),
                             MATR_ASSE = MATRRIGI),
             _F(
                             MATRICE = CO("AMORTGEN"),
                             MATR_ASSE = MATRAMOR,),),
             VECT_ASSE_GENE=_F(
                             VECTEUR = CO("EFFOGENE"),
                             VECT_ASSE = VECTASS) )

DYNMOD_E=DYNA_VIBRA(TYPE_CALCUL='TRAN',BASE_CALCUL='GENE',
                            SCHEMA_TEMPS=_F(SCHEMA='EULER',),
                            MATR_MASS=MASSEGEN,
                             MATR_RIGI=RIGIDGEN,
                             MATR_AMOR=AMORTGEN,
                            EXCIT=_F(  VECT_ASSE_GENE = EFFOGENE,
                                    FONC_MULT = FONCTIO1),
                             INCREMENT=_F(  INST_INIT = 0.,
                                         INST_FIN = 1.5,  PAS = 0.001)
                          )

DEPTRAN1=REST_GENE_PHYS(  RESU_GENE=DYNMOD_E,  NOM_CHAM='DEPL',
                            LIST_INST=LISTR8,    INTERPOL='LIN'  )

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 4.02212363E-05,
                   VALE_REFE=4.0200000000000001E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=2,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 3.97297213E-06,
                   VALE_REFE=4.2200000000000003E-06,
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.059999999999999998,),
                _F(NUME_ORDRE=3,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 3.90264683E-05,
                   VALE_REFE=3.8899999999999997E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=4,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 5.75075442E-06,
                   VALE_REFE=5.9800000000000003E-06,
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.040000000000000001,),
                _F(NUME_ORDRE=5,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 3.74603643E-05,
                   VALE_REFE=3.7299999999999999E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=6,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 6.97727978E-06,
                   VALE_REFE=7.1400000000000002E-06,
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.029999999999999999,),
                _F(NUME_ORDRE=7,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 3.64597179E-05,
                   VALE_REFE=3.6399999999999997E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=8,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 7.92380869E-06,
                   VALE_REFE=8.0700000000000007E-06,
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.02,),
                _F(NUME_ORDRE=9,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 3.58643789E-05,
                   VALE_REFE=3.5800000000000003E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=10,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 8.66134453E-06,
                   VALE_REFE=8.7600000000000008E-06,
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.02,),
                _F(NUME_ORDRE=11,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 3.53114811E-05,
                   VALE_REFE=3.5200000000000002E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=12,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=-3.07283408E-05,
                   VALE_REFE=-3.0800000000000003E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=13,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 3.01460539E-05,
                   VALE_REFE=3.0199999999999999E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=14,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=-2.87835984E-05,
                   VALE_REFE=-2.8799999999999999E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=15,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 2.79121599E-05,
                   VALE_REFE=2.8E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=16,
                   RESULTAT=DEPTRAN1,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=-2.65240299E-05,
                   VALE_REFE=-2.65E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                ),
          )

#
#-----------------------------------------------------------------
#       TRANSITOIRE MODAL SCHEMA EULER ADAPTATIF (ADAPT_ORDRE1)
#-----------------------------------------------------------------
#

DYNMOD_A=DYNA_VIBRA(TYPE_CALCUL='TRAN',BASE_CALCUL='GENE',
                            SCHEMA_TEMPS=_F(SCHEMA='ADAPT_ORDRE1',),
                            MATR_MASS=MASSEGEN,
                            MATR_RIGI=RIGIDGEN,
                            MATR_AMOR=AMORTGEN,
                            EXCIT=_F(  VECT_ASSE_GENE = EFFOGENE,
                                    FONC_MULT = FONCTIO1),
                            INCREMENT=_F( INST_INIT = 0., INST_FIN = 1.5,
                                          PAS=0.0001,),
                            ARCHIVAGE=_F(  PAS_ARCH = 1))

DEPTRAN2=REST_GENE_PHYS(  RESU_GENE=DYNMOD_A,  NOM_CHAM='DEPL',
                            LIST_INST=LISTR8,    INTERPOL='LIN'  )

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 4.02180670E-05,
                   VALE_REFE=4.0200000000000001E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=2,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 4.01280578E-06,
                   VALE_REFE=4.2200000000000003E-06,
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.059999999999999998,),
                _F(NUME_ORDRE=3,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 3.90006079E-05,
                   VALE_REFE=3.8899999999999997E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=4,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 5.76908474E-06,
                   VALE_REFE=5.9800000000000003E-06,
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.040000000000000001,),
                _F(NUME_ORDRE=5,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 3.74263621E-05,
                   VALE_REFE=3.7299999999999999E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=6,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 6.99446522E-06,
                   VALE_REFE=7.1400000000000002E-06,
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.029999999999999999,),
                _F(NUME_ORDRE=7,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 3.64489671E-05,
                   VALE_REFE=3.6399999999999997E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=8,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 7.94614785E-06,
                   VALE_REFE=8.0700000000000007E-06,
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.02,),
                _F(NUME_ORDRE=9,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 3.58675516E-05,
                   VALE_REFE=3.5800000000000003E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=10,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 8.66692914E-06,
                   VALE_REFE=8.7600000000000008E-06,
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.02,),
                _F(NUME_ORDRE=11,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 3.53124031E-05,
                   VALE_REFE=3.5200000000000002E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=12,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=-3.07796328E-05,
                   VALE_REFE=-3.0800000000000003E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=13,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 3.02212584E-05,
                   VALE_REFE=3.0199999999999999E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=14,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=-2.88294965E-05,
                   VALE_REFE=-2.8799999999999999E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=15,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC= 2.79744600E-05,
                   VALE_REFE=2.8E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                _F(NUME_ORDRE=16,
                   RESULTAT=DEPTRAN2,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=-2.65599690E-05,
                   VALE_REFE=-2.65E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000000000000001E-3,),
                ),
          )
#
#-----------------------------------------------------------------
#       TRANSITOIRE MODAL SCHEMAS RUNGE-KUTTA
#-----------------------------------------------------------------
#
D_RK32=DYNA_VIBRA( TYPE_CALCUL='TRAN',BASE_CALCUL='GENE',
                   MATR_MASS=MASSEGEN,
                   MATR_RIGI=RIGIDGEN,
                   MATR_AMOR=AMORTGEN,
                   SCHEMA_TEMPS=_F(SCHEMA='RUNGE_KUTTA_32',TOLERANCE=1.0E-5,ALPHA=1.0),
                   EXCIT=_F( VECT_ASSE_GENE = EFFOGENE,
                             FONC_MULT = FONCTIO1),
                   INCREMENT=_F( INST_INIT = 0., INST_FIN = 1.5,
                                 PAS = 0.0001,
                                 PAS_MINI = 1E-10,
#                                on impose un pas_maxi pour eviter des imprecisions d'interpolation lors des test_resu
                                 PAS_MAXI=0.001,
                                 ),
                   ARCHIVAGE=_F(  PAS_ARCH = 1))

DEP_RK32=REST_GENE_PHYS(  RESU_GENE=D_RK32,  NOM_CHAM='DEPL',
                          LIST_INST=LISTR8,    INTERPOL='LIN'  )

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',CRITERE='ABSOLU',
                   VALE_CALC=4.023219E-05,
                   VALE_REFE=4.020E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0E-3,),
                _F(NUME_ORDRE=2,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',CRITERE='ABSOLU',
                   VALE_CALC=4.019225E-06,
                   VALE_REFE=4.0220E-06,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0E-3,),
                _F(NUME_ORDRE=3,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=3.9000E-05,
                   VALE_REFE=3.89E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0E-3,),
                _F(NUME_ORDRE=4,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=5.7834E-06,
                   VALE_REFE=5.9800E-06,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.040,),
                _F(NUME_ORDRE=5,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=3.74036651E-05,
                   VALE_REFE=3.73E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000E-3,),
                _F(NUME_ORDRE=6,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=7.00E-06,
                   VALE_REFE=7.1400E-06,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.03,),
                _F(NUME_ORDRE=7,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=3.64433757E-05,
                   VALE_REFE=3.64E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.00E-3,),
                _F(NUME_ORDRE=8,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=7.9524266E-06,
                   VALE_REFE=8.0700E-06,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.02,),
                _F(NUME_ORDRE=9,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=3.5878294E-05,
                   VALE_REFE=3.58000E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000E-3,),
                _F(NUME_ORDRE=10,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=8.6608393E-06,
                   VALE_REFE=8.7600E-06,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.02,),
                _F(NUME_ORDRE=11,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=3.53255E-05,
                   VALE_REFE=3.52000E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000E-3,),
                _F(NUME_ORDRE=12,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=-3.0807E-05,
                   VALE_REFE=-3.0800E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000E-3,),
                _F(NUME_ORDRE=13,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=3.02304E-05,
                   VALE_REFE=3.020E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.000E-3,),
                _F(NUME_ORDRE=14,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=-2.88454E-05,
                   VALE_REFE=-2.88E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.00E-3,),
                _F(NUME_ORDRE=15,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=2.7985E-05,
                   VALE_REFE=2.8E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.000E-3,),
                _F(NUME_ORDRE=16,
                   RESULTAT=DEP_RK32,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=-2.65484E-05,
                   VALE_REFE=-2.65E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000E-3,),
                ),
          )

D_RK54=DYNA_VIBRA( TYPE_CALCUL='TRAN',BASE_CALCUL='GENE',
                   MATR_MASS=MASSEGEN,
                   MATR_RIGI=RIGIDGEN,
                   MATR_AMOR=AMORTGEN,
                   SCHEMA_TEMPS=_F(SCHEMA='RUNGE_KUTTA_54',TOLERANCE=1.0E-06,ALPHA=1.0),
                   EXCIT=_F( VECT_ASSE_GENE = EFFOGENE,
                             FONC_MULT = FONCTIO1),
                   INCREMENT=_F( INST_INIT = 0., INST_FIN = 1.5,
                                 PAS = 0.0001,
                                 PAS_MINI = 1E-10,
#                                on impose un pas_maxi pour eviter des imprecisions d'interpolation lors des test_resu
                                 PAS_MAXI=0.001,
                                 ),
                   ARCHIVAGE=_F(  PAS_ARCH = 1))

DEP_RK54=REST_GENE_PHYS(  RESU_GENE=D_RK54,  NOM_CHAM='DEPL',
                          LIST_INST=LISTR8,    INTERPOL='LIN'  )

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=4.022906E-05,
                   VALE_REFE=4.0200E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.00E-3,),
                _F(NUME_ORDRE=2,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=4.02283E-06,
                   VALE_REFE=4.2200E-06,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.06,),
                _F(NUME_ORDRE=3,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=3.90019E-05,
                   CRITERE='ABSOLU',
                   VALE_REFE=3.89E-05,
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.000E-3,),
                _F(NUME_ORDRE=4,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=5.78373E-06,
                   VALE_REFE=5.98000E-06,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.040,),
                _F(NUME_ORDRE=5,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=3.74038E-05,
                   VALE_REFE=3.73E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.000E-3,),
                _F(NUME_ORDRE=6,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=7.0042E-06,
                   VALE_REFE=7.14000E-06,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.03,),
                _F(NUME_ORDRE=7,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=3.6443E-05,
                   VALE_REFE=3.64E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000E-3,),
                _F(NUME_ORDRE=8,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=7.95246E-06,
                   VALE_REFE=8.0700E-06,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.02,),
                _F(NUME_ORDRE=9,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=3.58766E-05,
                   VALE_REFE=3.580000E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.0000E-3,),
                _F(NUME_ORDRE=10,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=8.66066E-06,
                   VALE_REFE=8.76000E-06,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=0.02,),
                _F(NUME_ORDRE=11,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=3.5325776E-05,
                   VALE_REFE=3.52000E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.00E-3,),
                _F(NUME_ORDRE=12,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=-3.080841E-05,
                   VALE_REFE=-3.0800000E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.000000E-3,),
                _F(NUME_ORDRE=13,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=3.0230246E-05,
                   VALE_REFE=3.02E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.000E-3,),
                _F(NUME_ORDRE=14,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=-2.885223E-05,
                   VALE_REFE=-2.88E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.000E-3,),
                _F(NUME_ORDRE=15,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=2.799098E-05,
                   VALE_REFE=2.8E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.000E-3,),
                _F(NUME_ORDRE=16,
                   RESULTAT=DEP_RK54,
                   NOM_CHAM='DEPL',
                   NOEUD='N5',
                   NOM_CMP='DX',
                   VALE_CALC=-2.654995E-05,
                   VALE_REFE=-2.65E-05,
                   CRITERE='ABSOLU',
                   REFERENCE='NON_DEFINI',
                   PRECISION=5.000E-3,),
                ),
          )
#
#-----------------------------------------------------------------------
#               TRANSITOIRE DIRECT PAS DE TEMPS ADAPTATIF
#-----------------------------------------------------------------------
#
DYNAADAP=DYNA_VIBRA(TYPE_CALCUL='TRAN',BASE_CALCUL='PHYS',
                            MATR_MASS=MATRMASS,   MATR_RIGI=MATRRIGI,
                            MATR_AMOR=MATRAMOR,
                            SCHEMA_TEMPS=_F(SCHEMA='ADAPT_ORDRE2',),
                            EXCIT=_F(  VECT_ASSE = VECTASS,
                                    FONC_MULT = FONCTIO1),
                            INCREMENT=_F( INST_INIT = 0., INST_FIN = 1.5,
                                          PAS = 0.001,
                                          PAS_MINI = 1E-10, VITE_MIN = ('MAXI',),
                                          ),
                            ARCHIVAGE=_F(  PAS_ARCH = 1))

DEPLADAP=RECU_FONCTION(   NOEUD='N5',   NOM_CMP='DX',   NOM_CHAM='DEPL',
                            RESULTAT=DYNAADAP,  LIST_INST=LISTR8,
                             INTERP_NUME='LIN')

TEST_FONCTION(VALEUR=(_F(VALE_CALC=4.02227150991e-05,
                         VALE_REFE=4.0200000000000001E-05,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.089999999999999997,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=DEPLADAP,),
                      _F(VALE_CALC=3.99993980117e-06,
                         VALE_REFE=4.2200000000000003E-06,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.184,
                         PRECISION=0.059999999999999998,
                         FONCTION=DEPLADAP,),
                      _F(VALE_CALC=3.90101354205e-05,
                         VALE_REFE=3.8899999999999997E-05,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.27200000000000002,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=DEPLADAP,),
                      _F(VALE_CALC=5.76449208229e-06,
                         VALE_REFE=5.9800000000000003E-06,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.36499999999999999,
                         PRECISION=0.040000000000000001,
                         FONCTION=DEPLADAP,),
                      _F(VALE_CALC=3.74381380447e-05,
                         VALE_REFE=3.7299999999999999E-05,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.45500000000000002,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=DEPLADAP,),
                      _F(VALE_CALC=6.99070122052e-06,
                         VALE_REFE=7.1400000000000002E-06,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.54400000000000004,
                         PRECISION=0.029999999999999999,
                         FONCTION=DEPLADAP,),
                      _F(VALE_CALC=3.64517747171e-05,
                         VALE_REFE=3.6399999999999997E-05,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.63300000000000001,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=DEPLADAP,),
                      _F(VALE_CALC=7.9363794143e-06,
                         VALE_REFE=8.0700000000000007E-06,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.72399999999999998,
                         PRECISION=0.02,
                         FONCTION=DEPLADAP,),
                      _F(VALE_CALC=3.58609158432e-05,
                         VALE_REFE=3.5800000000000003E-05,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.81200000000000006,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=DEPLADAP,),
                      _F(VALE_CALC=8.66563166348e-06,
                         VALE_REFE=8.7600000000000008E-06,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.90400000000000003,
                         PRECISION=0.02,
                         FONCTION=DEPLADAP,),
                      _F(VALE_CALC=3.53104199932e-05,
                         VALE_REFE=3.5200000000000002E-05,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=0.99299999999999999,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=DEPLADAP,),
                      _F(VALE_CALC=-3.07853523601e-05,
                         VALE_REFE=-3.0800000000000003E-05,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=1.089,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=DEPLADAP,),
                      _F(VALE_CALC=3.02330277406e-05,
                         VALE_REFE=3.0199999999999999E-05,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=1.1819999999999999,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=DEPLADAP,),
                      _F(VALE_CALC=-2.88482610823e-05,
                         VALE_REFE=-2.8799999999999999E-05,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=1.2709999999999999,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=DEPLADAP,),
                      _F(VALE_CALC=2.79869851054e-05,
                         VALE_REFE=2.8E-05,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=1.3620000000000001,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=DEPLADAP,),
                      _F(VALE_CALC=-2.65760272692e-05,
                         VALE_REFE=-2.65E-05,
                         REFERENCE='NON_DEFINI',
                         VALE_PARA=1.452,
                         PRECISION=5.0000000000000001E-3,
                         FONCTION=DEPLADAP,),
                      ),
              )

FIN( )
#
