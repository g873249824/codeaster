# MODIF  DATE 19/12/2012   AUTEUR DESOZA T.DESOZA 
# TITRE CONTACT ENTRE 2 PLAQUES EN PARALLELE
# perf014c.para = tps_job 1200 mem_job 4096Mo liste_test P
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================

# RUN SUR 8 PROCS
# 32128 noeuds de contact

DEBUT(CODE=_F(NOM='PERF014C',
              NIV_PUB_WEB='INTERNET',),
      IGNORE_ALARM=('CALCULEL2_63',),
      MESURE_TEMPS=_F(NIVE_DETAIL=2),
);
# ALARME 'CALCULEL2_63' pour fondation rigide

MA=LIRE_MAILLAGE(FORMAT='MED',);

MA=DEFI_GROUP(reuse=MA,
              MAILLAGE=MA,
              CREA_GROUP_NO=_F(GROUP_MA=('ENCAST','PRESS',),),
              );

MO=AFFE_MODELE(MAILLAGE=MA,
               AFFE=_F(TOUT='OUI',
                       PHENOMENE='MECANIQUE',
                       MODELISATION='3D',),);

MAT=DEFI_MATERIAU(ELAS=_F(E=210000.0,
                          NU=0.3,),);

CHMAT=AFFE_MATERIAU(MAILLAGE=MA,
                    AFFE=_F(TOUT='OUI',
                            MATER=MAT,),);

PRESS=AFFE_CHAR_MECA(MODELE=MO,
                     PRES_REP=_F(GROUP_MA='PRESS',
                                 PRES=100.,),);

BLOQ=AFFE_CHAR_CINE(MODELE=MO,
                    MECA_IMPO=_F(GROUP_MA=('ENCAST','FONDATION'),
                                 DX=0.0,
                                 DY=0.0,
                                 DZ=0.0,),);

coul=0.0
cf=1.0E-5
CONT=DEFI_CONTACT(MODELE=MO,
                  FORMULATION='CONTINUE',
                  ALGO_RESO_GEOM='POINT_FIXE',
                  REAC_GEOM='SANS',
                  ZONE=(_F(GROUP_MA_ESCL='ESCLAVE1',
                           GROUP_MA_MAIT='FONDATION',
                           ),
                        _F(GROUP_MA_ESCL='ESCLAVE2',
                           GROUP_MA_MAIT='MAITRE2',
                           ),),
                  INFO=1,);

FONC=DEFI_FONCTION(NOM_PARA='INST',
                   VALE=(0.0,  0.0,
                         1.0,  1.0,),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT',);

L_INST=DEFI_LIST_REEL(DEBUT=0.0,
                      INTERVALLE=_F(JUSQU_A=1.0,
                                    NOMBRE=1,),);

RESU=STAT_NON_LINE(MODELE=MO,
                   CHAM_MATER=CHMAT,
                   EXCIT=(_F(CHARGE=PRESS,
                             FONC_MULT=FONC,),
                          _F(CHARGE=BLOQ,),
                          ),
                   CONTACT=CONT,
                   COMP_INCR=_F(RELATION='ELAS',
                                DEFORMATION='PETIT',),
                   INCREMENT=_F(LIST_INST=L_INST,),
                   NEWTON=_F(MATRICE='ELASTIQUE',
                             REAC_ITER=1,
                             ),
                   METHODE='NEWTON_KRYLOV',
                   SOLVEUR=_F(METHODE='PETSC',
                              PCENT_PIVOT=30,
                              REAC_PRECOND=30,
                              RESI_RELA=1.0E-6,
                   ),
                   CONVERGENCE=_F(ITER_GLOB_MAXI=50,),
                   #~ INFO=2,
                   #~ INFO_DBG=('FACTORISATION',),
                   );


RESU=CALC_CHAMP(reuse=RESU,
                RESULTAT=RESU,
                CRITERES=('SIEQ_NOEU',),
                FORCE=('FORC_NODA',),
                );

REACTION=POST_RELEVE_T(ACTION=(_F(OPERATION='EXTRACTION',
                                 INTITULE='ENCAST',
                                 RESULTAT=RESU,
                                 NOM_CHAM='FORC_NODA',
                                 INST=1.0,
                                 RESULTANTE='DZ',
                                 GROUP_NO='ENCAST',
                                 ),
                               _F(OPERATION='EXTRACTION',
                                 INTITULE='PRESS',
                                 RESULTAT=RESU,
                                 NOM_CHAM='FORC_NODA',
                                 INST=1.0,
                                 RESULTANTE='DZ',
                                 GROUP_NO='PRESS',
                                 ),
                              ),
                     );

DEPLMOY=POST_RELEVE_T(ACTION=_F(OPERATION='EXTREMA',
                                INTITULE='PRESS',
                                RESULTAT=RESU,
                                NOM_CHAM='DEPL',
                                NOM_CMP='DZ',
                                INST=1.0,
                                GROUP_NO='PRESS',
                                ),
                     );

IMPR_TABLE(TABLE=REACTION)
TEST_TABLE(TABLE=REACTION,
           FILTRE=_F(NOM_PARA='INTITULE',
                     VALE_K='ENCAST',),
           NOM_PARA='DZ',
           VALE_CALC=3.0123470125618E+05,
           );

IMPR_TABLE(TABLE=DEPLMOY)
TEST_TABLE(TABLE=DEPLMOY,
           FILTRE=_F(NOM_PARA='EXTREMA',
                     VALE_K='MIN',),
           NOM_PARA='VALE',
           VALE_CALC=-20.09472379298,
           );

IMPR_RESU(FORMAT='MED',
          UNITE=80,
          RESU=(_F(RESULTAT=RESU,
                   NOM_CHAM=('DEPL','VALE_CONT','SIEQ_NOEU','FORC_NODA',),),
                   ),);

FIN();
