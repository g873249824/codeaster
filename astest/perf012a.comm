# MODIF  DATE 20/04/2011   AUTEUR COURTOIS M.COURTOIS 
# TITRE PERFORMANCES DES CALCULS ELEMENTAIRES EN 3D
# perf012a.para = tps_job 600 mem_job 200Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2011  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================


DEBUT(CODE=_F( NOM = 'PERF012A',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='NON'))

RHO  = 7800.E0
EP   = 0.1

EY  = 2.1E+11
NU  = 0.3

SIGMY = 1.5E+08
EPSY  = 7.14286E-04
SIGMM = 3.0E+08
EPSM  = 1.00143E+00

nbpas=400
DT = 0.1875E-6
TMAX=(nbpas+1)*DT


INST1=DEFI_LIST_REEL(DEBUT=0.0, INTERVALLE=( _F(JUSQU_A = TMAX, NOMBRE = nbpas,)))
LARCH = DEFI_LIST_REEL(DEBUT=0.0, INTERVALLE=( _F(JUSQU_A = TMAX, NOMBRE = 1)))



PRE_GIBI();
MAIL=LIRE_MAILLAGE();


MOD1=AFFE_MODELE(MAILLAGE=MAIL,
                   AFFE=_F(TOUT='OUI',
                           PHENOMENE='MECANIQUE',
                           MODELISATION='3D',),);

CTRAC=DEFI_FONCTION(NOM_PARA='EPSI',
                    VALE=(EPSY,SIGMY,
                          EPSM,SIGMM,),
                          PROL_DROITE='EXCLU',);

MAT=DEFI_MATERIAU(ELAS=_F(E   = EY,
                          NU  = NU,
                          RHO = RHO,),
                  TRACTION=_F(SIGM=CTRAC,),);

CHMAT=AFFE_MATERIAU(MAILLAGE=MAIL, AFFE=_F(TOUT='OUI', MATER=MAT,),);

COND_L1=AFFE_CHAR_MECA(MODELE=MOD1,
                       PRES_REP = _F(GROUP_MA = 'FAC2', PRES = 2.E6
                       ) );

COND_L2=AFFE_CHAR_CINE(MODELE=MOD1,
                       MECA_IMPO=( _F(GROUP_NO='A1',   DX=0.0, DY=0.0, DZ=0.0, ),
                                   _F(GROUP_NO='A3',   DX=0.0,         DZ=0.0, ),
                                   _F(GROUP_MA='FAC1', DX=0.0, ),
                                 ),);


RESU1 = DYNA_NON_LINE( MODELE=MOD1, CHAM_MATER= CHMAT, MASS_DIAG='OUI',
                       COMP_INCR=_F(RELATION='VMIS_ISOT_TRAC',),
                       INCREMENT=_F( LIST_INST = INST1,  PRECISION =1.E-1),
                       EXCIT=( _F( CHARGE = COND_L1, ),
                               _F( CHARGE = COND_L2, ),
                             ),
                       SCHEMA_TEMPS=_F(SCHEMA='DIFF_CENT', FORMULATION='ACCELERATION',),
                       ARCHIVAGE = _F(LIST_INST=LARCH,),
                     );

# reference : calcul europlexus :
TEST_RESU(RESU=_F( RESULTAT = RESU1,NUME_ORDRE = 1,NOM_CHAM='DEPL', GROUP_NO='A2',NOM_CMP='DX',
                   VALE =   -3.931011E-6  , PRECISION=2.E-3, REFERENCE='AUTRE_ASTER') )
TEST_RESU(RESU=_F( RESULTAT = RESU1,NUME_ORDRE = 1,NOM_CHAM='DEPL', GROUP_NO='A4',NOM_CMP='DX',
                   VALE =   -3.931011E-6  , PRECISION=2.E-3, REFERENCE='AUTRE_ASTER') )

# reference : non-regression :
TEST_RESU(RESU=_F( RESULTAT = RESU1,NUME_ORDRE = 1,NOM_CHAM='DEPL', GROUP_NO='A2',NOM_CMP='DX',
                   VALE =   -3.9373049505058E-06  , PRECISION=1.E-9, REFERENCE='NON_REGRESSION') )
TEST_RESU(RESU=_F( RESULTAT = RESU1,NUME_ORDRE = 1,NOM_CHAM='DEPL', GROUP_NO='A4',NOM_CMP='DX',
                   VALE =   -3.9373049505058E-06  , PRECISION=1.E-9, REFERENCE='NON_REGRESSION') )

FIN();
"""
-----------------------------------------------------------------------------------------------------
Fichier de commande Europlexus realisant le meme calcul avec le meme maillage GIBI :
-----------------------------------------------------------------------------------------------------
SDLS115A_3D

*OPNF 11
*'/home/pellet/sdls115a.alt'

CASTEM mesh
*
TRID
*
***********************************
*        Dimensionnement          *
***********************************
*
DIME
 CUB8 35000 BR3D 1500 CL3D 3500
 ZONE 6
 NDDL 200000
 ECROU 50000000
 NGPZ 5
TERM

*
***********************************
*     Geometrie / modelisation    *
***********************************
*

GEOMETRIE
  CUB8 dalle
  CL3D fac1 fac2
TERM

*
***********************************
*  Materiaux                      *
***********************************
*
MATE
 FANT 0. LECT fac1 fac2 TERM
 VMIS ISOT RO 7800. YOUN 2.1E+11 NU 0.3 ELAS 1.5E+08
      TRAC 2 1.5E+08 7.14286E-04
             3.0E+08 1.00143E+00
    LECT dalle TERM

*
***********************************
*  Chargement / Conditions limites *
***********************************

CHAR 1
FACT 2  PRES COQUE 2.E6 LECT FAC2 TERM
TABL 2   0.      1.
         0.5     1.


LIAISONS
            BLOQ 1    LECT FAC1 TERM
            BLOQ 123  LECT A1   TERM
            BLOQ 13   LECT A3   TERM


************************************
******** ECRITURE DES RESULTATS*****
************************************

ECRITURE DEPL TFREQ 0.0001 NOPO NOEL

FICH ALIC TEMP TFREQ 0.000001
POIN LECT A1 A2 A3 A4 TERM
ELEM LECT 1 TERM


************************************
********OPTIONS*********************
************************************

OPTION PAS UTIL

************************************
*********** LANCEMENT CALCUL *******
************************************

CALCUL TINI 0 PASFIX 0.1875E-6 TFIN 0.75E-4 NMAX 1000000
* CALCUL TINI 0 PASFIX 0.1875E-6 TFIN 0.01875E-4 NMAX 1000000


SUIT
*Post-treatment
ECHO
*
OPNF FORM 17
'/home/pellet/europlex.pun'
RESU ALIC TEMP GARD PSCR
*
SORT GRAP
*
AXTE 1.0 'Time[s]'
*
COUR 1 'dx_A1'    DEPL COMP 1 NOEU LECT A1 TERM
COUR 2 'dx_A2'    DEPL COMP 1 NOEU LECT A2 TERM
COUR 3 'dx_A3'    DEPL COMP 1 NOEU LECT A3 TERM
COUR 4 'dx_A4'    DEPL COMP 1 NOEU LECT A4 TERM
TRAC 1 2 3 4 axes 1.0 'Ux(m)'
LIST 1 2 3 4 axes 1.0 'Ux(m)'

FIN
"""
