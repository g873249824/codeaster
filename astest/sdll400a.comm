# TITRE MODES PROPRES D'UNE POUTRE DROITE AVEC EXCENTRICITE
# ======================================================================
# COPYRIGHT (C) 1991 - 2015  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# DU CENTRE DE TORSION
#======================================================================
DEBUT(CODE=_F(NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

#
MA=LIRE_MAILLAGE(    )

MA=DEFI_GROUP( reuse=MA,   MAILLAGE=MA,
  CREA_GROUP_MA=_F(  NOM = 'TOUT', TOUT = 'OUI'))

#
MO=AFFE_MODELE(    MAILLAGE=MA,
                        AFFE=_F( TOUT = 'OUI',
                              PHENOMENE = 'MECANIQUE',
                              MODELISATION = 'POU_D_E')
                 )

#
MATR=DEFI_MATERIAU(    ELAS=_F( E = 2.07E11,
                                NU = 0.3E0,
                                RHO = 7850.E0)
                      )

#
CHMAT=AFFE_MATERIAU(    MAILLAGE=MA,
                              AFFE=_F( TOUT = 'OUI',
                                    MATER = MATR)
                      )

#
#--- DEFINITION DES CARACTERISTIQUES ELEMENTAIRES ---------------------
#
CAREL=AFFE_CARA_ELEM(    MODELE=MO,
                           POUTRE=_F( GROUP_MA = 'TOUT',
                                   SECTION = 'GENERALE',
                                   CARA = ('A',  'IY', 'IZ',
                                              'EY', 'EZ', 'JX',
                                             ),
                                   VALE = (6.117E-3, 5.022E-5, 5.022E-5,
                                              0.E0,     -0.2215E0, 1.28E-7,
                                              ))
                       )

#
#--- CONDITIONS APPUYE-APPUYE NOEUDS N1 N2 ET PROBLEME PLAN 2D --------
#
CHARG=AFFE_CHAR_MECA(      MODELE=MO,DDL_IMPO=(
                           _F( TOUT = 'OUI',
                                     DZ = 0.,
                                     DRY = 0.),
                                    _F( NOEUD = 'N1',
                                     DX = 0.),
                                    _F( NOEUD = 'N2',
                                     DX = 0.)),LIAISON_DDL=(
                        _F( NOEUD = ('N1', 'N1',),
                                     DDL = ('DY', 'DRX',),
                                     COEF_MULT = (1.,  -0.2215E0,),
                                     COEF_IMPO = 0.),
                        _F( NOEUD = ('N2', 'N2',),
                                     DDL = ('DY', 'DRX',),
                                     COEF_MULT = (1.,  -0.2215E0,),
                                     COEF_IMPO = 0.))
                       )

#
#--- MATRICE DE RAIDEUR  EXPRIMEE SUR L'AXE DE TORSION -----------------
#
MELK=CALC_MATR_ELEM(        MODELE=MO,
                              CHARGE=CHARG,
                              OPTION='RIGI_MECA',
                          CHAM_MATER=CHMAT,
                           CARA_ELEM=CAREL
                      )

#
#--- MATRICE DE MASSE EXPRIMEE SUR L'AXE DE TORSION -------------------
#
MELM=CALC_MATR_ELEM(        MODELE=MO,
                              CHARGE=CHARG,
                              OPTION='MASS_MECA',
                          CHAM_MATER=CHMAT,
                           CARA_ELEM=CAREL
                      )

#
#--- ASSEMBLAGE -------------------------------------------------------
#
NUMP=NUME_DDL(    MATR_RIGI=MELK )

#
MATASSK=ASSE_MATRICE(    MATR_ELEM=MELK,
                            NUME_DDL=NUMP
                       )

#
MATASSM=ASSE_MATRICE(    MATR_ELEM=MELM,
                            NUME_DDL=NUMP
                       )

#
#--- CALCUL DES MODES PROPRES, IL Y A UN MODE RIGIDE ------------------
#
MODES=CALC_MODES(MATR_RIGI=MATASSK,
                 OPTION='CENTRE',
                 CALC_FREQ=_F(NMAX_FREQ=10,
                              FREQ=10.,
                              ),
                 MATR_MASS=MATASSM,
                 SOLVEUR_MODAL=_F(MODE_RIGIDE='NON',
                                  METHODE='TRI_DIAG',
                                  ),
                 )


#
# TEST_RESU
#
# REFERENCE : CODE CAILLOU
#
# MODES PROPRES
#
TEST_RESU(RESU=_F(NUME_ORDRE=2,
                  PARA='FREQ',
                  RESULTAT=MODES,
                  VALE_REFE=3.79432,
                  VALE_CALC=3.7966934136972,
                  PRECISION=1.E-3,
                  REFERENCE='SOURCE_EXTERNE',
                  CRITERE='RELATIF',
                  ),
          )

#
TEST_RESU(RESU=_F(NUME_ORDRE=3,
                  PARA='FREQ',
                  RESULTAT=MODES,
                  VALE_CALC=7.451391005,
                  VALE_REFE=7.4334,
                  REFERENCE='SOURCE_EXTERNE',
                  CRITERE='RELATIF',
                  PRECISION=3.E-3,),
          )

#
TEST_RESU(RESU=_F(NUME_ORDRE=4,
                  PARA='FREQ',
                  RESULTAT=MODES,
                  VALE_CALC=11.510857283,
                  VALE_REFE=11.445,
                  REFERENCE='SOURCE_EXTERNE',
                  CRITERE='RELATIF',
                  PRECISION=6.E-3,),
          )

#
TEST_RESU(RESU=_F(NUME_ORDRE=5,
                  PARA='FREQ',
                  RESULTAT=MODES,
                  VALE_CALC=15.502793726,
                  VALE_REFE=15.3439,
                  REFERENCE='SOURCE_EXTERNE',
                  CRITERE='RELATIF',
                  PRECISION=0.010999999999999999,),
          )

#
TEST_RESU(RESU=_F(NUME_ORDRE=6,
                  PARA='FREQ',
                  RESULTAT=MODES,
                  VALE_CALC=19.806054061,
                  VALE_REFE=19.476600000000001,
                  REFERENCE='SOURCE_EXTERNE',
                  CRITERE='RELATIF',
                  PRECISION=0.017000000000000001,),
          )

#
#
# TEST_RESU
#
# REFERENCE : DYNAMIC ANALYSIS OF A CHANNEL BEAM DUE
#             TO A MOVING LOAD. J.
#             OF SOUND AND VIBRATION,
#            VOL. 188, N 3, PP 337-345, 1995.
#
# MODES PROPRES
#
TEST_RESU(RESU=_F(NUME_ORDRE=2,
                  PARA='FREQ',
                  RESULTAT=MODES,
                  VALE_REFE=3.7970,
                  VALE_CALC=3.7966934136972,
                  PRECISION=1.E-3,
                  REFERENCE='SOURCE_EXTERNE',
                  CRITERE='RELATIF',
                  ),
          )

#
TEST_RESU(RESU=_F(NUME_ORDRE=3,
                  PARA='FREQ',
                  RESULTAT=MODES,
                  VALE_CALC=7.451391005,
                  VALE_REFE=7.788,
                  REFERENCE='SOURCE_EXTERNE',
                  CRITERE='RELATIF',
                  PRECISION=0.043999999999999997,),
          )

#
TEST_RESU(RESU=_F(NUME_ORDRE=4,
                  PARA='FREQ',
                  RESULTAT=MODES,
                  VALE_CALC=11.510857283,
                  VALE_REFE=11.74,
                  REFERENCE='SOURCE_EXTERNE',
                  CRITERE='RELATIF',
                  PRECISION=0.02,),
          )

#
TEST_RESU(RESU=_F(NUME_ORDRE=5,
                  PARA='FREQ',
                  RESULTAT=MODES,
                  VALE_CALC=15.502793726,
                  VALE_REFE=15.68,
                  REFERENCE='SOURCE_EXTERNE',
                  CRITERE='RELATIF',
                  PRECISION=0.012,),
          )

#
TEST_RESU(RESU=_F(NUME_ORDRE=6,
                  PARA='FREQ',
                  RESULTAT=MODES,
                  VALE_CALC=19.806054061,
                  VALE_REFE=19.620000000000001,
                  REFERENCE='SOURCE_EXTERNE',
                  CRITERE='RELATIF',
                  PRECISION=1.E-2,),
          )

#
FIN( )
#
