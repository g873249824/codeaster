# MODIF  DATE 10/10/2012   AUTEUR COURTOIS M.COURTOIS 
# ======================================================================
# TITRE VALIDATION ARCHITECTURE PARTITIONNEMENT METIS ET CALCUL FETI
# feti007b.para = tps_job 180 mem_job 512Mo ncpus 1 liste_test SI
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# ======================================================================
# CUBE 3D
# PARALLELE: VALEUR CONSEILLEE 16 PROCS.
# ======================================================================
# RESPONSABLE BOITEAU O.BOITEAU

DEBUT(CODE=_F(NOM='FETI007B',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

MAIL1= LIRE_MAILLAGE(FORMAT='MED',)

MATERI=DEFI_MATERIAU(ELAS=_F(E = 180000., NU = 0.30, ALPHA = 15.E-6, RHO = 7700.,))

MODM=AFFE_MODELE(MAILLAGE=MAIL1,
                 AFFE=(_F(TOUT = 'OUI',PHENOMENE = 'MECANIQUE',
                          MODELISATION = '3D',   ),))

MODI_MAILLAGE(reuse =MAIL1,
              MAILLAGE=MAIL1,
              ORIE_PEAU_3D=(_F(GROUP_MA='PRESS',),),
              );

CH1=AFFE_CHAR_MECA(MODELE=MODM,
                   PRES_REP=(_F(GROUP_MA=('PRESS'),PRES = -20000.,),),)

CH2=AFFE_CHAR_MECA(MODELE=MODM,
                   DDL_IMPO=(_F( GROUP_NO=('DDLIMP'),DX=0.0,DY=0.0,DZ=0.0),),)


# Partitionnement avec verification de la connexite
SDFETI2 = DEFI_PART_FETI(
                MODELE=MODM,
                NB_PART=16,
                EXCIT=(_F(CHARGE=CH1),
                       _F(CHARGE=CH2),),
                METHODE='PMETIS',
                NOM_GROUP_MA='TOTO',
                TRAITER_BORDS='NON',
                CORRECTION_CONNEX='OUI',
                INFO=1,);

# Partitionnement avec gestion des mailles de bords
SDFETI = DEFI_PART_FETI(
                MODELE=MODM,
                NB_PART=16,
                EXCIT=(_F(CHARGE=CH1),
                       _F(CHARGE=CH2),),
                METHODE='KMETIS',
                NOM_GROUP_MA='SD',
                TRAITER_BORDS='OUI',
                CORRECTION_CONNEX='NON',
                INFO=1,);

CHMAT=AFFE_MATERIAU(MAILLAGE=MAIL1,
                    AFFE=_F(
                           MATER=MATERI,
                           TOUT='OUI',
                           ),
                    )

RESU=MECA_STATIQUE(MODELE=MODM,
                   CHAM_MATER=CHMAT,
                   SOLVEUR=_F(
                             METHODE='FETI',
                             PARTITION=SDFETI,
                             RESI_RELA=1.E-7,
                             NMAX_ITER=200,
                             VERIF_SDFETI='OUI',
                             TEST_CONTINU=1.E-8,
                             NB_REORTHO_DD=30,
                             TYPE_REORTHO_DD='GSM',
                             PRE_COND='LUMPE',
                             SCALING='MULT',
                             INFO_FETI='FFFFFFFFF',
                                  NPREC=5,
                             RENUM='METIS',
                         ),
                   EXCIT=(_F(CHARGE=CH1),
                          _F(CHARGE=CH2),),
                   INFO=1,
                        )

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   GROUP_NO='TEST1',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   VALE_CALC=-1.623142965764E-20,
                   CRITERE='ABSOLU',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST1',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   VALE_CALC=-5.1237211561755002E-21,
                   CRITERE='ABSOLU',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST1',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   VALE_CALC=-8.3330295250455998E-21,
                   CRITERE='ABSOLU',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST2',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   VALE_CALC=1.0179192829954001E-21,
                   CRITERE='ABSOLU',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST2',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   VALE_CALC=-5.9520580033708995E-20,
                   CRITERE='ABSOLU',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST2',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   VALE_CALC=4.6064426733403001E-21,
                   CRITERE='ABSOLU',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST3',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   VALE_CALC=-9.3118583696395002E-20,
                   CRITERE='ABSOLU',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST3',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   VALE_CALC=-1.2652046411437E-20,
                   CRITERE='ABSOLU',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST3',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   VALE_CALC=-4.1696957771226999E-20,
                   CRITERE='ABSOLU',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST4',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   VALE_CALC=0.012326177196438,
                   TOLE_MACHINE=1.E-3,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST4',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   VALE_CALC=6.9542419895400994E-05,
                   TOLE_MACHINE=1.E-3,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST4',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   VALE_CALC=4.8973908403689998E-3,
                   TOLE_MACHINE=1.E-3,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST5',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   VALE_CALC=0.012314055179705999,
                   TOLE_MACHINE=1.E-3,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST5',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   VALE_CALC=-0.013815146690499,
                   TOLE_MACHINE=1.E-3,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST5',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   VALE_CALC=8.8983582598146007E-3,
                   TOLE_MACHINE=1.E-3,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST6',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   VALE_CALC=0.022463712985284,
                   TOLE_MACHINE=1.E-3,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST6',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   VALE_CALC=-9.4085255895523991E-3,
                   TOLE_MACHINE=1.E-3,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   GROUP_NO='TEST6',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   VALE_CALC=0.010988018952581001,
                   TOLE_MACHINE=1.E-3,
                   CRITERE='RELATIF',
                   ),
                ),
          )

FIN();
