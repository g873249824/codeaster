# MODIF  DATE 19/07/2005   AUTEUR ASSIRE A.ASSIRE 
# ======================================================================
# TITRE VALIDATION ARCHITECTURE PARTITIONNEMENT METIS ET CALCUL FETI 
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2005  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
# ======================================================================
# CUBE 3D
# ======================================================================

DEBUT(CODE=_F(NOM ='FETI007B',NIV_PUB_WEB='INTERNET'))

MAIL1= LIRE_MAILLAGE()

MATERI=DEFI_MATERIAU(ELAS=_F(E = 180000., NU = 0.30, ALPHA = 15.E-6, RHO = 7700.,))

MODM=AFFE_MODELE(MAILLAGE=MAIL1,
                 AFFE=(_F(TOUT = 'OUI',PHENOMENE = 'MECANIQUE',  
                          MODELISATION = '3D',   ),))

MODI_MAILLAGE(reuse =MAIL1,
              MAILLAGE=MAIL1,
              ORIE_PEAU_3D=(_F(GROUP_MA='PRESS',),),
              MODELE=MODM,);
                   
CH1=AFFE_CHAR_MECA(MODELE=MODM,
                   PRES_REP=(_F(GROUP_MA=('PRESS'),PRES = -20000.,),),)

CH2=AFFE_CHAR_MECA(MODELE=MODM,
                   DDL_IMPO=(_F( GROUP_NO=('DDLIMP'),DX=0.0,DY=0.0,DZ=0.0),),)                   


# Partitionnement avec gestion des mailles de bords
SDFETI2 = DEFI_PART_FETI(
                MODELE=MODM,
                NB_PART=16,
                EXCIT=(_F(CHARGE=CH1),
                       _F(CHARGE=CH2),),
                METHODE='PMETIS',
                NOM_GROUP_MA='TOTO',
                TRAITER_BORDS='NON',
                VERI_CONNEX='OUI',
                INFO=1,);

# Partitionnement avec verification de la connexite
SDFETI = DEFI_PART_FETI(
                MODELE=MODM,
                NB_PART=16,
                EXCIT=(_F(CHARGE=CH1),
                       _F(CHARGE=CH2),),
                METHODE='KMETIS',
                NOM_GROUP_MA='SD',
                TRAITER_BORDS='OUI',
                VERI_CONNEX='NON',
                INFO=1,);

CHMAT=AFFE_MATERIAU(MAILLAGE=MAIL1,
                    AFFE=_F(
                           MATER=MATERI,
                           TOUT='OUI',
                           ),
                    )       


RESU=MECA_STATIQUE(MODELE=MODM,
                   CHAM_MATER=CHMAT,
                   SOLVEUR=_F(
                             METHODE='FETI',
                             PARTITION=SDFETI,
                             RESI_RELA=1.E-7,
                             NMAX_ITER=200,
                             VERIF_SDFETI='OUI',
                             TEST_CONTINU=1.E-8,
                             NB_REORTHO_DD=30,
                             TYPE_REORTHO_DD='GSM',
                             PRE_COND='LUMPE',
                             SCALING='MULT',
                             INFO_FETI='FFFFFFFFF',
                                  NPREC=5,
                             RENUM='METIS',
                            STOCKAGE_GI='CAL',
                         ),
                   EXCIT=(_F(CHARGE=CH1),
                          _F(CHARGE=CH2),),
                   INFO=2,
                        )
                        
TEST_RESU(RESU=(
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST1',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DX',    VALE = -1.6231429657640E-20, REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST1',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DY',    VALE =-5.1237211561755E-21, REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST1',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DZ',    VALE = -8.3330295250456E-21, REFERENCE = 'NON_REGRESSION' ),          
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST2',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DX',    VALE =1.0179192829954E-21, REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST2',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DY',    VALE = -5.9520580033709E-20, REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST2',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DZ',    VALE = 4.6064426733403E-21, REFERENCE = 'NON_REGRESSION' ),          
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST3',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DX',    VALE = -9.3118583696395E-20, REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST3',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DY',    VALE =-1.2652046411437E-20, REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST3',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DZ',    VALE = -4.1696957771227E-20, REFERENCE = 'NON_REGRESSION' ),          
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST4',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
          NOM_CMP = 'DX',    VALE = 1.2326177196438E-02, REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST4',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
          NOM_CMP = 'DY',    VALE = 6.9542419895401E-05, REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST4',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
          NOM_CMP = 'DZ',    VALE =  4.8973908403690E-03, REFERENCE = 'NON_REGRESSION' ),          
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST5',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
          NOM_CMP = 'DX',    VALE = 1.2314055179706E-02, REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST5',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
          NOM_CMP = 'DY',    VALE =-1.3815146690499E-02, REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST5',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
         NOM_CMP = 'DZ',    VALE = 8.8983582598146E-03, REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST6',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
          NOM_CMP = 'DX',    VALE = 2.2463712985284E-02, REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST6',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
          NOM_CMP = 'DY',    VALE =-9.4085255895524E-03, REFERENCE = 'NON_REGRESSION' ),
     _F(  RESULTAT = RESU,   NUME_ORDRE = 1,
          NOM_CHAM = 'DEPL',   GROUP_NO = 'TEST6',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
          NOM_CMP = 'DZ',    VALE = 1.0988018952581E-02, REFERENCE = 'NON_REGRESSION' ),                  
          ));
               
FIN();
