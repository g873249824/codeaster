# MODIF  DATE 26/11/2002   AUTEUR MCOURTOI M.COURTOIS 
# CE CAS TEST AVAIT INITIALEMENT POUR REFERENCE LE NUMERO :
# SSNV129B
# TITRE ESSAI DE TRACTION-CISAILLEMENT EN CONTRAINTES PLANES(OHNO)
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2002  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
#----------------------------------------------------------------------
#    CAS TEST  PLAQUE CARREE EN TRACTION CISAILLEMENT PROPORTIONNEL
#                   ESSAI AVEC CHARGE EN RAMPE A  N
#----------------------------------------------------------------------
# 
#
#               Y       A                          H = 1 MM (EPAISSEUR)
#               I<----------->                     A = 1 MM (COTE)
#                                                          2
#                                                  S = 1 MM (AIRE)
#                 NO4         +  NO3
#               O-------------OB
#           H  /+             I                F(T)
#             / I             I                 A
#               I NO6         I           160 N I____
#               I-------------I  NO5            I   /I
#               I             I                 I  / I
#               I             I                 I /  I
#               I  NO1        I  NO2            I/   I
#             ++O-------------OB     - X        O---------> T
#               +             B                       1S
#
#
#----------------------------------------------------------------------
#


DEBUT(     CODE=_F( NOM = 'SSNV107B',NIV_PUB_WEB='INTERNET') )

CARRE=LIRE_MAILLAGE(     )

CPLAN=AFFE_MODELE(             MAILLAGE=CARRE,
                                    AFFE=_F(   PHENOMENE = 'MECANIQUE',
                                            MODELISATION = 'C_PLAN',
                                            TOUT = 'OUI'))

R_I_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     151.,
                                 1000.,  151.,      ))

R_0_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     87.,
                                 1000.,  87.,      ))

B_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     13.2,
                                 1000.,  13.2,     ))

PHI_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     0.69,
                                 1000.,  0.69,       ))

A1_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     114428.40,
                                 1000.,  114428.40,   ))

A2_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     13551.68,
                                 1000., 13551.68,   ))

A3_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     34049.96,
                                 1000.,  34049.96,   ))

A4_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     7396.90,
                                 1000., 7396.90,   ))

A5_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     7396.90,
                                 1000., 7396.90,   ))

GAMMA1_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     1296.58,
                                 1000.,  1296.58,  ))

GAMMA2_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     322.24,
                                 1000.,  322.24,  ))

GAMMA3_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     6401.20,
                                 1000.,  6401.20,  ))

GAMMA4_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     866.74,
                                 1000.,  866.74,  ))

GAMMA5_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     866.74,
                                 1000.,  866.74,  ))

M1_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,       30.,
                                 1000.,    30.,   ))

M2_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     4.43,
                                 1000.,  4.43,   ))

M3_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     0.27,
                                 1000.,  0.27,   ))

M4_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     6.68,
                                 1000.,  6.68,   ))

M5_T=DEFI_FONCTION(      NOM_PARA='TEMP',
                            PROL_DROITE='CONSTANT',
                           PROL_GAUCHE='CONSTANT',
                          VALE=( 0.,     6.68,
                                 1000.,  6.68,   ))

ACIER=DEFI_MATERIAU(               INFO=2,
                                    ELAS=_F(   E = 168500.,
                                            NU = .3,      
                                            ALPHA = 0.),

                             OHNO_FO=_F(   R_I = R_I_T,
                                            R_0 = R_0_T,
                                            B = B_T,
                                            PHI = PHI_T,
                                            A1 = A1_T,
                                            A2 = A2_T,
                                            A3 = A3_T,
                                            A4 = A4_T,
                                            A5 = A5_T,
                                            GAMMA1 = GAMMA1_T,
                                            GAMMA2 = GAMMA2_T,
                                            GAMMA3 = GAMMA3_T,
                                            GAMMA4 = GAMMA4_T,
                                            GAMMA5 = GAMMA5_T,
                                            M1 = M1_T,
                                            M2 = M2_T,
                                            M3 = M3_T,
                                            M4 = M4_T,
                                            M5 = M5_T))

MAT=AFFE_MATERIAU(            MAILLAGE=CARRE,
                                    AFFE=_F(  MAILLE = ('MA1','MA2',),
                                           MATER = ACIER,
                                           TEMP_REF = 20.))

#


LINST=DEFI_LIST_REEL(              DEBUT=0.,
                              INTERVALLE=_F( JUSQU_A = 2., NOMBRE = 10))

TR_CS=AFFE_CHAR_MECA(             MODELE=CPLAN,DDL_IMPO=(
                 _F(  NOEUD = ('NO3','NO5',), DX = 0.),
                 _F(  NOEUD = 'NO2',  DX = 0., DY = 0.)),FORCE_NODALE=(
             _F(  NOEUD = 'NO1', FX = -1.5,   FY = -0.5),
             _F(  NOEUD = 'NO3',            FY = 0.5),
             _F(  NOEUD = 'NO4', FX = 0.5,   FY = -0.5),
             _F(  NOEUD = 'NO5',            FY = 1.0),
             _F(  NOEUD = 'NO6', FX = -1.0,   FY = -1.0))
                          )

COEF=DEFI_FONCTION(      NOM_PARA='INST',
                            PROL_DROITE='LINEAIRE',
                           PROL_GAUCHE='LINEAIRE',
                          VALE=( 0.,  0.,
                                 2.,  80.,     ))

SOLNL=STAT_NON_LINE( 
                            MODELE=CPLAN,
                        CHAM_MATER=MAT,
                             EXCIT=_F( 
                CHARGE = TR_CS,
                FONC_MULT = COEF,
                TYPE_CHARGE = 'FIXE_CSTE'),
                         COMP_INCR=_F( 
                RELATION = 'OHNO',
                DEFORMATION = 'PETIT',
                TOUT = 'OUI'),
                         INCREMENT=_F( 
                LIST_INST = LINST),
                            NEWTON=_F( 
                MATRICE = 'TANGENTE',
                REAC_INCR = 1,
                REAC_ITER = 5),
                       CONVERGENCE=_F( 
                ITER_GLOB_MAXI = 40,
                RESI_GLOB_RELA = 1.E-4,
                ITER_INTE_MAXI = 40,
                ITER_INTE_PAS = 5,
                TYPE_MATR_COMP = 'TANG_VIT'),
                     RECH_LINEAIRE=_F( 
                ITER_LINE_MAXI = 3,
                RESI_LINE_RELA = 1.E-3)
              )

SOLNL=CALC_ELEM( reuse=SOLNL,
                            OPTION=(
                  'SIEF_ELNO_ELGA',  'VARI_ELNO_ELGA',),
                          RESULTAT=SOLNL,
                            MODELE=CPLAN,
                        CHAM_MATER=MAT
              )

SOLNL=CALC_ELEM( reuse=SOLNL,               MODELE=CPLAN,
                               CHAM_MATER=MAT,
                                    OPTION='EPSI_ELNO_DEPL',
                                  RESULTAT=SOLNL )

#
# 
#
TEST_RESU(RESU=(
  _F(  RESULTAT = SOLNL,  NOM_CHAM = 'SIEF_ELNO_ELGA',  NUME_ORDRE = 10,
                 MAILLE = 'MA1',  NOEUD = 'NO1',  NOM_CMP = 'SIXX',  VALE = 160.),

  _F(  RESULTAT = SOLNL,  NOM_CHAM = 'SIEF_ELNO_ELGA',  NUME_ORDRE = 10,
                MAILLE = 'MA1',  NOEUD = 'NO1',  NOM_CMP = 'SIXY',  VALE = 160.),

  _F(  RESULTAT = SOLNL,  NOM_CHAM = 'EPSI_ELNO_DEPL',  NUME_ORDRE = 10,
              MAILLE = 'MA1',  NOEUD = 'NO1',  NOM_CMP = 'EPXX',  VALE = 4.09118E-2),

 _F(  RESULTAT = SOLNL,  NOM_CHAM = 'EPSI_ELNO_DEPL',  NUME_ORDRE = 10,
              MAILLE = 'MA1',  NOEUD = 'NO1',  NOM_CMP = 'EPXY',  VALE = 6.11807E-2),

  _F(  RESULTAT = SOLNL,  NOM_CHAM = 'VARI_ELNO_ELGA',  NUME_ORDRE = 10,
                 MAILLE = 'MA1',  NOEUD = 'NO1',
                 NOM_CMP = 'V21', VALE = 7.99280E-02))
)

FIN( )
#  
