# MODIF  DATE 18/03/2013   AUTEUR IDOUX L.IDOUX 
#-----------------------------------------
#  DATE   : 03/01/13
#  AUTEUR : F. LEBOUVIER (DeltaCAD)
#  TITRE  : Validation de la commande MODI_REPERE 
# zzzz333a.para = tps_job 60 mem_job 512Mo ncpus 1 liste_test R
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2013  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
#
#     MOT-CLES : REPERE = 'COQUE_INTR_UTIL' 
#                REPERE = 'COQUE_UTIL_INTR' 
#
# MODELISATIONS : 
#    - DKT,  Q4GG
#
# Mailles QUAD4 et TRIA3
#-----------------------------------------

DEBUT(CODE=_F(NOM='ZZZZ333A',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'));

# Dimensions de la plaque
Longueur  = 2.5
Largeur   = 0.8
Epaisseur = 0.1

# Materiau
young = 2.1E11
nu    = 0.

# Rotation de la plaque autour de l'axe OZ
Theta = 35.             # Degre
Angle = Theta/180.*pi   # Radian

# Repere de calcul des efforts
alpha = 35.
beta  =  0.

# Efforts apppliques
eff_Trac = 1.00e6       # Effort de traction
eff_Flex = 0.25e6       # Force de flexion


# Preparation des commandes
# -------------------------
# AFFE_CARA_ELEM => COQUE
coque              =   {'GROUP_MA': 'Plaque',}
coque ['EPAIS']    =   Epaisseur
coque ['ANGL_REP'] =   (alpha,beta)
d_coque = {}
d_coque['COQUE']   =  _F(**coque) 

# AFFE_CHAR_CINE => MECA_IMPO
meca_impo                  =   {'GROUP_MA': 'Encas',}
meca_impo ['DX']           =   0.
meca_impo ['DY']           =   0.
meca_impo ['DZ']           =   0.
meca_impo ['DRX']          =   0.
meca_impo ['DRY']          =   0.
meca_impo ['DRZ']          =   0.
d_meca_impo = {}
d_meca_impo['MECA_IMPO']   =  _F(**meca_impo) 

# AFFE_CHAR_MECA => FORCE_ARETE
force_arete                  =   {'GROUP_MA': 'Effort',}
force_arete ['FX']           =   eff_Trac/Largeur * cos(Angle)
force_arete ['FY']           =   eff_Trac/Largeur * sin(Angle)
force_arete ['FZ']           =  -eff_Flex/Largeur 
d_force_arete = {}
d_force_arete['FORCE_ARETE'] =  _F(**force_arete) 



mail=LIRE_MAILLAGE(FORMAT='MED');

acier=DEFI_MATERIAU(ELAS=_F(E=young,NU=nu))

chmat=AFFE_MATERIAU(MAILLAGE=mail,
                    AFFE=_F(TOUT='OUI',
                            MATER=acier,),);

#-----------------------------------------------------------------
#
#  Modelisation DKT (QUAD4 TRIA3)
#
#  EFGE_**** : NXX  NYY  NXY  MXX  MYY  MXY  QX  QY
#
#-----------------------------------------------------------------

mod_DKT=AFFE_MODELE(MAILLAGE=mail,
                AFFE=_F(TOUT='OUI',
                        PHENOMENE='MECANIQUE',
                        MODELISATION='DKT',),);

car_DKT = AFFE_CARA_ELEM(MODELE=mod_DKT, **d_coque)
cli_DKT = AFFE_CHAR_CINE(MODELE=mod_DKT, **d_meca_impo)
for_DKT = AFFE_CHAR_MECA(MODELE=mod_DKT, **d_force_arete)

sta_DKT = MECA_STATIQUE(MODELE=mod_DKT,
                        CHAM_MATER=chmat,
                        CARA_ELEM=car_DKT,
                        EXCIT=(_F(CHARGE=cli_DKT,),
                               _F(CHARGE=for_DKT,),),);
 
sta_DKT=CALC_CHAMP(reuse    = sta_DKT,
                   RESULTAT = sta_DKT,
                   CONTRAINTE=('EFGE_ELNO','EFGE_ELGA','SIEF_ELGA'));

CHAMELG1=CALC_CHAM_ELEM(MODELE=mod_DKT,
                       CARA_ELEM=car_DKT,
                       TOUT='OUI',
                       OPTION='COOR_ELGA',);

# IMPR_RESU(RESU=_F(CHAM_GD=CHAMELG1));


#---------------------------------------------------------
# -> EFGE_ELNO : REPERE UTILISATEUR
#
#    On teste les efforts generalises dans le repere 
#    utilisateur 
#---------------------------------------------------------   

# MAILLE QUAD4

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_DKT,
                   VALE_CALC=1.25e6,
                   VALE_REFE=1.25e6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-6,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_DKT,
                   VALE_CALC=-5.4566823923362E-25,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_DKT,
                   VALE_CALC=1.9651096613664E-08,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_DKT,
                   VALE_CALC=-7.8132228773133E+05,
                   VALE_REFE=-7.8125E+05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-4,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_DKT,
                   VALE_CALC=-1.1092028311965E-15,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_DKT,
                   VALE_CALC=39.963243658045,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=50.,),
            ))

# MAILLE TRIA3

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_DKT,
                   VALE_CALC=1.25e6,
                   VALE_REFE=1.25e6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-6,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_DKT,
                   VALE_CALC=-8.0635817730956E-11,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-6,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_DKT,
                   VALE_CALC=2.0256265997887E-08,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-6,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_DKT,
                   VALE_CALC=-7.8480241099504E+05,
                   VALE_REFE=-7.8125E+05,
                   CRITERE='RELATIF',
                   PRECISION=5.E-2,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_DKT,
                   VALE_CALC=2.7273472369416E-10,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-6,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_DKT,
                   VALE_CALC=258.34735673043,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=300.,),
            ))

#---------------------------------------------------------
# -> EFGE_ELNO : PASSAGE REPERE UTILISATEUR -> INTRINSEQUE
#
#       REPERE='COQUE_UTIL_INTR',
#---------------------------------------------------------   

INT_DKT=MODI_REPERE(RESULTAT=sta_DKT,
                    REPERE='COQUE_UTIL_INTR',
                    MODI_CHAM=_F(TYPE_CHAM = 'COQUE_GENE', 
                                 NOM_CHAM  = 'EFGE_ELNO',
                                 NOM_CMP   = ('NXX','NYY','NXY',
                                              'MXX','MYY','MXY',
                                              'QX','QY')))


# MAILLE QUAD4
# Repere utilisateur <=> repere intrinseque

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_DKT,
                   VALE_CALC=1.25e6,
                   VALE_REFE=1.25e6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-6,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_DKT,
                   VALE_CALC=1.9401722339418E-23,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-6,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_DKT,
                   VALE_CALC=2.0275597065016E-08,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-6,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_DKT,
                   VALE_CALC=-7.8132228773133E+05,
                   VALE_REFE=-7.8125E+05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-2,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_DKT,
                   VALE_CALC=3.8822099091688E-14,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-6,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='NON_DEFINI',
                   RESULTAT=INT_DKT,
                   VALE_CALC=39.963243657654,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=50,),
            ))

# MAILLE TRIA3
# Repere intrinseque = alpha+48.2397

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_DKT,
                   VALE_CALC=5.544712562101E+05,
                   VALE_REFE=5.544713e5,
                   CRITERE='RELATIF',
                   PRECISION=1.E-4,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_DKT,
                   VALE_CALC=6.9552874379E+05,
                   VALE_REFE=6.955287e5,
                   CRITERE='RELATIF',
                   PRECISION=1.E-4,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_DKT,
                   VALE_CALC=6.2100780695533E+05,
                   VALE_REFE=6.210078e5,
                   CRITERE='RELATIF',
                   PRECISION=1.E-4,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_DKT,
                   VALE_CALC=-3.4837700012159E+05,
                   VALE_REFE=-3.46544E+05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-2,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_DKT,
                   VALE_CALC=-4.3642541087345E+05,
                   VALE_REFE=-4.347055E+05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-2,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_DKT,
                   VALE_CALC=-3.8992389277945E+05,
                   VALE_REFE=-3.881299e5,
                   CRITERE='RELATIF',
                   PRECISION=1.E-2,),
            ))

#---------------------------------------------------------
# -> EFGE_ELNO : PASSAGE REPERE INTRINSEQUE -> UTILISATEUR
#
#       REPERE='COQUE_INTR_UTIL',
#---------------------------------------------------------   

UTI_DKT=MODI_REPERE(RESULTAT=INT_DKT,
                    REPERE='COQUE_INTR_UTIL',
                    MODI_CHAM=_F(TYPE_CHAM = 'COQUE_GENE', 
                                 NOM_CHAM  = 'EFGE_ELNO',
                                 NOM_CMP   = ('NXX','NYY','NXY',
                                              'MXX','MYY','MXY',
                                              'QX','QY')))


# MAILLE QUAD4


TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_DKT,
                   VALE_CALC=1.25e6,
                   VALE_REFE=1.25e6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-4,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_DKT,
                   VALE_CALC=-5.4566823923362E-25,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_DKT,
                   VALE_CALC=1.9651096613664E-08,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_DKT,
                   VALE_CALC=-7.8132228773133E+05,
                   VALE_REFE=-7.8125E+05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-4,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_DKT,
                   VALE_CALC=-1.1092028311965E-15,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='NON_DEFINI',
                   RESULTAT=UTI_DKT,
                   VALE_CALC=39.963243658045,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=50.,),
            ))

# MAILLE TRIA3

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_DKT,
                   VALE_CALC=1.25e6,
                   VALE_REFE=1.25e6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-6,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_DKT,
                   VALE_CALC=-1.5817025785686E-10,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-6,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_DKT,
                   VALE_CALC=2.0256265997887E-08,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-1,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_DKT,
                   VALE_CALC=-7.8480241099504E+05,
                   VALE_REFE=-7.8125E+05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-1,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_DKT,
                   VALE_CALC=2.6807356334757E-10,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-6,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='NON_DEFINI',
                   RESULTAT=UTI_DKT,
                   VALE_CALC=258.34735673049,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=300.,),
            ))



#-----------------------------------------------------------------
#
#  Modelisation Q4GG (QUAD4 TRIA3)
#
#  EFGE_**** : NXX  NYY  NXY  MXX  MYY  MXY  QX  QY
#
#-----------------------------------------------------------------
mod_Q4GG=AFFE_MODELE(MAILLAGE=mail,
                AFFE=_F(TOUT='OUI',
                        PHENOMENE='MECANIQUE',
                        MODELISATION='Q4GG',),);

car_Q4GG = AFFE_CARA_ELEM(MODELE=mod_Q4GG, **d_coque)
cli_Q4GG = AFFE_CHAR_CINE(MODELE=mod_Q4GG, **d_meca_impo)
for_Q4GG = AFFE_CHAR_MECA(MODELE=mod_Q4GG, **d_force_arete)

sta_Q4GG = MECA_STATIQUE(MODELE=mod_Q4GG,
                        CHAM_MATER=chmat,
                        CARA_ELEM=car_Q4GG,
                        EXCIT=(_F(CHARGE=cli_Q4GG,),
                               _F(CHARGE=for_Q4GG,),),);
 
sta_Q4GG=CALC_CHAMP(reuse    = sta_Q4GG,
                   RESULTAT = sta_Q4GG,
                   CONTRAINTE=('EFGE_ELNO','EFGE_ELGA','SIEF_ELGA'));

CHAMELG2=CALC_CHAM_ELEM(MODELE=mod_Q4GG,
                       CARA_ELEM=car_Q4GG,
                       TOUT='OUI',
                       OPTION='COOR_ELGA',);

#IMPR_RESU(RESU=_F(CHAM_GD=CHAMELG2));

IMPR_RESU(RESU=_F(RESULTAT=sta_Q4GG,NOM_CHAM='DEPL'));

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP = 'DZ',
                   NOEUD = 'N2',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-9.29772024807816E-02,
                   VALE_REFE=-0.0930059,
                   CRITERE='RELATIF',
                   PRECISION=5.E-4,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP = 'DZ',
                   NOEUD = 'N3',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-9.29911174041869E-02,
                   VALE_REFE=-0.0930059,
                   CRITERE='RELATIF',
                   PRECISION=5.E-4,)))

#---------------------------------------------------------
# -> EFGE_ELNO : REPERE UTILISATEUR
#
#    On teste les efforts generalises dans le repere 
#    utilisateur 
#---------------------------------------------------------   

# MAILLE QUAD4

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=1.25e6,
                   VALE_REFE=1.25e6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-4,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-5.4566823923362E-25,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=1.9651096613664E-08,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-7.5334954869747E+05,
                   VALE_REFE=-7.8125E+05,
                   CRITERE='RELATIF',
                   PRECISION=5.E-2,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=1.6575152406608E-17,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-0.59718280161085,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.,),
            ))

# MAILLE TRIA3

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=1.25e6,
                   VALE_REFE=1.25e6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-4,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-8.0635817730956E-11,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=2.0256265997887E-08,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-7.5334940282249E+05,
                   VALE_REFE=-7.8125E+05,
                   CRITERE='RELATIF',
                   PRECISION=5.E-2,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-3.4115543723345E-11,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=0.52770799346035,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.,),
            ))

#---------------------------------------------------------
# -> EFGE_ELNO : PASSAGE REPERE UTILISATEUR -> INTRINSEQUE
#
#       REPERE='COQUE_UTIL_INTR',
#---------------------------------------------------------   

INT_Q4GG=MODI_REPERE(RESULTAT=sta_Q4GG,
                    REPERE='COQUE_UTIL_INTR',
                    MODI_CHAM=_F(TYPE_CHAM = 'COQUE_GENE', 
                                 NOM_CHAM  = 'EFGE_ELNO',
                                 NOM_CMP   = ('NXX','NYY','NXY',
                                              'MXX','MYY','MXY',
                                              'QX','QY')))


# MAILLE QUAD4
# Repere utilisateur <=> repere intrinseque

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_Q4GG,
                   VALE_CALC=1.25e6,
                   VALE_REFE=1.25e6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-4,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_Q4GG,
                   VALE_CALC=1.9401722339418E-23,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_Q4GG,
                   VALE_CALC=2.0275597065016E-08,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_Q4GG,
                   VALE_CALC=-7.5334954869747E+05,
                   VALE_REFE=-7.8125E+05,
                   CRITERE='RELATIF',
                   PRECISION=5.E-2,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_Q4GG,
                   VALE_CALC=-5.801303344141E-16,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-4,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_Q4GG,
                   VALE_CALC=-0.59718280198722,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.,),
            ))

# MAILLE TRIA3
# Repere intrinseque = alpha+48.2397

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_Q4GG,
                   VALE_CALC=5.544712562101E+05,
                   VALE_REFE=5.544713e5,
                   CRITERE='RELATIF',
                   PRECISION=1.E-4,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_Q4GG,
                   VALE_CALC=6.9552874379E+05,
                   VALE_REFE=6.955287e5,
                   CRITERE='RELATIF',
                   PRECISION=1.E-4,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_Q4GG,
                   VALE_CALC=6.2100780695533E+05,
                   VALE_REFE=6.210078e5,
                   CRITERE='RELATIF',
                   PRECISION=1.E-4,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_Q4GG,
                   VALE_CALC=-3.3416899613573E+05,
                   VALE_REFE=-3.46544E+05,
                   CRITERE='RELATIF',
                   PRECISION=5.E-2,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_Q4GG,
                   VALE_CALC=-4.1918040668676E+05,
                   VALE_REFE=-4.347055E+05,
                   CRITERE='RELATIF',
                   PRECISION=5.E-2,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=INT_Q4GG,
                   VALE_CALC=-3.7426874796402E+05,
                   VALE_REFE=-3.881299e5,
                   CRITERE='RELATIF',
                   PRECISION=5.E-2,),
            ))

#---------------------------------------------------------
# -> EFGE_ELNO : PASSAGE REPERE INTRINSEQUE -> UTILISATEUR
#
#       REPERE='COQUE_INTR_UTIL',
#---------------------------------------------------------   

UTI_Q4GG=MODI_REPERE(RESULTAT=INT_Q4GG,
                    REPERE='COQUE_INTR_UTIL',
                    MODI_CHAM=_F(TYPE_CHAM = 'COQUE_GENE', 
                                 NOM_CHAM  = 'EFGE_ELNO',
                                 NOM_CMP   = ('NXX','NYY','NXY',
                                              'MXX','MYY','MXY',
                                              'QX','QY')))


# MAILLE QUAD4


TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_Q4GG,
                   VALE_CALC=1.25e6,
                   VALE_REFE=1.25e6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-2,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_Q4GG,
                   VALE_CALC=-5.4566823923362E-25,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-2,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_Q4GG,
                   VALE_CALC=1.9651096613664E-08,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU'),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_Q4GG,
                   VALE_CALC=-7.5334954869747E+05,
                   VALE_REFE=-7.8125E+05,
                   CRITERE='RELATIF',
                   PRECISION=5.E-2,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_Q4GG,
                   VALE_CALC=1.6575152406608E-17,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-2,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M119',
                   NOEUD = 'N1',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_Q4GG,
                   VALE_CALC=-0.59718280161085,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.,),
            ))

# MAILLE TRIA3

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_Q4GG,
                   VALE_CALC=1.25e6,
                   VALE_REFE=1.25e6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-2,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_Q4GG,
                   VALE_CALC=-1.5817025785686E-10,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-2,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_Q4GG,
                   VALE_CALC=2.0256265997887E-08,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU'),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_Q4GG,
                   VALE_CALC=-7.5334940282249E+05,
                   VALE_REFE=-7.8125E+05,
                   CRITERE='RELATIF',
                   PRECISION=5.E-2,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_Q4GG,
                   VALE_CALC=-1.7057966150702E-11,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-2,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='EFGE_ELNO',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M92',
                   NOEUD = 'N4',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=UTI_Q4GG,
                   VALE_CALC=0.52770799346035,
                   VALE_REFE=0.,
                   CRITERE='ABSOLU',
                   PRECISION=1.,),
            ))

#---------------------------------------------------------
# -> SIEF_ELGA : PASSAGE REPERE UTILISATEUR -> INTRINSEQUE
#
#       REPERE='COQUE_UTIL_INTR',
#---------------------------------------------------------   

sta_Q4GG=MODI_REPERE(RESULTAT=sta_Q4GG,reuse=sta_Q4GG,
                    REPERE='COQUE_UTIL_INTR',
                    MODI_CHAM=_F(TYPE_CHAM = 'COQUE_GENE', 
                                 NOM_CHAM  = 'SIEF_ELGA',
                                 NOM_CMP   = ('NXX','NYY','NXY',
                                              'MXX','MYY','MXY',
                                              'QX','QY')))


# MAILLE QUAD4
# Repere utilisateur <=> repere intrinseque

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M119',
                   POINT = 3,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=1.25e6,
                   VALE_REFE=1.25e6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-10,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M119',
                   POINT = 3,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-1.6915417177578E-10,
                   VALE_REFE=-1.6915417177578E-10,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-8,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M119',
                   POINT = 3,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=1.5095962539864E-08,
                   VALE_REFE=1.5095962539864E-08,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-6,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M119',
                   POINT = 3,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-7.5334847698466E+05,
                   VALE_REFE=-7.5334847698466E+05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-10,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M119',
                   POINT = 3,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-0.071979095300635,
                   VALE_REFE=-0.071979095300635,
                   CRITERE='RELATIF',
                   PRECISION=1.E-6,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M119',
                   POINT = 3,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-0.57494867685380,
                   VALE_REFE=-0.57494867685380,
                   CRITERE='RELATIF',
                   PRECISION=1.E-6,),
            ))

# MAILLE TRIA3
# Repere intrinseque = alpha+48.2397

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M92',
                   POINT = 1,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=5.544712562101E+05,
                   VALE_REFE=5.544712562101E+05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-10,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M92',
                   POINT = 1,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=6.9552874379E+05,
                   VALE_REFE=6.9552874379E+05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-10,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M92',
                   POINT = 1,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=6.2100780695533E+05,
                   VALE_REFE=6.2100780695533E+05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-10,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M92',
                   POINT = 1,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-3.3416899613573E+05,
                   VALE_REFE=-3.3416899613573E+05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-10,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M92',
                   POINT = 1,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-4.1918040668676E+05,
                   VALE_REFE=-4.1918040668676E+05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-10,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M92',
                   POINT = 1,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-3.7426874796402E+05,
                   VALE_REFE=-3.7426874796402E+05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-10,),
            ))

#---------------------------------------------------------
# -> SIEF_ELGA : PASSAGE REPERE INTRINSEQUE -> UTILISATEUR
#
#       REPERE='COQUE_INTR_UTIL',
#---------------------------------------------------------   

sta_Q4GG=MODI_REPERE(RESULTAT=sta_Q4GG,reuse=sta_Q4GG,
                    REPERE='COQUE_INTR_UTIL',
                    MODI_CHAM=_F(TYPE_CHAM = 'COQUE_GENE', 
                                 NOM_CHAM  = 'SIEF_ELGA',
                                 NOM_CMP   = ('NXX','NYY','NXY',
                                              'MXX','MYY','MXY',
                                              'QX','QY')))


TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP = 'DZ',
                   NOEUD = 'N2',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-0.092977202480782,
                   VALE_REFE=-0.0930059,
                   CRITERE='RELATIF',
                   PRECISION=5.E-4,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='DEPL',
                   NOM_CMP = 'DZ',
                   NOEUD = 'N3',
                   REFERENCE='ANALYTIQUE',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-0.092991117404187,
                   VALE_REFE=-0.0930059,
                   CRITERE='RELATIF',
                   PRECISION=5.E-4,)))

# MAILLE QUAD4


TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M119',
                   POINT = 3,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=1.25e6,
                   VALE_REFE=1.25e6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-10,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M119',
                   POINT = 3,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-1.691541717758E-10,
                   VALE_REFE=-1.691541717758E-10,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-8,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M119',
                   POINT = 3,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=1.4471462088513E-08,
                   VALE_REFE=1.4471462088513E-08,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-6,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M119',
                   POINT = 3,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-7.5334847698466E+05,
                   VALE_REFE=-7.5334847698466E+05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-10,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M119',
                   POINT = 3,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-0.071979095300634,
                   VALE_REFE=-0.071979095300634,
                   CRITERE='RELATIF',
                   PRECISION=1.E-6,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M119',
                   POINT = 1,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-1.035317725575,
                   VALE_REFE=-1.035317725575,
                   CRITERE='RELATIF',
                   PRECISION=1.E-6,),
            ))

# MAILLE TRIA3

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'NXX',
                   MAILLE = 'M92',
                   POINT = 1,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=1.25e6,
                   VALE_REFE=1.25e6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-10,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'NYY',
                   MAILLE = 'M92',
                   POINT = 1,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-1.5817025785686E-10,
                   VALE_REFE=-1.5817025785686E-10,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-8,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'NXY',
                   MAILLE = 'M92',
                   POINT = 1,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=2.0256265997887E-08,
                   VALE_REFE=2.0256265997887E-08,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-6,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'MXX',
                   MAILLE = 'M92',
                   POINT = 1,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-7.5334940282249E+05,
                   VALE_REFE=-7.5334940282249E+05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-10,),
                _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'MYY',
                   MAILLE = 'M92',
                   POINT = 1,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=-1.7057966150702E-11,
                   VALE_REFE=-1.7057966150702E-11,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-10,),
                 _F(NUME_ORDRE=1,
                   NOM_CHAM='SIEF_ELGA',
                   NOM_CMP = 'MXY',
                   MAILLE = 'M92',
                   POINT = 1,
                   REFERENCE='NON_DEFINI',
                   RESULTAT=sta_Q4GG,
                   VALE_CALC=0.52770799346035,
                   VALE_REFE=0.52770799346035,
                   CRITERE='RELATIF',
                   PRECISION=1.E-6,),
            ))

FIN();
