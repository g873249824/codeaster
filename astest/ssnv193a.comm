
# MODIF  DATE 31/10/2006   AUTEUR A3BHHAE H.ANDRIAMBOLOLONA 
# TITRE CONTACT AVEC MACRO-ELEMENTS STATIQUE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2006  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================

DEBUT(CODE=_F(NOM='SSNV193A',
              NIV_PUB_WEB='INTERNET',),);

PRE_GMSH();

MA=LIRE_MAILLAGE();

MA=DEFI_GROUP(reuse =MA,
              MAILLAGE=MA,
              CREA_GROUP_MA=(_F(NOM='Cube1',
                                GROUP_MA='GM1',),
                             _F(NOM='Cube2',
                                GROUP_MA='GM8',),
                             _F(NOM='Haut',
                                GROUP_MA='GM9',),
                             _F(NOM='Interf',
                                GROUP_MA='GM2',),
                             _F(NOM='Esclave',
                                GROUP_MA='GM3',),
                           #  _F(NOM='Bord1',
                           #     GROUP_MA='GM4',),
                           #  _F(NOM='Bord2',
                           #     GROUP_MA='GM10',),
                             _F(NOM='Base',
                                GROUP_MA='GM5',),
                             _F(NOM='Maitre',
                                GROUP_MA='GM6',),
                           #  _F(NOM='Bords',
                           #     UNION=('Bord1','Bord2',),),
                                ),);

MA=DEFI_GROUP(reuse =MA,
              MAILLAGE=MA,
              CREA_GROUP_NO=(
              #_F(GROUP_MA='Bords',
              #                  NOM='Bords',),
                             _F(GROUP_MA='Esclave',
                                NOM='Esclave',),   
                             _F(GROUP_MA='Interf',
                                NOM='Interf',),
                             _F(GROUP_MA='GM9',
                                NOM='Haut',),
                             _F(GROUP_MA='GM2',
                                NOM='GM2',),
                            # _F(DIFFE=('Bords','Haut','GM2',),
                            #    NOM='Bord2',),
                                ),);

ACIER=DEFI_MATERIAU(ELAS=_F(E=150000000000.0,
                            NU=0.3,
                            RHO=7800.0,),);

CHMAT=AFFE_MATERIAU(MAILLAGE=MA,
                    AFFE=_F(TOUT='OUI',
                            MATER=ACIER,),);
#CREATION DU MACRO-ELEMENT STATIQUE

MODSS=AFFE_MODELE(MAILLAGE=MA,
                  AFFE=_F(GROUP_MA=('Cube2','Haut','Interf',),
                          PHENOMENE='MECANIQUE',
                          MODELISATION='3D',),);

CHF31=AFFE_CHAR_MECA(MODELE=MODSS,
                     DDL_IMPO=_F(GROUP_NO='Haut',
                                 DX=0.0,
                                 DY=0.0,
                                 DZ=-1.0,),);
MACSS=MACR_ELEM_STAT(DEFINITION=_F(MODELE=MODSS,
                                   CHAM_MATER=CHMAT,
                                   CHAR_MACR_ELEM=CHF31,),
                     EXTERIEUR=_F(GROUP_NO='Interf',),
                     RIGI_MECA=_F(),
                     CAS_CHARGE=_F(NOM_CAS='K1',
                                   SUIV='OUI',
                                   CHARGE=CHF31,),);

MAYSS=DEFI_MAILLAGE(DEFI_SUPER_MAILLE=_F(MACR_ELEM_STAT=MACSS,
                                   SUPER_MAILLE='MAILLE1',),
                    RECO_GLOBAL=_F(TOUT='OUI',),
                    DEFI_NOEUD=_F(TOUT='OUI',
                                  INDEX=(1,0,1,8,),),);
#FIN DU MACRO

MAG=ASSE_MAILLAGE(MAILLAGE_1=MA,
                  MAILLAGE_2=MAYSS,
                  OPERATION='SOUS_STR',);

MO=AFFE_MODELE(MAILLAGE=MAG,
               AFFE_SOUS_STRUC=_F(SUPER_MAILLE='MAILLE1',
                                  PHENOMENE='MECANIQUE',),
               AFFE=_F(GROUP_MA=('Cube1','Maitre','Base',),
                       PHENOMENE='MECANIQUE',
                       MODELISATION='3D',),);

LISTIN1=DEFI_LIST_REEL(DEBUT=0.0,
                       INTERVALLE=_F(JUSQU_A=0.1,
                                     NOMBRE=20,),);

CHF3_1=AFFE_CHAR_MECA(MODELE=MO,
                      DDL_IMPO=_F(GROUP_MA='Base',
                                  DX=0.0,
                                  DY=0.0,
                                  DZ=0.0,),);

CHF2_1=AFFE_CHAR_MECA(VERI_NORM='NON',
                      MODELE=MO,
                      CONTACT=_F(GROUP_MA_MAIT='Maitre',
                                 GROUP_MA_ESCL='Esclave',
                                 REAC_GEOM='CONTROLE',
                                 NB_REAC_GEOM=1,),);

CHMAT2=AFFE_MATERIAU(MAILLAGE=MAG,
                     AFFE=_F(TOUT='OUI',
                             MATER=ACIER,),);

U=STAT_NON_LINE(MODELE=MO,
                CHAM_MATER=CHMAT2,
                EXCIT=(_F(CHARGE=CHF3_1,),
                       _F(CHARGE=CHF2_1,),),
                SOUS_STRUC=_F(CAS_CHARGE='K1',
                              MAILLE='MAILLE1',),
                COMP_INCR=(_F(RELATION='ELAS',
                              TOUT='OUI',),
                           _F(RELATION='ELAS',
                              GROUP_MA=('Cube1','Maitre','Base',),),),
                INCREMENT=_F(LIST_INST=LISTIN1,),
                NEWTON=_F(MATRICE='ELASTIQUE',
                          REAC_ITER=1,),
                CONVERGENCE=_F(RESI_GLOB_MAXI=0.01,
                               ITER_GLOB_MAXI=10,
                               ARRET='NON',),
                INFO=1,);

TEST_RESU(RESU=_F(RESULTAT=U,
                  NUME_ORDRE=20,
                  NOM_CHAM='VALE_CONT',
                  NOM_CMP='RZ',
                  NOEUD='N1',
                  VALE=-1.684812E+08,
                  CRITERE='RELATIF',
                  PRECISION=1E-6,
                  REFERENCE='NON_REGRESSION',
                  VERSION='8.3.2',),);

TEST_RESU(RESU=_F(RESULTAT=U,
                  NUME_ORDRE=20,
                  NOM_CHAM='VALE_CONT',
                  NOM_CMP='RZ',
                  NOEUD='N410',
                  VALE=-6.85123E+08,
                  CRITERE='RELATIF',
                  PRECISION=1E-6,
                  REFERENCE='NON_REGRESSION',
                  VERSION='8.3.2',),);
                  

FIN();
