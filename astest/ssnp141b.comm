# MODIF  DATE 13/01/2011   AUTEUR PELLET J.PELLET 
# TITRE POUTRE CONSOLE 2D EN FLEXION
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2011  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
# ssnp141b.para = tps_job 200 mem_job 64Mo ncpus 1 liste_test S
# VALIDATION DE LA METHODE ARLEQUIN
# ARLEQUIN : RACCORD 2D/2D INCOMPATIBLE.
#            MAILLAGES DE DENSITES DIFFERENTES
#
# COMPARAISON A LA SOLUTION OBTENUE AVEC DES MAILLAGES HOMOGENES
# FIN ET GROSSIER
#    N41           GM9   N74   N329         GM10
#   *-*----------------------*------*---------------------------------*
#   !.     . .     .!.     . .     .!.     . .     . .     .  .     . !
#   ! .   .   .   . ! .   .   .   . ! .   .   .   .   .   .    .   .  !
# G !  . .     . .  !  . .     . .  !  . .     . .     . .      . .   ! G
# M !   .  GM1  .   !   .GM2  GM3  .!   .              GM4       .    ! M
# 7 !  . .     . .  !  . .     . .  !  . .     . .     . .     .  .   ! 8
#   ! .   .   .   . ! .   .   .   . ! .   .   .   .   .   .   ..   .  !
#   !.     . .     .!.     . .     .!.     . .     . .     . .      . !
#   *-------------------------------*---------------------------------*

DEBUT(CODE=_F(NOM='SSNP141B',
              NIV_PUB_WEB='INTERNET',),
      DEBUG=_F(SDVERI='OUI',),);

############################
# 1. Lecture du maillage fin
############################

MA1=LIRE_MAILLAGE(UNITE=20,
                  FORMAT='MED',);

#################################
# 2. Lecture du maillage grossier
#################################

MA2=LIRE_MAILLAGE(UNITE=21,
                  FORMAT='MED',);

MAIL=ASSE_MAILLAGE(MAILLAGE_1=MA1,
                   MAILLAGE_2=MA2,
                   OPERATION='SUPERPOSE',);

MAIL=DEFI_GROUP(reuse =MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=(_F(GROUP_MA='GM7',),
                               _F(GROUP_MA='GM8',),),);

ACIER=DEFI_MATERIAU(ELAS=_F(E=300.,
                            NU=0.299999999,),
                    ECRO_LINE=_F(D_SIGM_EPSI=3.,
                                 SY=0.4,),);

CHMAT=AFFE_MATERIAU(MAILLAGE=MAIL,
                    AFFE=_F(TOUT='OUI',
                            MATER=ACIER,),);

MOD=AFFE_MODELE(MAILLAGE=MAIL,
                AFFE=_F(GROUP_MA=('GM1','GM2','GM3','GM4',),
                        PHENOMENE='MECANIQUE',
                        MODELISATION='D_PLAN',),);

BLQ=AFFE_CHAR_MECA(MODELE=MOD,
                   DDL_IMPO=_F(GROUP_NO='GM7',
                               DX=0.0,
                               DY=0.0,),);

DPL=AFFE_CHAR_MECA(MODELE=MOD,
                   DDL_IMPO=_F(GROUP_NO='GM8',
                               DY=-1.0,),);

##################################################
# 3. Creation des relations de couplage Arlequin
#    entre les groupes de mailles
#    GM2 (maillage fin) et GM3 (maillage grossier)
#    Collage sur le modele fin
##################################################

ARL=AFFE_CHAR_MECA(MODELE=MOD,
                   ARLEQUIN=_F(GROUP_MA_1='GM2',
                               GROUP_MA_2='GM3',
                               GROUP_MA_COLL='GM2',
                               COLLAGE='GROUP_MA_1',
                               POIDS_1=0.99,),);

RAMPE=DEFI_FONCTION(NOM_PARA='INST',VALE=(0.0,0.0,
                          30.0,1.0,
                          ),PROL_DROITE='LINEAIRE',PROL_GAUCHE='LINEAIRE',);

LIST=DEFI_LIST_REEL(DEBUT=0.0,
                    INTERVALLE=(_F(JUSQU_A=23.,
                                   NOMBRE=46,),
                                _F(JUSQU_A=30.,
                                   NOMBRE=100,),),);

RES=STAT_NON_LINE(MODELE=MOD,
                  CHAM_MATER=CHMAT,
                  EXCIT=(_F(CHARGE=ARL,),
                         _F(CHARGE=DPL,FONC_MULT=RAMPE),
                         _F(CHARGE=BLQ,),),
                  COMP_INCR=_F(RELATION='VMIS_ISOT_LINE',),
                  INCREMENT=_F(LIST_INST=LIST,),);

RES=CALC_ELEM(reuse =RES,
              RESULTAT=RES,
              OPTION='SIEF_ELNO',);

RES=CALC_NO(reuse =RES,
            RESULTAT=RES,
            OPTION='SIEF_NOEU',);

SGM=CREA_CHAMP(TYPE_CHAM='ELNO_SIEF_R',
               OPERATION='EXTR',
               RESULTAT=RES,
               NOM_CHAM='SIEF_ELNO',
               INST=30.0,);


CHF=INTE_MAIL_2D(MAILLAGE=MAIL,
                 DEFI_CHEMIN=_F(GROUP_MA='GM9',),);

CHG=INTE_MAIL_2D(MAILLAGE=MAIL,
                 DEFI_CHEMIN=_F(GROUP_MA='GM10',),);

S229=POST_RELEVE_T(ACTION=_F(OPERATION='EXTRACTION',
                             INTITULE='229',
                             CHAM_GD=SGM,
                             CHEMIN=CHF,
                             TOUT_CMP='OUI',),);

S164=POST_RELEVE_T(ACTION=_F(OPERATION='EXTRACTION',
                             INTITULE='164',
                             CHAM_GD=SGM,
                             CHEMIN=CHF,
                             TOUT_CMP='OUI',),);

S429=POST_RELEVE_T(ACTION=_F(OPERATION='EXTRACTION',
                             INTITULE='429',
                             CHAM_GD=SGM,
                             CHEMIN=CHG,
                             TOUT_CMP='OUI',),);

#############################################################
# 4. Comparaison des contraintes lissees en
#    => un point proche de l'encastrement (N41, fin)
#    => un point au milieu de la zone de recouvrement
#       (N74, fin)
#    => un point au milieu de la zone de recouvrement
#       (N329, grossier).
#
#    Les valeurs sur le modele fin sont comparees avec
#    un calcul obtenu sur un maillage homogene fin.
#
#    Les valeurs sur le modele grossier sont comparees avec
#    un calcul obtenu sur un maillage homogene grossier.
#############################################################

TEST_TABLE(TABLE=S229,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N41',),
           NOM_PARA='SIXX',
           VALE=0.46461796163581,
           CRITERE='ABSOLU',
           PRECISION=0.001,
           REFERENCE='NON_REGRESSION',
           VERSION='10.00.19',);

TEST_TABLE(TABLE=S229,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N41',),
           NOM_PARA='SIYY',
           VALE=0.015254583948040,
           CRITERE='ABSOLU',
           PRECISION=0.001,
           REFERENCE='NON_REGRESSION',
           VERSION='10.00.19',);

TEST_TABLE(TABLE=S229,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N41',),
           NOM_PARA='SIXY',
           VALE=-0.019438124363690,
           CRITERE='ABSOLU',
           PRECISION=0.001,
           REFERENCE='NON_REGRESSION',
           VERSION='10.00.19',);

TEST_TABLE(TABLE=S164,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N74',),
           NOM_PARA='SIXX',
           VALE=0.36146639114985,
           CRITERE='ABSOLU',
           PRECISION=0.001,
           REFERENCE='NON_REGRESSION',
           VERSION='10.00.19',);

TEST_TABLE(TABLE=S164,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N74',),
           NOM_PARA='SIYY',
           VALE=0.037671341002450,
           CRITERE='ABSOLU',
           PRECISION=0.001,
           REFERENCE='NON_REGRESSION',
           VERSION='10.00.19',);

TEST_TABLE(TABLE=S164,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N74',),
           NOM_PARA='SIXY',
           VALE=0.012809039083508,
           CRITERE='ABSOLU',
           PRECISION=0.001,
           REFERENCE='NON_REGRESSION',
           VERSION='10.00.19',);

TEST_TABLE(TABLE=S429,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N329',),
           NOM_PARA='SIXX',
           VALE=0.39789809501100,
           CRITERE='ABSOLU',
           PRECISION=0.001,
           REFERENCE='NON_REGRESSION',
           VERSION='10.00.19',);

TEST_TABLE(TABLE=S429,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N329',),
           NOM_PARA='SIYY',
           VALE=0.011724324968941,
           CRITERE='ABSOLU',
           PRECISION=0.001,
           REFERENCE='NON_REGRESSION',
           VERSION='10.00.19',);

TEST_TABLE(TABLE=S429,
           FILTRE=_F(NOM_PARA='NOEUD',
                     VALE_K='N329',),
           NOM_PARA='SIXY',
           VALE=0.0052831455139045,
           CRITERE='ABSOLU',
           PRECISION=0.001,
           REFERENCE='NON_REGRESSION',
           VERSION='10.00.19',);

FIN();
