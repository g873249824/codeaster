# MODIF  DATE 28/06/2004   AUTEUR JMBHH01 J.M.PROIX 
# TITRE POUTRE EULER_BERNOULLI MULTIFIBRES (DYNA NON-LINEAIRE)
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2002  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
#
DEBUT(CODE=_F( NOM = 'SDNL130A',NIV_PUB_WEB='INTERNET'));
# LECTURE DU SEISME
INCLUDE(UNITE=92);
# LECTURE MAILLAGE LINEIQUE
PRE_GIBI(UNITE_GIBI = 17, UNITE_MAILLAGE = 20,);
POUT = LIRE_MAILLAGE(UNITE = 20,);
# LECTURE MAILLAGE SECTION1
PRE_GIBI(UNITE_GIBI = 18, UNITE_MAILLAGE = 21,);
MASEC = LIRE_MAILLAGE(UNITE = 21,);
#
# ON ENRICHIT LE MAILLAGE LINEIQUE EN MULTIPLIANT LES LIGNES
MAPOU = CREA_MAILLAGE ( MAILLAGE = POUT,
      CREA_GROUP_MA=_F(NOM='POU_AC', TOUT='OUI', PREF_MAILLE='A', PREF_NUME=1,),);
MAPOU = DEFI_GROUP (reuse=MAPOU, MAILLAGE =MAPOU, CREA_GROUP_NO =_F(NOM='TOUS_NO',GROUP_MA='POUTRE',),);

MOPOU=AFFE_MODELE(MAILLAGE=MAPOU,
                  AFFE=_F(TOUT='OUI', PHENOMENE='MECANIQUE', MODELISATION='POU_D_EM',),);

# LES MATERIAUX
BETON=DEFI_MATERIAU(ELAS=_F(E=3.7272E10, NU=0.25, RHO=2400., ALPHA=1.E-5,
                            AMOR_ALPHA=8.E-5,AMOR_BETA=20.,),
                    LABORD_1D=_F(Y01=310., Y02=0.070E+5, A1=9.E-3, A2=.52E-5,
                       B1=1.2, B2=2., BETA1=.1E+7, BETA2=-.4E+8, SIGF=3.5E+6,),);
ACIER=DEFI_MATERIAU(ELAS=_F(E=2.1E11, NU=0.3, RHO=7800., ALPHA=1.E-5,
                            AMOR_ALPHA=8.E-5,AMOR_BETA=20.,),
                    ECRO_LINE=_F(D_SIGM_EPSI=3.28E+9, SY=4.E+8,),);
#
# LES CHAMPS DE MATERIAUX
CHMAT=AFFE_MATERIAU(MAILLAGE=MAPOU,
                    AFFE=(_F(GROUP_MA='POUTRE', MATER=BETON,),
                          _F(GROUP_MA='POU_AC', MATER=ACIER,),),);
#
# ORIENTATIONS ET RIGIDITE DE TORSION
POUCA=AFFE_CARA_ELEM(MODELE=MOPOU,    INFO=2,
           POUTRE=_F(GROUP_MA=('POUTRE','POU_AC'),
                     SECTION='RECTANGLE',
                     CARA = ('HY','HZ'),
                     VALE = (.2 , .5 ),),
           ORIENTATION=_F(GROUP_MA=('POUTRE','POU_AC'),
                          CARA='ANGL_VRIL', VALE=-90.0,),
           AFFE_SECT = _F ( GROUP_MA = 'POUTRE',
                            MAILLAGE_SECT = MASEC , TOUT_SECT = 'OUI', NOM = 'BETON',
                            COOR_AXE_POUTRE = (0.,0.,)),
           AFFE_FIBRE =_F ( GROUP_MA = 'POU_AC', CARA = 'SURFACE', NOM = 'ACIER',
                            COOR_AXE_POUTRE = (0., 0.,),
                            VALE =( 0.056, -0.218, 0.804E-3,
                                   -0.056, -0.218, 0.804E-3,
                                    0.056, 0.218, 0.804E-3,
                                   -0.056, 0.218, 0.804E-3, ),  ),);
#
BLOQUAGE=AFFE_CHAR_MECA(MODELE=MOPOU,
                        DDL_IMPO=(_F(GROUP_NO='A', DX=0.0, DY=0.0, DZ=0.0, DRX=0.0, DRY=0.0,),
                                  _F(GROUP_NO='B', DY=0.0,),
                                  _F(GROUP_NO='TOUS_NO', DZ=0.0, DRX=0.0, DRY=0.0,),
                                 ),);

RIGI_ELE=CALC_MATR_ELEM(MODELE=MOPOU, OPTION='RIGI_MECA', CARA_ELEM=POUCA, CHAM_MATER=CHMAT, CHARGE=BLOQUAGE,);
MASS_ELE=CALC_MATR_ELEM(MODELE=MOPOU, OPTION='MASS_MECA', CARA_ELEM=POUCA, CHAM_MATER=CHMAT, CHARGE=BLOQUAGE,);
NUME_DDL=NUME_DDL(MATR_RIGI=RIGI_ELE, METHODE='LDLT', RENUM='SANS',);
MASSE=ASSE_MATRICE(MATR_ELEM=MASS_ELE, NUME_DDL=NUME_DDL,);
#
# ON DEFINIT L'ACCELEROGRAMME DU SEISME
ACCELERO = CALC_FONCTION( COMB= _F(FONCTION= ACS2C11, COEF= 45.));
# ET SA DIRECTION SOUS FORME DE CHAM_NO_DEPL_R
DEPSEISM=CALC_CHAR_SEISME (MATR_MASS=MASSE, MONO_APPUI='OUI', DIRECTION=(0., -1., 0.),);

# ON TRANSFORME LE CHAM_NO_DEPL_R ET CHAR_MECA
CHASEISM=AFFE_CHAR_MECA (MODELE=MOPOU, VECT_ASSE=DEPSEISM,);

# LES INSTANTS DE CALCUL
LINST = DEFI_LIST_REEL(DEBUT=0.0, INTERVALLE=_F(JUSQU_A =  3. , NOMBRE =  300),);

# CALCUL DYNAMIQUE NON LINEAIRE
RERE = DYNA_NON_LINE (MODELE=MOPOU, CHAM_MATER=CHMAT, CARA_ELEM=POUCA,
                      NEWMARK=_F(),
                      NEWTON=_F(MATRICE='ELASTIQUE',),
                      EXCIT=(_F(CHARGE=BLOQUAGE,), _F(CHARGE=CHASEISM, FONC_MULT=ACCELERO,),),
                      COMP_INCR=(_F(RELATION='LABORD_1D', GROUP_MA='POUTRE',),
                                 _F(RELATION='VMIS_CINE_LINE', GROUP_MA='POU_AC'),),
                      INCREMENT=_F(LIST_INST=LINST,),
                      CONVERGENCE=_F(RESI_GLOB_RELA=1.E-5, ITER_GLOB_MAXI=350, ARRET='OUI',),
                      ARCHIVAGE=_F(CHAM_EXCLU=('VITE', 'ACCE'), LIST_INST=LINST, ),
                          ) ;

#
RERE=CALC_NO(reuse =RERE, RESULTAT=RERE, OPTION='FORC_NODA', CHAM_MATER=CHMAT,CARA_ELEM=POUCA,
             TOUT_ORDRE='OUI', TOUT='OUI',MODELE=MOPOU,);

# QUELQUES TEST DE RESULTATS
TEST_RESU(RESU=(

_F( RESULTAT=RERE,NUME_ORDRE=175,NOM_CHAM='FORC_NODA',GROUP_NO='A',NOM_CMP='DY',VALE=-37000.,
REFERENCE='SOURCE_EXTERNE',PRECISION=0.16),
_F( RESULTAT=RERE,NUME_ORDRE=176,NOM_CHAM='DEPL',GROUP_NO='C',NOM_CMP='DY',VALE=1.5E-3,
REFERENCE='SOURCE_EXTERNE',PRECISION=0.07),

_F( RESULTAT=RERE,NUME_ORDRE=204,NOM_CHAM='FORC_NODA',GROUP_NO='A',NOM_CMP='DY',VALE=35000.,
REFERENCE='SOURCE_EXTERNE',PRECISION=0.01),
_F( RESULTAT=RERE,NUME_ORDRE=204,NOM_CHAM='DEPL',GROUP_NO='C',NOM_CMP='DY',VALE=-1.33E-3,
REFERENCE='SOURCE_EXTERNE',PRECISION=0.17),

_F( RESULTAT=RERE,NUME_ORDRE=269,NOM_CHAM='FORC_NODA',GROUP_NO='A',NOM_CMP='DY',VALE=-68000.,
REFERENCE='SOURCE_EXTERNE',PRECISION=0.025),
_F( RESULTAT=RERE,NUME_ORDRE=269,NOM_CHAM='DEPL',GROUP_NO='C',NOM_CMP='DY',VALE=4.75E-3,
REFERENCE='SOURCE_EXTERNE',PRECISION=0.03),

_F( RESULTAT=RERE,NUME_ORDRE=287,NOM_CHAM='FORC_NODA',GROUP_NO='A',NOM_CMP='DY',VALE=48000.,
REFERENCE='SOURCE_EXTERNE',PRECISION=0.035),
_F( RESULTAT=RERE,NUME_ORDRE=287,NOM_CHAM='DEPL',GROUP_NO='C',NOM_CMP='DY',VALE=-3.4E-3,
REFERENCE='SOURCE_EXTERNE',PRECISION=0.10),

                )   );
FIN();
