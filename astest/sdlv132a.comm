# MODIF  DATE 30/07/2012   AUTEUR LEFEBVRE J-P.LEFEBVRE 
# TITRE PRISE EN COMPTE D'UN MASSIF GENERALISE DANS LES ETUDES DE ROTORS
# sdlv132a.para = tps_job 900 mem_job 512Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
# RESPONSABLE TORKHANI M.TORKHANI
#

DEBUT(CODE=_F(NOM='SDLV132A',
              NIV_PUB_WEB='INTERNET',
              VISU_EFICAS='OUI',),
              PAR_LOT='OUI',
              DEBUG=_F(SDVERI='OUI'),);

MAIL=LIRE_MAILLAGE(FORMAT='MED',)

MAIL=DEFI_GROUP(reuse=MAIL,   
                MAILLAGE=MAIL,
                CREA_GROUP_NO=_F(GROUP_MA = ('ROTOR')),
                );

MODELE=AFFE_MODELE(MAILLAGE=MAIL,
                   AFFE=(_F(GROUP_MA=('ROTOR','MASSIF'),
                           PHENOMENE='MECANIQUE',
                           MODELISATION='POU_D_T',),
                         _F(GROUP_MA=('PALIER1','PALIER2'),
                           PHENOMENE='MECANIQUE',
                           MODELISATION='DIS_TR',),
                         )
                       )

ACIER=DEFI_MATERIAU(ELAS=_F(E=2.1E11,
                            NU=0.,
                            RHO=7800.,),);



CHMAT=AFFE_MATERIAU(MAILLAGE=MAIL,
                    AFFE=(_F(GROUP_MA=('ROTOR','MASSIF'),
                            MATER=ACIER,),))

CARELEM=AFFE_CARA_ELEM(INFO=1,
                       POUTRE=(_F(GROUP_MA='ROTOR',
                                 SECTION='CERCLE',
                                 VALE=(0.1),
                                 CARA=('R'),),
                               _F(GROUP_MA='MASSIF',
                                 SECTION='CERCLE',
                                 VALE=(0.4),
                                 CARA=('R'),),
                               ),
                       DISCRET=(_F(GROUP_MA='PALIER1',
                                   CARA='K_TR_D_L',
                                   VALE=(0.0,1.E12,1.E12,0.0,0.0,0.0,),),
                                 _F(GROUP_MA='PALIER1',
                                   CARA='M_TR_L',
                                   VALE=(0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,
                                   0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,
                                   0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,
                                   0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,),),
                                _F(GROUP_MA='PALIER2',
                                   CARA='K_TR_D_L',
                                   VALE=(0.0,1.E12,1.E12,0.0,0.0,0.0,),),
                                 _F(GROUP_MA='PALIER2',
                                   CARA='M_TR_L',
                                   VALE=(0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,
                                   0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,
                                   0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,
                                   0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,),),
                                _F(GROUP_MA='PALIER1',
                                   CARA='A_TR_D_L',
                                   VALE=(0.0,0.0,0.0,0.0,0.0,0.0,),),
                                _F(GROUP_MA='PALIER2',
                                   CARA='A_TR_D_L',
                                   VALE=(0.0,0.0,0.0,0.0,0.0,0.0,),),
                                ),
                       MODELE=MODELE,
                       );
                                 
BLOQUAGE=AFFE_CHAR_MECA(MODELE=MODELE,
                       DDL_IMPO=(_F(GROUP_NO=('BLOC'),
                                   DX=0, DY=0, DZ=0,
                                   DRX=0, DRY=0, DRZ=0,),
                                   ),
                       );
                                    
MACRO_MATR_ASSE(MODELE=MODELE,
                CHAM_MATER=CHMAT,
                CARA_ELEM=CARELEM,
                CHARGE=BLOQUAGE,
                NUME_DDL=CO('NUMEDDL'),
                MATR_ASSE=(_F(MATRICE=CO('RIGIDITE'),
                              OPTION='RIGI_MECA',),
                           _F(MATRICE=CO('MASSE'),
                              OPTION='MASS_MECA',),
                           _F(MATRICE=CO('GYASS'),
                              OPTION='MECA_GYRO',),
                           _F(MATRICE=CO('AMOR'),
                              OPTION='AMOR_MECA',),),
                );

MODES=MODE_ITER_SIMULT(MATR_A=RIGIDITE,
                       MATR_B=MASSE,
                       CALC_FREQ=_F(OPTION='BANDE',
                       FREQ=(100.,400.),),
                                 VERI_MODE=_F(STOP_ERREUR='NON',
                                    SEUIL=9.9999999999999995E-07),
                       );

TEST_RESU(RESU=(
          _F( RESULTAT = MODES, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 1,  VALE = 1.00717E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODES, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 2,  VALE = 1.00866E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODES, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 3,  VALE = 2.21064E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODES, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 4,  VALE = 2.59143E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODES, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 5,  VALE = 3.42981E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODES, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 6,  VALE = 3.92524E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODES, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 7,  VALE = 3.97556E+02, REFERENCE='SOURCE_EXTERNE',),
                ),)

MODEN=NORM_MODE(MODE=MODES,
                 NORME='EUCL_TRAN',);


MA1=LIRE_MAILLAGE(UNITE=22);
#--------------------------------------------------------------------

MO1=AFFE_MODELE(MAILLAGE=MA1,
                AFFE=_F(TOUT='OUI',
                        PHENOMENE='MECANIQUE',
                        MODELISATION='POU_D_T',),);
#--------------------------------------------------------------------

CARELEM1=AFFE_CARA_ELEM(MODELE=MO1,
                        POUTRE=_F(GROUP_MA='MASSIF',
                                  SECTION='CERCLE',
                                  CARA=('R',),
                                  VALE=(0.4,),),);
#--------------------------------------------------------------------

MAT1=DEFI_MATERIAU(ELAS=_F(E=2.1E11,
                          NU=0.,
                          RHO=7800.,
                          ),);
# ---------------------------------------------------------------------

CHMAT1=AFFE_MATERIAU(MAILLAGE=MA1,
                     AFFE=_F(TOUT='OUI',
                             MATER=MAT1,),);

CH1_CB=AFFE_CHAR_MECA(MODELE=MO1,
                   DDL_IMPO=(_F(GROUP_NO='BLOC',
                               DX=0.0,
                               DY=0.0,
                               DZ=0.0,
                               DRX=0.0,
                               DRY=0.0,
                               DRZ=0.0,),
                            _F(GROUP_NO=('NOPAL1','NOPAL2'),
                               DX=0.0,
                               DY=0.0,
                               DZ=0.0,
                               DRX=0.0,
                               DRY=0.0,
                               DRZ=0.0,),
                             ),
                             );

CH1_MN=AFFE_CHAR_MECA(MODELE=MO1,
                   DDL_IMPO=(_F(GROUP_NO='BLOC',
                               DX=0.0,
                               DY=0.0,
                               DZ=0.0,
                               DRX=0.0,
                               DRY=0.0,
                               DRZ=0.0,),
                             ),
                             );
# ------------------------------------------------------------------
# CALCULS DES MATRICES
#----------------------------------------------------------------

MELR1_CB=CALC_MATR_ELEM(OPTION='RIGI_MECA',
                     MODELE=MO1,
                     CHAM_MATER=CHMAT1,
                     CARA_ELEM=CARELEM1,
                     CHARGE=CH1_CB,);

MELM1_CB=CALC_MATR_ELEM(OPTION='MASS_MECA',
                     MODELE=MO1,
                     CHAM_MATER=CHMAT1,
                     CARA_ELEM=CARELEM1,
                     CHARGE=CH1_CB,);

NUM1_CB=NUME_DDL(MATR_RIGI=MELR1_CB,
              METHODE='LDLT',);

ASSR1_CB=ASSE_MATRICE(MATR_ELEM=MELR1_CB,
                      NUME_DDL=NUM1_CB,);

ASSM1_CB=ASSE_MATRICE(MATR_ELEM=MELM1_CB,
                      NUME_DDL=NUM1_CB,);

MELR1_MN=CALC_MATR_ELEM(OPTION='RIGI_MECA',
                     MODELE=MO1,
                     CHAM_MATER=CHMAT1,
                     CARA_ELEM=CARELEM1,
                     CHARGE=CH1_MN,);

MELM1_MN=CALC_MATR_ELEM(OPTION='MASS_MECA',
                     MODELE=MO1,
                     CHAM_MATER=CHMAT1,
                     CARA_ELEM=CARELEM1,
                     CHARGE=CH1_MN,);

NUM1_MN=NUME_DDL(MATR_RIGI=MELR1_MN,
              METHODE='LDLT',);

ASSR1_MN=ASSE_MATRICE(MATR_ELEM=MELR1_MN,
                      NUME_DDL=NUM1_MN,);

ASSM1_MN=ASSE_MATRICE(MATR_ELEM=MELM1_MN,
                      NUME_DDL=NUM1_MN,);
#--------------------------------------------------------------------
#                      CALCUL MODAL
#--------------------------------------------------------------------

MODE1_CB=MODE_ITER_SIMULT(MATR_A=ASSR1_CB,
                       MATR_B=ASSM1_CB,
                       CALC_FREQ=_F(OPTION='BANDE',
                                    FREQ=(200.,800.),),
                                 VERI_MODE=_F(STOP_ERREUR='NON',
                                    SEUIL=9.9999999999999995E-07),
                       );

MODE1_MN=MODE_ITER_SIMULT(MATR_A=ASSR1_MN,
                       MATR_B=ASSM1_MN,
                       CALC_FREQ=_F(OPTION='BANDE',
                                    FREQ=(200.,800.),),
                                 VERI_MODE=_F(STOP_ERREUR='NON',
                                    SEUIL=9.9999999999999995E-07),
                       );

TEST_RESU(RESU=(
          _F( RESULTAT = MODE1_CB, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-5,
                NUME_ORDRE = 1,  VALE = 5.1501015597597E+02, REFERENCE='NON_REGRESSION',),
          _F( RESULTAT = MODE1_CB, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-5,
                NUME_ORDRE = 2,  VALE = 5.1501481211797E+02, REFERENCE='NON_REGRESSION',),
          _F( RESULTAT = MODE1_CB, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-5,
                NUME_ORDRE = 3,  VALE = 5.204018671946E+02, REFERENCE='NON_REGRESSION',),
          _F( RESULTAT = MODE1_CB, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-5,
                NUME_ORDRE = 4,  VALE = 5.20406499069E+02, REFERENCE='NON_REGRESSION',),
          _F( RESULTAT = MODE1_CB, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-5,
                NUME_ORDRE = 5,  VALE = 7.727477295887E+02, REFERENCE='NON_REGRESSION',),
          _F( RESULTAT = MODE1_CB, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-5,
                NUME_ORDRE = 6,  VALE = 7.7277340521671E+02, REFERENCE='NON_REGRESSION',),
                ),)

TEST_RESU(RESU=(
          _F( RESULTAT = MODE1_MN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 1,  VALE = 2.21045E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODE1_MN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 2,  VALE = 2.59147E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODE1_MN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 3,  VALE = 3.47706E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODE1_MN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 4,  VALE = 4.20215E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODE1_MN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 5,  VALE = 4.92291E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODE1_MN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 6,  VALE = 5.21767E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODE1_MN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 7,  VALE = 6.24727E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODE1_MN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 8,  VALE = 6.45547E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODE1_MN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 9,  VALE = 7.36375E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODE1_MN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 10,  VALE = 7.78041E+02, REFERENCE='SOURCE_EXTERNE',),
                ),)

MODE1N=NORM_MODE(MODE=MODE1_CB,
                 NORME='MASS_GENE',);

#-------------------------------------------------------------------
# CALCUL DU MACRO-ELEMENT DYNAMIQUE
#-------------------------------------------------------------------

INTERF1=DEFI_INTERF_DYNA(NUME_DDL=NUM1_CB,
                        INTERFACE=(_F(NOM='PALIER_S',
                                      TYPE='CRAIGB',
                                      NOEUD=('N31','N32'),
                                      #MASQUE=('DX','DRX','DRY','DRZ',),
                                      ),),);

BAMO1=DEFI_BASE_MODALE(CLASSIQUE=_F(INTERF_DYNA=INTERF1,
                                   MODE_MECA=MODE1N,
                                   NMAX_MODE=10,
                                   ),);

MACR1=MACR_ELEM_DYNA(BASE_MODALE=BAMO1,
                     MATR_RIGI=ASSR1_CB,
                     MATR_MASS=ASSM1_CB,);



MA2=LIRE_MAILLAGE(UNITE=23);
#--------------------------------------------------------------------

MO2=AFFE_MODELE(MAILLAGE=MA2,
                   AFFE=(_F(GROUP_MA=('ROTOR'),
                           PHENOMENE='MECANIQUE',
                           MODELISATION='POU_D_T',),
                         _F(GROUP_MA=('PALIER1','PALIER2'),
                           PHENOMENE='MECANIQUE',
                           MODELISATION='DIS_TR',),
                         )
                       )
#--------------------------------------------------------------------

CARELEM2=AFFE_CARA_ELEM(MODELE=MO2,
                        POUTRE=_F(GROUP_MA='ROTOR',
                                  SECTION='CERCLE',
                                  CARA=('R',),
                                  VALE=(0.1,),),
                        DISCRET=(_F(GROUP_MA='PALIER1',
                                   CARA='K_TR_D_L',
                                   VALE=(0.0,1.E12,1.E12,0.0,0.0,0.0,),),
                                 _F(GROUP_MA='PALIER1',
                                   CARA='M_TR_L',
                                   VALE=(0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,
                                   0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,
                                   0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,
                                   0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,),),
                                _F(GROUP_MA='PALIER2',
                                   CARA='K_TR_D_L',
                                   VALE=(0.0,1.E12,1.E12,0.0,0.0,0.0,),),
                                 _F(GROUP_MA='PALIER2',
                                   CARA='M_TR_L',
                                   VALE=(0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,
                                   0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,
                                   0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,
                                   0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,),),
                                _F(GROUP_MA='PALIER1',
                                   CARA='A_TR_D_L',
                                   VALE=(0.0,0.0,0.0,0.0,0.0,0.0,),),
                                _F(GROUP_MA='PALIER2',
                                   CARA='A_TR_D_L',
                                   VALE=(0.0,0.0,0.0,0.0,0.0,0.0,),),
                                ),
                        );
#--------------------------------------------------------------------

MAT2=DEFI_MATERIAU(ELAS=_F(E=2.1E11,
                          NU=0.,
                          RHO=7800.,
                                         AMOR_HYST=0.0,
                          ),);
# ---------------------------------------------------------------------

CHMAT2=AFFE_MATERIAU(MAILLAGE=MA2,
                     AFFE=_F(TOUT='OUI',
                             MATER=MAT2,),);

CH2=AFFE_CHAR_MECA(MODELE=MO2,
                   DDL_IMPO=(
                             _F(GROUP_NO=('NOPAL1','NOPAL2'),
                               DX=0.0,
                               DY=0.0,
                               DZ=0.0,
                               DRX=0.0,
                               DRY=0.0,
                               DRZ=0.0,
                               ),
                             _F(NOEUD=('N37'),
                               DX=0.0,
                               DRX=0.0,),
                             ),
                             );
# ------------------------------------------------------------------
# CALCULS DES MATRICES
#-------------------------------------------------------------------
MACRO_MATR_ASSE(MODELE=MO2,
                CHAM_MATER=CHMAT2,
                CARA_ELEM=CARELEM2,
                CHARGE=CH2,
                NUME_DDL=CO('NUM2'),
                MATR_ASSE=(_F(MATRICE=CO('MATASSM2'),
                              OPTION='MASS_MECA',),
                           _F(MATRICE=CO('MATASSR2'),
                              OPTION='RIGI_MECA',),                   
                              ),);
#--------------------------------------------------------------------
#                      CALCUL MODAL
#--------------------------------------------------------------------

MODE2=MODE_ITER_SIMULT(MATR_A=MATASSR2,
                       MATR_B=MATASSM2,
                       CALC_FREQ=_F(OPTION='BANDE',
                                    FREQ=(1.,900.),
                                                        ),
                       VERI_MODE=_F(STOP_ERREUR='NON',
                                    SEUIL=9.9999999999999995E-07),
                            );

TEST_RESU(RESU=(
          _F( RESULTAT = MODE2, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-5,
                NUME_ORDRE = 1,  VALE = 1.0086023296597E+02, REFERENCE='NON_REGRESSION',),
          _F( RESULTAT = MODE2, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-5,
                NUME_ORDRE = 2,  VALE = 1.0086023296597E+02, REFERENCE='NON_REGRESSION',),
          _F( RESULTAT = MODE2, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-5,
                NUME_ORDRE = 3,  VALE = 3.9252906542749E+02, REFERENCE='NON_REGRESSION',),
          _F( RESULTAT = MODE2, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-5,
                NUME_ORDRE = 4,  VALE = 3.9252906542749E+02, REFERENCE='NON_REGRESSION',),
          _F( RESULTAT = MODE2, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-5,
                NUME_ORDRE = 5,  VALE = 8.5023956741108E+02, REFERENCE='NON_REGRESSION',),
          _F( RESULTAT = MODE2, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-5,
                NUME_ORDRE = 6,  VALE = 8.5023956741108E+02, REFERENCE='NON_REGRESSION',),
                ),)

TEST_RESU(RESU=(
          _F( RESULTAT = MODE2, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 1,  VALE = 1.0090E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODE2, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 2,  VALE = 1.0090E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODE2, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 3,  VALE = 3.9305E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODE2, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 4,  VALE = 3.9305E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODE2, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 5,  VALE = 8.5242E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = MODE2, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 6,  VALE = 8.5242E+02, REFERENCE='SOURCE_EXTERNE',),
                ),)

MODE2N=NORM_MODE(MODE=MODE2,
                 NORME='EUCL_TRAN',
                 INFO=2,);
#-------------------------------------------------------------------
# CALCUL DU MACRO-ELEMENT DYNAMIQUE
#-------------------------------------------------------------------

INTERF2=DEFI_INTERF_DYNA(NUME_DDL=NUM2,
                        INTERFACE=(_F(NOM='PALIER_R',
                                      TYPE='CRAIGB',
                                      NOEUD=('N31','N32'),
                                      #MASQUE=('DX','DRX','DRY','DRZ',),
                                      ),),);

BAMO2=DEFI_BASE_MODALE(CLASSIQUE=_F(MODE_MECA=MODE2N,
                                    INTERF_DYNA=INTERF2,
                                    NMAX_MODE=10,),
                       );

MACR2=MACR_ELEM_DYNA(BASE_MODALE=BAMO2,
                     MATR_RIGI=MATASSR2,
                     MATR_MASS=MATASSM2,);

#
#  DEFINITION DU MODELE GENERALISE
#------------------------------------------------------------------

MODEGE=DEFI_MODELE_GENE(  SOUS_STRUC=(_F( NOM = 'COTE1',
                                          MACR_ELEM_DYNA = MACR1,
                                                                   ANGL_NAUT = (0., 0., 0.,),
                                                                   TRANS = (0.,0.,0.),),
                                      _F( NOM = 'COTE2',
                                          MACR_ELEM_DYNA = MACR2,
                                                                   ANGL_NAUT = (0., 0., 0.,),
                                                                   TRANS = (0.,0.,0.),)),
                          LIAISON=_F( SOUS_STRUC_1 = 'COTE1',
                                      SOUS_STRUC_2 = 'COTE2',
                                      INTERFACE_1 = 'PALIER_S',
                                      INTERFACE_2 = 'PALIER_R'),
                          VERIF=_F( STOP_ERREUR = 'OUI',
                                    PRECISION = 1.E-6,
                                    CRITERE = 'RELATIF'))

#  NUMEROTATION DU PROBLEME GENERALISE DES SOUS-STRUCTURES
#------------------------------------------------------------------

NUMEGE=NUME_DDL_GENE(  MODELE_GENE=MODEGE)

#  ASSEMBLAGE DES MATRICES
#------------------------------------------------------------------

MASGEN=ASSE_MATR_GENE(  NUME_DDL_GENE=NUMEGE,
                                  OPTION='MASS_GENE')
#
RIGGEN=ASSE_MATR_GENE(  NUME_DDL_GENE=NUMEGE,
                                  OPTION='RIGI_GENE')

#  CALCUL DES MODES PROPRES DE LA STRUCTURE GLOBALE
#------------------------------------------------------------------

RESGEN=MODE_ITER_SIMULT(MATR_A=RIGGEN,
                        MATR_B=MASGEN,
                                  CALC_FREQ=_F(OPTION='BANDE',
                                     FREQ=(0.,400.),),
                                  VERI_MODE=_F(STOP_ERREUR='NON',
                                     SEUIL=9.9999999999999995E-07),
                            );

#
#   CREATION DU MAILLAGE SQUELETTE DE LA STRUCTURE GLOBALE
#
SQUEL=DEFI_SQUELETTE(  MODELE_GENE=MODEGE,SOUS_STRUC=(
                            _F( NOM = 'COTE1',
                                        GROUP_MA = ('MASSIF',)),
                            _F( NOM = 'COTE2',
                                        GROUP_MA = ('ROTOR',)))
                           )

#
#   RESTITUTION SUR MAILLAGE SQUELETTE
#
MODGLO=REST_SOUS_STRUC(   RESU_GENE=RESGEN,
                          SQUELETTE=SQUEL,
                          TOUT_ORDRE='OUI')

TEST_RESU(RESU=(
          _F( RESULTAT = RESGEN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 1,  VALE = 1.00717E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = RESGEN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 2,  VALE = 1.00866E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = RESGEN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 3,  VALE = 2.21064E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = RESGEN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 4,  VALE = 2.59143E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = RESGEN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 5.E-2,
                NUME_ORDRE = 5,  VALE = 3.42981E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = RESGEN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 6,  VALE = 3.92524E+02, REFERENCE='SOURCE_EXTERNE',),
          _F( RESULTAT = RESGEN, PARA = 'FREQ',
                CRITERE = 'RELATIF', PRECISION = 1.E-2,
                NUME_ORDRE = 7,  VALE = 3.97556E+02, REFERENCE='SOURCE_EXTERNE',),
                ),)

FIN();

