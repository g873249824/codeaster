# MODIF  DATE 22/10/2012   AUTEUR DESOZA T.DESOZA 
# TITRE CALCUL DE PERFORMANCE : CYLINDRE BIMETALLIQUE ELASTIQUE
# perf011b.para = tps_job 4000 mem_job 6500Mo ncpus 1 mpi_nbcpu 4 liste_test I
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================

# PARALLELE MPI 4 PROCS

DEBUT(CODE=_F(NOM='PERF011B',
              NIV_PUB_WEB='INTERNET',
              VISU_EFICAS='OUI'),
      PAR_LOT='OUI');

MA_MECA=LIRE_MAILLAGE(UNITE=20,
                      FORMAT='MED', INFO_MED=2,
                     );

MO_TH=AFFE_MODELE(MAILLAGE=MA_MECA,
                  AFFE=_F(TOUT='OUI',
                          PHENOMENE='THERMIQUE',
                          MODELISATION='3D'));

TEMPERAT=LIRE_RESU(TYPE_RESU='EVOL_THER',
                   FORMAT='MED',
                   MAILLAGE=MA_MECA,
                   UNITE=22,
                   FORMAT_MED=_F(NOM_CHAM='TEMP',
                                 NOM_CHAM_MED='TEMP2___TEMP____________________',
                                 NOM_CMP='TEMP',
                                 NOM_CMP_MED='TEMP'),
                   TOUT_ORDRE='OUI',
                   );

MO_MECA=AFFE_MODELE(MAILLAGE=MA_MECA,
                    AFFE=_F(TOUT='OUI',
                            PHENOMENE='MECANIQUE',
                            MODELISATION='3D'));

POISSON=DEFI_FONCTION(NOM_PARA='TEMP',
                      VALE=(  0.0,0.3,
                            450.0,0.3),
                      PROL_DROITE='CONSTANT',
                      PROL_GAUCHE='CONSTANT');

YREV=DEFI_FONCTION(NOM_PARA='TEMP',
                   VALE=(  0.0,190000.0,
                         350.0,170000.0,
                         ),
                   PROL_DROITE='CONSTANT',
                   PROL_GAUCHE='CONSTANT');

ALPREV=DEFI_FONCTION(NOM_PARA='TEMP',
                     VALE=( 20.0,0.000016,
                           450.0,0.000018,
                           ),
                     PROL_DROITE='CONSTANT',
                     PROL_GAUCHE='CONSTANT');

YMB=DEFI_FONCTION(NOM_PARA='TEMP',
                  VALE=(  0.0,205000.0,
                        350.0,180000.0,
                        ),
                  PROL_DROITE='CONSTANT',
                  PROL_GAUCHE='CONSTANT');

ALPMB=DEFI_FONCTION(NOM_PARA='TEMP',
                    VALE=( 20.0,0.000011,
                          450.0,0.000014,
                          ),
                    PROL_DROITE='CONSTANT',
                    PROL_GAUCHE='CONSTANT');

MATREV=DEFI_MATERIAU(ELAS_FO=_F(E=YREV,
                                NU=POISSON,
                                TEMP_DEF_ALPHA=20,
                                ALPHA=ALPREV,
                                ));

MATMB=DEFI_MATERIAU(ELAS_FO=_F(E=YMB,
                               NU=POISSON,
                               TEMP_DEF_ALPHA=20,
                               ALPHA=ALPMB,
                               ));


CHMA=AFFE_MATERIAU(MAILLAGE=MA_MECA,
                   AFFE_VARC=(_F(TOUT='OUI',
                                 EVOL=TEMPERAT,
                                 NOM_VARC='TEMP',
                                 NOM_CHAM='TEMP',
                                 VALE_REF=287)),
                   AFFE=(_F(GROUP_MA='R',
                            MATER=MATREV),
                         _F(GROUP_MA='M',
                            MATER=MATMB)),
                   );

CHCINE=AFFE_CHAR_CINE(MODELE=MO_MECA,
                       MECA_IMPO=(_F( GROUP_NO = 'NBLOCY',   DX = 0.),
                                  _F( GROUP_NO = 'NBLOCXY',  DX = 0., DY = 0.),
                                  _F( GROUP_MA = 'NOEUDINF', DZ = 0.)),
                     );

CLIM=AFFE_CHAR_MECA(MODELE=MO_MECA,
                    LIAISON_UNIF=_F(GROUP_MA='NOEUDSUP',
                                    DDL='DZ'));

PRESSION=DEFI_FONCTION(NOM_PARA='INST',
                       VALE=( 1.e-05,   15.0,
                                 80.,    9.0,
                                310.,    7.4,
                                710.,    5.6,
                               1200.,    3.3,
                               2000.,    1.9,
                               3400.,    0.5,
                             ));

RINT = 1.994;

REXT = 2.2015;

COEFFOND = (RINT * REXT);


EFF_FOND=CALC_FONCTION(COMB=_F(FONCTION=PRESSION,
                               COEF=COEFFOND),
                       INTERPOL='LIN',
                       PROL_DROITE='CONSTANT',
                       PROL_GAUCHE='EXCLU');

CHPRESS=AFFE_CHAR_MECA_F(VERI_NORM='NON',
                         MODELE=MO_MECA,
                         PRES_REP=(_F(GROUP_MA='FACEINT',
                                      PRES=PRESSION),
                                   _F(GROUP_MA=('FACEINF','FACESUP'),
                                      PRES=EFF_FOND)));

CHCIN2=AFFE_CHAR_MECA(MODELE=MO_MECA ,
                      DDL_IMPO=(_F( GROUP_NO = 'NBLOCY',   DX = 0.),
                                _F( GROUP_NO = 'NBLOCXY',  DX = 0., DY = 0.),
                                _F( GROUP_MA = 'NOEUDINF', DZ = 0.)));

RMEC=MECA_STATIQUE(INFO=2,
                   MODELE=MO_MECA,
                   CHAM_MATER=CHMA,
                   EXCIT=(_F(CHARGE=CHPRESS),
                          _F(CHARGE=CHCINE),
                          _F(CHARGE=CLIM)),
                   OPTION='SANS',
                   INST=300.0,
                   SOLVEUR=_F(METHODE='MUMPS',
                              # NE PAS DEBRANCHER LA VERIFICATION DE LA QUALITE
                              # NE PAS METTRE NPREC=-1
                              RESI_RELA=+1.0E-5,
                              MATR_DISTRIBUEE='OUI',
                              GESTION_MEMOIRE='OUT_OF_CORE',
                              ELIM_LAGR2='OUI'));

TEST_RESU(RESU=(_F(RESULTAT=RMEC,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   NOEUD='N1',
                   VALE_CALC=-7.5882519592494E-04,
                   CRITERE='RELATIF',
                   TOLE_MACHINE=1E-5,
                   NUME_ORDRE=1,
                   ),
                _F(RESULTAT=RMEC,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   NOEUD='N1',
                   VALE_CALC=1.5312574821251E-03,
                   CRITERE='RELATIF',
                   TOLE_MACHINE=1E-5,
                   NUME_ORDRE=1,
                   ),
                _F(RESULTAT=RMEC,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   NOEUD='N284544',
                   VALE_CALC=4.0005840210776E-04,
                   CRITERE='RELATIF',
                   TOLE_MACHINE=1E-5,
                   NUME_ORDRE=1,
                   ),
                _F(RESULTAT=RMEC,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   NOEUD='N284544',
                   VALE_CALC=4.0005840210776E-04,
                   CRITERE='RELATIF',
                   TOLE_MACHINE=1E-5,
                   NUME_ORDRE=1,
                   )));

FIN();
