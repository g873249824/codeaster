# MODIF  DATE 26/09/2012   AUTEUR LEBOUVIER F.LEBOUVIER 
# TITRE GUIDE D'ONDE A SORTIE ANECHOIQUE
# ahlv100m.para = tps_job 60 mem_job 256Mo ncpus 1 liste_test R
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# REFERENCE : ANALYTIQUE
#-----------------------------------------------------


DEBUT(CODE=_F(NOM='AHLV100M',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

#
# MAILLAGE
#


MAYA=LIRE_MAILLAGE(FORMAT='MED',)

#
# DEFINITION DU MODELE
#

MODEL=AFFE_MODELE(    MAILLAGE=MAYA,
                            AFFE=_F(  TOUT = 'OUI',
                                   PHENOMENE = 'ACOUSTIQUE',
                                   MODELISATION = 'PLAN')
                    )

#
# DEFINITION DU MATERIAU
#

AIR=DEFI_MATERIAU(   FLUIDE=_F(  RHO = 1.3,
                                  CELE_C = ('RI',343.0,0.,))
                      )

MATER=AFFE_MATERIAU(    MAILLAGE=MAYA,
                              AFFE=_F(  TOUT = 'OUI',
                                     MATER = AIR)
                      )

#
# CONDITIONS AUX LIMITES
#

VITE=AFFE_CHAR_ACOU(       MODELE=MODEL,
                          VITE_FACE=_F(  GROUP_MA = 'VELO',
                                      VNOR = ('RI',0.014,0.0,))
                      )

IMPE=AFFE_CHAR_ACOU(       MODELE=MODEL,
                          IMPE_FACE=_F(  GROUP_MA = 'IMPE',
                                      IMPE = ('RI',445.9,0.0,))
                      )

#
# ASSEMBLAGE
#

MACRO_MATR_ASSE(       MODELE=MODEL,
                        CHARGE=IMPE,
                    CHAM_MATER=MATER,
                      NUME_DDL=CO("NUMERO"),MATR_ASSE=(
                     _F(  MATRICE = CO("MATK"), OPTION = 'RIGI_ACOU'),
                               _F(  MATRICE = CO("MATM"), OPTION = 'MASS_ACOU'),
                               _F(  MATRICE = CO("MATA"), OPTION = 'AMOR_ACOU'))
                )

CH_EL=CALC_VECT_ELEM(        OPTION='CHAR_ACOU',
                           CHAM_MATER=MATER,
                               CHARGE=VITE
                       )

CH_AS=ASSE_VECTEUR(    VECT_ELEM=CH_EL,
                          NUME_DDL=NUMERO
                     )

#
# CALCUL DES MODES
#

MATASKR=COMB_MATR_ASSE(    COMB_R=_F(  MATR_ASSE = MATK,
                                       PARTIE = 'REEL',
                                       COEF_R = 1.)
                          )

MATASMR=COMB_MATR_ASSE(    COMB_R=_F(  MATR_ASSE = MATM,
                                       PARTIE = 'REEL',
                                       COEF_R = 1.)
                          )

MODES=MODE_ITER_SIMULT(       MATR_RIGI=MATASKR,
                                   MATR_MASS=MATASMR,
                                CALC_FREQ=_F( OPTION = 'BANDE',
                                           FREQ = ( 1., 1000.,))
                            )


TEST_RESU(RESU=(
   _F(   RESULTAT = MODES,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 1.E-3,
           NUME_ORDRE = 1,
           VALE = 171.5,
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODES,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 1.E-3,
           NUME_ORDRE = 2,
           VALE = 343.,
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODES,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 1.E-3,
           NUME_ORDRE = 3,
           VALE = 514.5,
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODES,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 1.E-3,
           NUME_ORDRE = 4,
           VALE = 686.,
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = MODES,
           PARA = 'FREQ',
           CRITERE = 'RELATIF',
           PRECISION = 1.E-3,
           NUME_ORDRE = 5,
           VALE = 857.5,
           REFERENCE = 'ANALYTIQUE'))

        )

#
#  REPONSE HARMONIQUE
#

HARMO=DYNA_VIBRA(TYPE_CALCUL='HARM',BASE_CALCUL='PHYS',
                           MATR_MASS=MATM,
                           MATR_RIGI=MATK,
                           MATR_AMOR=MATA,
                                FREQ=500.0,
                               EXCIT=_F(  VECT_ASSE = CH_AS,
                                       COEF_MULT = -1.0,
                                       PHAS_DEG = 90.0,
                                       PUIS_PULS = 1)
                       )

TEST_RESU(RESU=(
   _F(   RESULTAT = HARMO,
           NOM_CHAM = 'PRES',
           NOM_CMP = 'PRES',
           NOEUD = 'NO000001',
           CRITERE = 'RELATIF',
           PRECISION = 1.E-2,
           NUME_ORDRE = 1,
           VALE_C = ('RI',-6.2426,0.,),
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = HARMO,
           NOM_CHAM = 'PRES',
           NOM_CMP = 'PRES',
           NOEUD = 'NO000033',
           CRITERE = 'RELATIF',
           PRECISION = 1.E-2,
           NUME_ORDRE = 1,
           VALE_C = ('RI',-6.2426,0.,),
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = HARMO,
           NOM_CHAM = 'PRES',
           NOM_CMP = 'PRES',
           NOEUD = 'NO000002',
           CRITERE = 'RELATIF',
           PRECISION = 1.E-2,
           NUME_ORDRE = 1,
           VALE_C = ('RI',6.0237,1.6387,),
           REFERENCE = 'ANALYTIQUE'),

   _F(   RESULTAT = HARMO,
           NOM_CHAM = 'PRES',
           NOM_CMP = 'PRES',
           NOEUD = 'NO000034',
           CRITERE = 'RELATIF',
           PRECISION = 1.E-2,
           NUME_ORDRE = 1,
           VALE_C = ('RI',6.0237,1.6387,),
           REFERENCE = 'ANALYTIQUE'))

        )

FIN()
#






