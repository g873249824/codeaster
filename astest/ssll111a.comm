# MODIF  DATE 28/05/2004   AUTEUR LEBOUVIE F.LEBOUVIER 
# TITRE  POUTRE EULER_BERNOULLI MULTIFIBRES (STATIQUE LINEAIRE)
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2002  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
# POUTRE A SECTION EN DOUBLE T + ARMATURES NON SYMETRIQUES
# 3 CAS DE CHARGE :
#    CAS 1 : FLEXION SIMPLE, CHARGE CONCENTREE AU MILIEU
#    CAS 1 BIS : COMME CAS 1 AVEC MAILLAGE SECTION PLUS GROSSIER
#    CAS 2 : POIDS PROPRE DE LA POUTRE
#    CAS 3 : TEMPERATURE UNIFORME

DEBUT(CODE=_F( NOM = 'SSLL111A',NIV_PUB_WEB='INTERNET'))

# lecture maillage lineique
PRE_GIBI(UNITE_GIBI=17, UNITE_MAILLAGE=20,)
POUT=LIRE_MAILLAGE(UNITE=20,)

# lecture maillage section fine
PRE_GIBI(UNITE_GIBI=18, UNITE_MAILLAGE=21,)
MASECF=LIRE_MAILLAGE(UNITE=21,)

# lecture maillage section grossiere
PRE_GIBI(UNITE_GIBI=19, UNITE_MAILLAGE=22,)
MASECG=LIRE_MAILLAGE(UNITE=22,)

# on enrichit le maillage lineique en multipliant les lignes
MAPOU=CREA_MAILLAGE(MAILLAGE=POUT,
      CREA_GROUP_MA=_F(NOM='POU_AC', TOUT='OUI', PREF_MAILLE='A', PREF_NUME=100,),)

MOPOU=AFFE_MODELE(MAILLAGE=MAPOU,
                  AFFE=_F(TOUT='OUI', PHENOMENE='MECANIQUE', MODELISATION='POU_D_EM',),)

POUCA=AFFE_CARA_ELEM(MODELE=MOPOU,    INFO=2,
# caracteristiques des sections, orientations et rigidite de torsion
           POUTRE=_F(GROUP_MA=('POUTRE','POU_AC'),
                     SECTION='GENERALE',
                     CARA = ('A','IY','IZ','JX'),
                     VALE = (1., 1., 1., 1.3333),),
           ORIENTATION=_F(GROUP_MA=('POUTRE','POU_AC'),
                          CARA='ANGL_VRIL', VALE=-90.0,),
           AFFE_SECT = _F ( GROUP_MA = 'POUTRE',
                            MAILLAGE_SECT = MASECF , TOUT_SECT = 'OUI', NOM = 'BETON',
                            COOR_AXE_POUTRE = (0.,0.943170965E-2,)),
           AFFE_FIBRE =_F ( GROUP_MA = 'POU_AC', CARA = 'SURFACE', NOM = 'ACIER',
                            COOR_AXE_POUTRE = (0.,0.943170965E-2,),
                            VALE =( 0.08 ,-0.125, 2.E-4,
                                  -0.08, -0.125, 2.E-4,
                                  0.1, 0.125, 1.5E-4,
                                  -0.1, 0.125, 1.5E-4, ),  ),
                  )


# LES MATERIAUX
BETON=DEFI_MATERIAU(ELAS=_F(E=2.E10, NU=0.25, RHO=2400., ALPHA=1.E-5,),)

ACIER=DEFI_MATERIAU(ELAS=_F(E=2.10000000000E11, NU=0.3, RHO=7800., ALPHA=1.E-5,),)
#
# LES CHAMPS DE MATERIAUX
CHMAT=AFFE_MATERIAU(MAILLAGE=MAPOU,
                    AFFE=(_F(GROUP_MA='POUTRE', MATER=BETON,),
                          _F(GROUP_MA='POU_AC', MATER=ACIER,),),)

BLOQUAGE=AFFE_CHAR_MECA(MODELE=MOPOU,
                        DDL_IMPO=(_F(GROUP_NO='A',  DX=0.0, DY=0.0, DZ=0.0,  DRX=0.0,  DRY=0.0,),
                                  _F(GROUP_NO='B', DY=0.0,),
                                  ),)



#  ============ CAS DE CHARGE 1 ================
# FLEXION 3 POINTS
CHAR1=AFFE_CHAR_MECA(MODELE=MOPOU,
                      FORCE_NODALE=_F(GROUP_NO='C', FY=1.E4,),)

DEP1=MECA_STATIQUE(MODELE=MOPOU, CHAM_MATER=CHMAT, CARA_ELEM=POUCA,
             #    SOLVEUR=_F(METHODE='LDLT',RENUM='RCMK',STOP_SINGULIER='OUI',),
                  EXCIT=(_F(CHARGE=BLOQUAGE,),  _F(CHARGE=CHAR1,),),)
#
# CALCUL DES EFFORTS GENERALISES
DEP1=CALC_ELEM(reuse =DEP1, RESULTAT=DEP1, 
  OPTION='EFGE_ELNO_DEPL')

DEP1=CALC_NO(reuse =DEP1, RESULTAT=DEP1, OPTION='EFGE_NOEU_DEPL',)

TEST_RESU(RESU=(
# Fleche
_F( RESULTAT=DEP1,NUME_ORDRE=1,NOM_CHAM='DEPL',GROUP_NO='C',NOM_CMP='DY',VALE=2.2735E-3,
REFERENCE='ANALYTIQUE',PRECISION=1.E-3),

# ATTENTION, ci-dessous on a les efforts divises par deux par rapport a la theorie
# car EFGE_NOEU_DEPL fait une "moyenne" aux noeuds et qu'il y a deux elements superposes
# Autre rappel : EFGE_NOEU_DEPL sort les efforts dans le repere local a l'element
_F( RESULTAT=DEP1,NUME_ORDRE=1,NOM_CHAM='EFGE_NOEU_DEPL',GROUP_NO='A',NOM_CMP='VZ',VALE=2.50000E+3,
REFERENCE='ANALYTIQUE',PRECISION=1.E-6),
_F( RESULTAT=DEP1,NUME_ORDRE=1,NOM_CHAM='EFGE_NOEU_DEPL',GROUP_NO='C',NOM_CMP='MFY',VALE=6.25000E+3,
REFERENCE='ANALYTIQUE',PRECISION=1.E-6),

))




#  ============ CAS DE CHARGE 2 ================
# PESANTEUR
CHAR2=AFFE_CHAR_MECA(MODELE=MOPOU, PESANTEUR=(9.8, 0., -1., 0.),)

DEP2=MECA_STATIQUE(MODELE=MOPOU, CHAM_MATER=CHMAT, CARA_ELEM=POUCA,
             #    SOLVEUR=_F(METHODE='LDLT',RENUM='RCMK',STOP_SINGULIER='OUI',),
                  EXCIT=(_F(CHARGE=BLOQUAGE,),  _F(CHARGE=CHAR2,),),)
# Fleche
TEST_RESU(RESU=(
_F( RESULTAT=DEP2,NUME_ORDRE=1,NOM_CHAM='DEPL',GROUP_NO='C',NOM_CMP='DY',VALE=-7.9E-4,
REFERENCE='ANALYTIQUE',PRECISION=1.E-3),
))




#  ============ CAS DE CHARGE 3 ================
# TEMPERATURE IMPOSEE
TEMPE  = CREA_CHAMP( OPERATION='AFFE',TYPE_CHAM='NOEU_TEMP_R', MAILLAGE=MAPOU,
             AFFE=_F(TOUT='OUI', NOM_CMP='TEMP', VALE=100.),)
CHAR3=AFFE_CHAR_MECA(MODELE=MOPOU, TEMP_CALCULEE=TEMPE,)


DEP3=MECA_STATIQUE(MODELE=MOPOU, CHAM_MATER=CHMAT, CARA_ELEM=POUCA,
             #    SOLVEUR=_F(METHODE='LDLT',RENUM='RCMK',STOP_SINGULIER='OUI',),
                  EXCIT=(_F(CHARGE=BLOQUAGE,),  _F(CHARGE=CHAR3,),),)
#
# CALCUL DES EFFORTS GENERALISES
DEP3=CALC_ELEM(reuse =DEP3, RESULTAT=DEP3,   
OPTION='EFGE_ELNO_DEPL', )

DEP3=CALC_NO(reuse =DEP3, RESULTAT=DEP3, OPTION='EFGE_NOEU_DEPL',
             )

TEST_RESU(RESU=(
# allongement
_F( RESULTAT=DEP3,NUME_ORDRE=1,NOM_CHAM='DEPL',GROUP_NO='B',NOM_CMP='DX',VALE=5.0000E-3,
REFERENCE='ANALYTIQUE',PRECISION=1.E-6),
# Quelques efforts generalises nuls
_F( RESULTAT=DEP3,NUME_ORDRE=1,NOM_CHAM='EFGE_NOEU_DEPL',GROUP_NO='A',NOM_CMP='N',VALE=0.00,
REFERENCE='ANALYTIQUE',PRECISION=1.E-6,CRITERE='ABSOLU'),
_F( RESULTAT=DEP3,NUME_ORDRE=1,NOM_CHAM='EFGE_NOEU_DEPL',GROUP_NO='C',NOM_CMP='MFY',VALE=0.00,
REFERENCE='ANALYTIQUE',PRECISION=1.E-6,CRITERE='ABSOLU'),
_F( RESULTAT=DEP3,NUME_ORDRE=1,NOM_CHAM='EFGE_NOEU_DEPL',GROUP_NO='C',NOM_CMP='VZ',VALE=0.00,
REFERENCE='ANALYTIQUE',PRECISION=1.E-6,CRITERE='ABSOLU'),

))



# cas de charge 1 bis
# on repasse le cas de charge 1 avec un maillage plus grossier

POUCAG=AFFE_CARA_ELEM(MODELE=MOPOU,    INFO=2,
           POUTRE=_F(GROUP_MA=('POUTRE','POU_AC'),
                     SECTION='GENERALE',
                     CARA = ('A','IY','IZ','JX'),
                     VALE = (1., 1., 1., 1.3333),),
           ORIENTATION=_F(GROUP_MA=('POUTRE','POU_AC'),
                          CARA='ANGL_VRIL', VALE=-90.0,),
           AFFE_SECT = _F ( GROUP_MA = 'POUTRE',
                            MAILLAGE_SECT = MASECG , TOUT_SECT = 'OUI', NOM = 'BETON',
                            COOR_AXE_POUTRE = (0.,0.943170965E-2,)),
           AFFE_FIBRE =_F ( GROUP_MA = 'POU_AC', CARA = 'SURFACE', NOM = 'ACIER',
                            COOR_AXE_POUTRE = (0.,0.943170965E-2,),
                            VALE =( 0.08 ,-0.125, 2.E-4,
                                  -0.08, -0.125, 2.E-4,
                                  0.1, 0.125, 1.5E-4,
                                  -0.1, 0.125, 1.5E-4, ),  ),
                  )

DEP1G=MECA_STATIQUE(MODELE=MOPOU, CHAM_MATER=CHMAT, CARA_ELEM=POUCAG,
             #    SOLVEUR=_F(METHODE='LDLT',RENUM='RCMK',STOP_SINGULIER='OUI',),
                  EXCIT=(_F(CHARGE=BLOQUAGE,),  _F(CHARGE=CHAR1,),),)
#
TEST_RESU(RESU=(
# Fleche
_F( RESULTAT=DEP1G,NUME_ORDRE=1,NOM_CHAM='DEPL',GROUP_NO='C',NOM_CMP='DY',VALE=2.2735E-3,
REFERENCE='ANALYTIQUE',PRECISION=1.E-2),
))

FIN()
