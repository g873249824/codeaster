
#------------------------------------------------------------------
#
# TITRE : POUTRE EPAISSE EN CONTRAINTES PLANES AVEC
# ======================================================================
# COPYRIGHT (C) 1991 - 2013  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#         VARIATION DE TEMPERATURE LINEAIRE SUIVANT LA LARGEUR
#
#         MAILLE       : QUAD4
#         MODELISATION : DKT
#         5 COUCHES
#
# AUTEUR : F. LEBOUVIER (DeltaCAD)
# DATE   : 31/01/2013
#
#------------------------------------------------------------------

DEBUT(CODE=_F(NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'));


MAIL=LIRE_MAILLAGE(FORMAT='MED',)


MODELE=AFFE_MODELE(MAILLAGE=MAIL,
                   AFFE=_F(TOUT='OUI',
                           PHENOMENE='MECANIQUE',
                           MODELISATION='DKT',),
                  );

# DEFINITION DE LA FONCTION DE TEMPERATURE
# ----------------------------------------

FTEMP = FORMULE(NOM_PARA=('Y'),VALE='50.*Y -50.')


# CONSTRUCTION DES CHAMPS DE GEOMETRIE
# ------------------------------------

CH_GEOM=CREA_CHAMP(OPERATION='EXTR',
                   TYPE_CHAM='NOEU_GEOM_R',
                   NOM_CHAM='GEOMETRIE',
                   MAILLAGE=MAIL,
                  )


TEMP_F=CREA_CHAMP(OPERATION='AFFE',
                 TYPE_CHAM='NOEU_NEUT_F',
                 MAILLAGE=MAIL,
                 AFFE=_F( TOUT = 'OUI',
                          NOM_CMP = ('X1',),
                          VALE_F = (FTEMP,)
                         )
                )

TEMP0= CREA_CHAMP(OPERATION='EVAL',
                 TYPE_CHAM='NOEU_NEUT_R',
                 CHAM_F=TEMP_F,
                 CHAM_PARA=(CH_GEOM)
                 )

TEMP1=CREA_CHAMP(OPERATION='ASSE',
                TYPE_CHAM='NOEU_TEMP_R',
                MAILLAGE=MAIL,
                ASSE=_F( TOUT = 'OUI',
                        CHAM_GD = TEMP0,
                        NOM_CMP = ('X1',),
                        NOM_CMP_RESU = ('TEMP',),
                    )
                )


ACIER=DEFI_MATERIAU(ELAS=_F( E  = 2.E+04,
                             NU = 0.3,
                             ALPHA = 1.E-5,))

CHMAT=AFFE_MATERIAU(MAILLAGE=MAIL,
                             AFFE=_F( TOUT = 'OUI',
                                     MATER = ACIER,),
                             AFFE_VARC=_F(NOM_VARC='TEMP',
                                          CHAM_GD=TEMP1,
                                          VALE_REF=0),)

CARAELEM=AFFE_CARA_ELEM(MODELE=MODELE,
                        COQUE=_F(GROUP_MA = 'POUTRE',
                                 COQUE_NCOU=5,
                                 EPAIS=0.1))
CLIM=AFFE_CHAR_MECA(MODELE=MODELE,
                      DDL_IMPO=(
                               _F(GROUP_MA=('AB','CD'),
                                  DX=0.0,
                                  DZ=0.0,
                                  DRZ=0.0,),
                               _F(GROUP_MA='BC',
                                  DY=0.0,),
                                  ),)

RESU=MECA_STATIQUE(MODELE=MODELE,
                   CHAM_MATER=CHMAT,
                   CARA_ELEM=CARAELEM,
                   EXCIT=_F(CHARGE=CLIM,),);


RESU=CALC_CHAMP(reuse =RESU,
               RESULTAT=RESU,
               NUME_ORDRE=1,
               CONTRAINTE=('SIGM_ELNO',),);

#-------------------------------------------------------------
#
# COUCHE no 2 : z=-0.03m a z=-0.01m
#
# ON TESTE LES CONTRAINTES SIXX, SIYY et SIXY SUR LES PEAUX
# INF, MOY et SUP en X=0.
#
#-------------------------------------------------------------

#--- COUCHE N0 2 , PEAU INF , X=0 Y=0.
#      SIXX = 10.
#      SIYY =  0.
#      SIXY =  0.

SIG_C2_I=POST_CHAMP(RESULTAT=RESU,
                    EXTR_COQUE=_F(NOM_CHAM='SIGM_ELNO',
                                  NUME_COUCHE=1,
                                  NIVE_COUCHE='INF',),);

CON_C2_I=MACR_LIGN_COUPE(RESULTAT=SIG_C2_I,
                     NOM_CHAM='SIGM_ELNO',
                     LIGN_COUPE=_F(TYPE='SEGMENT', DISTANCE_MAX=0.001,
                                   NB_POINTS=11,
                                   COOR_ORIG=(0.,0.,0.,),
                                   COOR_EXTR=(0.,2.,0.,),),);

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=1.5E-2,
           VALE_CALC=   10.133928571429,
           VALE_REFE=10.,
           NOM_PARA='SIXX',
           TABLE=CON_C2_I,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=0.0,),)

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=0.5,
           CRITERE='ABSOLU',
           VALE_CALC=   0.44642857142856,
           VALE_REFE=0.,
           NOM_PARA='SIYY',
           TABLE=CON_C2_I,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=0.0,),)

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=1.E-6,
           CRITERE='ABSOLU',
           VALE_CALC=   1.4338503533031E-14,
           VALE_REFE=0.,
           NOM_PARA='SIXY',
           TABLE=CON_C2_I,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=0.0,),)

#--- COUCHE N0 2 , PEAU MOY , X=0 Y=1.
#      SIXX =  0.
#      SIYY =  0.
#      SIXY =  0.

SIG_C2_M=POST_CHAMP(RESULTAT=RESU,
                    EXTR_COQUE=_F(NOM_CHAM='SIGM_ELNO',
                                  NUME_COUCHE=1,
                                  NIVE_COUCHE='MOY',),);

CON_C2_M=MACR_LIGN_COUPE(RESULTAT=SIG_C2_M,
                     NOM_CHAM='SIGM_ELNO',
                     LIGN_COUPE=_F(TYPE='SEGMENT', DISTANCE_MAX=0.001,
                                   NB_POINTS=11,
                                   COOR_ORIG=(0.,0.,0.,),
                                   COOR_EXTR=(0.,2.,0.,),),);

TEST_TABLE(REFERENCE='ANALYTIQUE',
           CRITERE='ABSOLU',
           PRECISION=0.2,
           VALE_CALC=   0.13392857142862,
           VALE_REFE=0.,
           NOM_PARA='SIXX',
           TABLE=CON_C2_M,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=1.0,),)

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=0.5,
           CRITERE='ABSOLU',
           VALE_CALC=   0.44642857142880,
           VALE_REFE=0.,
           NOM_PARA='SIYY',
           TABLE=CON_C2_M,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=1.0,),)

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=1.E-6,
           CRITERE='ABSOLU',
           VALE_CALC=   4.5643685504193E-14,
           VALE_REFE=0.,
           NOM_PARA='SIXY',
           TABLE=CON_C2_M,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=1.0,),)

#--- COUCHE N0 2 , PEAU SUP , X=0 Y=2.
#      SIXX = -10.
#      SIYY =   0.
#      SIXY =   0.

SIG_C2_S=POST_CHAMP(RESULTAT=RESU,
                    EXTR_COQUE=_F(NOM_CHAM='SIGM_ELNO',
                                  NUME_COUCHE=1,
                                  NIVE_COUCHE='SUP',),);

CON_C2_S=MACR_LIGN_COUPE(RESULTAT=SIG_C2_S,
                     NOM_CHAM='SIGM_ELNO',
                     LIGN_COUPE=_F(TYPE='SEGMENT', DISTANCE_MAX=0.001,
                                   NB_POINTS=11,
                                   COOR_ORIG=(0.,0.,0.,),
                                   COOR_EXTR=(0.,2.,0.,),),);

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=1.5E-2,
           VALE_CALC=   -10.133928571429,
           VALE_REFE=-10.,
           NOM_PARA='SIXX',
           TABLE=CON_C2_S,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=2.0,),)

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=0.5,
           CRITERE='ABSOLU',
           VALE_CALC=   -0.44642857142818,
           VALE_REFE=0.,
           NOM_PARA='SIYY',
           TABLE=CON_C2_S,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=2.0,),)

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=1.E-6,
           CRITERE='ABSOLU',
           VALE_CALC=   -1.3903306137493E-16,
           VALE_REFE=0.,
           NOM_PARA='SIXY',
           TABLE=CON_C2_S,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=2.0,),)

#-------------------------------------------------------------
#
# COUCHE no 5 : z=0.03m a z=0.05m
#
# ON TESTE LES CONTRAINTES SIXX, SIYY et SIXY SUR LES PEAUX
# INF, MOY et SUP en X=0.
#
#-------------------------------------------------------------

#--- COUCHE N0 5 , PEAU INF , X=4, Y=0
#      SIXX = 10.
#      SIYY =  0.
#      SIXY =  0.

SIG_C5_I=POST_CHAMP(RESULTAT=RESU,
                    EXTR_COQUE=_F(NOM_CHAM='SIGM_ELNO',
                                  NUME_COUCHE=3,
                                  NIVE_COUCHE='INF',),);

CON_C5_I=MACR_LIGN_COUPE(RESULTAT=SIG_C5_I,
                     NOM_CHAM='SIGM_ELNO',
                     LIGN_COUPE=_F(TYPE='SEGMENT', DISTANCE_MAX=0.001,
                                   NB_POINTS=11,
                                   COOR_ORIG=(4.,0.,0.,),
                                   COOR_EXTR=(4.,2.,0.,),),);

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=1.5E-2,
           VALE_CALC=   10.133928571429,
           VALE_REFE=10.,
           NOM_PARA='SIXX',
           TABLE=CON_C5_I,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=0.0,),)

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=0.5,
           CRITERE='ABSOLU',
           VALE_CALC=   0.44642857142859,
           VALE_REFE=0.,
           NOM_PARA='SIYY',
           TABLE=CON_C5_I,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=0.0,),)

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=1.E-6,
           CRITERE='ABSOLU',
           VALE_CALC=   -1.0516709284203E-14,
           VALE_REFE=0.,
           NOM_PARA='SIXY',
           TABLE=CON_C5_I,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=0.0,),)

#--- COUCHE N0 5 , PEAU MOY , X=4 Y=1.
#      SIXX =  0.
#      SIYY =  0.
#      SIXY =  0.

SIG_C5_M=POST_CHAMP(RESULTAT=RESU,
                    EXTR_COQUE=_F(NOM_CHAM='SIGM_ELNO',
                                  NUME_COUCHE=1,
                                  NIVE_COUCHE='MOY',),);

CON_C5_M=MACR_LIGN_COUPE(RESULTAT=SIG_C5_M,
                     NOM_CHAM='SIGM_ELNO',
                     LIGN_COUPE=_F(TYPE='SEGMENT', DISTANCE_MAX=0.001,
                                   NB_POINTS=11,
                                   COOR_ORIG=(4.,0.,0.,),
                                   COOR_EXTR=(4.,2.,0.,),),);

TEST_TABLE(REFERENCE='ANALYTIQUE',
           CRITERE='ABSOLU',
           PRECISION=0.2,
           VALE_CALC=   0.13392857142861,
           VALE_REFE=0.,
           NOM_PARA='SIXX',
           TABLE=CON_C5_M,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=1.0,),)

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=0.5,
           CRITERE='ABSOLU',
           VALE_CALC=   0.44642857142869,
           VALE_REFE=0.,
           NOM_PARA='SIYY',
           TABLE=CON_C5_M,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=1.0,),)

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=1.E-6,
           CRITERE='ABSOLU',
           VALE_CALC=   1.5081195121699E-14,
           VALE_REFE=0.,
           NOM_PARA='SIXY',
           TABLE=CON_C5_M,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=1.0,),)

#--- COUCHE N0 5 , PEAU SUP , X=4 Y=2.
#      SIXX = -10.
#      SIYY =   0.
#      SIXY =   0.

SIG_C5_S=POST_CHAMP(RESULTAT=RESU,
                    EXTR_COQUE=_F(NOM_CHAM='SIGM_ELNO',
                                  NUME_COUCHE=1,
                                  NIVE_COUCHE='SUP',),);

CON_C5_S=MACR_LIGN_COUPE(RESULTAT=SIG_C5_S,
                     NOM_CHAM='SIGM_ELNO',
                     LIGN_COUPE=_F(TYPE='SEGMENT', DISTANCE_MAX=0.001,
                                   NB_POINTS=11,
                                   COOR_ORIG=(4.,0.,0.,),
                                   COOR_EXTR=(4.,2.,0.,),),);

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=1.5E-2,
           VALE_CALC=   -10.133928571428,
           VALE_REFE=-10.,
           NOM_PARA='SIXX',
           TABLE=CON_C5_S,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=2.0,),)

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=0.5,
           CRITERE='ABSOLU',
           VALE_CALC=   -0.44642857142832,
           VALE_REFE=0.,
           NOM_PARA='SIYY',
           TABLE=CON_C5_S,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=2.0,),)

TEST_TABLE(REFERENCE='ANALYTIQUE',
           PRECISION=1.E-6,
           CRITERE='ABSOLU',
           VALE_CALC=   -7.3421264523361E-16,
           VALE_REFE=0.,
           NOM_PARA='SIXY',
           TABLE=CON_C5_S,
           FILTRE=_F(NOM_PARA='ABSC_CURV',
                     VALE=2.0,),)

FIN()
