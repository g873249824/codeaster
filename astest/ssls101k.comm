# TITRE PLAQUE CIRCULAIRE POSEE SOUS PRESSION
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
DEBUT(CODE=_F(NOM='SSLS101K',
              NIV_PUB_WEB='INTERNET',),
      DEBUG=_F(SDVERI='OUI',),);

#----------------------------------------------------------------------
#                        ! y
#                        !
# POINTS: O            C **
#         A              *   *
#         B              *     * B
#         C            E *   F   *
#         D              *        *
#         E              *         *
#         F              O ___D____A  ----> x
#----------------------------------------------------------------------
T = 0.05;

R = 1.0;

P = 1.0;


MATER=DEFI_MATERIAU(ELAS=_F(E=1.0,
                            NU=0.3,
                            RHO=1.0,),);

MAILL=LIRE_MAILLAGE(FORMAT='MED',);

MAILL=MODI_MAILLAGE(reuse =MAILL,
                    MAILLAGE=MAILL,
                    ORIE_SHB=_F(GROUP_MA='VOL2',),
                    INFO=2,);

CHMAT=AFFE_MATERIAU(MAILLAGE=MAILL,
                    AFFE=_F(GROUP_MA='VOL1',
                            MATER=MATER,),);

MODEL=AFFE_MODELE(MAILLAGE=MAILL,
                  INFO=2,
                  AFFE=_F(TOUT='OUI',
                          PHENOMENE='MECANIQUE',
                          MODELISATION='SHB',),);

CINE=AFFE_CHAR_MECA(MODELE=MODEL,
                    DDL_IMPO=(_F(GROUP_MA='CONT',
                                 DZ=0.0,),
                              _F(GROUP_MA='SURF1',
                                 DY=0.0,),
                              _F(GROUP_MA='SURF2',
                                 DX=0.0,),),);

PRES=AFFE_CHAR_MECA(MODELE=MODEL,
                    FORCE_FACE=_F(GROUP_MA='SS1',
                                  FZ=-1.0,),);

CHF3=AFFE_CHAR_MECA(MODELE=MODEL,
                    FORCE_INTERNE=_F(GROUP_MA='VOL1',
                                     FZ=-10.0,),);

FZC=DEFI_CONSTANTE(VALE=-10.0,);

CHFC=AFFE_CHAR_MECA_F(MODELE=MODEL,
                      FORCE_INTERNE=_F(GROUP_MA='VOL1',
                                       FZ=FZC,),);

CHPE=AFFE_CHAR_MECA(MODELE=MODEL,
                      PESANTEUR=_F(GRAVITE= 10.,
                                   DIRECTION=(0., 0., -10., ), ),)

MATELEM=CALC_MATR_ELEM(OPTION='RIGI_MECA',
                       MODELE=MODEL,
                       CHAM_MATER=CHMAT,
                       CHARGE=CINE,);

VEPR=CALC_VECT_ELEM(OPTION='CHAR_MECA',
                    CHARGE=(CINE,PRES,),
                    CHAM_MATER=CHMAT,);

VEF3=CALC_VECT_ELEM(OPTION='CHAR_MECA',
                    CHARGE=(CINE,CHF3,),
                    CHAM_MATER=CHMAT,);

VEFC=CALC_VECT_ELEM(OPTION='CHAR_MECA',
                    CHARGE=(CINE,CHFC,),
                    CHAM_MATER=CHMAT,);

VEPE=CALC_VECT_ELEM(OPTION='CHAR_MECA',
                    CHARGE=(CINE,CHPE,),
                    CHAM_MATER=CHMAT,);

NU=NUME_DDL(MATR_RIGI=MATELEM,);

MATASS=ASSE_MATRICE(MATR_ELEM=MATELEM,
                    NUME_DDL=NU,);

VEPRAS=ASSE_VECTEUR(VECT_ELEM=VEPR,
                    NUME_DDL=NU,);

VEF3AS=ASSE_VECTEUR(VECT_ELEM=VEF3,
                    NUME_DDL=NU,);

VEFCAS=ASSE_VECTEUR(VECT_ELEM=VEFC,
                    NUME_DDL=NU,);

VEPEAS=ASSE_VECTEUR(VECT_ELEM=VEPE,
                    NUME_DDL=NU,);

MATASS=FACTORISER(reuse =MATASS,
                  MATR_ASSE=MATASS,);

DEPR=RESOUDRE(MATR=MATASS,
              CHAM_NO=VEPRAS,);

DEF3=RESOUDRE(MATR=MATASS,
              CHAM_NO=VEF3AS,);

DEFC=RESOUDRE(MATR=MATASS,
              CHAM_NO=VEFCAS,);

DEPE=RESOUDRE(MATR=MATASS,
              CHAM_NO=VEPEAS,);

#--------------------------------------------------------------------
TEST_RESU(CHAM_NO=(_F(CRITERE='RELATIF',
                      NOM_CMP='DZ',
                      GROUP_NO='PO',
                      CHAM_GD=DEPR,
                      VALE_CALC=-721.60000000000002,
                      TOLE_MACHINE=1.E-3,),
                   _F(CRITERE='RELATIF',
                      NOM_CMP='DZ',
                      GROUP_NO='PD',
                      CHAM_GD=DEPR,
                      VALE_CALC=-510.0,
                      TOLE_MACHINE=1.E-3,),
                   _F(CRITERE='RELATIF',
                      NOM_CMP='DZ',
                      GROUP_NO='PE',
                      CHAM_GD=DEPR,
                      VALE_CALC=-509.30000000000001,
                      TOLE_MACHINE=1.E-3,),
                   _F(CRITERE='RELATIF',
                      NOM_CMP='DZ',
                      GROUP_NO='PF',
                      CHAM_GD=DEPR,
                      VALE_CALC=-452.69999999999999,
                      TOLE_MACHINE=1.E-3,),
                   ),
          )

TEST_RESU(CHAM_NO=(_F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PO',
                      PRECISION=0.050000000000000003,
                      CHAM_GD=DEPR,
                      VALE_CALC=-721.587430848,
                      VALE_REFE=-695.62559999999996,),
                   _F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PD',
                      PRECISION=0.050000000000000003,
                      CHAM_GD=DEPR,
                      VALE_CALC=-510.003942288,
                      VALE_REFE=-489.72699999999998,),
                   _F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PE',
                      PRECISION=0.050000000000000003,
                      CHAM_GD=DEPR,
                      VALE_CALC=-509.288639099,
                      VALE_REFE=-489.72699999999998,),
                   _F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PF',
                      PRECISION=0.050000000000000003,
                      CHAM_GD=DEPR,
                      VALE_CALC=-452.681711340,
                      VALE_REFE=-435.8974,),
                   _F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PO',
                      PRECISION=0.10000000000000001,
                      CHAM_GD=DEF3,
                      VALE_CALC=-744.543630431,
                      VALE_REFE=-695.62559999999996,),
                   _F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PD',
                      PRECISION=0.10000000000000001,
                      CHAM_GD=DEF3,
                      VALE_CALC=-522.724669278,
                      VALE_REFE=-489.72699999999998,),
                   _F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PE',
                      PRECISION=0.10000000000000001,
                      CHAM_GD=DEF3,
                      VALE_CALC=-533.213132438,
                      VALE_REFE=-489.72699999999998,),
                   _F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PF',
                      PRECISION=0.10000000000000001,
                      CHAM_GD=DEF3,
                      VALE_CALC=-469.179848877,
                      VALE_REFE=-435.8974,),
                   _F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PO',
                      PRECISION=0.10000000000000001,
                      CHAM_GD=DEFC,
                      VALE_CALC=-744.543630431,
                      VALE_REFE=-695.62559999999996,),
                   _F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PD',
                      PRECISION=0.10000000000000001,
                      CHAM_GD=DEFC,
                      VALE_CALC=-522.724669278,
                      VALE_REFE=-489.72699999999998,),
                   _F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PE',
                      PRECISION=0.10000000000000001,
                      CHAM_GD=DEFC,
                      VALE_CALC=-533.213132438,
                      VALE_REFE=-489.72699999999998,),
                   _F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PF',
                      PRECISION=0.10000000000000001,
                      CHAM_GD=DEFC,
                      VALE_CALC=-469.179848877,
                      VALE_REFE=-435.8974,),
                   _F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PO',
                      PRECISION=0.10000000000000001,
                      CHAM_GD=DEPE,
                      VALE_CALC=-744.543630431,
                      VALE_REFE=-695.62559999999996,),
                   _F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PD',
                      PRECISION=0.10000000000000001,
                      CHAM_GD=DEPE,
                      VALE_CALC=-522.724669278,
                      VALE_REFE=-489.72699999999998,),
                   _F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PE',
                      PRECISION=0.10000000000000001,
                      CHAM_GD=DEPE,
                      VALE_CALC=-533.213132438,
                      VALE_REFE=-489.72699999999998,),
                   _F(CRITERE='RELATIF',
                      REFERENCE='ANALYTIQUE',
                      NOM_CMP='DZ',
                      GROUP_NO='PF',
                      PRECISION=0.10000000000000001,
                      CHAM_GD=DEPE,
                      VALE_CALC=-469.179848877,
                      VALE_REFE=-435.8974,),
                   ),
          )

#--------------------------------------------------------------------

RESU=CREA_RESU(OPERATION='AFFE',
               TYPE_RESU='EVOL_ELAS',
               NOM_CHAM='DEPL',
               AFFE=_F(CHAM_GD=DEPR,
                       INST=0.,
                       MODELE=MODEL,
                       CHAM_MATER=CHMAT,
                       ),);

RESU=CALC_CHAMP(reuse =RESU,
               RESULTAT=RESU,
                CONTRAINTE=('SIEF_ELGA'),);

#IMPR_RESU(FORMAT='GMSH',
#          RESU=_F(RESULTAT=RESU,),);

#IMPR_RESU(RESU=_F(MAILLAGE=MAILL,),);

#--------------------------------------------------------------------
# expression des contraintes a partir du moment SIXX=MXX*12*z/(h*h*h)
# COORDONNEE DU POINT DE GAUSS EXTREME
ZH = (((0.906179845939 * T) / 2) + (T / 2));

MXX_O = -0.20625;

SIG_O = (((MXX_O * 12) * ZH) / 0.001);

FIN();
