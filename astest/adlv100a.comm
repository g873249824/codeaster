# MODIF  DATE 09/05/2007   AUTEUR PELLET J.PELLET 
# TITRE PISTON COUPLE A UNE COLONNE DE FLUIDE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================

#

#      PISTON COUPLE A UNE COLONNE DE FLUIDE

#              CAS TEST ADLV100A

#

DEBUT(CODE=_F( NOM = 'ADLV100A',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

MAYA=LIRE_MAILLAGE( )

EAU=DEFI_MATERIAU( FLUIDE=_F( RHO = 1000.,  CELE_R = 1400.))

AIR=DEFI_MATERIAU( FLUIDE=_F( RHO = 1.2,    CELE_R = 340.))

ACIER=DEFI_MATERIAU( ELAS=_F( RHO = 7800.,  NU = 0.3,  E = 2.E+11))

CHAMPMAT=AFFE_MATERIAU(  MAILLAGE=MAYA,AFFE=(
                       _F( GROUP_MA = ('HEXAEAU',  'COUPEAU',),  MATER = EAU),
                       _F( GROUP_MA = ('HEXAAIR',  'COUPAIR',),  MATER = AIR),
                       _F( GROUP_MA = 'HEXAPIST',           MATER = ACIER))
                            )

COLONNE=AFFE_MODELE( MAILLAGE=MAYA,  VERIF='MAILLE',AFFE=(
                     _F( GROUP_MA = ('HEXAEAU',  'HEXAAIR',),
                       MODELISATION = '3D_FLUIDE',  PHENOMENE = 'MECANIQUE'),
                     _F( GROUP_MA = ('COUPEAU',  'COUPAIR',),
                       MODELISATION = 'FLUI_STRU',  PHENOMENE = 'MECANIQUE'),
                     _F( GROUP_MA = 'HEXAPIST',
                       MODELISATION = '3D',         PHENOMENE = 'MECANIQUE'))
                          )

SURFLIBR=AFFE_CHAR_MECA( MODELE=COLONNE,
                    DDL_IMPO=_F( GROUP_NO = 'NOEUSURF',  PRES = 0.,  PHI = 0.))

GUIDAGE=AFFE_CHAR_MECA( MODELE=COLONNE,
                    DDL_IMPO=_F( GROUP_NO = 'NOEUPIST',  DY = 0.,  DZ = 0.))

MATELE_K=CALC_MATR_ELEM( MODELE=COLONNE,
                              CHAM_MATER=CHAMPMAT,  OPTION='RIGI_MECA',
                              CHARGE=(SURFLIBR,  GUIDAGE,))

MATELE_M=CALC_MATR_ELEM( MODELE=COLONNE,
                              CHAM_MATER=CHAMPMAT,  OPTION='MASS_MECA',
                              CHARGE=(SURFLIBR, GUIDAGE,))

NUM=NUME_DDL( MATR_RIGI=MATELE_K)

MATASK=ASSE_MATRICE(MATR_ELEM=MATELE_K,NUME_DDL=NUM)

MATASM=ASSE_MATRICE(MATR_ELEM=MATELE_M,NUME_DDL=NUM)

MODES=MODE_ITER_INV( MATR_A=MATASK,  MATR_B=MATASM,
                             CALC_FREQ=_F( OPTION = 'AJUSTE',
                                        FREQ = (10., 20.,))
                            )

MASSES=POST_ELEM(
                             MODELE=COLONNE,
                         CHAM_MATER=CHAMPMAT,
                          MASS_INER=_F(
                                      TOUT = 'OUI')
                     )

TEST_TABLE( TABLE=MASSES,
                NOM_PARA='MASSE',
                VALE=0.612725,   PRECISION=1.E-6)

TEST_TABLE( TABLE=MASSES,
                NOM_PARA='CDG_X',
                VALE=5.486811E-2,   PRECISION=1.E-7)

TEST_TABLE( TABLE=MASSES,
                NOM_PARA='IX_G',
                VALE=2.55302083E-4,   PRECISION=1.E-6)

TEST_TABLE( TABLE=MASSES,
                NOM_PARA='IY_G',
                VALE=3.1984386E-4,   PRECISION=1.E-7)

TEST_TABLE( TABLE=MASSES,
                NOM_PARA='IZ_G',
                VALE=3.1984386E-4,   PRECISION=1.E-7)

TEST_RESU(RESU=_F( RESULTAT = MODES,  PARA = 'FREQ',
                    CRITERE = 'RELATIF',  PRECISION = 5.E-3,
                    NUME_ORDRE = 1,  VALE = 13.82)
             )

# pour tester : AIDE/TYPE_ELEM :
#-------------------------------
AIDE(TYPE_ELEM=_F())

FIN()
#
