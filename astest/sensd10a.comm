# MODIF  DATE 20/10/2011   AUTEUR SELLENET N.SELLENET 
# TITRE PLAQUE RECTANGULAIRE EN APPUI SIMPLE SUR LES BORDS
# sensd10a.para = tps_job 160 mem_job 256Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2011  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
# ----------------------------------------------------------------------
# Plaque rectangulaire (L=0.3m, l=0.2m, ep=0.001m)
# Modelisation DKT
# Sensibilite des modes propres par rapport a E et NU
# Condition aux limites : appui simple sur les bords
# La solution de reference est obtenue analytiquement
# ----------------------------------------------------------------------

DEBUT(CODE=_F(NOM='SENSD10A',
              NIV_PUB_WEB='INTERNET',VISU_EFICAS='NON'),);

pi = 3.14159
rho = 7800.
ep = 0.001
young = 2.1E11
poisson = 0.3

#dimensions d'apres maillage
largeur = 0.2
longueur = 0.3

#           E     NU
sensible=[young, poisson, ]

n=len(sensible)
PS=[None]*n

for i in range(n):
    PS[i]=DEFI_PARA_SENSI(VALE=sensible[i])

MA=LIRE_MAILLAGE(FORMAT='MED',);

MA=DEFI_GROUP(reuse =MA,
              MAILLAGE=MA,
              CREA_GROUP_NO=_F(GROUP_MA=('BORD',),),)

MO=AFFE_MODELE(MAILLAGE=MA,
               AFFE=_F(GROUP_MA='PLAQUE',
                       PHENOMENE='MECANIQUE',
                       MODELISATION='DKT',),);

CARELEM=AFFE_CARA_ELEM(MODELE=MO,
                       COQUE=_F(GROUP_MA='PLAQUE',
                                EPAIS=ep,),);

MAT=DEFI_MATERIAU(ELAS_FO=_F(E=PS[0],
                             RHO=rho,
                             NU=PS[1],
                             ),);

CHMAT=AFFE_MATERIAU(MAILLAGE=MA,
                    AFFE=_F(TOUT='OUI',
                            MATER=MAT,),);

CLIM=AFFE_CHAR_MECA(MODELE=MO,
                      DDL_IMPO=_F(GROUP_NO='BORD',
                                  DX=0.0,
                                  DY=0.0,
                                  DZ=0.0,
                                  ),);

MATELER=CALC_MATR_ELEM(MODELE=MO,OPTION='RIGI_MECA',
                       CHAM_MATER=CHMAT,
                       CARA_ELEM=CARELEM,
                       CHARGE=CLIM);

MATELEM=CALC_MATR_ELEM(MODELE=MO,
                       OPTION='MASS_MECA',
                       CHAM_MATER=CHMAT,
                       CARA_ELEM=CARELEM,
                       CHARGE=CLIM);

NUM=NUME_DDL(MATR_RIGI=MATELER);

MATASSR=ASSE_MATRICE(MATR_ELEM=MATELER,NUME_DDL=NUM);

MATASSM=ASSE_MATRICE(MATR_ELEM=MATELEM,NUME_DDL=NUM);

MODES=MODE_ITER_SIMULT(MATR_A=MATASSR,
                       MATR_B=MATASSM,
                       SENSIBILITE=(PS[0],PS[1],),CHAM_MATER=CHMAT,CARA_ELEM=CARELEM,
                       CALC_FREQ=_F(OPTION='PLUS_PETITE',NMAX_FREQ=3),)

# calcul de la solution analytique
def sqrt(x):
    return x**.5

xx = pi*ep*sqrt(young/(12.*rho*(1-poisson*poisson)))/(2.*longueur*longueur*largeur*largeur)
f11 = xx*(longueur*longueur*1*1+largeur*largeur*1*1)
f12 = xx*(longueur*longueur*1*1+largeur*largeur*2*2)
f21 = xx*(longueur*longueur*2*2+largeur*largeur*1*1)

df11_e = f11/(2.*sensible[0])
df12_e = f12/(2.*sensible[0])
df21_e = f21/(2.*sensible[0])

df11_nu = f11*sensible[1]/(1.-sensible[1]*sensible[1])
df12_nu = f12*sensible[1]/(1.-sensible[1]*sensible[1])
df21_nu = f21*sensible[1]/(1.-sensible[1]*sensible[1])

TEST_RESU(RESU=(
                _F(RESULTAT=MODES, NUME_ORDRE=1, PARA='FREQ',
                   VALE=f11, CRITERE='RELATIF', PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES, NUME_ORDRE=2, PARA='FREQ',
                   VALE=f12, CRITERE='RELATIF', PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES, NUME_ORDRE=3, PARA='FREQ',
                   VALE=f21, CRITERE='RELATIF', PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),

                _F(RESULTAT=MODES, NUME_ORDRE=1, PARA='FREQ',
                   VALE=df11_e, CRITERE='RELATIF', PRECISION=0.01,
                   SENSIBILITE=PS[0],REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES, NUME_ORDRE=2, PARA='FREQ',
                   VALE=df12_e, CRITERE='RELATIF', PRECISION=0.01,
                   SENSIBILITE=PS[0],REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES, NUME_ORDRE=3, PARA='FREQ',
                   VALE=df21_e, CRITERE='RELATIF', PRECISION=0.01,
                   SENSIBILITE=PS[0],REFERENCE='ANALYTIQUE',),

                _F(RESULTAT=MODES, NUME_ORDRE=1, PARA='FREQ',
                   VALE=df11_nu, CRITERE='RELATIF', PRECISION=0.01,
                   SENSIBILITE=PS[1],REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES, NUME_ORDRE=2, PARA='FREQ',
                   VALE=df12_nu, CRITERE='RELATIF', PRECISION=0.02,
                   SENSIBILITE=PS[1],REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES, NUME_ORDRE=3, PARA='FREQ',
                   VALE=df21_nu, CRITERE='RELATIF', PRECISION=0.02,
                   SENSIBILITE=PS[1],REFERENCE='ANALYTIQUE',),
                ),);

FIN();
#
