# MODIF  DATE 11/06/2012   AUTEUR PELLET J.PELLET 
# TITRE ESSAI DE THERMOPLASTICITE (MISES ECR. ISOT. BARRE)
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#

DEBUT(CODE=_F(NOM='SSNL112G', NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'))

#

MAIL=LIRE_MAILLAGE( )

DEFI_GROUP( reuse=MAIL,   MAILLAGE=MAIL,
                 CREA_GROUP_MA=_F(  NOM = 'TOUT', TOUT = 'OUI'))

#

MOD=AFFE_MODELE(
                        MAILLAGE=MAIL,
                        AFFE=_F(  TOUT = 'OUI',
                               PHENOMENE = 'MECANIQUE',
                               MODELISATION = '2D_BARRE')
                     )

#

MATER=DEFI_MATERIAU(         ELAS=_F(  E = 2.E11,
                                       NU = 0.3,
                                       ALPHA = 1.E-5,
                                       RHO=1.),
                              ECRO_LINE=_F(  D_SIGM_EPSI = 2.E9,
                                          SY = 2.E8)
                          )

#

CHMAT=AFFE_MATERIAU(
                            MAILLAGE=MAIL,
                            AFFE=_F(  TOUT = 'OUI',
                                   MATER = MATER,
                                   )

                         )

#

CARBA=AFFE_CARA_ELEM(     MODELE=MOD,
                          BARRE=_F(  GROUP_MA = 'TOUT',
                                     SECTION = 'GENERALE',
                                     CARA = ( 'A', ),
                                     VALE = ( 5.E-4,))
                          )

#

F1_T=DEFI_FONCTION(

                   NOM_PARA='INST',
                PROL_DROITE='EXCLU',
                PROL_GAUCHE='EXCLU',

                VALE=(
                0.0,        50.0,
                1.0,       -50.0,
                2.0,       -300.0,
                3.0,       -100.0,
                4.0,         50.0,
                5.0,       -150.0,
                6.0,       -350.0,
                7.0,       -200.0,
                )
              )

#

LINST=DEFI_LIST_REEL(      DEBUT=0.,INTERVALLE=(

                           _F(  JUSQU_A = 1.,     NOMBRE = 1),
                           _F(  JUSQU_A = 2.,     NOMBRE = 1),
                           _F(  JUSQU_A = 3.,     NOMBRE = 1),
                           _F(  JUSQU_A = 4.,     NOMBRE = 1),
                           _F(  JUSQU_A = 5.,     NOMBRE = 1),
                           _F(  JUSQU_A = 6.,     NOMBRE = 1),
                           _F(  JUSQU_A = 7.,     NOMBRE = 1))
                        )

#
TEMPIMPO=CREA_CHAMP(  OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_F',
                      MAILLAGE=MAIL,
                      AFFE=_F(  NOM_CMP = 'TEMP',
                                GROUP_NO = 'BARRE',
                                VALE_F = F1_T)
                   )

#

TEMPRESU=CREA_RESU(  OPERATION='AFFE', TYPE_RESU='EVOL_THER',
                     NOM_CHAM='TEMP',
                     AFFE=_F(  LIST_INST = LINST,
                               NUME_INIT = 1,
                               NUME_FIN = 8,
                               CHAM_GD = TEMPIMPO)
                   )

LIAISON=AFFE_CHAR_MECA(
                             MODELE=MOD,
                             DDL_IMPO=_F(  TOUT = 'OUI',
                                        DX = 0.,  DY = 0.)

                            )

#

CHMTM=AFFE_MATERIAU(   MAILLAGE=MAIL,
                         AFFE=_F(  TOUT = 'OUI',
                                   MATER = MATER,),
                         AFFE_VARC=_F( TOUT='OUI',
                                       EVOL=TEMPRESU,
                                       NOM_VARC='TEMP',
                                       NOM_CHAM='TEMP',
                                       VALE_REF = 50.0),
                         )

#


UELAS=MECA_STATIQUE(

                     MODELE=MOD,
                 CHAM_MATER=CHMTM,
                 CARA_ELEM=CARBA,EXCIT=(
                _F(  CHARGE = LIAISON),),
                  LIST_INST=LINST,


               )

CALC_CHAMP(reuse=UELAS,RESULTAT=UELAS,LIST_INST=LINST,CONTRAINTE=('EFGE_ELNO'))


U=STAT_NON_LINE(
                            MODELE=MOD,
                        CHAM_MATER=CHMTM,
                         CARA_ELEM=CARBA,
                             EXCIT=( _F(CHARGE = LIAISON),),
                         COMP_INCR=_F( RELATION = 'VMIS_ISOT_LINE'),
                         INCREMENT=_F( LIST_INST = LINST,
                                       NUME_INST_INIT = 0,
                                       NUME_INST_FIN = 7),
                            NEWTON=_F( MATRICE = 'ELASTIQUE',
                                       REAC_INCR = 1,
                                       REAC_ITER = 1),
                       CONVERGENCE=_F( RESI_GLOB_MAXI = 1.0E-04,
                                       ITER_GLOB_MAXI = 40),
                     RECH_LINEAIRE=_F( ITER_LINE_MAXI = 8)
              )

CALC_CHAMP(reuse=U,CONTRAINTE=('SIEF_ELNO'),RESULTAT=U)


CALC_CHAMP(reuse=U,  FORCE='FORC_NODA',
                        RESULTAT=U)

MASS = POST_ELEM(MODELE=MOD,
                 CARA_ELEM=CARBA,
                 CHAM_MATER=CHMTM,
                 MASS_INER=_F(TOUT='OUI'),)

TEST_TABLE(TABLE=MASS, REFERENCE='ANALYTIQUE',
           NOM_PARA = 'MASSE',
           VALE = 5.00000E-04)

TEST_TABLE(TABLE=MASS, REFERENCE='ANALYTIQUE',
           NOM_PARA = 'CDG_X',
           CRITERE='ABSOLU',
           VALE = 0.)

TEST_TABLE(TABLE=MASS, REFERENCE='ANALYTIQUE',
           NOM_PARA = 'CDG_Y',
           VALE = 0.5)

TEST_TABLE(TABLE=MASS, REFERENCE='ANALYTIQUE',
           NOM_PARA = 'CDG_Z',
           CRITERE='ABSOLU',
           VALE = 0.)

TEST_TABLE(TABLE=MASS, REFERENCE='ANALYTIQUE',
           NOM_PARA = 'IX_G',
           CRITERE='ABSOLU',
           VALE = 0.)

TEST_TABLE(TABLE=MASS, REFERENCE='ANALYTIQUE',
           NOM_PARA = 'IY_G',
           CRITERE='ABSOLU',
           VALE = 0.)

TEST_TABLE(TABLE=MASS, REFERENCE='ANALYTIQUE',
           NOM_PARA = 'IZ_G',
           CRITERE='ABSOLU',
           VALE = 0.)

TEST_TABLE(TABLE=MASS, REFERENCE='ANALYTIQUE',
           NOM_PARA = 'IXY_G',
           CRITERE='ABSOLU',
           VALE = 0.)

TEST_TABLE(TABLE=MASS, REFERENCE='ANALYTIQUE',
           NOM_PARA = 'IXZ_G',
           CRITERE='ABSOLU',
           VALE = 0.)

TEST_TABLE(TABLE=MASS, REFERENCE='ANALYTIQUE',
           NOM_PARA = 'IYZ_G',
           CRITERE='ABSOLU',
           VALE = 0.)

TEST_TABLE(TABLE=MASS, REFERENCE='ANALYTIQUE',
           NOM_PARA = 'IX_PRIN_G',
           CRITERE='ABSOLU',
           VALE = 0.)

TEST_TABLE(TABLE=MASS, REFERENCE='ANALYTIQUE',
           NOM_PARA = 'IY_PRIN_G',
           CRITERE='ABSOLU',
           VALE = 0.)

TEST_TABLE(TABLE=MASS, REFERENCE='ANALYTIQUE',
           NOM_PARA = 'IZ_PRIN_G',
           CRITERE='ABSOLU',
           VALE = 0.)

TEST_TABLE(TABLE=MASS, REFERENCE='ANALYTIQUE',
           NOM_PARA = 'ALPHA',
           CRITERE='ABSOLU',
           VALE = 0.)


SIGY_T=RECU_FONCTION(
                 RESULTAT=U,
                TOUT_INST='OUI',
                NOM_CHAM='SIEF_ELNO',
                 NOM_CMP='N',
                   MAILLE='M1',
                    NOEUD='N1',
                 NOM_PARA='INST',
                 NOM_RESU='SIGY_T',
                 INTERPOL='LIN',
               PROL_GAUCHE='LINEAIRE'
                          )

#
TEMP_T=RECU_FONCTION(
                 RESULTAT=TEMPRESU,
                TOUT_INST='OUI',
                NOM_CHAM='TEMP',
                 NOM_CMP='TEMP',
                   MAILLE='M1',
                    NOEUD='N1',
                 NOM_PARA='INST',
                 NOM_RESU='TEMP_T',
                 INTERPOL='LIN'
                          )

TEST_RESU(RESU=(

            _F( RESULTAT = U, REFERENCE='ANALYTIQUE',
             INST = 1.,
             NOM_CHAM = 'SIEF_ELNO',
             NOM_CMP = 'N',
             MAILLE = 'M1',
             NOEUD = 'N1',
             VALE = 100.E3,
             PRECISION = 0.001),
            _F( RESULTAT = U, REFERENCE='ANALYTIQUE',
             INST = 2.,
             NOM_CHAM = 'SIEF_ELNO',
             NOM_CMP = 'N',
             MAILLE = 'M1',
             NOEUD = 'N1',
             VALE = 102.5E3,
             PRECISION = 0.001),
            _F( RESULTAT = U, REFERENCE='ANALYTIQUE',
             INST = 3.,
             NOM_CHAM = 'SIEF_ELNO',
             NOM_CMP = 'N',
             MAILLE = 'M1',
             NOEUD = 'N1',
             VALE = -97.5E3,
             PRECISION = 0.001),
            _F( RESULTAT = U, REFERENCE='ANALYTIQUE',
             INST = 4.,
             NOM_CHAM = 'SIEF_ELNO',
             NOM_CMP = 'N',
             MAILLE = 'M1',
             NOEUD = 'N1',
             VALE = -103.95E3,
             PRECISION = 0.001),
            _F( RESULTAT = U, REFERENCE='ANALYTIQUE',
             INST = 5.,
             NOM_CHAM = 'SIEF_ELNO',
             NOM_CMP = 'N',
             MAILLE = 'M1',
             NOEUD = 'N1',
             VALE = 96.05E3,
             PRECISION = 0.001),
            _F( RESULTAT = U, REFERENCE='ANALYTIQUE',
             INST = 6.,
             NOM_CHAM = 'SIEF_ELNO',
             NOM_CMP = 'N',
             MAILLE = 'M1',
             NOEUD = 'N1',
             VALE = 105.871E3,
             PRECISION = 0.001),
            _F( RESULTAT = U, REFERENCE='ANALYTIQUE',
             INST = 7.,
             NOM_CHAM = 'SIEF_ELNO',
             NOM_CMP = 'N',
             MAILLE = 'M1',
             NOEUD = 'N1',
             VALE = -44.129E3,
             PRECISION = 0.001))
        )

TEST_RESU(RESU=(

            _F( RESULTAT = U, REFERENCE='ANALYTIQUE',
             INST = 1.,
             NOM_CHAM = 'FORC_NODA',
             NOM_CMP = 'DY',
             NOEUD = 'N1',
             VALE = 100.E3,
             PRECISION = 0.001),
            _F( RESULTAT = U, REFERENCE='ANALYTIQUE',
             INST = 2.,
             NOM_CHAM = 'FORC_NODA',
             NOM_CMP = 'DY',
             NOEUD = 'N1',
             VALE = 102.5E3,
             PRECISION = 0.001),
            _F( RESULTAT = U, REFERENCE='ANALYTIQUE',
             INST = 3.,
             NOM_CHAM = 'FORC_NODA',
             NOM_CMP = 'DY',
             NOEUD = 'N1',
             VALE = -97.5E3,
             PRECISION = 0.001),
            _F( RESULTAT = U, REFERENCE='ANALYTIQUE',
             INST = 4.,
             NOM_CHAM = 'FORC_NODA',
             NOM_CMP = 'DY',
             NOEUD = 'N1',
             VALE = -103.95E3,
             PRECISION = 0.001),
            _F( RESULTAT = U, REFERENCE='ANALYTIQUE',
             INST = 5.,
             NOM_CHAM = 'FORC_NODA',
             NOM_CMP = 'DY',
             NOEUD = 'N1',
             VALE = 96.05E3,
             PRECISION = 0.001),
            _F( RESULTAT = U, REFERENCE='ANALYTIQUE',
             INST = 6.,
             NOM_CHAM = 'FORC_NODA',
             NOM_CMP = 'DY',
             NOEUD = 'N1',
             VALE = 105.871E3,
             PRECISION = 0.001),
            _F( RESULTAT = U, REFERENCE='ANALYTIQUE',
             INST = 7.,
             NOM_CHAM = 'FORC_NODA',
             NOM_CMP = 'DY',
             NOEUD = 'N1',
             VALE = -44.129E3,
             PRECISION = 0.001))
        )

FIN()
