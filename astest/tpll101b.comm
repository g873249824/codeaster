# MODIF  DATE 22/10/2007   AUTEUR PELLET J.PELLET 
# TITRE CALCUL ELECTRIQUE ET THERMIQUE D'UN CYLINDRE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================


DEBUT(CODE=_F(NOM='TPLL101B',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

MAIL=LIRE_MAILLAGE( )

MAIL=DEFI_GROUP( reuse=MAIL,
                     MAILLAGE=MAIL,
                CREA_GROUP_NO=_F( TOUT_GROUP_MA = 'OUI')
               )

MO=AFFE_MODELE(
                MAILLAGE=MAIL,
                AFFE=_F(
                 TOUT = 'OUI',
                 MODELISATION = 'AXIS',
                 PHENOMENE = 'THERMIQUE')
               )

# CALCUL ELECTRIQUE
#------------------

ACIER_EL=DEFI_MATERIAU(
                THER=_F( LAMBDA = 1., RHO_CP = 0.)
               )

CHMAT_EL=AFFE_MATERIAU(
                MAILLAGE=MAIL,
                    AFFE=_F( TOUT = 'OUI', MATER = ACIER_EL)
               )

CHAR_EL=AFFE_CHAR_THER(
                    MODELE=MO,
               TEMP_IMPO=_F( GROUP_NO = 'LBC', TEMP = 10.),
                FLUX_REP=(
                 _F( GROUP_MA = 'LAB',  FLUN = 0.),
                 _F( GROUP_MA = 'LCD',  FLUN = 0.),
                 _F( GROUP_MA = 'LDA',  FLUN = -10.))
               )

POT_ELRE=THER_LINEAIRE(MODELE=MO,
                       CHAM_MATER=CHMAT_EL,
                       EXCIT=_F( CHARGE = CHAR_EL)
                      )

CALC_ELEM(reuse=POT_ELRE,
          RESULTAT=POT_ELRE,
          OPTION='SOUR_ELGA_ELEC',
          INST=0.)


SOURCE=CREA_CHAMP(  OPERATION='EXTR', TYPE_CHAM='ELGA_SOUR_R',
                    NOM_CHAM='SOUR_ELGA_ELEC',RESULTAT=POT_ELRE,
                    NUME_ORDRE=0)


# CALCUL THERMIQUE
# -----------------

CHAR_TH=AFFE_CHAR_THER(
                 MODELE=MO,TEMP_IMPO=(
                    _F( GROUP_NO = 'LDA',  TEMP = 0.),
                    _F( GROUP_NO = 'LBC',  TEMP = 0.)),FLUX_REP=(
                    _F( GROUP_MA = 'LAB',  FLUN = 0.),
                    _F( GROUP_MA = 'LCD',  FLUN = 0.)),
                       SOURCE=_F( SOUR_CALCULEE = SOURCE)
               )

ACIER_TH=DEFI_MATERIAU(
                THER=_F( LAMBDA = 2.E-2, RHO_CP = 0.)
               )

CHMAT_TH=AFFE_MATERIAU(
                MAILLAGE=MAIL,
               AFFE=_F(
                 TOUT = 'OUI',
                 MATER = ACIER_TH)
               )

TEMPRESU=THER_LINEAIRE(
                    MODELE=MO,
                CHAM_MATER=CHMAT_TH,
                    EXCIT=_F( CHARGE = CHAR_TH)
               )

TEMP=CREA_CHAMP(  OPERATION='EXTR', TYPE_CHAM='NOEU_TEMP_R',
NOM_CHAM='TEMP',
               RESULTAT=TEMPRESU,
               NUME_ORDRE=0
               )

TEST_RESU(
             CHAM_NO=_F(
              CHAM_GD = TEMP,


              NOEUD = 'N186',


              NOM_CMP = 'TEMP',
              VALE = 588.9313)
            )

FIN()
#
