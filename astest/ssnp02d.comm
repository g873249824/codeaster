# TITRE PLAQUE CARREE EN TRACTION BIAXIALE NORTON
# ======================================================================
# COPYRIGHT (C) 1991 - 2013  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#
# UTILISATION DE LA LOI VISCOPLASTIQUE DE NORTON
# ELEMENTS TRIA3 + SEG2 POUR LE CHARGEMENT
#.....................................................................

DEBUT(CODE=_F(
              NIV_PUB_WEB='INTERNET',),);

MAYA=LIRE_MAILLAGE();

MODEL=AFFE_MODELE(MAILLAGE=MAYA,
                  VERIF='MAILLE',
                  AFFE=_F(TOUT='OUI',
                          PHENOMENE='MECANIQUE',
                          MODELISATION='D_PLAN',),);

ACIER=DEFI_MATERIAU(ELAS=_F(E=178600.,
                            NU=0.3,),
                    LEMAITRE=_F(N=9.7,
                                UN_SUR_K=.00077519,
                                UN_SUR_M=0.,),);

MATER=AFFE_MATERIAU(MAILLAGE=MAYA,
                    AFFE=_F(TOUT='OUI',
                            MATER=ACIER,),);

TRAC_FO=DEFI_FONCTION(NOM_PARA='INST',VALE=(0.,0.,
                            30.,300.,
                            3630.,300.,
                            3660.,300.,
                            7260.,300.,
                            7320.,-300.,
                            7350.,-300.,
                            10950.,-300.,
                            10980.,-300.,
                            11010.,0.,
                            ),PROL_DROITE='EXCLU',PROL_GAUCHE='EXCLU',);

CISA_FO=DEFI_FONCTION(NOM_PARA='INST',VALE=(0.,0.,
                            30.,0.,
                            3630.,0.,
                            3660.,300.,
                            7260.,300.,
                            7320.,300.,
                            7350.,0.,
                            10950.,0.,
                            10980.,-300.,
                            11010.,-300.,
                            ),PROL_DROITE='EXCLU',PROL_GAUCHE='EXCLU',);

TRAC=AFFE_CHAR_MECA(MODELE=MODEL,
                    FORCE_CONTOUR=_F(GROUP_MA='DROITE',
                                     FX=1.,),);

CISA=AFFE_CHAR_MECA(MODELE=MODEL,
                    FORCE_CONTOUR=_F(GROUP_MA='HAUT',
                                     FY=1.,),);

CONDLIM=AFFE_CHAR_MECA(MODELE=MODEL,
                       DDL_IMPO=(_F(NOEUD='NO1',
                                    DX=0.,
                                    DY=0.,),
                                 _F(NOEUD='NO2',
                                    DY=0.,),
                                 _F(NOEUD='NO4',
                                    DX=0.,),),);


LINST0=DEFI_LIST_REEL(DEBUT=0.0,
                   INTERVALLE=(_F(JUSQU_A=30.,
                                  NOMBRE=30,),
                               _F(JUSQU_A=3630.,
                                  NOMBRE=10,),
                               _F(JUSQU_A=3660.,
                                  NOMBRE=10,),
                               _F(JUSQU_A=7260.,
                                  NOMBRE=10,),
                               _F(JUSQU_A=7320.,
                                  NOMBRE=100,),
                               _F(JUSQU_A=7350.,
                                  NOMBRE=20,),
                               _F(JUSQU_A=10950.,
                                  NOMBRE=20,),
                               _F(JUSQU_A=10980.,
                                  NOMBRE=20,),
                               _F(JUSQU_A=11010.,
                                  NOMBRE=20,),),);


listtps=DEFI_LIST_INST( DEFI_LIST=_F(LIST_INST=LINST0),);

CALCNL=STAT_NON_LINE(MODELE=MODEL,
                     CHAM_MATER=MATER,
                     EXCIT=(_F(CHARGE=CONDLIM,),
                            _F(CHARGE=TRAC,
                               FONC_MULT=TRAC_FO,),
                            _F(CHARGE=CISA,
                               FONC_MULT=CISA_FO,),),
                     COMPORTEMENT=_F(RELATION='NORTON',
                                  DEFORMATION='PETIT',
                                  PARM_THETA=0.5,
                                  ALGO_INTE='NEWTON_PERT',),
                     INCREMENT=_F(LIST_INST=listtps,),
                     NEWTON=_F( REAC_ITER=1,PREDICTION='ELASTIQUE'),
                  SUIVI_DDL=(
                              _F(NOM_CMP    ='V1',
                                 NOM_CHAM   ='VARI_ELGA',
                                 TOUT       = 'OUI',
                                 EVAL_ELGA  ='MAX',
                                 EVAL_CHAM ='MAX',),
                              _F(NOM_CMP    ='V2',
                                 NOM_CHAM   ='VARI_ELGA',
                                 TOUT       = 'OUI',
                                 EVAL_ELGA  ='MAX',
                                 EVAL_CHAM ='MAX',),
                              _F(NOM_CMP    ='V7',
                                 NOM_CHAM   ='VARI_ELGA',
                                 TOUT       = 'OUI',
                                 EVAL_ELGA  ='MAX',
                                 EVAL_CHAM ='MAX',),
                             ),
                     ARCHIVAGE=_F(LIST_INST=LINST0),
                                    );


CALCNL=CALC_CHAMP(reuse =CALCNL,
                  RESULTAT=CALCNL,
                  CONTRAINTE='SIGM_ELNO',
                  VARI_INTERNE='VARI_ELNO',);

CALCNL=CALC_CHAMP(reuse =CALCNL,
                  RESULTAT=CALCNL,
                  DEFORMATION='EPSP_ELGA',);

TEST_RESU(RESU=(_F(NUME_ORDRE=30,
                   POINT=1,
                   RESULTAT=CALCNL,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPXX',
                   VALE_CALC=6.0940390736171E-07,
                   VALE_REFE=6.125E-07,
                   REFERENCE='AUTRE_ASTER',
                   CRITERE='RELATIF',
                   PRECISION=0.006,
                   MAILLE='MA1',),
                _F(NUME_ORDRE=30,
                   POINT=1,
                   RESULTAT=CALCNL,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPYY',
                   VALE_CALC=-4.6604312746456E-07,
                   VALE_REFE=-4.6839999999999999E-07,
                   REFERENCE='AUTRE_ASTER',
                   CRITERE='RELATIF',
                   PRECISION=0.006,
                   MAILLE='MA1',),
                _F(NUME_ORDRE=40,
                   POINT=1,
                   RESULTAT=CALCNL,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPXX',
                   VALE_CALC= 7.05666823E-04,
                   VALE_REFE=7.0560000000000002E-4,
                   REFERENCE='AUTRE_ASTER',
                   CRITERE='RELATIF',
                   PRECISION=0.0001,
                   MAILLE='MA1',),
                _F(NUME_ORDRE=40,
                   POINT=1,
                   RESULTAT=CALCNL,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPYY',
                   VALE_CALC=-5.72018771E-04,
                   VALE_REFE=-5.7200000000000003E-4,
                   REFERENCE='AUTRE_ASTER',
                   CRITERE='RELATIF',
                   PRECISION=0.00004,
                   MAILLE='MA1',),
                _F(NUME_ORDRE=50,
                   POINT=1,
                   RESULTAT=CALCNL,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPXX',
                   VALE_CALC= 7.06197534E-04,
                   VALE_REFE=7.0609999999999998E-4,
                   REFERENCE='AUTRE_ASTER',
                   CRITERE='RELATIF',
                   PRECISION=0.0002,
                   MAILLE='MA1',),
                _F(NUME_ORDRE=50,
                   POINT=1,
                   RESULTAT=CALCNL,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPYY',
                   VALE_CALC=-5.72447200E-04,
                   VALE_REFE=-5.7240000000000004E-4,
                   REFERENCE='AUTRE_ASTER',
                   CRITERE='RELATIF',
                   PRECISION=0.0001,
                   MAILLE='MA1',),
                _F(NUME_ORDRE=60,
                   POINT=1,
                   RESULTAT=CALCNL,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPXX',
                   VALE_CALC=7.0619703442114E-04,
                   VALE_REFE=7.0609999999999998E-4,
                   REFERENCE='AUTRE_ASTER',
                   CRITERE='RELATIF',
                   PRECISION=0.002,
                   MAILLE='MA1',),
                _F(NUME_ORDRE=60,
                   POINT=1,
                   RESULTAT=CALCNL,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPYY',
                   VALE_CALC=-5.7244699568814E-04,
                   VALE_REFE=-5.7240000000000004E-4,
                   REFERENCE='AUTRE_ASTER',
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   MAILLE='MA1',),
                _F(NUME_ORDRE=160,
                   POINT=1,
                   RESULTAT=CALCNL,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPXX',
                   VALE_CALC=-2.4024399858031E-05,
                   VALE_REFE=-2.4430000000000002E-05,
                   REFERENCE='AUTRE_ASTER',
                   CRITERE='RELATIF',
                   PRECISION=0.02,
                   MAILLE='MA1',),
                _F(NUME_ORDRE=160,
                   POINT=1,
                   RESULTAT=CALCNL,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPYY',
                   VALE_CALC=1.3736325742026E-04,
                   VALE_REFE=1.3770000000000001E-4,
                   REFERENCE='AUTRE_ASTER',
                   CRITERE='RELATIF',
                   PRECISION=0.003,
                   MAILLE='MA1',),
                _F(NUME_ORDRE=180,
                   POINT=1,
                   RESULTAT=CALCNL,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPXX',
                   VALE_CALC=-7.7654135659409E-04,
                   VALE_REFE=-7.7879999999999996E-4,
                   REFERENCE='AUTRE_ASTER',
                   CRITERE='RELATIF',
                   PRECISION=0.003,
                   MAILLE='MA1',),
                _F(NUME_ORDRE=180,
                   POINT=1,
                   RESULTAT=CALCNL,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPYY',
                   VALE_CALC=8.4011656785583E-04,
                   VALE_REFE=8.4230000000000004E-4,
                   REFERENCE='AUTRE_ASTER',
                   CRITERE='RELATIF',
                   PRECISION=0.003,
                   MAILLE='MA1',),
                _F(NUME_ORDRE=240,
                   POINT=1,
                   RESULTAT=CALCNL,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPXX',
                   VALE_CALC=-1.5321473898156E-03,
                   VALE_REFE=-1.534E-3,
                   REFERENCE='AUTRE_ASTER',
                   CRITERE='RELATIF',
                   PRECISION=0.002,
                   MAILLE='MA1',),
                _F(NUME_ORDRE=240,
                   POINT=1,
                   RESULTAT=CALCNL,
                   NOM_CHAM='EPSP_ELGA',
                   NOM_CMP='EPYY',
                   VALE_CALC=1.4301526013007E-03,
                   VALE_REFE=1.4319999999999999E-3,
                   REFERENCE='AUTRE_ASTER',
                   CRITERE='RELATIF',
                   PRECISION=0.002,
                   MAILLE='MA1',),
                ),
          )


F_EPXX=RECU_FONCTION(RESULTAT=CALCNL,
                    NOM_CHAM='VARI_ELGA',
                    NOM_CMP='V1',
                    MAILLE='MA1',
                    POINT=1,);


F_EPYY=RECU_FONCTION(RESULTAT=CALCNL,
                    NOM_CHAM='VARI_ELGA',
                    NOM_CMP='V2',
                    MAILLE='MA1',
                    POINT=1,);


IMPR_FONCTION(
FORMAT ='XMGRACE',
UNITE=38,
#PILOTE='INTERACTIF',
COURBE=(
_F(FONCTION=F_EPXX,),
_F(FONCTION=F_EPYY,),
))

FIN();
