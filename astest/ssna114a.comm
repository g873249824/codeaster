#
# TITRE : ESSAI DE COMPRESSION AVEC LE MODELE DE GATT-MONERIE
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# MAILLE QUAD8
# MODELISATION AXIS

DEBUT(CODE=_F(NOM='SSNA114A', NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'))

MAIL=LIRE_MAILLAGE()

MAIL=DEFI_GROUP(reuse =MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=_F(GROUP_MA=('L14','L43','L32','L21'),),)

MOD_MECA=AFFE_MODELE(AFFE=_F(TOUT='OUI',
                             PHENOMENE='MECANIQUE',
                             MODELISATION='AXIS',),
                     MAILLAGE=MAIL,INFO=2)


ACIER=DEFI_MATERIAU(ELAS=_F(NU=0.3,
                            E=2.E5,ALPHA=0.),
                    GATT_MONERIE=_F( D_GRAIN= 6.E-6,
                                  PORO_INIT=0.01,
                                  EPSI_01=2.7252E-10,
                                  EPSI_02=9.1440E-41,),)

DY_T=DEFI_FONCTION(PROL_GAUCHE='CONSTANT',
                   NOM_PARA='INST',
                   VALE=(0.0,0.0,5.0,-1.5),
                   PROL_DROITE='CONSTANT',)

LINST=DEFI_LIST_REEL(DEBUT=0.0,
                     INTERVALLE=(_F(JUSQU_A=3.0,
                                    NOMBRE=30,),
                                 _F(JUSQU_A=5.0,
                                    NOMBRE=10,),),);

CTS=CREA_CHAMP(OPERATION='AFFE',
              TYPE_CHAM='NOEU_TEMP_R',
              MAILLAGE=MAIL,
              AFFE=_F(TOUT='OUI',NOM_CMP='TEMP',VALE = 1500.0,),)

TS=CREA_RESU(OPERATION='AFFE',
             TYPE_RESU='EVOL_THER',
             NOM_CHAM='TEMP',
             AFFE=_F(CHAM_GD=CTS,
                     INST=0.0,),);

CHMAT=AFFE_MATERIAU(AFFE=_F(MATER=ACIER,
                               TOUT='OUI',),
                    AFFE_VARC=_F( TOUT='OUI',
                                  EVOL=TS,
                                  NOM_VARC='TEMP',
                                  NOM_CHAM='TEMP',VALE_REF=0.),
                    MAILLAGE=MAIL,)


COND_LIM=AFFE_CHAR_MECA(MODELE=MOD_MECA,
                        DDL_IMPO=(_F(DX=0.0,
                                     GROUP_NO='L21',),
                                  _F(DY=0.0,
                                     GROUP_NO='L14',),),)

CHAR=AFFE_CHAR_MECA_F(MODELE=MOD_MECA,
                      DDL_IMPO=_F(DY=DY_T,
                                  GROUP_NO='L32',),)

RESU=STAT_NON_LINE(CHAM_MATER=CHMAT,
                       MODELE=MOD_MECA,
                       CONVERGENCE=_F(ITER_GLOB_MAXI=300,
                                      RESI_GLOB_MAXI=1.E-06),
                       COMPORTEMENT=_F(TOUT='OUI',PARM_THETA = 1.0,
                                    ITER_INTE_MAXI=400,
                                    ITER_INTE_PAS=-90,
                                    RELATION='GATT_MONERIE',
                                    DEFORMATION='PETIT_REAC'),
                       INCREMENT=_F(
                                    LIST_INST=LINST,),
                       RECH_LINEAIRE=_F(ITER_LINE_MAXI=3,),
                       NEWTON=_F(MATRICE='TANGENTE',
                                 REAC_ITER=1,),
                       EXCIT=(_F(CHARGE=COND_LIM,),
                              _F(CHARGE=CHAR,),),)

RESU=CALC_CHAMP(reuse=RESU,CRITERES=('SIEQ_ELGA'),DEFORMATION=('EPSI_ELNO'),CONTRAINTE=('SIGM_ELNO'),RESULTAT=RESU)


TEST_RESU(RESU=_F(INST=5.0,
                  REFERENCE='AUTRE_ASTER',
                  RESULTAT=RESU,
                  NOM_CHAM='SIGM_ELNO',
                  NOEUD='N6',
                  NOM_CMP='SIYY',
                  VALE_CALC=-70.246348859,
                  VALE_REFE=-70.245400000000004,
                  CRITERE='RELATIF',
                  PRECISION=1.E-3,
                  MAILLE='M1',),
          )

FIN()
