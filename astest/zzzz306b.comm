# MODIF  DATE 10/10/2012   AUTEUR COURTOIS M.COURTOIS 
# TITRE VALIDATION DE PROJ_CHAMP / METHODE='ECLA_PG' (ROUTINES ECLA2D ET ECLA3D)
# zzzz306b.para = tps_job 80 mem_job 256Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
# ==============================================================================
DEBUT(CODE=_F(NOM='ZZZZ306B',NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'),)

#----------------------------------------------------------------------------------
# L'OBJECTIF DE CE TEST EST DE VALIDER LA PROGRAMMATION DES ROUTINES
# ECLA2D.F ET ECLA3D.F POUR TOUS LES SCHEMAS DE POINTS DE GAUSS DISPONIBLES.
#
# POUR CELA, ON CREE UN CHAMP 'ELGA' ANALYTIQUE ET ON VERIFIE QU'APRES PROJECTION
# DE CE CHAMP DU MAILLAGE SUR LUI MEME, LES VALEURS RESTENT IDENTIQUES.
#
# MODELISATION B :
#   TETRAEDRE / FPG1
#   HEXAEDRE  / FPG8
#   PENTAEDRE / FPG6
#
#----------------------------------------------------------------------------------

MAILLAGE = LIRE_MAILLAGE( )

MODELE   = AFFE_MODELE(  MAILLAGE =    MAILLAGE, INFO=2,
           AFFE= _F( MAILLE=('M1','M2','M3'), PHENOMENE = 'MECANIQUE', MODELISATION = '3D', ))


SIGXX = FORMULE(VALE='2.*(X+0.2) +5.*(Y+1.2)*(Y+1.2)  +7.3*(Z+1.85)', NOM_PARA=('X','Y','Z'),);
CHXN=CREA_CHAMP(TYPE_CHAM='NOEU_GEOM_R', OPERATION='EXTR',
                MAILLAGE=MAILLAGE, NOM_CHAM='GEOMETRIE',);
CHXG=CREA_CHAMP(TYPE_CHAM='ELGA_GEOM_R', OPERATION='DISC',
                MODELE=MODELE, CHAM_GD=CHXN,);

SIEFINI1=CREA_CHAMP(TYPE_CHAM='ELGA_NEUT_F', OPERATION='AFFE', MODELE=MODELE, PROL_ZERO='OUI',
                    AFFE=_F(TOUT='OUI', NOM_CMP=('X1',), VALE_F=(SIGXX,),),);

SIEFINI2=CREA_CHAMP(TYPE_CHAM='ELGA_NEUT_R', OPERATION='EVAL', CHAM_F=SIEFINI1, CHAM_PARA=CHXG,);

CH1=CREA_CHAMP(TYPE_CHAM='ELGA_SIEF_R', OPERATION='ASSE', MODELE=MODELE, PROL_ZERO='OUI',
                    ASSE=_F(TOUT='OUI', CHAM_GD=SIEFINI2, NOM_CMP=('X1',), NOM_CMP_RESU=('SIXX',),),);

CH2=PROJ_CHAMP(CHAM_GD=CH1,MODELE_1=MODELE, MODELE_2=MODELE,METHODE='ECLA_PG')

IMPR_RESU(RESU=_F(CHAM_GD=CH1,NOM_CMP='SIXX',),)
IMPR_RESU(RESU=_F(CHAM_GD=CH2,NOM_CMP='SIXX',),)


# 1.1 TEST_RESU POUR TETRAEDRE / FPG1 :
#---------------------------------------
TEST_RESU(CHAM_ELEM=_F(
                       POINT=1,
                       NOM_CMP='SIXX',
                       MAILLE='M1',
                       CHAM_GD=CH1,
                       VALE_CALC=26.7425,),
          )

TEST_RESU(CHAM_ELEM=_F(REFERENCE='AUTRE_ASTER',
                       POINT=1,
                       NOM_CMP='SIXX',
                       PRECISION=1.0000000000000001E-09,
                       MAILLE='M1',
                       CHAM_GD=CH2,
                       VALE_CALC=26.7425000000,
                       VALE_REFE=26.7425,
                       TOLE_MACHINE=1.0000000000000001E-09,),
          )

# 1.2 TEST_RESU POUR HEXAEDRE / FPG8 :
#---------------------------------------
TEST_RESU(CHAM_ELEM=(_F(
                        POINT=1,
                        NOM_CMP='SIXX',
                        MAILLE='M2',
                        CHAM_GD=CH1,
                        VALE_CALC=40.429510626823102,),
                     _F(
                        POINT=2,
                        NOM_CMP='SIXX',
                        MAILLE='M2',
                        CHAM_GD=CH1,
                        VALE_CALC=44.644167591907397,),
                     _F(
                        POINT=3,
                        NOM_CMP='SIXX',
                        MAILLE='M2',
                        CHAM_GD=CH1,
                        VALE_CALC=41.584211165202298,),
                     _F(
                        POINT=4,
                        NOM_CMP='SIXX',
                        MAILLE='M2',
                        CHAM_GD=CH1,
                        VALE_CALC=45.7988681302866,),
                     _F(
                        POINT=5,
                        NOM_CMP='SIXX',
                        MAILLE='M2',
                        CHAM_GD=CH1,
                        VALE_CALC=50.244465203046701,),
                     _F(
                        POINT=6,
                        NOM_CMP='SIXX',
                        MAILLE='M2',
                        CHAM_GD=CH1,
                        VALE_CALC=54.459122168131003,),
                     _F(
                        POINT=7,
                        NOM_CMP='SIXX',
                        MAILLE='M2',
                        CHAM_GD=CH1,
                        VALE_CALC=51.399165741426003,),
                     _F(
                        POINT=8,
                        NOM_CMP='SIXX',
                        MAILLE='M2',
                        CHAM_GD=CH1,
                        VALE_CALC=55.613822706510199,),
                     ),
          )

TEST_RESU(CHAM_ELEM=(_F(REFERENCE='AUTRE_ASTER',
                        POINT=1,
                        NOM_CMP='SIXX',
                        PRECISION=1.0000000000000001E-09,
                        MAILLE='M2',
                        CHAM_GD=CH2,
                        VALE_CALC=40.4295106268,
                        VALE_REFE=40.429510626823102,
                        TOLE_MACHINE=1.0000000000000001E-09,),
                     _F(REFERENCE='AUTRE_ASTER',
                        POINT=2,
                        NOM_CMP='SIXX',
                        PRECISION=1.0000000000000001E-09,
                        MAILLE='M2',
                        CHAM_GD=CH2,
                        VALE_CALC=44.6441675919,
                        VALE_REFE=44.644167591907397,
                        TOLE_MACHINE=1.0000000000000001E-09,),
                     _F(REFERENCE='AUTRE_ASTER',
                        POINT=3,
                        NOM_CMP='SIXX',
                        PRECISION=1.0000000000000001E-09,
                        MAILLE='M2',
                        CHAM_GD=CH2,
                        VALE_CALC=41.5842111652,
                        VALE_REFE=41.584211165202298,
                        TOLE_MACHINE=1.0000000000000001E-09,),
                     _F(REFERENCE='AUTRE_ASTER',
                        POINT=4,
                        NOM_CMP='SIXX',
                        PRECISION=1.0000000000000001E-09,
                        MAILLE='M2',
                        CHAM_GD=CH2,
                        VALE_CALC=45.7988681303,
                        VALE_REFE=45.7988681302866,
                        TOLE_MACHINE=1.0000000000000001E-09,),
                     _F(REFERENCE='AUTRE_ASTER',
                        POINT=5,
                        NOM_CMP='SIXX',
                        PRECISION=1.0000000000000001E-09,
                        MAILLE='M2',
                        CHAM_GD=CH2,
                        VALE_CALC=50.2444652030,
                        VALE_REFE=50.244465203046701,
                        TOLE_MACHINE=1.0000000000000001E-09,),
                     _F(REFERENCE='AUTRE_ASTER',
                        POINT=6,
                        NOM_CMP='SIXX',
                        PRECISION=1.0000000000000001E-09,
                        MAILLE='M2',
                        CHAM_GD=CH2,
                        VALE_CALC=54.4591221681,
                        VALE_REFE=54.459122168131003,
                        TOLE_MACHINE=1.0000000000000001E-09,),
                     _F(REFERENCE='AUTRE_ASTER',
                        POINT=7,
                        NOM_CMP='SIXX',
                        PRECISION=1.0000000000000001E-09,
                        MAILLE='M2',
                        CHAM_GD=CH2,
                        VALE_CALC=51.3991657414,
                        VALE_REFE=51.399165741426003,
                        TOLE_MACHINE=1.0000000000000001E-09,),
                     _F(REFERENCE='AUTRE_ASTER',
                        POINT=8,
                        NOM_CMP='SIXX',
                        PRECISION=1.0000000000000001E-09,
                        MAILLE='M2',
                        CHAM_GD=CH2,
                        VALE_CALC=55.6138227065,
                        VALE_REFE=55.613822706510199,
                        TOLE_MACHINE=1.0000000000000001E-09,),
                     ),
          )

# 1.3 TEST_RESU POUR PENTAEDRE / FPG6 :
#---------------------------------------
TEST_RESU(CHAM_ELEM=(_F(
                        POINT=1,
                        NOM_CMP='SIXX',
                        MAILLE='M3',
                        CHAM_GD=CH1,
                        VALE_CALC=59.097671517457897,),
                     _F(
                        POINT=2,
                        NOM_CMP='SIXX',
                        MAILLE='M3',
                        CHAM_GD=CH1,
                        VALE_CALC=60.097671517457897,),
                     _F(
                        POINT=3,
                        NOM_CMP='SIXX',
                        MAILLE='M3',
                        CHAM_GD=CH1,
                        VALE_CALC=52.847671517457897,),
                     _F(
                        POINT=4,
                        NOM_CMP='SIXX',
                        MAILLE='M3',
                        CHAM_GD=CH1,
                        VALE_CALC=63.3123284825421,),
                     _F(
                        POINT=5,
                        NOM_CMP='SIXX',
                        MAILLE='M3',
                        CHAM_GD=CH1,
                        VALE_CALC=64.3123284825421,),
                     _F(
                        POINT=6,
                        NOM_CMP='SIXX',
                        MAILLE='M3',
                        CHAM_GD=CH1,
                        VALE_CALC=57.0623284825421,),
                     ),
          )

TEST_RESU(CHAM_ELEM=(_F(REFERENCE='AUTRE_ASTER',
                        POINT=1,
                        NOM_CMP='SIXX',
                        PRECISION=1.0000000000000001E-09,
                        MAILLE='M3',
                        CHAM_GD=CH2,
                        VALE_CALC=59.0976715175,
                        VALE_REFE=59.097671517457897,
                        TOLE_MACHINE=1.0000000000000001E-09,),
                     _F(REFERENCE='AUTRE_ASTER',
                        POINT=2,
                        NOM_CMP='SIXX',
                        PRECISION=1.0000000000000001E-09,
                        MAILLE='M3',
                        CHAM_GD=CH2,
                        VALE_CALC=60.0976715175,
                        VALE_REFE=60.097671517457897,
                        TOLE_MACHINE=1.0000000000000001E-09,),
                     _F(REFERENCE='AUTRE_ASTER',
                        POINT=3,
                        NOM_CMP='SIXX',
                        PRECISION=1.0000000000000001E-09,
                        MAILLE='M3',
                        CHAM_GD=CH2,
                        VALE_CALC=52.8476715175,
                        VALE_REFE=52.847671517457897,
                        TOLE_MACHINE=1.0000000000000001E-09,),
                     _F(REFERENCE='AUTRE_ASTER',
                        POINT=4,
                        NOM_CMP='SIXX',
                        PRECISION=1.0000000000000001E-09,
                        MAILLE='M3',
                        CHAM_GD=CH2,
                        VALE_CALC=63.3123284825,
                        VALE_REFE=63.3123284825421,
                        TOLE_MACHINE=1.0000000000000001E-09,),
                     _F(REFERENCE='AUTRE_ASTER',
                        POINT=5,
                        NOM_CMP='SIXX',
                        PRECISION=1.0000000000000001E-09,
                        MAILLE='M3',
                        CHAM_GD=CH2,
                        VALE_CALC=64.3123284825,
                        VALE_REFE=64.3123284825421,
                        TOLE_MACHINE=1.0000000000000001E-09,),
                     _F(REFERENCE='AUTRE_ASTER',
                        POINT=6,
                        NOM_CMP='SIXX',
                        PRECISION=1.0000000000000001E-09,
                        MAILLE='M3',
                        CHAM_GD=CH2,
                        VALE_CALC=57.0623284825,
                        VALE_REFE=57.0623284825421,
                        TOLE_MACHINE=1.0000000000000001E-09,),
                     ),
          )

FIN()

