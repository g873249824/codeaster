# MODIF  DATE 07/10/2005   AUTEUR CIBHHPD L.SALMONA 
#  TITRE  ROTATION DES CONTRAINTES PRINCIPALES (WILLIAM)
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2002  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
#                                                                       
#                                                                       
# ======================================================================
# 
#  TEST B DU  BENCHMARK SUR L EVALUATION DES MODELES POUR LE BETON (2001)
#  TEST LOI DE MAZARS
#  COMPARAISON AVEC LES RESULTATS OBTENUS PAR CASTEM (VERSION 2001) AU LGCNSN
# ________________________________________________________
#  MAILLAGE : 1 CUB20
#
#  CHARGEMENT : 1 - direction (DEPSxx,DEPSyy,DEPSxy)=(1,-NU,0)jusqu a la contrainte max
#               2 - direction (DEPSxx,DEPSyy,DEPSxy)=(1, 1.5, 1) jusqu a EPSxx=0.0015
# ________________________________________________________

DEBUT(CODE=_F( NOM = 'SSNP113A',NIV_PUB_WEB='INTERNET'));
MAIL=LIRE_MAILLAGE();
MODELE=AFFE_MODELE(AFFE    =_F(TOUT = 'OUI',
                               PHENOMENE='MECANIQUE',
                               MODELISATION='3D'),
                   MAILLAGE=MAIL);
MATERIAU=DEFI_MATERIAU(MAZARS=_F(BETA =1.06,
                                 EPSD0=9.375e-5,
                                 AC   =1.15,
                                 AT   =0.8,
                                 BC   =1391.3,
                                 BT   =10000.),
                       ELAS     =_F(NU=0.2,
                                    E=3.20000000000E10),);

CAR_MAT=AFFE_MATERIAU(AFFE=_F(MATER=MATERIAU,
                              TOUT='OUI'),
                      MAILLAGE=MAIL);
CLIM=AFFE_CHAR_MECA(DDL_IMPO=(_F(DX=0.0,
                                 GROUP_NO='COTEG'),
                              _F(DZ=0.0,
                                 NOEUD='N1',
                                 DY=0.0),
                              _F(NOEUD='N5',
                                 DY=0.0),),
                    MODELE=MODELE);
CHAR1=AFFE_CHAR_MECA(DDL_IMPO=(_F(NOEUD=('N2','N6'),
                                  DY=0.0),
                               _F(DX=1.0,
                                  GROUP_NO='COTED'),
                               _F(DY=-0.2,
                                  GROUP_NO='HAUT'),),
                     MODELE=MODELE);
CHAR2=AFFE_CHAR_MECA(DDL_IMPO=(_F(DX=1.0,
                                 GROUP_NO='COTED'),
                              _F(NOEUD='N4',
                                 DY=1.5),
                              _F(NOEUD='N8',
                                 DY=1.5),
                              _F(NOEUD='N3',
                                 DY=3.5),
                              _F(NOEUD='N7',
                                 DY=3.5),
                              _F(NOEUD='N2',
                                 DY=2.0),
                              _F(NOEUD='N6',
                                 DY=2.0),),
                     MODELE=MODELE);
L_INS1=DEFI_LIST_REEL(DEBUT=0.0,
                      INTERVALLE=(_F(JUSQU_A=1.0,
                                     NOMBRE=10),
                                  _F(JUSQU_A=5.0,
                                     NOMBRE=300) ,), );
FCT_MUL1=DEFI_FONCTION(INTERPOL=('LIN','LIN'),
                       NOM_PARA='INST',
                       VALE=(0.0,0.0,1.0,5.25E-05),);
FCT_MUL2=DEFI_FONCTION(INTERPOL=('LIN','LIN'),
                       NOM_PARA='INST',
                       VALE=(1.0,0.0,5.0,7.88E-4),);            
RES1=STAT_NON_LINE(CHAM_MATER=CAR_MAT,
                   MODELE=MODELE,
                   TITRE='BENCH-B LOI MAZARS',
                   CONVERGENCE=_F(ITER_GLOB_MAXI=20,
                                  RESI_GLOB_RELA=1.E-06),
                   COMP_INCR  =_F(RELATION='MAZARS',
                                  DEFORMATION='PETIT'),
                   INCREMENT  =_F(LIST_INST=L_INS1,
                                  INST_FIN = 1.0 ),
                   NEWTON     =_F(MATRICE='TANGENTE'),
                   EXCIT      =(_F(CHARGE=CLIM),
                                _F(CHARGE=CHAR1,
                                   FONC_MULT=FCT_MUL1),), );
RES1=STAT_NON_LINE(reuse     = RES1,
                   CHAM_MATER=CAR_MAT,
                   MODELE    =MODELE,
                   TITRE     ='BENCH-A LOI MAZARS',
                   CONVERGENCE=_F(ITER_GLOB_MAXI=30,
                                  RESI_GLOB_RELA=1.E-4),
                   COMP_INCR  =_F(RELATION='MAZARS',
                                  DEFORMATION='PETIT',
                                  ITER_INTE_MAXI=10,
                                  RESI_INTE_RELA=1.E-6,
                                  ITER_INTE_PAS=-10),
                   INCREMENT  =_F(
                                  LIST_INST=L_INS1,
                                  SUBD_PAS   = 3,
                                  SUBD_PAS_MINI   = 0.00001),
                   NEWTON     =_F(
                                  MATRICE='TANGENTE',
                                  REAC_ITER  = 1,
                                  REAC_INCR  = 1,),
                   EXCIT    =(_F(CHARGE=CLIM),
                              _F(CHARGE=CHAR2,
                                 TYPE_CHARGE='DIDI',
                                 FONC_MULT=FCT_MUL2),),
                  ETAT_INIT= _F( EVOL_NOLI=RES1 ),
                  ARCHIVAGE= _F(LIST_INST = L_INS1), );
RES1=CALC_ELEM( reuse  = RES1,
                RESULTAT=RES1,
                NUME_ORDRE = (10,25,310),
                OPTION=('EPSI_ELNO_DEPL','SIEF_ELNO_ELGA',
                        'VARI_ELNO_ELGA'),
                );
RES1=CALC_NO  ( reuse  = RES1,
                RESULTAT=RES1,
                NUME_ORDRE = (10,25,310),
                OPTION=('EPSI_NOEU_DEPL','SIEF_NOEU_ELGA',
                        'VARI_NOEU_ELGA'),
                );
                         
TEST_RESU(RESU=(
#  NUMERO ORDRE = 10            
           _F( RESULTAT = RES1, NUME_ORDRE = 10, NOM_CHAM = 'EPSI_NOEU_DEPL',NOM_CMP = 'EPXX',
               NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',              
               CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 9.375E-5, ),
           _F( RESULTAT = RES1, NUME_ORDRE = 10, NOM_CHAM = 'EPSI_NOEU_DEPL',NOM_CMP = 'EPYY',
               NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',             
               CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = -1.875E-5, ),
           _F( RESULTAT = RES1, NUME_ORDRE = 10, NOM_CHAM = 'EPSI_NOEU_DEPL',NOM_CMP = 'EPXY',
               NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',               
               CRITERE = 'ABSOLU',   PRECISION = 1.E-8, VALE = 0., ),
          _F( RESULTAT = RES1, NUME_ORDRE = 10, NOM_CHAM = 'SIEF_NOEU_ELGA',NOM_CMP = 'SIXX',
               NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',              
               CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 3.00E6, ),
          _F( RESULTAT = RES1, NUME_ORDRE = 10, NOM_CHAM = 'SIEF_NOEU_ELGA',NOM_CMP = 'SIYY',
                NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',               
                CRITERE = 'ABSOLU',   PRECISION = 1.E-8, VALE = 0., ),
          _F( RESULTAT = RES1, NUME_ORDRE = 10, NOM_CHAM = 'SIEF_NOEU_ELGA',NOM_CMP = 'SIXY',
                NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',               
                CRITERE = 'ABSOLU',   PRECISION = 1.E-8, VALE = 0., ),
         _F( RESULTAT = RES1, NUME_ORDRE = 10, NOM_CHAM = 'VARI_NOEU_ELGA',NOM_CMP = 'V1',
                 NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',               
                CRITERE = 'ABSOLU',   PRECISION = 1.E-8, VALE = 0., ),  
                
#  NUMERO ORDRE = 25            
           _F( RESULTAT = RES1, NUME_ORDRE = 25, NOM_CHAM = 'EPSI_NOEU_DEPL',NOM_CMP = 'EPXX',
               NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',              
               CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 1.64E-4, ),
           _F( RESULTAT = RES1, NUME_ORDRE = 25, NOM_CHAM = 'EPSI_NOEU_DEPL',NOM_CMP = 'EPYY',
               NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',             
               CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 8.67E-5, ),
           _F( RESULTAT = RES1, NUME_ORDRE = 25, NOM_CHAM = 'EPSI_NOEU_DEPL',NOM_CMP = 'EPXY',
               NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',               
               CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 7.03e-5, ),
          _F( RESULTAT = RES1, NUME_ORDRE = 25, NOM_CHAM = 'SIEF_NOEU_ELGA',NOM_CMP = 'SIXX',
               NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',              
               CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 2.04319E6, ),
          _F( RESULTAT = RES1, NUME_ORDRE = 25, NOM_CHAM = 'SIEF_NOEU_ELGA',NOM_CMP = 'SIYY',
                NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',               
                CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 1.346290E6, ),
          _F( RESULTAT = RES1, NUME_ORDRE = 25, NOM_CHAM = 'SIEF_NOEU_ELGA',NOM_CMP = 'SIXY',
                NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',               
                CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 6.33546E5, ),
         _F( RESULTAT = RES1, NUME_ORDRE = 25, NOM_CHAM = 'VARI_NOEU_ELGA',NOM_CMP = 'V1',
                 NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',               
                CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 0.66211, ),                  

#  NUMERO ORDRE = 310            
           _F( RESULTAT = RES1, NUME_ORDRE = 310, NOM_CHAM = 'EPSI_NOEU_DEPL',NOM_CMP = 'EPXX',
               NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',              
               CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 1.50E-3, ),
           _F( RESULTAT = RES1, NUME_ORDRE = 310, NOM_CHAM = 'EPSI_NOEU_DEPL',NOM_CMP = 'EPYY',
               NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',             
               CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 2.09063E-3, ),
           _F( RESULTAT = RES1, NUME_ORDRE = 310, NOM_CHAM = 'EPSI_NOEU_DEPL',NOM_CMP = 'EPXY',
               NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',               
               CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 1.40625e-3, ),
          _F( RESULTAT = RES1, NUME_ORDRE = 310, NOM_CHAM = 'SIEF_NOEU_ELGA',NOM_CMP = 'SIXX',
               NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',              
               CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 3.68638E5, ),
          _F( RESULTAT = RES1, NUME_ORDRE = 310, NOM_CHAM = 'SIEF_NOEU_ELGA',NOM_CMP = 'SIYY',
                NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',               
                CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 4.59447E5, ),
          _F( RESULTAT = RES1, NUME_ORDRE = 310, NOM_CHAM = 'SIEF_NOEU_ELGA',NOM_CMP = 'SIXY',
                NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',               
                CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 2.16210E5, ),
         _F( RESULTAT = RES1, NUME_ORDRE = 310, NOM_CHAM = 'VARI_NOEU_ELGA',NOM_CMP = 'V1',
                 NOEUD = 'N1',    MAILLE = 'M1', REFERENCE = 'SOURCE_EXTERNE',               
                CRITERE = 'RELATIF',   PRECISION = 1.E-3, VALE = 0.99423, ),                         
                  ))
                        
FIN() ;                   
