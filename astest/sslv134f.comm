# MODIF  DATE 23/08/2004   AUTEUR CIBHHLV L.VIVAN 
# TITRE CALCUL 3D DE G LOCAL FISSURE CIRCULAIRE EN MILIEU INFINI
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
# QUART DE FISSURE. CALCUL DE G BILINEAIRE ET DE G_MAX LOCAL

DEBUT(   CODE=_F(  NOM = 'SSLV134F',NIV_PUB_WEB='INTERNET'))

MA=LIRE_MAILLAGE(VERI_MAIL=_F(VERIF='NON'),  )

MA=DEFI_GROUP( reuse=MA,   MAILLAGE=MA,CREA_GROUP_NO=(
                     _F(  GROUP_MA = 'SSUP_S'),
                     _F(  GROUP_MA = 'SAV_S'),
                     _F(  GROUP_MA = 'SLAT_S'),
                     _F(  GROUP_MA = 'LFF'))
                 )

MO=AFFE_MODELE(  MAILLAGE=MA, 
                               AFFE=_F( TOUT = 'OUI',
                                     PHENOMENE = 'MECANIQUE',
                                     MODELISATION = '3D'))

MAT=DEFI_MATERIAU(ELAS=_F(  E = 2.E11, NU = 0.3))

CHMAT=AFFE_MATERIAU(  MAILLAGE=MA,
                           AFFE=_F(  TOUT = 'OUI',MATER = MAT))

F1=DEFI_FONCTION(    NOM_PARA='INST',
                             PROL_GAUCHE='LINEAIRE',
                              PROL_DROITE='CONSTANT',
                             VALE=( 0., 0.,
                                    1., 1.,
                                    2., 0.,
                                    3., 1.,
                                    4., 1.,  )  )

F2=DEFI_FONCTION(    NOM_PARA='INST',
                             PROL_GAUCHE='LINEAIRE',
                              PROL_DROITE='CONSTANT',
                             VALE=( 0., 0.,
                                    1., 0.,
                                    2., 1.,
                                    3., 1.,
                                    4., -1., )  )

LIST=DEFI_LIST_REEL(  
                                DEBUT=0.E+0,  
                         
                              INTERVALLE=_F( 
                      JUSQU_A = 4.,  
                      NOMBRE = 4),
                                 INFO=1  
                       )

#-----------------------------------------------------------------------
CHCL=AFFE_CHAR_MECA(  MODELE=MO,DDL_IMPO=( 
                               _F( GROUP_NO = 'SSUP_S',   DZ = 0.),
                               _F( GROUP_NO = 'SLAT_S',   DX = 0.),
                               _F( GROUP_NO = 'SAV_S',    DY = 0.))
                            )

CH1=AFFE_CHAR_MECA(  MODELE=MO, 
                              PRES_REP=_F( GROUP_MA = 'SINF', PRES = -1.E6)
                            )

CH2=AFFE_CHAR_MECA(  MODELE=MO,FORCE_FACE=( 
                             _F( GROUP_MA = 'SLAT',     FZ = +1.E6),
                             _F( GROUP_MA = 'SINF',     FX = +1.E6))
                           )

#-----------------------------------------------------------------------


RESU=STAT_NON_LINE( 
                            MODELE=MO,
                        CHAM_MATER=CHMAT,EXCIT=(
                             _F( 
                CHARGE = CHCL), _F( 
                CHARGE = CH1,
                FONC_MULT = F1), _F( 
                CHARGE = CH2,
                FONC_MULT = F2)),
                         COMP_ELAS=_F( 
                RELATION = 'ELAS'),
                         INCREMENT=_F( 
                LIST_INST = LIST),
                       CONVERGENCE=_F( 
                RESI_GLOB_RELA = 1.E-6),
                              INFO=1
              )

RESU=CALC_ELEM( reuse=RESU,
                            OPTION=(
                  'SIEF_ELNO_ELGA',  'VARI_ELNO_ELGA',),
                          RESULTAT=RESU,
              )

FOND=DEFI_FOND_FISS(  
                            MAILLAGE=MA,        
                               
                       FOND_FISS=_F( 
                      GROUP_MA = 'LFF'),
                    NORMALE=(0., 0., 1.,),
                    DTAN_ORIG=(1., 0., 0.,),
                    DTAN_EXTR=(0., 1., 0.,)
                       )

GL1=CALC_G_LOCAL_T(
                    MODELE=MO,
                    CHAM_MATER=CHMAT,
                    COMP_ELAS=(_F(RELATION='ELAS',),),
  TITRE='G_LOCAL AVEC R_INF =  1.00000E-01 ET R_SUP =  1.00000E+00',
                    RESULTAT=RESU,
                    FOND_FISS=FOND,
                    LISSAGE_THETA = 'LAGRANGE',
                    LISSAGE_G = 'LAGRANGE',
                    R_INF=0.1,
                    R_SUP=1.0,
                    TOUT_ORDRE='OUI'
                  )

GL2=CALC_G_LOCAL_T(
                    MODELE=MO,
                    CHAM_MATER=CHMAT,
                    COMP_ELAS=(_F(RELATION='ELAS',),),
  TITRE='G_LOCAL AVEC R_INF =  0.50000E-01 ET R_SUP =  1.50000E+00',
                    RESULTAT=RESU,
                    FOND_FISS=FOND,
                    R_INF=0.5,
                    R_SUP=1.5,
                    TOUT_ORDRE='OUI'
                  )

GLBIL1=CALC_G_LOCAL_T(
                    MODELE=MO,
                    CHAM_MATER=CHMAT,
                    COMP_ELAS=(_F(RELATION='ELAS',),),
  TITRE='G_LOCAL AVEC R_INF =  1.00000E-01 ET R_SUP =  1.00000E+00',
                    RESULTAT=RESU,
                    FOND_FISS=FOND,
                    OPTION='G_BILINEAIRE',  
                     LISSAGE_THETA = 'LAGRANGE',
                     LISSAGE_G = 'LAGRANGE',
                    R_INF=0.1,
                    R_SUP=1.0,
                    TOUT_ORDRE='OUI'
                  )


GLBIL2=CALC_G_LOCAL_T(
                    MODELE=MO,
                    CHAM_MATER=CHMAT,
                    COMP_ELAS=(_F(RELATION='ELAS',),),
  TITRE='G_LOCAL AVEC R_INF =  5.00000E-01 ET R_SUP =  1.50000E+00',
                    RESULTAT=RESU,
                    FOND_FISS=FOND,
                    OPTION='G_BILINEAIRE',  
                    R_INF=0.5,
                    R_SUP=1.5,
                    TOUT_ORDRE='OUI'
                  )

GLMAX1=CALC_G_LOCAL_T(  
                              MODELE=MO,        
                          CHAM_MATER=CHMAT,  
  TITRE='GMAX_LOCAL AVEC R_INF =  1.00000E-01 ET R_SUP =  1.00000E+00',
                            RESULTAT=RESU,BORNES=( 
                              _F(  NUME_ORDRE = 1,
                                       VALE_MIN = 0.,
                                       VALE_MAX = 1.),
                                     _F(  NUME_ORDRE = 2,
                                       VALE_MIN = 0.,
                                       VALE_MAX = 1.),
                                     _F(  NUME_ORDRE = 3,
                                       VALE_MIN = 0.,
                                       VALE_MAX = 1.),
                                     _F(  NUME_ORDRE = 4,
                                       VALE_MIN = 0.,
                                       VALE_MAX = 1.)),    
                              OPTION='CALC_G_MAX',  
                              FOND_FISS=FOND,
                              LISSAGE_THETA = 'LAGRANGE',
                              LISSAGE_G = 'LAGRANGE',
                           R_INF=0.1,
                           R_SUP=1.0,
                           TOUT_ORDRE='OUI',
                          COMP_ELAS=_F(  RELATION = 'ELAS',)
                       )

GLMAX2=CALC_G_LOCAL_T(  
                              MODELE=MO,        
                          CHAM_MATER=CHMAT,  
  TITRE='GMAX_LOCAL AVEC R_INF =  5.00000E-01 ET R_SUP =  1.50000E+00',
                            RESULTAT=RESU,BORNES=( 
                              _F(  NUME_ORDRE = 1,
                                       VALE_MIN = 0.,
                                       VALE_MAX = 1.),
                                     _F(  NUME_ORDRE = 2,
                                       VALE_MIN = 0.,
                                       VALE_MAX = 1.),
                                     _F(  NUME_ORDRE = 3,
                                       VALE_MIN = 0.,
                                       VALE_MAX = 1.),
                                     _F(  NUME_ORDRE = 4,
                                       VALE_MIN = 0.,
                                       VALE_MAX = 1.)),    
                              OPTION='CALC_G_MAX',  
                              FOND_FISS=FOND,
                           R_INF=0.5,
                           R_SUP=1.5,
                           TOUT_ORDRE='OUI',
                          COMP_ELAS=_F(  RELATION = 'ELAS',)
                       )



IMPR_TABLE     ( TABLE = GL1,  )

IMPR_TABLE     ( TABLE = GL2,  )

IMPR_TABLE     ( TABLE = GLBIL1, )

IMPR_TABLE     ( TABLE = GLBIL2, )

IMPR_TABLE     ( TABLE = GLMAX1, )

IMPR_TABLE     ( TABLE = GLMAX2, )



TEST_TABLE(        TABLE=GL1,
                   FILTRE=(
                            _F(  NOM_PARA = 'NUME_ORDRE',
                                  VALE_I = 1),
                            _F(  NOM_PARA = 'NOEUD',
                                  VALE_K = 'N2667')
                          ),
                  NOM_PARA='G_LOCAL',
                      VALE=5.79,
                 PRECISION=0.0075,   
                 REFERENCE='AUTRE_ASTER'  
            )

TEST_TABLE(        TABLE=GLBIL1,
                  FILTRE=(
                           _F(  NOM_PARA = 'NUME_CMP_I',
                                  VALE_I = 1),
                           _F(  NOM_PARA = 'NUME_CMP_J',
                                  VALE_I = 1),
                           _F(  NOM_PARA = 'NOEUD',
                                  VALE_K = 'N2667')
                         ),  
                  NOM_PARA='G_BILI_LOCAL',
                      VALE=5.79,
                 PRECISION=0.0075, 
                 REFERENCE='AUTRE_ASTER'  
            )

TEST_TABLE(        TABLE=GLMAX1,
                      FILTRE=(
                              _F(  NOM_PARA = 'Q_1',
                                       VALE = 1.),
                              _F(  NOM_PARA = 'Q_2',
                                       VALE = 1.),
                              _F(  NOM_PARA = 'Q_3',
                                       VALE = 0.),
                              _F(  NOM_PARA = 'Q_4',
                                       VALE = 0.),
                              _F(  NOM_PARA = 'NOEUD',
                                     VALE_K = 'N2667')
                             ),  
                  NOM_PARA='G',
                      VALE=1.4945524639672E+01,
                 PRECISION=5.0E-3,
                 REFERENCE='NON_REGRESSION',
                 VERSION='7.0.17'
          )


TEST_TABLE(        TABLE=GL2,
                   FILTRE=(
                            _F(  NOM_PARA = 'NUME_ORDRE',
                                  VALE_I = 2),
                            _F(  NOM_PARA = 'NOEUD',
                                  VALE_K = 'N2667')
                          ),
                  NOM_PARA='G_LOCAL',
                      VALE=2.1735761238787E+00,
                 PRECISION=5.0E-3,
                 REFERENCE='NON_REGRESSION',
                 VERSION='7.0.17'
            )

TEST_TABLE(        TABLE=GLBIL2,
                   FILTRE=(
                            _F(  NOM_PARA = 'NUME_CMP_I',
                                   VALE_I = 2),
                            _F(  NOM_PARA = 'NUME_CMP_J',
                                   VALE_I = 2),
                            _F(  NOM_PARA = 'NOEUD',
                                   VALE_K = 'N2667')
                          ),  
                  NOM_PARA='G_BILI_LOCAL',
                      VALE=2.1735761238787E+00,
                 PRECISION=5.0E-3,
                 REFERENCE='NON_REGRESSION',
                 VERSION='7.0.17' 
            )

TEST_TABLE(        TABLE=GLMAX2,
                      FILTRE=(
                              _F(  NOM_PARA = 'Q_1',
                                       VALE = 1.),
                              _F(  NOM_PARA = 'Q_2',
                                       VALE = 1.),
                              _F(  NOM_PARA = 'Q_3',
                                       VALE = 1.),
                              _F(  NOM_PARA = 'Q_4',
                                       VALE = 0.),
                              _F(  NOM_PARA = 'NOEUD',
                                     VALE_K = 'N2773')
                             ),  
                  NOM_PARA='G',
                      VALE=6.0329858966450E+01,
                 PRECISION=5.0E-3,
                 REFERENCE='NON_REGRESSION',
                 VERSION='7.0.17' 
          )



FIN()
#
