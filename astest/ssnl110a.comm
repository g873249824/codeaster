# MODIF  DATE 01/10/2002   AUTEUR CIBHHLV L.VIVAN 
# TITRE RESSORT NON LINEAIRE INCLUANT DU FROTTEMENT DE COULOMB
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================


DEBUT( CODE=_F(  NOM = 'SSNL110A',NIV_PUB_WEB='INTERNET')   )

MA=LIRE_MAILLAGE(  )

MO=AFFE_MODELE(        MAILLAGE=MA,
                         AFFE=_F(  GROUP_MA = 'DISC',
                                PHENOMENE = 'MECANIQUE',
                                MODELISATION = 'DIS_T')
                       )

CAREL=AFFE_CARA_ELEM(   MODELE=MO,
                           DISCRET=_F(  GROUP_MA = 'DISC',
                                     CARA = (   'K_T_D_L', ),
                                     VALE = (    1.E3, 1.E3, 1.E3, ))
                        )

FRIG=DEFI_FONCTION(   NOM_PARA='INST',
                           VALE=( 0., 1., 10., 0., ) )

#################################################################
FRIGBIS = FORMULE(REEL="""(REEL:INST) =
INST """)

L_INST=DEFI_LIST_REEL(  DEBUT=0.,
                           INTERVALLE=_F(  JUSQU_A = 9., PAS = 0.5) )

UNIT=CALC_FONC_INTERP(    FONCTION=FRIGBIS,  LIST_PARA=L_INST,
                             PROL_DROITE='LINEAIRE',
                            PROL_GAUCHE='LINEAIRE',
                             NOM_RESU='ACCE',    
                             INFO=2

                          )

#################################################################

FRIGG = FORMULE(REEL="""(REEL:INST) =
(-1./10.)*INST + 1.""")

RES1=CREA_CHAMP(  OPERATION='AFFE', 
                      TYPE_CHAM='NOEU_IRRA_R',
                      MAILLAGE=MA,
                      AFFE=_F( TOUT = 'OUI', NOM_CMP = 'IRRA', 
                            VALE = (EVAL("""FRIGG(0.5)"""),))      
                  )

RES2=CREA_CHAMP(  OPERATION='AFFE', 
                     TYPE_CHAM='NOEU_IRRA_R',
                      MAILLAGE=MA,
                      AFFE=_F( TOUT = 'OUI', NOM_CMP = 'IRRA', 
                            VALE = (EVAL("""FRIGG(1.)"""),))      
                  )

RES3=CREA_CHAMP(  OPERATION='AFFE', 
                      TYPE_CHAM='NOEU_IRRA_R',
                      MAILLAGE=MA,
                      AFFE=_F( TOUT = 'OUI', NOM_CMP = 'IRRA', 
                            VALE = (EVAL("""FRIGG(1.5)"""),))      
                  )

RES4=CREA_CHAMP(  OPERATION='AFFE', 
                      TYPE_CHAM='NOEU_IRRA_R',
                      MAILLAGE=MA,
                      AFFE=_F( TOUT = 'OUI', NOM_CMP = 'IRRA', 
                            VALE = (EVAL("""FRIGG(2.)"""),))      
                  )

RES5=CREA_CHAMP(  OPERATION='AFFE', 
                      TYPE_CHAM='NOEU_IRRA_R',
                      MAILLAGE=MA,
                      AFFE=_F( TOUT = 'OUI', NOM_CMP = 'IRRA', 
                            VALE = (EVAL("""FRIGG(2.5)"""),))      
                  )

RES6=CREA_CHAMP(  OPERATION='AFFE', 
                      TYPE_CHAM='NOEU_IRRA_R',
                      MAILLAGE=MA,
                      AFFE=_F( TOUT = 'OUI', NOM_CMP = 'IRRA', 
                            VALE = (EVAL("""FRIGG(3.0)"""),))      
                  )

RES7=CREA_CHAMP(  OPERATION='AFFE', 
                      TYPE_CHAM='NOEU_IRRA_R',
                      MAILLAGE=MA,
                      AFFE=_F( TOUT = 'OUI', NOM_CMP = 'IRRA', 
                            VALE = (EVAL("""FRIGG(3.5)"""),))      
                  )

RES8=CREA_CHAMP(  OPERATION='AFFE', 
                      TYPE_CHAM='NOEU_IRRA_R',
                      MAILLAGE=MA,
                      AFFE=_F( TOUT = 'OUI', NOM_CMP = 'IRRA', 
                            VALE = (EVAL("""FRIGG(4.0)"""),))     
                  )

RES9=CREA_CHAMP(  OPERATION='AFFE', 
                      TYPE_CHAM='NOEU_IRRA_R',
                      MAILLAGE=MA,
                      AFFE=_F( TOUT = 'OUI', NOM_CMP = 'IRRA', 
                            VALE = (EVAL("""FRIGG(4.5)"""),))      
                  )

RES10=CREA_CHAMP(  OPERATION='AFFE', 
                      TYPE_CHAM='NOEU_IRRA_R',
                      MAILLAGE=MA,
                      AFFE=_F( TOUT = 'OUI', NOM_CMP = 'IRRA', 
                            VALE = (EVAL("""FRIGG(5.0)"""),))     
                  )

RES11=CREA_CHAMP(  OPERATION='AFFE', 
                      TYPE_CHAM='NOEU_IRRA_R',
                      MAILLAGE=MA,
                      AFFE=_F( TOUT = 'OUI', NOM_CMP = 'IRRA', 
                            VALE = (EVAL("""FRIGG(5.5)"""),))     
                  )

RES12=CREA_CHAMP(  OPERATION='AFFE', 
                      TYPE_CHAM='NOEU_IRRA_R',
                      MAILLAGE=MA,
                      AFFE=_F( TOUT = 'OUI', NOM_CMP = 'IRRA', 
                            VALE = (EVAL("""FRIGG(6.0)"""),))     
                  )

FLUENC1=CREA_RESU(  
                      OPERATION='AFFE', TYPE_RESU='EVOL_VARC',
                      NOM_CHAM='IRRA',AFFE=(
                      _F( CHAM_GD = RES1, INST = 0.5),
                      _F( CHAM_GD = RES2, INST = 1.0),
                      _F( CHAM_GD = RES3, INST = 1.5),
                      _F( CHAM_GD = RES4, INST = 2.0),
                      _F( CHAM_GD = RES5, INST = 2.5),
                      _F( CHAM_GD = RES6, INST = 3.0),
                      _F( CHAM_GD = RES7, INST = 3.5),
                      _F( CHAM_GD = RES8, INST = 4.0),
                      _F( CHAM_GD = RES9, INST = 4.5),
                      _F( CHAM_GD = RES10, INST = 5.0),
                      _F( CHAM_GD = RES11, INST = 5.5), 
                      _F( CHAM_GD = RES12, INST = 6.0))
                    )

EF_UNIT = DEFI_CONSTANTE ( VALE= -100.,)

MAT=DEFI_MATERIAU(  
                            DIS_CONTACT=_F( COULOMB = 0.4,
                                         EFFO_N_INIT = EF_UNIT,
                                         KT_ULTM = 0.,
                                         RIGI_N_IRRA = UNIT),
                           ELAS=_F( E = 1.E5, NU = 0.3)
                       )

CHMAT=AFFE_MATERIAU(   MAILLAGE=MA,
                          AFFE=_F(  TOUT = 'OUI', MATER = MAT)
                       )

CHART0=AFFE_CHAR_MECA(   MODELE=MO,
                            DDL_IMPO=_F(  NOEUD = 'N1',
                                       DX = 0., DY = 0., DZ = 0.)
                         )

#####################################################################


CHART1=AFFE_CHAR_MECA(   MODELE=MO,
                            DDL_IMPO=_F(  NOEUD = 'N2',
                                       DY = 0.01)
                         )

FONCT1=DEFI_FONCTION(   NOM_PARA='INST',
                            VALE=(  0.,   1.,
                                   10.,   1., ) )

LINST=DEFI_LIST_REEL( DEBUT=0.,
                         INTERVALLE=_F( JUSQU_A = 10., NOMBRE = 20)
                       )

#####################################################################


CHART2=AFFE_CHAR_MECA(   MODELE=MO,
                            DDL_IMPO=_F(  NOEUD = 'N2',
                                       DX = 0.1)
                         )

FONCT2=DEFI_FONCTION(   NOM_PARA='INST',
                            VALE=(  0.,   0.,
                                   10.,   1., ) )

REST2=STAT_NON_LINE( 
                            MODELE=MO,
                         VARI_COMM=_F(    
                IRRA = FLUENC1), 
                        CHAM_MATER=CHMAT,
                         CARA_ELEM=CAREL,EXCIT=(
                             _F( 
                CHARGE = CHART0),
                             _F( 
                CHARGE = CHART1,
                FONC_MULT = FONCT1),
                             _F( 
                CHARGE = CHART2,
                FONC_MULT = FONCT2)),
                         COMP_INCR=_F( 
                RELATION = 'DIS_CONTACT',
                GROUP_MA = 'DISC'),
                         INCREMENT=_F( 
                LIST_INST = LINST,
                NUME_INST_FIN = 12),
                            NEWTON=_F( 
                MATRICE = 'ELASTIQUE')
              )

TEST_RESU(RESU=( 
    _F( RESULTAT = REST2, NUME_ORDRE = 1, NOM_CHAM = 'VARI_ELGA', NOM_CMP = 'V1',
     MAILLE = 'M1', POINT = 1, VALE = 0., CRITERE = 'ABSOLU', PRECISION = 1.E-4),
    _F( RESULTAT = REST2, NUME_ORDRE = 9,  NOM_CHAM = 'VARI_ELGA', NOM_CMP = 'V1',
     MAILLE = 'M1', POINT = 1, VALE = 0., CRITERE = 'ABSOLU', PRECISION = 1.E-4),
    _F( RESULTAT = REST2, NUME_ORDRE = 11, NOM_CHAM = 'VARI_ELGA', NOM_CMP = 'V1',
     MAILLE = 'M1', POINT = 1, VALE = 1.9E-3, PRECISION = 1.E-4))         
            )

TEST_RESU(RESU=( 
    _F( RESULTAT = REST2, NUME_ORDRE = 1, NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'VY',
     MAILLE = 'M1', POINT = 1, VALE = 10., PRECISION = 1.E-4),
    _F( RESULTAT = REST2, NUME_ORDRE = 9, NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'VY',
     MAILLE = 'M1', POINT = 1, VALE = 10., PRECISION = 1.E-4),
    _F( RESULTAT = REST2, NUME_ORDRE = 11, NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'VY',
     MAILLE = 'M1', POINT = 1, VALE = 8.1, PRECISION = 1.E-4))         
          )

REST3=STAT_NON_LINE( 
                            MODELE=MO,
                         VARI_COMM=_F(    
                IRRA = FLUENC1), 
                        CHAM_MATER=CHMAT,
                         CARA_ELEM=CAREL,EXCIT=(
                             _F( 
                CHARGE = CHART0),
                             _F( 
                CHARGE = CHART1,
                FONC_MULT = FONCT2),
                             _F( 
                CHARGE = CHART2,
                FONC_MULT = FONCT2)),
                         COMP_INCR=_F( 
                RELATION = 'DIS_CONTACT',
                GROUP_MA = 'DISC'),
                         INCREMENT=_F( 
                LIST_INST = LINST,
                NUME_INST_FIN = 19),
                            NEWTON=_F( 
                MATRICE = 'ELASTIQUE')
              )

TEST_RESU(RESU=( 
    _F( RESULTAT = REST3, NUME_ORDRE = 1, NOM_CHAM = 'VARI_ELGA', NOM_CMP = 'V1',
     MAILLE = 'M1', POINT = 1, VALE = 0., CRITERE = 'ABSOLU', PRECISION = 1.E-4),
    _F( RESULTAT = REST3, NUME_ORDRE = 12, NOM_CHAM = 'VARI_ELGA', NOM_CMP = 'V1',
     MAILLE = 'M1', POINT = 1, VALE = 0., CRITERE = 'ABSOLU', PRECISION = 1.E-4))
#    (RESULTAT:REST3 NUME_ORDRE:13 NOM_CHAM:'VARI_ELGA' NOM_CMP:'V1'
#     MAILLE: M1 POINT:1 VALE: 1.6E-3 PRECISION:1.E-4)
#    (RESULTAT:REST3 NUME_ORDRE:19 NOM_CHAM:'VARI_ELGA' NOM_CMP:'V1'
#     MAILLE: M1 POINT:1 VALE: 9.4E-3 PRECISION:1.E-4)       
           )

TEST_RESU(RESU=( 
    _F( RESULTAT = REST3, NUME_ORDRE = 1, NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'VY',
     MAILLE = 'M1', POINT = 1, VALE = 0.5, PRECISION = 1.E-4),
    _F( RESULTAT = REST3, NUME_ORDRE = 12, NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'VY',
     MAILLE = 'M1', POINT = 1, VALE = 6., PRECISION = 1.E-4))
#    (RESULTAT:REST3 NUME_ORDRE:13 NOM_CHAM:'SIEF_ELGA' NOM_CMP:'VY'
#     MAILLE: M1 POINT:1 VALE: 4.9 PRECISION:1.E-4)
#    (RESULTAT:REST3 NUME_ORDRE:19 NOM_CHAM:'SIEF_ELGA' NOM_CMP:'VY'
#     MAILLE: M1 POINT:1 VALE: 0.1 PRECISION:1.E-4)          
           )

TEST_RESU(RESU=( 
    _F( RESULTAT = REST3, NUME_ORDRE = 1, NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'N',
     MAILLE = 'M1', POINT = 1, VALE = -90.25, PRECISION = 1.E-4),
    _F( RESULTAT = REST3, NUME_ORDRE = 12, NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'N',
     MAILLE = 'M1', POINT = 1, VALE = -16., PRECISION = 1.E-4))
#    (RESULTAT:REST3 NUME_ORDRE:13 NOM_CHAM:'SIEF_ELGA' NOM_CMP:'N'
#     MAILLE: M1 POINT:1 VALE: -12.25 PRECISION:1.E-4)
#    (RESULTAT:REST3 NUME_ORDRE:19 NOM_CHAM:'SIEF_ELGA' NOM_CMP:'N'
#     MAILLE: M1 POINT:1 VALE: -0.25 PRECISION:1.E-4)          
            )

FIN()
#
