# MODIF  DATE 01/10/2002   AUTEUR CIBHHLV L.VIVAN 
# TITRE LIAISON TUBE-GRILLE AVEC FROTTEMENT DE COULOMB
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================


DEBUT( CODE=_F(  NOM = 'SSNL108A',NIV_PUB_WEB='INTERNET')   )

MA=LIRE_MAILLAGE(  )

MO=AFFE_MODELE(        MAILLAGE=MA,AFFE=(
                         _F(  GROUP_MA = 'POUT',
                                PHENOMENE = 'MECANIQUE',
                                MODELISATION = 'POU_D_E'),
                         _F(  GROUP_MA = 'DISC',
                                PHENOMENE = 'MECANIQUE',
                             #  MODELISATION:'DIS_T')
                                MODELISATION = 'DIS_TR'))
                       )

CAREL=AFFE_CARA_ELEM(   MODELE=MO,
                             POUTRE=_F(  GROUP_MA = 'POUT',
                                      SECTION = 'RECTANGLE',
                                      CARA = (   'H',  ),
                                      VALE = (    1.,  )),
                             DISCRET=_F(  GROUP_MA = 'DISC',
                                  #   CARA:(   'K_T_D_L' )
                                  #   VALE:(    1.E3 1.E3 1.E3 ) )
                                      CARA = (   'K_TR_D_L', ),
                                      VALE = (    1.E3, 1.E3, 1.E3,
                                                1.E3, 1.E3, 1.E3,
                                           ))
                      #   ORIENTATION: ( GROUP_MA: POUT
                      #                  CARA:   'VECT_Y'
                      #                  VALE: (-.067 0.01346 0.0 ) )
                        )

FRIG=DEFI_FONCTION(   NOM_PARA='INST',
                           VALE=( 0., 1., 1000., 1., ) )

EF_UNIT = DEFI_CONSTANTE ( VALE= -100.,)

MAT=DEFI_MATERIAU(     DIS_CONTACT=_F( COULOMB = 0.4,
                                       RIGI_N_FO = FRIG,
                                       EFFO_N_INIT = EF_UNIT,
                                       KT_ULTM = 0.),
                               ELAS=_F( E = 1.E5, NU = 0.3)
                        )

CHMAT1=AFFE_MATERIAU(   MAILLAGE=MA,
                           AFFE=_F(  TOUT = 'OUI', MATER = MAT)
                        )

CHART=AFFE_CHAR_MECA(  MODELE=MO,DDL_IMPO=(
                          _F(  NOEUD = 'N1',
                                     DX = 0., DY = 0., DZ = 0.,
                                     DRX = 0., DRY = 0., DRZ = 0.),
                          _F(  NOEUD = ('N4', 'N2', 'N3',),
                                     DX = 0., DZ = 0.,
                                     DRX = 0., DRY = 0., DRZ = 0.),
                          _F(  NOEUD = ('N4', 'N2', 'N3',),
                                     DY = 0.01))
                       )

FONCT=DEFI_FONCTION(   NOM_PARA='INST',
                           VALE=( 0.,    0.,
                                  10.,  10.,
                                  20.,   0.,
                                  ) )

LINST=DEFI_LIST_REEL( DEBUT=0.,INTERVALLE=(
                         _F( JUSQU_A = 4.,  NOMBRE = 1),
                         _F( JUSQU_A = 10., NOMBRE = 1),
                         _F( JUSQU_A = 18., NOMBRE = 1),
                         _F( JUSQU_A = 20., NOMBRE = 1))
                       )

REST=STAT_NON_LINE( 
                            MODELE=MO,
                        CHAM_MATER=CHMAT1,
                         CARA_ELEM=CAREL,
                             EXCIT=_F(    CHARGE = CHART,
                                        FONC_MULT = FONCT),
                         COMP_INCR=(_F(  RELATION = 'ELAS',
                                         GROUP_MA = 'POUT'),
                                    _F(  RELATION = 'DIS_CONTACT',
                                         GROUP_MA = 'DISC')),
                         INCREMENT=_F( LIST_INST = LINST,
                                       NUME_INST_FIN = 4),
                            NEWTON=_F( MATRICE = 'ELASTIQUE')
              )

TEST_RESU(RESU=( 
    _F( RESULTAT = REST, NUME_ORDRE = 1, NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'VY',
     MAILLE = 'M1', POINT = 1, VALE = 40., REFERENCE='ANALYTIQUE', PRECISION = 1.E-4),
    _F( RESULTAT = REST, NUME_ORDRE = 2, NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'VY',
     MAILLE = 'M1', POINT = 1, VALE = 40., REFERENCE='ANALYTIQUE', PRECISION = 1.E-4),
    _F( RESULTAT = REST, NUME_ORDRE = 3, NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'VY',
     MAILLE = 'M1', POINT = 1, VALE = -40., REFERENCE='ANALYTIQUE', PRECISION = 1.E-4),
    _F( RESULTAT = REST, NUME_ORDRE = 3, NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'VY',
     MAILLE = 'M1', POINT = 1, VALE = -40., REFERENCE='ANALYTIQUE', PRECISION = 1.E-4))
          )

# TEST DE L'ECROUISSAGE
MAT2=DEFI_MATERIAU(     DIS_CONTACT=_F( COULOMB = 0.4,
                                         RIGI_N_FO = FRIG,
                                         EFFO_N_INIT = EF_UNIT,
                                         KT_ULTM = 100.),
                               ELAS=_F( E = 1.E5, NU = 0.3)
                        )

CHMAT2=AFFE_MATERIAU(   MAILLAGE=MA,
                           AFFE=_F(  TOUT = 'OUI', MATER = MAT2)
                        )


REST2=STAT_NON_LINE( 
                            MODELE=MO,
                        CHAM_MATER=CHMAT2,
                         CARA_ELEM=CAREL,
                             EXCIT=_F( 
                CHARGE = CHART,
                FONC_MULT = FONCT),COMP_INCR=(
                         _F( 
                RELATION = 'ELAS',
                GROUP_MA = 'POUT'),
                         _F( 
                RELATION = 'DIS_CONTACT',
                GROUP_MA = 'DISC')),
                         INCREMENT=_F( 
                LIST_INST = LINST,
                INST_FIN=10.,),
                            NEWTON=_F( 
                MATRICE = 'ELASTIQUE')
              )

TEST_RESU(RESU=( 
    _F( RESULTAT = REST2, NUME_ORDRE = 1, NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'VY',
     MAILLE = 'M1', POINT = 1, VALE = 40., REFERENCE='ANALYTIQUE', PRECISION = 1.E-4),
    _F( RESULTAT = REST2, NUME_ORDRE = 2, NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'VY',
     MAILLE = 'M1', POINT = 1, VALE = 46., REFERENCE='ANALYTIQUE', PRECISION = 1.E-4),
          ))

FIN()
#
