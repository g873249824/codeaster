# MODIF  DATE 10/10/2012   AUTEUR COURTOIS M.COURTOIS 
# TITRE CALCUL ELASTIQUE D'UN DIABOLO PLEIN SOUMIS A UN CHARGEMENT THERMIQUE
# perf008d.para = tps_job 2000 mem_job 4601Mo ncpus 1 liste_test W
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# 2e6 ELEMENTS LINEAIRES
#       INTERET : MESURER LES PERFORMANCES D'UN CALCUL ELASTIQUE 3D MASSIF
#---------------------------------------------------------------------------

DEBUT(CODE=_F(NOM='PERF008D',
              NIV_PUB_WEB='INTERNET',),);

MA=LIRE_MAILLAGE(FORMAT='MED',);

MO=AFFE_MODELE(MAILLAGE=MA,
               AFFE=_F(TOUT='OUI',
                       PHENOMENE='MECANIQUE',
                       MODELISATION='3D',),);

MAT=DEFI_MATERIAU(ELAS=_F(E=5.e11,
                          NU=0.3,
                          RHO=9800.,
                          ALPHA=1.e-6,),);
PI = 3.14;


FCHAR = FORMULE(VALE='cos(Z/PI)',
                NOM_PARA='Z',);

CHGEOM=CREA_CHAMP(TYPE_CHAM='NOEU_GEOM_R',
                  OPERATION='EXTR',
                  MAILLAGE=MA,
                  NOM_CHAM='GEOMETRIE',);

CHFONC=CREA_CHAMP(TYPE_CHAM='NOEU_NEUT_F',
                  OPERATION='AFFE',
                  MODELE=MO,
                  PROL_ZERO='OUI',
                  AFFE=_F(TOUT='OUI',
                          NOM_CMP='X1',
                          VALE_F=FCHAR,),);

CHTEMPF=CREA_CHAMP(TYPE_CHAM='NOEU_NEUT_R',
                   OPERATION='EVAL',
                   CHAM_F=CHFONC,
                   CHAM_PARA=CHGEOM,);

CHTEMP=CREA_CHAMP(TYPE_CHAM='NOEU_TEMP_R',
                  OPERATION='ASSE',
                  MODELE=MO,
                  PROL_ZERO='OUI',
                  ASSE=_F(TOUT='OUI',
                          CHAM_GD=CHTEMPF,
                          NOM_CMP='X1',
                          NOM_CMP_RESU='TEMP',),);

CHMAT=AFFE_MATERIAU(MAILLAGE=MA,
                    AFFE=_F(TOUT='OUI',
                            MATER=MAT,),
                    AFFE_VARC=_F(TOUT='OUI',
                                 NOM_VARC='TEMP',
                                 CHAMP_GD=CHTEMP,
                                 VALE_REF=0.,),);

CHAR=AFFE_CHAR_MECA(MODELE=MO,
                    DDL_IMPO=(_F(GROUP_NO='POINT_A',
                                 DX=0.0,
                                 DY=0.0,
                                 DZ=0.0,),
                              _F(GROUP_NO='POINT_B',
                                 DX=0.0,
                                 DY=0.0,),
                              _F(GROUP_NO='POINT_C',
                                 DY=0.0,),),);

RESU=MECA_STATIQUE(MODELE=MO,
                   CHAM_MATER=CHMAT,
                   EXCIT=_F(CHARGE=CHAR,),
                   OPTION='SANS',
                   SOLVEUR=_F(METHODE='GCPC',),
                   INFO=1,);

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   REFERENCE='NON_DEFINI',
                   TYPE_TEST='MAX',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   VALE_CALC= 6.10113203E-05,
                   VALE_REFE=6.0999999999999999E-05,
                   CRITERE='RELATIF',
                   PRECISION=3.0000000000000001E-3,),
                _F(NUME_ORDRE=1,
                   REFERENCE='NON_DEFINI',
                   TYPE_TEST='MAX',
                   RESULTAT=RESU,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   VALE_CALC= 3.05055711E-05,
                   VALE_REFE=3.0499999999999999E-05,
                   CRITERE='RELATIF',
                   PRECISION=3.0000000000000001E-3,),
                ),
          )

if 0 :   # pour faire une belle image :

  RESU=CALC_CHAMP(reuse=RESU,RESULTAT=RESU,CRITERES=('SIEQ_ELNO'),CONTRAINTE=('SIEF_ELGA','SIGM_ELNO'))


  RESU=CALC_CHAMP(reuse =RESU,
               RESULTAT=RESU,
               CRITERES='SIEQ_NOEU',);

  IMPR_RESU(FORMAT='MED',
            UNITE=38,
            RESU=_F(MAILLAGE=MA,
                    RESULTAT=RESU,
                    NOM_CHAM=('DEPL','SIEQ_NOEU',),),);

FIN();
