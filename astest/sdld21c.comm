# MODIF  DATE 14/10/2008   AUTEUR NISTOR I.NISTOR 
# TITRE SYSTEME MASSE-RESSORT A 8 DDL AVEC AMORTISSEMENT VISQUEUX
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2003  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
#
# ----------------------------------------------------------------------
# SYSTEME MASSE-RESSORT A 8 DEGRES DE LIBERTE AVEC AMORTISSEMENT
# VISQUEUX PROPORTIONNEL (ANALYSE MODALE)
# 9 RESSORTS  8 MASSES  -- K =1.E+5    M =10 --
# CALCUL MODAL QUADRATIQUE REEL SYMETRIQUE AVEC SORENSEN ET QZ
#                                                 REF: SFM.VPCS SDLD21 
# ----------------------------------------------------------------------
#
#CAS_TEST__:SDLD21C
#

DEBUT(CODE=_F(NOM='SDLD21C', NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'),
              IMPR_MACRO='OUI')

MA=LIRE_MAILLAGE();

MO=AFFE_MODELE(MAILLAGE=MA,
               AFFE=(_F(TOUT='OUI',
                        PHENOMENE='MECANIQUE',
                        MODELISATION='DIS_T',),
                     _F(GROUP_NO='MASSE',
                        PHENOMENE='MECANIQUE',
                        MODELISATION='DIS_T',),),);

MATER=DEFI_MATERIAU(ELAS=_F(E=200000000000.0,
                            NU=0.3,),);

CHMATER=AFFE_MATERIAU(MAILLAGE=MA,
                      AFFE=_F(TOUT='OUI',
                              MATER=MATER,),);

CARELEM=AFFE_CARA_ELEM(MODELE=MO,
                       DISCRET=(_F(GROUP_MA='RESSORT',
                                   CARA='K_T_D_L',
                                   VALE=(100000.0,1.0,1.0,),),
                                _F(GROUP_NO='MASSE',
                                   CARA='M_T_D_N',
                                   VALE=10.0,),
                                _F(GROUP_MA='AMORTIS',
                                   CARA='A_T_D_L',
                                   VALE=(50.0,1.0,1.0,),),),);

CH=AFFE_CHAR_MECA(MODELE=MO,
                  DDL_IMPO=(_F(GROUP_NO='A_ET_B',
                               DX=0.0,
                               DY=0.0,
                               DZ=0.0,),
                            _F(GROUP_NO='MASSE',
                               DY=0.0,
                               DZ=0.0,),),);
# --------------------------------------------------------------------
#
#
#
#


MACRO_MATR_ASSE(MODELE=MO,
                CARA_ELEM=CARELEM,
                CHARGE=CH,
                NUME_DDL=CO('NUM'),
                MATR_ASSE=(_F(MATRICE=CO('MATASSR'),
                              OPTION='RIGI_MECA',),
                           _F(MATRICE=CO('MATASSM'),
                              OPTION='MASS_MECA',),
                           _F(MATRICE=CO('MATASSC'),
                              OPTION='AMOR_MECA',),),);
# --------------------------------------------------------------------
#
#
#
#


MODES=MODE_ITER_SIMULT(MATR_A=MATASSR,
                       MATR_B=MATASSM,
                       MATR_C=MATASSC,
                       METHODE='SORENSEN',
                       CALC_FREQ=_F(OPTION='CENTRE',
                                    FREQ=5.0,
                                    NMAX_FREQ=5,
                                    APPROCHE='REEL',),);
MODESN=NORM_MODE(MODE=MODES,NORME='MASS_GENE')

# AVEC QZ + OPTION='CENTRE' + 'QZ_SIMPLE'

MODE_QZ1=CALC_MODAL(MODELE=MO,
                 CHAM_MATER=CHMATER,
                 CARA_ELEM=CARELEM,
                 AMORTISEMENT='OUI',
                 CHARGE=CH,
                 METHODE='QZ',TYPE_QZ='QZ_SIMPLE',
                 CALC_FREQ=_F(OPTION='CENTRE',
                              FREQ=5.0,
                              NMAX_FREQ =5,
                ),);


MODE_QZ1=NORM_MODE(MODE=MODE_QZ1,reuse=MODE_QZ1,NORME='MASS_GENE')

# --------------------------------------------------------------------
#

# --------------------------------------------------------------------
#

TEST_RESU(RESU=(_F(RESULTAT=MODES,
                   NUME_ORDRE=1,
                   PARA='FREQ',
                   VALE=5.5271,
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=2,
                   PARA='FREQ',
                   VALE=10.8868,
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=3,
                   PARA='FREQ',
                   VALE=15.9155,
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=4,
                   PARA='FREQ',
                   VALE=20.4606,
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=5,
                   PARA='FREQ',
                   VALE=24.384,
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=MODES,
                   NUME_ORDRE=1,
                   PARA='AMOR_REDUIT',
                   VALE=0.00868241,
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=2,
                   PARA='AMOR_REDUIT',
                   VALE=0.017101,
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=3,
                   PARA='AMOR_REDUIT',
                   VALE=0.025,
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=4,
                   PARA='AMOR_REDUIT',
                   VALE=0.0321394,
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODES,
                   NUME_ORDRE=5,
                   PARA='AMOR_REDUIT',
                   VALE=0.0383022,
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=MODESN,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   NUME_ORDRE=1,
                   NOEUD='P1',
                   VALE_ABS='OUI',
                   VALE_C=('RI',4.32587E-03,-4.32587E-03),
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='NON_REGRESSION',
                   VERSION='8.3.14'),
                _F(RESULTAT=MODESN,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   NUME_ORDRE=2,
                   NOEUD='P1',
                   VALE_ABS='OUI',
                   VALE_C=('RI',-5.79325E-03,5.79325E-03),
                   PRECISION=0.001,
                   REFERENCE='NON_REGRESSION',
                   VERSION='8.3.14'),
                _F(RESULTAT=MODESN,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   NUME_ORDRE=3,
                   NOEUD='P1',
#              --- ON TESTE LA VALEUR ABSOLUE (MODULE)
                   VALE_ABS='OUI',
                   VALE_C=('RI',6.45598E-03,6.45598E-03),
#              ---
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='NON_REGRESSION',
                   VERSION='8.3.14'),
                _F(RESULTAT=MODESN,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   NUME_ORDRE=4,
                   VALE_ABS='OUI',
                   NOEUD='P1',
                   VALE_C=('RI',6.47558E-03,-6.47558E-03),
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='NON_REGRESSION',
                   VERSION='8.3.14'),
                _F(RESULTAT=MODESN,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   NUME_ORDRE=5,
                   VALE_ABS='OUI',
                   NOEUD='P1',
                   VALE_C=('RI',5.93243E-03,-5.93243E-03),
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='NON_REGRESSION',
                   VERSION='8.3.14'),),)
# POUR QZ
TEST_RESU(RESU=(_F(RESULTAT=MODE_QZ1,
                   NUME_ORDRE=1,
                   PARA='FREQ',
                   VALE=5.5271,
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE_QZ1,
                   NUME_ORDRE=2,
                   PARA='FREQ',
                   VALE=10.8868,
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE_QZ1,
                   NUME_ORDRE=3,
                   PARA='FREQ',
                   VALE=15.9155,
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE_QZ1,
                   NUME_ORDRE=4,
                   PARA='FREQ',
                   VALE=20.4606,
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE_QZ1,
                   NUME_ORDRE=5,
                   PARA='FREQ',
                   VALE=24.384,
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=MODE_QZ1,
                   NUME_ORDRE=1,
                   PARA='AMOR_REDUIT',
                   VALE=0.00868241,
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE_QZ1,
                   NUME_ORDRE=2,
                   PARA='AMOR_REDUIT',
                   VALE=0.017101,
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE_QZ1,
                   NUME_ORDRE=3,
                   PARA='AMOR_REDUIT',
                   VALE=0.025,
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE_QZ1,
                   NUME_ORDRE=4,
                   PARA='AMOR_REDUIT',
                   VALE=0.0321394,
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=MODE_QZ1,
                   NUME_ORDRE=5,
                   PARA='AMOR_REDUIT',
                   VALE=0.0383022,
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),),);

TEST_RESU(RESU=(_F(RESULTAT=MODE_QZ1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   NUME_ORDRE=1,
                   NOEUD='P1',
                   VALE_ABS='OUI',
                   VALE_C=('RI',4.32587E-03,-4.32587E-03),
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='NON_REGRESSION',
                   VERSION='8.3.14'),
                _F(RESULTAT=MODE_QZ1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   NUME_ORDRE=2,
                   NOEUD='P1',
                   VALE_ABS='OUI',
                   VALE_C=('RI',-5.79325E-03,5.79325E-03),
                   PRECISION=0.001,
                   REFERENCE='NON_REGRESSION',
                   VERSION='8.3.14'),
                _F(RESULTAT=MODE_QZ1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   NUME_ORDRE=3,
                   NOEUD='P1',
#              --- ON TESTE LA VALEUR ABSOLUE (MODULE)
                   VALE_ABS='OUI',
                   VALE_C=('RI',6.45598E-03,6.45598E-03),
#              ---
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='NON_REGRESSION',
                   VERSION='8.3.14'),
                _F(RESULTAT=MODE_QZ1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   NUME_ORDRE=4,
                   VALE_ABS='OUI',
                   NOEUD='P1',
                   VALE_C=('RI',6.47558E-03,-6.47558E-03),
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='NON_REGRESSION',
                   VERSION='8.3.14'),
                _F(RESULTAT=MODE_QZ1,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   NUME_ORDRE=5,
                   VALE_ABS='OUI',
                   NOEUD='P1',
                   VALE_C=('RI',5.93243E-03,-5.93243E-03),
                   CRITERE='RELATIF',
                   PRECISION=0.001,
                   REFERENCE='NON_REGRESSION',
                   VERSION='8.3.14'),),)
FIN();
