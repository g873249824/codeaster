# MODIF  DATE 02/02/2011   AUTEUR PELLET J.PELLET 
# TITRE ESSAI DE TRACTION-CISAILLEMENT (MISES ECR. ISOT. COQUE 3D)
# ssnp15e.para = tps_job 60 mem_job 64Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2011  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================

DEBUT(CODE=_F(NOM='SSNP15E', NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'))

#......................................................................
# PLAQUE CARREE EN TRACTION CISAILLEMENT CALCUL MEC3TR7H EN MEMBRANE
# ELASTOPLASTICITE ISOTROPE VON MISES   (2 TRIA7)
#......................................................................


M=LIRE_MAILLAGE( )

M=DEFI_GROUP( reuse=M,   MAILLAGE=M,
  CREA_GROUP_MA=_F(  NOM = 'TOUT', TOUT = 'OUI'))

MO=AFFE_MODELE(
          MAILLAGE=M,    VERIF='MAILLE',
         AFFE=_F( TOUT = 'OUI',PHENOMENE = 'MECANIQUE',MODELISATION = 'COQUE_3D')
           )

CARAC=AFFE_CARA_ELEM(  MODELE=MO,
           COQUE=_F( COQUE_NCOU=2,
                     GROUP_MA = 'TOUT',
                     EPAIS = 1.,  A_CIS = 0.83333333333333))

ACIER=DEFI_MATERIAU(
                ELAS=_F( E = 195000., NU = 0.3),
           ECRO_LINE=_F( D_SIGM_EPSI = 1930., SY = 181.E0)
           )

CM=AFFE_MATERIAU(
            MAILLAGE=M,
           AFFE=_F( TOUT = 'OUI',MATER = ACIER)
           )

CH_LA=AFFE_CHAR_MECA(
            MODELE=MO,DDL_IMPO=(
           _F( NOEUD = 'NO4', DX = 0.,DY = 0.),
           _F( NOEUD = 'NO2', DX = 0.),
           _F( NOEUD = 'NO7', DX = 0.),
           _F( NOEUD = ('NO1','NO2','NO3',), DZ = 0.))
           )

CH_FO=AFFE_CHAR_MECA(
           MODELE=MO,FORCE_NODALE=(
          _F( NOEUD = 'NO1',  FX = -9.6833333333, FY = -15.516666666),
                       _F( NOEUD = 'NO2',  FX = 15.516666666, FY = 15.516666666),
                       _F( NOEUD = 'NO3',  FX = -40.716666666, FY = -15.516666666),
                       _F( NOEUD = 'NO4',  FX = -15.5166666,   FY = 15.516666666),
                       _F( NOEUD = 'NO5',  FX = -100.8,        FY = -62.066666666),
                       _F( NOEUD = 'NO6',  FX = -62.066666666),
                       _F( NOEUD = 'NO7',                   FY = 62.066666666),
                       _F( NOEUD = 'NO8',  FX = 62.066666666))
                        )

RAMPE=DEFI_FONCTION(   NOM_PARA='INST',
           PROL_GAUCHE='LINEAIRE',  PROL_DROITE='LINEAIRE',
           VALE=(0.0,  0.0,
                1.0,  1.0,))

L_INST=DEFI_LIST_REEL(  DEBUT=0.0,INTERVALLE=(
             _F( JUSQU_A = 0.81880,  NOMBRE = 2),
             _F( JUSQU_A = 1.0,      NOMBRE = 1))
           )

# STAT_NON_LINE 'VMIS_ISOT_LINE'

#-------------------------------



U=STAT_NON_LINE(
                            MODELE=MO,
                        CHAM_MATER=CM,
                         CARA_ELEM=CARAC,EXCIT=(
                             _F(
                CHARGE = CH_FO,
                FONC_MULT = RAMPE), _F(
                CHARGE = CH_LA)),
                         COMP_INCR=_F(
                RELATION = 'VMIS_ISOT_LINE',
                ITER_INTE_MAXI = 30,
                RESI_INTE_RELA = 1.E-6
               ),
                         INCREMENT=_F(
                LIST_INST = L_INST),
                            NEWTON=_F(
                MATRICE = 'TANGENTE',
                REAC_ITER = 2),
                       CONVERGENCE=_F(
                RESI_GLOB_RELA = 1.E-8),
                     RECH_LINEAIRE=_F(
                ITER_LINE_MAXI = 3,
                RESI_LINE_RELA = 1.E-3)
              )

U=CALC_ELEM( reuse=U,  RESULTAT=U,
             TOUT_ORDRE='OUI',
             REPE_COQUE =_F( NUME_COUCHE=1,
                             NIVE_COUCHE='SUP', ),
             OPTION=('VARI_ELNO', 'SIEF_ELNO', 'SICO_ELNO' ),
             )

TEST_RESU(RESU=(

        _F(  RESULTAT = U, NOM_CHAM = 'DEPL',
          MAILLE = 'MA1', NOEUD = 'NO1',
          INST = 0.81880,
          NOM_CMP = 'DX',
          VALE = -6.34885E-04, PRECISION = 5.E-3),
        _F(
        RESULTAT = U, NOM_CHAM = 'DEPL',
        MAILLE = 'MA1', NOEUD = 'NO1',
        INST = 0.81880,
        NOM_CMP = 'DY',
        VALE = -1.20687E-03, PRECISION = 5.E-3),
        _F(
        RESULTAT = U, NOM_CHAM = 'DEPL',
        MAILLE = 'MA1', NOEUD = 'NO1',
        INST = 1.,
        NOM_CMP = 'DY',
        VALE = -3.43146E-02, PRECISION = 5.E-3))
           )

TEST_RESU(RESU=(_F(
                   RESULTAT = U,  NOM_CHAM = 'VARI_ELNO',
                   MAILLE = 'MA1',  NOEUD = 'NO10',
                   INST = 1.,
                   NOM_CMP = 'V1',
                   VALE = 2.055E-02,      PRECISION = 1.E-02),
                 _F(
                   RESULTAT = U,  NOM_CHAM = 'VARI_ELNO',
                   MAILLE = 'MA2',  NOEUD = 'NO11',
                   INST = 1.,
                   NOM_CMP = 'V1',
                   VALE = 2.055E-02,      PRECISION = 1.E-02))
            )

TEST_RESU(RESU=(_F(
                   RESULTAT = U,  NOM_CHAM = 'SICO_ELNO',
                   MAILLE = 'MA1',  NOEUD = 'NO1',
                   INST = 1.,     NOM_CMP = 'SIXX',
                   VALE = 1.512E+02,      PRECISION = 1.E-02),
                  _F(
                   RESULTAT = U,   NOM_CHAM = 'SICO_ELNO',
                   MAILLE = 'MA1',   NOEUD = 'NO1',
                   INST = 1.,      NOM_CMP = 'SIXY',
                   VALE = 0.931E+02,      PRECISION = 1.E-02),
                  _F(
                   RESULTAT = U,   NOM_CHAM = 'SICO_ELNO',
                   MAILLE = 'MA1',   NOEUD = 'NO3',
                   INST = 1.,      NOM_CMP = 'SIXX',
                   VALE = 1.512E+02,      PRECISION = 1.E-02),
                  _F(
                   RESULTAT = U,   NOM_CHAM = 'SICO_ELNO',
                   MAILLE = 'MA1',  NOEUD = 'NO3',
                   INST = 1.,      NOM_CMP = 'SIXY',
                   VALE = 0.931E+02,      PRECISION = 1.E-02),
                  _F(
                   RESULTAT = U,   NOM_CHAM = 'SICO_ELNO',
                   MAILLE = 'MA2',   NOEUD = 'NO3',
                   INST = 1.,      NOM_CMP = 'SIXX',
                   VALE = 1.512E+02,      PRECISION = 1.E-02),
                  _F(
                   RESULTAT = U,   NOM_CHAM = 'SICO_ELNO',
                   MAILLE = 'MA2',   NOEUD = 'NO3',
                   INST = 1.,      NOM_CMP = 'SIXY',
                   VALE = 0.931E+02,      PRECISION = 1.E-02))
            )

TEST_RESU(RESU=(_F(
                   RESULTAT = U,  NOM_CHAM = 'SIEF_ELNO',
                   MAILLE = 'MA1',  NOEUD = 'NO1',
                   INST = 1.,     NOM_CMP = 'NXX',
                   VALE = 1.512E+02,      PRECISION = 1.E-02),
                  _F(
                   RESULTAT = U,   NOM_CHAM = 'SIEF_ELNO',
                   MAILLE = 'MA1',   NOEUD = 'NO1',
                   INST = 1.,      NOM_CMP = 'NXY',
                   VALE = 0.931E+02,      PRECISION = 1.E-02),
                  _F(
                   RESULTAT = U,   NOM_CHAM = 'SIEF_ELNO',
                   MAILLE = 'MA1',   NOEUD = 'NO3',
                   INST = 1.,      NOM_CMP = 'NXX',
                   VALE = 1.512E+02,      PRECISION = 1.E-02),
                  _F(
                   RESULTAT = U,   NOM_CHAM = 'SIEF_ELNO',
                   MAILLE = 'MA1',  NOEUD = 'NO3',
                   INST = 1.,      NOM_CMP = 'NXY',
                   VALE = 0.931E+02,      PRECISION = 1.E-02),
                  _F(
                   RESULTAT = U,   NOM_CHAM = 'SIEF_ELNO',
                   MAILLE = 'MA2',   NOEUD = 'NO3',
                   INST = 1.,      NOM_CMP = 'NXX',
                   VALE = 1.512E+02,      PRECISION = 1.E-02),
                  _F(
                   RESULTAT = U,   NOM_CHAM = 'SIEF_ELNO',
                   MAILLE = 'MA2',   NOEUD = 'NO3',
                   INST = 1.,      NOM_CMP = 'NXY',
                   VALE = 0.931E+02,      PRECISION = 1.E-02))
            )

FIN()
