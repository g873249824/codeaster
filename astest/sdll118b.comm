# MODIF  DATE 07/06/2002   AUTEUR DURAND C.DURAND 
# TITRE POUTRE SOUMISE A UNE EXCITATION FLUIDELASTIQUE AXIALE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
#=====================================================
# SIMULATION DE L'ESSAI DE TANAKA ET AL.
# PARALLEL FLOW-INDUCED DAMPING OF PWR FUEL ASSEMBLY
# ASME PVP CONFERENCE, PITTSBURGH, PA (1988), VOL. 133
# TUBE PVC L=1M D=13MM ROTULE AUX 2 EXTREMITES
# AVEC COMPRESSION AXIALE INITIALE DE 23.7N
# VIBRANT AU CENTRE D'UNE ENCEINTE CIRCULAIRE D=50MM
# SOUS ECOULEMENT AXIAL
#=====================================================
#

DEBUT(   CODE=_F(  NOM = 'SDLL118B',NIV_PUB_WEB='INTERNET'))

#

POUTRE=LIRE_MAILLAGE( )

POUTRE=DEFI_GROUP( reuse=POUTRE,   MAILLAGE=POUTRE,
  CREA_GROUP_MA=_F(  NOM = 'TOUT', TOUT = 'OUI'))

#

MODELE=AFFE_MODELE( 
                MAILLAGE=POUTRE,AFFE=(
                    _F( 
                TOUT = 'OUI',
                PHENOMENE = 'MECANIQUE',
                MODELISATION = 'POU_D_T'),
                    _F( 
                NOEUD = ('N001',  'N101',),
                PHENOMENE = 'MECANIQUE',
                MODELISATION = 'DIS_TR'))
                        )

#
#------------------------
# CARACTERISTIQUES POUTRE
#------------------------
#

CARA=AFFE_CARA_ELEM( 
                MODELE=MODELE,
                POUTRE=_F( 
                
       GROUP_MA = 'TOUT',

                SECTION = 'CERCLE',
                CARA = ( 'R', 'EP',),
                VALE = (6.50E-03, 2.10E-03,)),
                DISCRET=_F( 
                NOEUD = ('N001',  'N101',),
                CARA = 'K_TR_D_N',
                VALE = (0.,  0.,  0.,  6.29,  0.,  6.29,))
                           )

#
#--------------------------
# CARACTERISTIQUES MATERIAU
#--------------------------
#

MAT=DEFI_MATERIAU( 
                ELAS=_F( 
                E = 2.80E+9, 
                NU = 0.3,
                RHO = 1500.)
                          )

#
#---------------------
# AFFECTATION MATERIAU
#---------------------
#

CHMAT=AFFE_MATERIAU( 
                MAILLAGE=POUTRE,
                    AFFE=_F( 
                TOUT = 'OUI',
                MATER = MAT)
                          )

#
#-------------------------
# CONDITIONS AUX LIMITES
# POUTRE ROTULEE - ROTULEE
#-------------------------
#

CHARG=AFFE_CHAR_MECA( 
                  MODELE=MODELE,DDL_IMPO=(
               
                _F( NOEUD = 'N001',  DX = 0.,  DY = 0.,  DZ = 0.),
                _F( NOEUD = 'N101',  DX = 0.,  DZ = 0.),
                _F( 
                TOUT = 'OUI',
                DRY = 0.))
                           )

#
#----------------------------------------
# CONSTITUTION ET ASSEMBLAGE DES MATRICES
# DE MASSE ET DE RAIDEUR
#----------------------------------------
#

MELR=CALC_MATR_ELEM( 
                    MODELE=MODELE,
                    CHARGE=CHARG,
                 CARA_ELEM=CARA,
                CHAM_MATER=CHMAT,
                    OPTION='RIGI_MECA'
                           )

#

MELM=CALC_MATR_ELEM( 
                    MODELE=MODELE,
                    CHARGE=CHARG,
                 CARA_ELEM=CARA,
                CHAM_MATER=CHMAT,
                    OPTION='MASS_MECA'
                           )

#

NUM=NUME_DDL(   MATR_RIGI=MELR)

#

MATR=ASSE_MATRICE( 
                MATR_ELEM=MELR,
                 NUME_DDL=NUM
                         )

#

MATM=ASSE_MATRICE( 
                MATR_ELEM=MELM,
                 NUME_DDL=NUM
                         )

#
#--------------------------------------------
# MISE EN COMPRESSION DE LA POUTRE
# CALCUL STATIQUE POUTRE ROTULEE - ROTULEE
# FORCE IMPOSEE A L'EXTREMITE LIBRE SUIVANT Y
#--------------------------------------------
#
#------------------
# CHARGEMENT IMPOSE
#------------------
#

TENSION=AFFE_CHAR_MECA( 
                      MODELE=MODELE,
                FORCE_NODALE=_F( 
                NOEUD = 'N101',
                FX = 0.,  FY = -23.7,  FZ = 0.,
                MX = 0.,  MY = 0.,     MZ = 0.)
                           )

#
#--------------------------------------------
# CONSTITUTION ET ASSEMBLAGE DU VECTEUR FORCE
#--------------------------------------------
#

VELT=CALC_VECT_ELEM( 
                    CHARGE=TENSION,
                CHAM_MATER=CHMAT, 
                 CARA_ELEM=CARA,
                    OPTION='CHAR_MECA'
                           )

#

VECT=ASSE_VECTEUR( 
                VECT_ELEM=VELT,
                 NUME_DDL=NUM
                         )

#
#--------------------------------
# RESOLUTION DU PROBLEME STATIQUE
#--------------------------------
#

RAID=FACT_LDLT(   MATR_ASSE=MATR)

#

DEPL=RESO_LDLT( 
                MATR_FACT=RAID,
                  CHAM_NO=VECT
                      )

#
#---------------------------------
# CALCUL DES CONTRAINTES ASSOCIEES
#---------------------------------
#

CONTR=CALC_CHAM_ELEM( 
                    MODELE=MODELE,
                      DEPL=DEPL,
                    OPTION='SIEF_ELGA_DEPL',
                 CARA_ELEM=CARA,
                CHAM_MATER=CHMAT
                           )

#
#----------------------------------------------------
# CONSTITUTION ET ASSEMBLAGE DE LA MATRICE DE RAIDEUR
# POUTRE ROTULEE - ROTULEE SOUS PRE-CONTRAINTE
#----------------------------------------------------
#

MELRG=CALC_MATR_ELEM( 
                   MODELE=MODELE,
                SIEF_ELGA=CONTR,
                CARA_ELEM=CARA,
                   OPTION='RIGI_GEOM'
                           )

#

MATRG=ASSE_MATRICE( 
                MATR_ELEM=MELRG,
                 NUME_DDL=NUM
                         )

#

MATRC=COMB_MATR_ASSE( COMB_R=(
                _F( 
                MATR_ASSE = MATR,
                COEF_R = 1.),
                _F( 
                MATR_ASSE = MATRG,
                COEF_R = 1.))
                           )

#
#---------------------------------------------
# RESOLUTION DU PROBLEME MODAL
# POUTRE ROTULEE - ROTULEE SOUS PRE-CONTRAINTE
#---------------------------------------------
#

MODES=MODE_ITER_SIMULT( 
                   MATR_A=MATRC,
                   MATR_B=MATM,
                CALC_FREQ=_F( 
                OPTION = 'PLUS_PETITE',
                NMAX_FREQ = 2)
                             )

#
#---------------------------------------------
# PRISE EN COMPTE DU COUPLAGE FLUIDE-STRUCTURE
#---------------------------------------------
#
#------------------------------------
# PROFIL DE MASSE VOLUMIQUE DU FLUIDE
#------------------------------------
#

RHOFLUI=DEFI_FONCTION( 
                NOM_PARA='Y',
                    VALE=(0., 1.E+3, 1., 1.E+3,)
                          )

#
#------------------------------------------
# PROFIL DE VISCOSITE CINEMATIQUE DU FLUIDE
#------------------------------------------
#

VISC=DEFI_FONCTION( 
                NOM_PARA='Y',
                    VALE=(0., 1.1E-6, 1., 1.1E-6,)
                          )

#
#--------------------------------------------------------------
# DEFINITION DE LA CONFIGURATION DE COUPLAGE FLUIDE - STRUCTURE
#--------------------------------------------------------------
#

TYPEFLU=DEFI_FLUI_STRU( 
                FAISCEAU_AXIAL=_F( 
                GROUP_MA = 'MA_TU001',
                VECT_X = (0., 1., 0.,),
                PROF_RHO_FLUI = RHOFLUI,
                PROF_VISC_CINE = VISC,
                CARA_ELEM = CARA,
                PESANTEUR = (10., 0., -1., 0.,),
                RUGO_TUBE = 1.E-5,
                CARA_PAROI = ('YC', 'ZC', 'R', ),
                VALE_PAROI = (0.0, 0.0, 0.025,))
                           )

#
#------------------------------------------
# RESOLUTION DU COUPLAGE FLUIDE - STRUCTURE
#------------------------------------------
#

MELAS=CALC_FLUI_STRU( 
                VITE_FLUI=_F( 
                VITE_MIN = 0.0,
                VITE_MAX = 8.0,
                NB_POIN = 9),
                BASE_MODALE=_F( 
                MODE_MECA = MODES,
                NUME_ORDRE = (1,  2, ),
                AMOR_UNIF = 0.043),
                TYPE_FLUI_STRU=TYPEFLU,
                    IMPRESSION=_F( 
                PARA_COUPLAGE = 'OUI',
                DEFORMEE = 'NON')
                           )

#
#-------------------------------
# MODIFICATION DE LA BASE MODALE
#-------------------------------
#
MODES=MODI_BASE_MODALE( reuse=MODES,
                          BASE=MODES,
                BASE_ELAS_FLUI=MELAS,
                NUME_VITE_FLUI=5
                             )

#
#-----------------------------
# TEST DES RESULTATS DU MODE 1
#-----------------------------
#

FREQ_1=RECU_FONCTION( 
                BASE_ELAS_FLUI=MELAS,
                        PARA_X='VITE_FLU',
                        PARA_Y='FREQ',
                    TOUT_ORDRE='OUI',
                     NUME_MODE=1
                          )

#

TEST_FONCTION(
                   VALEUR=_F( 
                   FONCTION = FREQ_1,
                   VALE_PARA = 0.000000E+00,
                   VALE_REFE = 5.1E+00,
                   PRECISION = 1.E-03,
                   REFERENCE = 'SOURCE_EXTERNE')
               )

#

TEST_FONCTION(
                   VALEUR=_F( 
                   FONCTION = FREQ_1,
                   VALE_PARA = 4.000000E+00,
                   VALE_REFE = 4.842109E+00,
                   PRECISION = 1.E-07,
                   REFERENCE = 'NON_REGRESSION',
                   VERSION = '5.02.26')
               )

#

AMOR_1=RECU_FONCTION( 
                BASE_ELAS_FLUI=MELAS,
                        PARA_X='VITE_FLU',
                        PARA_Y='AMOR',
                    TOUT_ORDRE='OUI',
                     NUME_MODE=1
                          )

#

TEST_FONCTION(
                   VALEUR=_F( 
                   FONCTION = AMOR_1,
                   VALE_PARA = 4.000000E+00,
                   VALE_REFE = 21.1E-02,
                   PRECISION = 4.E-02,
                   REFERENCE = 'SOURCE_EXTERNE')
               )

#

TEST_FONCTION(
                   VALEUR=_F( 
                   FONCTION = AMOR_1,
                   VALE_PARA = 4.000000E+00,
                   VALE_REFE = 2.193572E-01,
                   PRECISION = 1.E-07,
                   REFERENCE = 'NON_REGRESSION',
                   VERSION = '5.02.26')
               )

#
#-----------------------------
# TEST DES RESULTATS DU MODE 2
#-----------------------------
#

FREQ_2=RECU_FONCTION( 
                BASE_ELAS_FLUI=MELAS,
                        PARA_X='VITE_FLU',
                        PARA_Y='FREQ',
                    TOUT_ORDRE='OUI',
                     NUME_MODE=2
                          )

#

TEST_FONCTION(
                   VALEUR=_F( 
                   FONCTION = FREQ_2,
                   VALE_PARA = 0.000000E+00,
                   VALE_REFE = 5.1E+00,
                   PRECISION = 1.E-03,
                   REFERENCE = 'SOURCE_EXTERNE')
               )

#

TEST_FONCTION(
                   VALEUR=_F( 
                   FONCTION = FREQ_2,
                   VALE_PARA = 4.000000E+00,
                   VALE_REFE = 4.842109E+00,
                   PRECISION = 1.E-07,
                   REFERENCE = 'NON_REGRESSION',
                   VERSION = '5.02.26')
               )

#

AMOR_2=RECU_FONCTION( 
                BASE_ELAS_FLUI=MELAS,
                        PARA_X='VITE_FLU',
                        PARA_Y='AMOR',
                    TOUT_ORDRE='OUI',
                     NUME_MODE=2
                          )

#

TEST_FONCTION(
                   VALEUR=_F( 
                   FONCTION = AMOR_2,
                   VALE_PARA = 4.000000E+00,
                   VALE_REFE = 21.1E-02,
                   PRECISION = 4.E-02,
                   REFERENCE = 'SOURCE_EXTERNE')
               )

#

TEST_FONCTION(
                   VALEUR=_F( 
                   FONCTION = AMOR_2,
                   VALE_PARA = 4.000000E+00,
                   VALE_REFE = 2.193572E-01,
                   PRECISION = 1.E-07,
                   REFERENCE = 'NON_REGRESSION',
                   VERSION = '5.02.26')
               )

#

FIN()
#
