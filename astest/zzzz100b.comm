# MODIF  DATE 01/07/2008   AUTEUR CORUS M.CORUS 
# RESPONSABLE MCOURTOI M.COURTOIS
# TITRE VALIDATION DE L'OPTION ASSE DE CALC_FONCTION
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# ET VALIDATION DE L'OPTION FFT DE CALC_FONCTION
#
#===================================================
#

DEBUT(CODE=_F(NOM='ZZZZ100B', NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'))

#

DFC1=DEFI_FONCTION(    NOM_PARA='X',   NOM_RESU='Y',
                            VALE=(0., 10., 4., 14., 6., 16.,),
                            PROL_DROITE='LINEAIRE',
                            PROL_GAUCHE='LINEAIRE'
                         )

#

DFC2=DEFI_FONCTION(    NOM_PARA='X',   NOM_RESU='Y',
                            VALE=(5., 25., 7., 27., 8., 28.,),
                            PROL_DROITE='LINEAIRE',
                            PROL_GAUCHE='LINEAIRE'
                         )

#

DFC3=CALC_FONCTION(    ASSE=_F(
                          FONCTION = ( DFC2,  DFC1, ),
                          SURCHARGE = 'DROITE')
                         )

DFC4=CALC_FONCTION(    ASSE=_F(
                          FONCTION = ( DFC1,  DFC2, ),
                          SURCHARGE = 'GAUCHE')
                         )

#

TEST_FONCTION(VALEUR=(
                  _F(  FONCTION = DFC3,  VALE_PARA = 4.,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = 14.),
                  _F(  FONCTION = DFC3,  VALE_PARA = 5.,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = 25.),
                  _F(  FONCTION = DFC4,  VALE_PARA = 4.,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = 14.),
                  _F(  FONCTION = DFC4,  VALE_PARA = 6.,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = 16.))
                 )

# VALIDATION DE LA TRANSFORMEE DE FOURIER

INCLUDE(UNITE=11,   INFO=1)

INST1=0.015

INST2=0.130

INST3=0.402

INST4=0.555

# Valeurs d'origine :

X1=-1.9510565E+00

X2=-5.8778525E-01

X3=1.585812E+00

X4=-1.5877853E+00

Y1=-1.7231939E+00

Y2=1.0236723E+00

Y3=4.3323627E+00

Y4=-4.7069934E-01


# Valeurs pour METHODE='TRONCATURE' (Matlab)

FREQ01=50.781250000000000

FREQ02=119.14062500000000

FFX_F01=-179.77969072149318-60.581474521186365j,

FFX_F02=178.04198158359952-34.905285382928582j,

FFY_F01=-192.28291992222427-0.70680928109730168j,

FFY_F02=176.70357402292183-62.581674587393074j,



# Valeurs pour METHODE='PROL_ZERO' (Matlab)

FREQ1=50.781250000000000

FREQ2=119.14062500000000

FFX_F1=-197.17543566615197-19.420085366319597j,

FFX_F2=183.87469337563820+9.0331844378715704j,

FFY_F1=-220.45578226128313+47.644123250829907j,

FFY_F2=165.48101727481216-21.326794555952887j,


# Valeurs pour METHODE='COMPLET' (Matlab)

FREQ11=49.916805324459233

FREQ12=119.80033277870216

FFX_F11=46.773788670759131-295.81845952473248j,

FFX_F12=107.56095648453922-272.16663185073367j,

FFY_F11=-5.3909464299143508-312.17287961881800j,

FFY_F12=103.55711676347113-268.47490307166413j,



#

XFF0=CALC_FONCTION( FFT=_F( FONCTION = X, METHODE='TRONCATURE',) )

YFF0=CALC_FONCTION( FFT=_F( FONCTION = Y, METHODE='TRONCATURE',) )

FFXFF0=CALC_FONCTION( FFT=_F( FONCTION = XFF0, METHODE='TRONCATURE',) )

FFYFF0=CALC_FONCTION( FFT=_F( FONCTION = YFF0, METHODE='TRONCATURE',) )

PRECIS = 0.00001

TEST_FONCTION(VALEUR=(
    _F(  FONCTION = XFF0,   VALE_PARA = FREQ01,
                    REFERENCE = 'SOURCE_EXTERNE',
                    VALE_REFE_C = FFX_F01,
                    PRECISION = PRECIS ),
    _F(  FONCTION = XFF0,   VALE_PARA = FREQ02,
                    REFERENCE = 'SOURCE_EXTERNE',
                    VALE_REFE_C = FFX_F02,
                    PRECISION = PRECIS ),
    _F(  FONCTION = YFF0,   VALE_PARA = FREQ01,
                    REFERENCE = 'SOURCE_EXTERNE',
                    VALE_REFE_C = FFY_F01,
                    PRECISION = PRECIS ),
    _F(  FONCTION = YFF0,   VALE_PARA = FREQ02,
                    REFERENCE = 'SOURCE_EXTERNE',
                    VALE_REFE_C = FFY_F02,
                    PRECISION = PRECIS ) , ) ,
               )

TEST_FONCTION(VALEUR=(
    _F(  FONCTION = FFXFF0,    VALE_PARA = INST1,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = X1,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFXFF0,   VALE_PARA = INST2,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = X2,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFXFF0,   VALE_PARA = INST3,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = X3,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFYFF0,   VALE_PARA = INST1,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = Y1,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFYFF0,   VALE_PARA = INST2,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = Y2,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFYFF0,   VALE_PARA = INST3,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = Y3,
                    PRECISION = PRECIS ) , ) ,
               )


XFF=CALC_FONCTION( FFT=_F( FONCTION = X, METHODE='PROL_ZERO',) )

YFF=CALC_FONCTION( FFT=_F( FONCTION = Y, METHODE='PROL_ZERO',) )

FFXFF=CALC_FONCTION( FFT=_F( FONCTION = XFF, METHODE='PROL_ZERO',) )

FFYFF=CALC_FONCTION( FFT=_F( FONCTION = YFF, METHODE='PROL_ZERO',) )

TEST_FONCTION(VALEUR=(
    _F(  FONCTION = XFF,   VALE_PARA = FREQ1,
                    REFERENCE = 'SOURCE_EXTERNE',
                    VALE_REFE_C = FFX_F1,
                    PRECISION = PRECIS ),
    _F(  FONCTION = XFF,   VALE_PARA = FREQ2,
                    REFERENCE = 'SOURCE_EXTERNE',
                    VALE_REFE_C = FFX_F2,
                    PRECISION = PRECIS ),
    _F(  FONCTION = YFF,   VALE_PARA = FREQ1,
                    REFERENCE = 'SOURCE_EXTERNE',
                    VALE_REFE_C = FFY_F1,
                    PRECISION = PRECIS ),
    _F(  FONCTION = YFF,   VALE_PARA = FREQ2,
                    REFERENCE = 'SOURCE_EXTERNE',
                    VALE_REFE_C = FFY_F2,
                    PRECISION = PRECIS ) , ) ,
               )

TEST_FONCTION(VALEUR=(
    _F(  FONCTION = FFXFF,    VALE_PARA = INST1,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = X1,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFXFF,   VALE_PARA = INST2,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = X2,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFXFF,   VALE_PARA = INST3,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = X3,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFXFF,   VALE_PARA = INST4,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = X4,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFYFF,   VALE_PARA = INST1,
                    REFERENCE = 'ANALYTIQUE',
                     VALE_REFE = Y1,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFYFF,   VALE_PARA = INST2,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = Y2,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFYFF,   VALE_PARA = INST3,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = Y3,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFYFF,   VALE_PARA = INST4,
                    REFERENCE = 'ANALYTIQUE',
                     VALE_REFE = Y4,
                    PRECISION = PRECIS ) , )  ,
               )


XFF1=CALC_FONCTION( FFT=_F( FONCTION = X, METHODE='COMPLET',) )

YFF1=CALC_FONCTION( FFT=_F( FONCTION = Y, METHODE='COMPLET',) )

FFXFF1=CALC_FONCTION( FFT=_F( FONCTION = XFF1, METHODE='COMPLET',) )

FFYFF1=CALC_FONCTION( FFT=_F( FONCTION = YFF1, METHODE='COMPLET',) )

TEST_FONCTION(VALEUR=(
    _F(  FONCTION = XFF1,   VALE_PARA = FREQ11,
                    REFERENCE = 'SOURCE_EXTERNE',
                    VALE_REFE_C = FFX_F11,
                    PRECISION = PRECIS ),
    _F(  FONCTION = XFF1,   VALE_PARA = FREQ12,
                    REFERENCE = 'SOURCE_EXTERNE',
                    VALE_REFE_C = FFX_F12,
                    PRECISION = PRECIS ),
    _F(  FONCTION = YFF1,   VALE_PARA = FREQ11,
                    REFERENCE = 'SOURCE_EXTERNE',
                    VALE_REFE_C = FFY_F11,
                    PRECISION = PRECIS ),
    _F(  FONCTION = YFF1,   VALE_PARA = FREQ12,
                    REFERENCE = 'SOURCE_EXTERNE',
                    VALE_REFE_C = FFY_F12,
                    PRECISION = PRECIS ) , ) ,
               )

TEST_FONCTION(VALEUR=(
    _F(  FONCTION = FFXFF1,    VALE_PARA = INST1,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = X1,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFXFF1,   VALE_PARA = INST2,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = X2,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFXFF1,   VALE_PARA = INST3,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = X3,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFXFF1,   VALE_PARA = INST4,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = X4,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFYFF1,   VALE_PARA = INST1,
                    REFERENCE = 'ANALYTIQUE',
                     VALE_REFE = Y1,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFYFF1,   VALE_PARA = INST2,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = Y2,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFYFF1,   VALE_PARA = INST3,
                    REFERENCE = 'ANALYTIQUE',
                    VALE_REFE = Y3,
                    PRECISION = PRECIS ),
    _F(  FONCTION = FFYFF1,   VALE_PARA = INST4,
                    REFERENCE = 'ANALYTIQUE',
                     VALE_REFE = Y4,
                    PRECISION = PRECIS ) , )  ,
               )
#
FIN()
#
