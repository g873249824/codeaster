# MODIF  DATE 05/02/2008   AUTEUR FLEJOU J-L.FLEJOU 
# TITRE POUTRE DROITE APPUYEE EN SES DEUX EXTREMITES SOUMISE A UN
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2008  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# CHARGEMENT REPARTI LINEAIRE. (INTRODUIT EN 4.2.14)
# CALCUL DE LA FLECHE, DE L'EFFORT TRANCHANT, DU MOMENT DE FLEXION ET
# DE LA CONTRAINTE MAXIMALE ASSOCIEE.
# MODELISATION POU_D_EM
#======================================================================
#
DEBUT(CODE=_F(NOM='SSLL102K', NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'))

#
MA=LIRE_MAILLAGE(  )

MA=DEFI_GROUP( reuse=MA,   MAILLAGE=MA,
  CREA_GROUP_MA=_F(  NOM = 'TOUT', TOUT = 'OUI'))

PRE_GMSH(UNITE_GMSH=18,
         UNITE_MAILLAGE=21,);

MASEC=LIRE_MAILLAGE(UNITE=21,);
#
MASEC=DEFI_GROUP( reuse=MASEC,   MAILLAGE=MASEC,
  CREA_GROUP_MA=_F(  NOM = 'SURF1', TOUT = 'OUI'))

MO=AFFE_MODELE(    MAILLAGE=MA,
                        AFFE=_F( TOUT = 'OUI',
                              PHENOMENE = 'MECANIQUE',
                              MODELISATION = 'POU_D_EM')
                 )
GF=DEFI_GEOM_FIBRE(
           SECTION = _F ( GROUP_FIBRE='SEC1',
                            MAILLAGE_SECT = MASEC , GROUP_MA_SECT = 'SURF1',
                            COOR_AXE_POUTRE = (0., 0.,)),
            )

#
MATR=DEFI_MATERIAU(    ELAS=_F( E = 2.E11,
                               NU = 0.3)
                     )
COMPF=DEFI_COMPOR(GEOM_FIBRE=GF,MATER_SECT=MATR,
                  MULTIFIBRE=(_F(GROUP_FIBRE='SEC1',MATER=MATR),))

#
CHMAT=AFFE_MATERIAU(MAILLAGE=MA,
                    AFFE=_F(TOUT='OUI',MATER=MATR,),
                    AFFE_COMPOR=_F(GROUP_MA = 'TOUT',COMPOR=COMPF));

#
CAREL=AFFE_CARA_ELEM(    MODELE=MO,
                     POUTRE=_F(GROUP_MA = 'TOUT',
                                    SECTION = 'GENERALE',
                                    CARA = ('A',  'IY',
                                               'IZ', 'JX',
                                               'RY', 'RZ',  'RT',
                                               'JG', 'AY', 'AZ',
                                              ),
                                    VALE = ( 3.14159E-2, 7.85398E-5,
                                                7.85398E-5, 1.57080E-4,
                                                0.100,   0.100,   0.100,
                                                10., 0., 0.,),),
                           GEOM_FIBRE=GF,
                          MULTIFIBRE=_F(GROUP_MA='TOUT',
                                  GROUP_FIBRE='SEC1'),
                        )

#
F1=DEFI_FONCTION(    NOM_PARA='X',
                           VALE=(0.,  0.,
                                 6.,  6000.,
                                ),
                       INTERPOL='LIN'
                   )

#
CHARG1=AFFE_CHAR_MECA(      MODELE=MO,DDL_IMPO=(
                            _F( NOEUD = 'N1',
                                      DX = 0.,
                                      DY = 0.,
                                      DZ = 0.,
                                      DRX = 0.,
                                      DRY = 0.),
                            _F( NOEUD = 'N11',
                                      DY = 0.))
                        )

#
CHARG2=AFFE_CHAR_MECA_F(          MODELE=MO,
                              FORCE_POUTRE=_F(
       GROUP_MA = 'TOUT',

                                            FY = F1)
                          )

#
MEST1=MECA_STATIQUE(        MODELE=MO,
                         SOLVEUR=_F( STOP_SINGULIER = 'OUI'),
                          CHAM_MATER=CHMAT,
                           CARA_ELEM=CAREL,EXCIT=(
                               _F( CHARGE = CHARG1),
                                     _F( CHARGE = CHARG2))
                      )

#
MEST1=CALC_ELEM( reuse=MEST1,
                         RESULTAT=MEST1,EXCIT=(
                            _F( CHARGE = CHARG1),
                                  _F( CHARGE = CHARG2)),
                           OPTION=('EFGE_ELNO_DEPL',
                                  # 'SIGM_ELNO_DEPL'
                                   )
                   )

#
TEST_RESU(   RESU=_F( RESULTAT = MEST1,
                    NOM_CHAM = 'DEPL',
                    NUME_ORDRE = 1,
                    NOEUD = 'N7',
                    NOM_CMP = 'DY',
                    VALE = 0.003228713,
                    PRECISION = 0.006,
                    CRITERE = 'RELATIF')
          )

#
TEST_RESU(   RESU=_F( RESULTAT = MEST1,
                    NOM_CHAM = 'EFGE_ELNO_DEPL',
                    NUME_ORDRE = 1,
                    NOM_CMP = 'VY',
                    MAILLE = 'S11',
                    NOEUD = 'N1',
                    VALE = 6000.,
                    PRECISION = 1.E-6,
                    CRITERE = 'RELATIF')
          )

#
TEST_RESU(   RESU=_F( RESULTAT = MEST1,
                    NOM_CHAM = 'EFGE_ELNO_DEPL',
                    NUME_ORDRE = 1,
                    NOM_CMP = 'VY',
                    MAILLE = 'S110',
                    NOEUD = 'N11',
                    VALE = -12000.,
                    PRECISION = 1.E-6,
                    CRITERE = 'RELATIF')
          )

#
TEST_RESU(   RESU=_F( RESULTAT = MEST1,
                    NOM_CHAM = 'EFGE_ELNO_DEPL',
                    NUME_ORDRE = 1,
                    NOM_CMP = 'MFZ',
                    MAILLE = 'S17',
                    NOEUD = 'N8',
                    VALE = -13856.41,
                    PRECISION = 1.E-6,
                    CRITERE = 'RELATIF')
          )

#
FIN()

