# ======================================================================
# COPYRIGHT (C) 1991 - 2016  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================

DEBUT(CODE=_F(NIV_PUB_WEB='INTERNET'),
      DEBUG=_F(SDVERI='OUI'),);

################
### MAILLAGE ###
################

MA=LIRE_MAILLAGE(FORMAT = 'MED',);
                       
MA=MODI_MAILLAGE(reuse =MA,
                 MAILLAGE=MA,
                 ORIE_PEAU_2D=(_F(GROUP_MA='SCO1',),
                               _F(GROUP_MA='SCO2',),),);

##############
### MODELE ###
##############

MO=AFFE_MODELE(MAILLAGE=MA,
               AFFE=_F(TOUT='OUI',
                       PHENOMENE='MECANIQUE',
                       MODELISATION='D_PLAN',),);
#################
### MATERIAUX ###
#################

BASUP=DEFI_MATERIAU(ELAS=_F(E=1.0E5,
                             NU=0.3,
                             RHO=2.7E-5,),                             
                    ECRO_LINE=_F(D_SIGM_EPSI=9.0E4,
                                 SY=10.E100,),);

BAINF=DEFI_MATERIAU(ELAS=_F(E=1.0E3,
                             NU=0.3,
                             RHO=2.7E-5,),                             
                    ECRO_LINE=_F(D_SIGM_EPSI=9.0E2,
                                 SY=10.E100,),);

BLOCK=DEFI_MATERIAU(ELAS=_F(E=3.0E2,
                             NU=0.3,
                             RHO=2.7E-5,),                             
                    ECRO_LINE=_F(D_SIGM_EPSI=10.0,
                                 SY=10.E100,),);

CHMAT=AFFE_MATERIAU(MAILLAGE=MA,
                      MODELE=MO,
                      AFFE=(_F(GROUP_MA='BASUP',
                               MATER=BASUP,),
                            _F(GROUP_MA='BAINF',
                               MATER=BAINF,),
                            _F(GROUP_MA='BLOC',
                               MATER=BLOCK,),),);

########################
### CHARGEMENT ET CL ###
########################

CHA1=AFFE_CHAR_MECA(MODELE=MO,
                    DDL_IMPO=(_F(GROUP_MA='SU1',
                                 DX=0.0,
                                 DY=0.0,),
                              _F(GROUP_MA='DEPL',
                                 DX=0.0,
                                 DY=-90.0,),),);

RAMPE=DEFI_FONCTION(NOM_PARA='INST',
                    VALE=(0.0,0.0,
                          1.0,1.0,),
                          PROL_DROITE='LINEAIRE',
                          PROL_GAUCHE='LINEAIRE',);

###############
### CONTACT ###
###############
           
NGENE=DEFI_CONTACT(MODELE=MO,
                   FORMULATION='CONTINUE',
                   FROTTEMENT='COULOMB',                  
                   LISSAGE ='OUI',
                   RESI_GEOM = 1.0E-3,                            
                   ZONE=_F(GROUP_MA_MAIT='SCO2',
                           GROUP_MA_ESCL='SCO1',
                           SANS_GROUP_NO='SANS',
                           ALGO_CONT='STANDARD',
                           COEF_CONT = 1.0e2,
                           COULOMB=0.5,),);

######################
### LISTE INSTANTS ###
######################

L_INST=DEFI_LIST_REEL(DEBUT=0.,
                      INTERVALLE=(_F(JUSQU_A=1.,
                                     NOMBRE=20,),),);

LINST=DEFI_LIST_INST(DEFI_LIST=_F(METHODE='MANUEL',
                                  LIST_INST=L_INST,),
                     ECHEC=_F(SUBD_PAS=5,
                              SUBD_NIVEAU=5,),);

##################
### RESOLUTION ###
##################

RESU=DYNA_NON_LINE(MODELE=MO,
                   CHAM_MATER=CHMAT,
                   EXCIT=_F(CHARGE=CHA1,
                            FONC_MULT=RAMPE,),
                   CONTACT=NGENE,
                   COMPORTEMENT=_F(RELATION='VMIS_ISOT_LINE',
                                   DEFORMATION='GDEF_LOG',),
                   INCREMENT=_F(LIST_INST=LINST,),
                   SCHEMA_TEMPS=_F(SCHEMA='HHT',
                                   FORMULATION='DEPLACEMENT',),
                   NEWTON=_F(PREDICTION='TANGENTE',
                             MATRICE='TANGENTE',
                             REAC_ITER=1,),
                   ARCHIVAGE=_F(LIST_INST=L_INST,),);

#######################
### POST-TRAITEMENT ###
#######################

RESU=CALC_CHAMP(reuse=RESU,
                RESULTAT=RESU,
                FORCE=('FORC_NODA','REAC_NODA'),
                CRITERES='SIEQ_NOEU');

IMPR_RESU(UNITE=80,
          FORMAT='MED',
          RESU=_F(RESULTAT=RESU,),);

##################
### VALIDATION ###
##################

TEST_RESU(RESU=(_F(RESULTAT=RESU,
                   INST=0.40,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='PA',
                   CRITERE='ABSOLU',
                   VALE_CALC=0.,),
                _F(RESULTAT=RESU,
                   INST=0.60,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='PA',
                   CRITERE='ABSOLU',
                   VALE_CALC=0.,),
                _F(RESULTAT=RESU,
                   INST=0.80,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='PA',
                   CRITERE='ABSOLU',
                   VALE_CALC=0.,),
                _F(RESULTAT=RESU,
                   INST=0.90,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='PA',
                   CRITERE='ABSOLU',
                   VALE_CALC=0.,),
                _F(RESULTAT=RESU,
                   INST=1.00,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='PA',
                   CRITERE='ABSOLU',
                   VALE_CALC=0.,),
                _F(RESULTAT=RESU,
                   INST=0.40,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='PA',
                   VALE_CALC=-4.3809772972517,),
                _F(RESULTAT=RESU,
                   INST=0.60,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='PA',
                   VALE_CALC=-2.9420908891198,),
                _F(RESULTAT=RESU,
                   INST=0.80,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='PA',
                   VALE_CALC=0.69837499319851,),
                _F(RESULTAT=RESU,
                   INST=0.90,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='PA',
                   VALE_CALC=1.5492031093916,),
                _F(RESULTAT=RESU,
                   INST=1.00,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='PA',
                   VALE_CALC=2.4075186799949,),
                _F(RESULTAT=RESU,
                   INST=0.40,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_C',
                   GROUP_NO='PA',
                   VALE_CALC=-35.071106223695,),
                _F(RESULTAT=RESU,
                   INST=0.60,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_C',
                   GROUP_NO='PA',
                   VALE_CALC=-17.25682114939,),
                _F(RESULTAT=RESU,
                   INST=0.80,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_C',
                   GROUP_NO='PA',
                   VALE_CALC=0.,),
                _F(RESULTAT=RESU,
                   INST=0.90,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_C',
                   GROUP_NO='PA',
                   VALE_CALC=0.,),
                _F(RESULTAT=RESU,
                   INST=1.00,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_C',
                   GROUP_NO='PA',
                   VALE_CALC=0.,),
                _F(RESULTAT=RESU,
                   INST=0.40,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_F1',
                   GROUP_NO='PA',
                   CRITERE='ABSOLU',
                   VALE_CALC=0.,),
                _F(RESULTAT=RESU,
                   INST=0.60,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_F1',
                   CRITERE='ABSOLU',
                   GROUP_NO='PA',
                   VALE_CALC=0.,),
                _F(RESULTAT=RESU,
                   INST=0.80,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_F1',
                   GROUP_NO='PA',
                   VALE_CALC=0.,),
                _F(RESULTAT=RESU,
                   INST=0.90,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_F1',
                   GROUP_NO='PA',
                   VALE_CALC=0.,),
                _F(RESULTAT=RESU,
                   INST=1.00,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_F1',
                   GROUP_NO='PA',
                   VALE_CALC=0.,),
                _F(RESULTAT=RESU,
                   INST=0.40,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='PB',
                   CRITERE='ABSOLU',
                   VALE_CALC=-0.081925461104582,),
                _F(RESULTAT=RESU,
                   INST=0.60,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='PB',
                   CRITERE='ABSOLU',
                   VALE_CALC=-2.0771543692333,),
                _F(RESULTAT=RESU,
                   INST=0.80,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='PB',
                   CRITERE='ABSOLU',
                   VALE_CALC=-5.9787790941388,),
                _F(RESULTAT=RESU,
                   INST=0.90,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='PB',
                   CRITERE='ABSOLU',
                   VALE_CALC=-9.7188669388189,),
                _F(RESULTAT=RESU,
                   INST=1.00,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='PB',
                   CRITERE='ABSOLU',
                   VALE_CALC=-12.599738390013,),
                _F(RESULTAT=RESU,
                   INST=0.40,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='PB',
                   VALE_CALC=-0.019226063806977,),
                _F(RESULTAT=RESU,
                   INST=0.60,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='PB',
                   VALE_CALC=-5.4677709308499,),
                _F(RESULTAT=RESU,
                   INST=0.80,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='PB',
                   VALE_CALC=-11.444109861504,),
                _F(RESULTAT=RESU,
                   INST=0.90,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='PB',
                   VALE_CALC=-11.504219110788,),
                _F(RESULTAT=RESU,
                   INST=1.00,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='PB',
                   VALE_CALC=-10.421826930981,),
                _F(RESULTAT=RESU,
                   INST=0.40,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_C',
                   GROUP_NO='PB',
                   VALE_CALC=0.,),
                _F(RESULTAT=RESU,
                   INST=0.60,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_C',
                   GROUP_NO='PB',
                   VALE_CALC=-67.318243176695,),
                _F(RESULTAT=RESU,
                   INST=0.80,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_C',
                   GROUP_NO='PB',
                   VALE_CALC=-150.31622937147,),
                _F(RESULTAT=RESU,
                   INST=0.90,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_C',
                   GROUP_NO='PB',
                   VALE_CALC=-165.64910646362,),
                _F(RESULTAT=RESU,
                   INST=1.00,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_C',
                   GROUP_NO='PB',
                   VALE_CALC=-122.88188714403,),
                _F(RESULTAT=RESU,
                   INST=0.40,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_F1',
                   GROUP_NO='PB',
                   VALE_CALC=0.,),
                _F(RESULTAT=RESU,
                   INST=0.60,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_F1',
                   GROUP_NO='PB',
                   VALE_CALC=0.30110690370712,),
                _F(RESULTAT=RESU,
                   INST=0.80,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_F1',
                   GROUP_NO='PB',
                   VALE_CALC=0.52433473587762,),
                _F(RESULTAT=RESU,
                   INST=0.90,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_F1',
                   GROUP_NO='PB',
                   VALE_CALC=0.95382514895392,),
                _F(RESULTAT=RESU,
                   INST=1.00,
                   NOM_CHAM='DEPL',
                   NOM_CMP='LAGS_F1',
                   GROUP_NO='PB',
                   VALE_CALC=1.0,),),);

FIN();
