# MODIF  DATE 20/03/2001   AUTEUR CIBHHLV L.VIVAN 
# TITRE ECHANGE_PAROI EN THERMIQUE NON LINEAIRE TRANSITOIRE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
#

DEBUT(  CODE=_F(  NOM = 'TTLP100B',NIV_PUB_WEB='INTERNET') )

#

MAIL=LIRE_MAILLAGE( )

MAIL=DEFI_GROUP( reuse=MAIL,
                       MAILLAGE=MAIL,CREA_GROUP_NO=(
                       _F(  GROUP_MA = 'BORDG'),
                       _F(  GROUP_MA = 'BORDD'))
                    )

#

LONTOT=DEFI_VALEUR(   R8=0.990 )

# SOMME DES LONG. DES 2 PLAQUES

LONMAX=DEFI_VALEUR(   R8=1.000 )

# ABSCISSE MAXIMALE
#
# =====================================================================
#      DEFINITION DU MODELE, DU CHAMP DE MATERIAU ET DU CHARGEMENT
# =====================================================================
#
# MODELE
# ------
#

MODTHER=AFFE_MODELE( 
                           MAILLAGE=MAIL,
                           AFFE=_F(  TOUT = 'OUI',
                                  PHENOMENE = 'THERMIQUE',
                                  MODELISATION = 'PLAN')
                        )

#
# CHAMP DE MATERIAU
# -----------------
#

CONDUC=DEFI_VALEUR(   R8=40.    )

ENTHALP=DEFI_VALEUR(   R8=220.E-3 )

#

COND=DEFI_FONCTION( 
                           NOM_PARA='TEMP',
                           VALE=(   0.,   CONDUC,
                                  300.,   CONDUC,   ),
                           PROL_GAUCHE='LINEAIRE',
                            PROL_DROITE='LINEAIRE'
                         )

ENTH=DEFI_FONCTION( 
                             NOM_PARA='TEMP',
                             VALE=(   0.,    0.0,
                                    300.,  220.0E-3, ),
                             PROL_GAUCHE='LINEAIRE',
                              PROL_DROITE='LINEAIRE'
                            )

MATNL=DEFI_MATERIAU( 
                           THER_NL=_F(  LAMBDA = COND,
                                     BETA = ENTH)
                        )

CHMATNL=AFFE_MATERIAU( 
                             MAILLAGE=MAIL,
                             AFFE=_F(  TOUT = 'OUI',
                                    MATER = MATNL,
                                    TEMP_REF = 20.)
                          )

#
# CHARGEMENT
# ----------
#

TEMPG=DEFI_VALEUR(   R8=100. )

TEMPD=DEFI_VALEUR(   R8=300. )

COEFH=DEFI_VALEUR(   R8=80.  )

#

CHATHER=AFFE_CHAR_THER( 
                              MODELE=MODTHER,TEMP_IMPO=(
                              _F(  GROUP_NO = 'BORDG',
                                          TEMP = TEMPG),
                              _F(  GROUP_NO = 'BORDD',
                                          TEMP = TEMPD)),
                                ECHANGE_PAROI=_F(  GROUP_MA_1 = 'INTERG',
                                                GROUP_MA_2 = 'INTERD',
                                                COEF_H = COEFH)
                           )

#
# =====================================================================
#                            LISTE D'INSTANTS
# =====================================================================
#

LINST=DEFI_LIST_REEL( 
                            DEBUT=0.0,INTERVALLE=(
                            _F(  JUSQU_A = 1.E-9,  NOMBRE = 1),
                            _F(  JUSQU_A = 1.5E-5, NOMBRE = 30))
                         )

#
# =====================================================================
#   CALCUL TRANSITOIRE NON LINEAIRE TENDANT VERS UN ETAT STATIONNAIRE
# =====================================================================
#

TEMPINIT=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R',
MAILLAGE=MAIL,AFFE=(
                             _F(  GROUP_NO = 'RECTG',
                                    NOM_CMP = 'TEMP',
                                    VALE = TEMPG),
                             _F(  GROUP_NO = 'RECTD',
                                    NOM_CMP = 'TEMP',
                                    VALE = TEMPD))
                          )

#

RESUTHER=THER_NON_LINE( 
                              MODELE=MODTHER,
                              CHAM_MATER=CHMATNL,
                              EXCIT=_F(  CHARGE = CHATHER),
                              TEMP_INIT=_F(  CHAM_NO = TEMPINIT),
                              PARM_THETA=0.57,
                              INCREMENT=_F(  LIST_INST = LINST),
                              ARCHIVAGE=_F(  PAS_ARCH = 10)
                           )

#
# =====================================================================
#                VERIFICATION QUE L'ON A BIEN ATTEINT
#                LA SOLUTION ANALYTIQUE STATIONNAIRE
# =====================================================================
#

TSTAT=CREA_CHAMP( OPERATION='EXTR', TYPE_CHAM='NOEU_TEMP_R',
                        RESULTAT=RESUTHER,
                        NOM_CHAM='TEMP',
                        NUME_ORDRE=30
                     )

#

GRAD = FORMULE(REEL="""(REEL:BIDON) =
COEFH*(TEMPD-TEMPG)/(CONDUC+COEFH*LONTOT)""")

GRADT=DEFI_VALEUR(   R8=EVAL("""GRAD(0.)""") )

TINTG = FORMULE(REEL="""(REEL:X) =
TEMPG + GRADT*X """)

TINTD = FORMULE(REEL="""(REEL:X) =
TEMPD - GRADT*(LONMAX-X)""")
#

TEST_RESU(CHAM_NO=(  _F(  CHAM_GD = TSTAT,
                         NOEUD = 'N3',
                         NOM_CMP = 'TEMP',
                         VALE = EVAL("""TINTG(0.25)"""),
                         CRITERE = 'RELATIF',
                         PRECISION = 1.E-6),
                       _F(  CHAM_GD = TSTAT,
                         NOEUD = 'N5',
                         NOM_CMP = 'TEMP',
                         VALE = EVAL("""TINTG(0.495)"""),
                         CRITERE = 'RELATIF',
                         PRECISION = 1.E-6),
                       _F(  CHAM_GD = TSTAT,
                         NOEUD = 'N101',
                         NOM_CMP = 'TEMP',
                         VALE = EVAL("""TINTD(0.505)"""),
                         CRITERE = 'RELATIF',
                         PRECISION = 1.E-6),
                       _F(  CHAM_GD = TSTAT,
                         NOEUD = 'N103',
                         NOM_CMP = 'TEMP',
                         VALE = EVAL("""TINTD(0.75)"""),
                         CRITERE = 'RELATIF',
                         PRECISION = 1.E-6))
            )

#

FIN()
#
