
# MODIF  DATE 06/09/2005   AUTEUR BOYERE E.BOYERE 
# TITRE IMPACT POUTRE AVEC ELEMENTS 3D SUR PLAN RIGIDE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2005  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
# CALCUL EN EXPLICITE

DEBUT(CODE=_F(NOM='SDNV100F',
              NIV_PUB_WEB='INTERNET',),);
#++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
#  CALCUL TEST ELEMENTS DISCRETS DE CONTACT EN DYNAMIQUE
#++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

MAILO=LIRE_MAILLAGE();

MAILL=CREA_MAILLAGE(MAILLAGE=MAILO,
                    CREA_POI1=_F(NOM_GROUP_MA='BASE',
                                 GROUP_MA='SBAS',),);

MAILL=DEFI_GROUP(reuse =MAILL,
                 MAILLAGE=MAILL,
                 CREA_GROUP_NO=_F(GROUP_MA='BARRE',),);

MODE=AFFE_MODELE(MAILLAGE=MAILL,
                 VERIF='MAILLE',
                 AFFE=(_F(GROUP_MA='BARRE',
                          PHENOMENE='MECANIQUE',
                          MODELISATION='3D',),
                       _F(GROUP_MA='BASE',
                          PHENOMENE='MECANIQUE',
                          MODELISATION='DIS_T',),),);

ACIER=DEFI_MATERIAU(ELAS=_F(E=2.E11,
                            NU=0.,
                            RHO=8000.,),);

MATCHO=DEFI_MATERIAU(DIS_CONTACT=_F(RIGI_NOR=1.E10,
                                    JEU=0.,),);

CM=AFFE_MATERIAU(MAILLAGE=MAILL,
                 AFFE=(_F(GROUP_MA='BARRE',
                          MATER=ACIER,),
                       _F(GROUP_MA='BASE',
                          MATER=MATCHO,),),);

CH=AFFE_CHAR_MECA(MODELE=MODE,
                  DDL_IMPO=_F(GROUP_MA='BARRE',
                              DX=0.,
                              DY=0.,),);

CARA=AFFE_CARA_ELEM(MODELE=MODE,
                    DISCRET=_F(GROUP_MA='BASE',
                               REPERE='LOCAL',
                               CARA='K_T_D_N',
                               VALE=(0.,0.,0.,),),
                    ORIENTATION=_F(GROUP_MA='BASE',
                                   CARA='VECT_X_Y',
                                   VALE=(0.,0.,-1.,0.,1.,0.,),),);
# ************* CHAMP DE VITESSE INITIALE ***************

CHAMP1=CREA_CHAMP(TYPE_CHAM='NOEU_DEPL_R',
                  OPERATION='AFFE',
                  MAILLAGE=MAILL,
                  AFFE=_F(
                  GROUP_NO='BARRE',
                  NOM_CMP=('DX','DY','DZ',),
                  VALE=(0.0,0.0,-100.,),),);
# ************* CHAMP DE DEPLACEMENT INITIAL ************

CHAMP2=CREA_CHAMP(TYPE_CHAM='NOEU_DEPL_R',
                  OPERATION='AFFE',
                  MAILLAGE=MAILL,
                  AFFE=_F(
                  GROUP_NO='BARRE',
                  NOM_CMP=('DX','DY','DZ',),
                  VALE=(0.0,0.0,0.002,),),);

RAMPE=DEFI_FONCTION(NOM_PARA='INST',
                    VALE=(0.0,1.0,0.0001,1.0,0.00010001,0.0,),
                    PROL_DROITE='CONSTANT',
                    PROL_GAUCHE='CONSTANT',);
#
DT = 1e-07;

DT2 = 2e-06;


L_INST=DEFI_LIST_REEL(DEBUT=0.,
                      INTERVALLE=_F(JUSQU_A=0.00014,
                                    PAS=DT,),);

L_ARCH=DEFI_LIST_REEL(DEBUT=0.,
                      INTERVALLE=_F(JUSQU_A=0.00014,
                                    PAS=DT2,),);
#

L_RESU=DEFI_LIST_REEL(DEBUT=DT,
                      INTERVALLE=_F(JUSQU_A=0.000138,
                                    PAS=DT,),);
#

L_CONT=DEFI_LIST_REEL(DEBUT=2.E-5,
                      INTERVALLE=_F(JUSQU_A=10.E-5,
                                    PAS=DT,),);
ALF = 0.28;

DEL = 0.55;


U=DYNA_TRAN_EXPLI(MODELE=MODE,
                  CHAM_MATER=CM,
                  CARA_ELEM=CARA,
                  EXCIT=_F(CHARGE=CH,
                           FONC_MULT=RAMPE,),
                  COMP_INCR=_F(RELATION='DIS_CHOC',
                               GROUP_MA='BASE',),
                  COMP_ELAS=_F(RELATION='ELAS',
                               GROUP_MA='BARRE',),
                  ETAT_INIT=_F(DEPL=CHAMP2,
                               VITE=CHAMP1,),
                  INCREMENT=_F(LIST_INST=L_INST,
                               INST_INIT=0.,),
                  NEWMARK=_F(ALPHA=ALF,
                             DELTA=DEL,),
                  NEWTON=_F(MATRICE='TANGENTE',
                            REAC_ITER=1,),
                  CONVERGENCE=_F(ITER_GLOB_MAXI=20,
                                 RESI_INTE_RELA=1.E-8,
                                 ITER_INTE_MAXI=20,),
                  ARCHIVAGE=_F(LIST_INST=L_ARCH,),);

VITECONT=RECU_FONCTION(RESULTAT=U,
                       NOM_CHAM='VITE',
                       NOM_CMP='DZ',
                       NOEUD='N5',
                       TITRE='VITE',);

VC=CALC_FONCTION(COMB=_F(FONCTION=VITECONT,
                         COEF=12500.,),);

MVC=CALC_FONCTION(INTEGRE=_F(FONCTION=VC,),);

DE100=RECU_FONCTION(RESULTAT=U,
                    NOM_CHAM='DEPL',
                    NOM_CMP='DZ',
                    NOEUD='N100',
                    TITRE='DEPL',);

VI100=RECU_FONCTION(RESULTAT=U,
                    NOM_CHAM='VITE',
                    NOM_CMP='DZ',
                    NOEUD='N100',
                    TITRE='VITE',);

DE5=RECU_FONCTION(RESULTAT=U,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DZ',
                  NOEUD='N5',
                  TITRE='DEPL',);

VI5=RECU_FONCTION(RESULTAT=U,
                  NOM_CHAM='VITE',
                  NOM_CMP='DZ',
                  NOEUD='N5',
                  TITRE='VITE',);
#Non Regression

TEST_RESU(RESU=(_F(RESULTAT=U,
                   VALE=0.001,
                   NUME_ORDRE=5,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   NOEUD='N5',
                   PRECISION=0.001,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   NUME_ORDRE=20,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   NOEUD='N100',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   NUME_ORDRE=40,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   NOEUD='N100',
                   VALE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=0.01,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   NUME_ORDRE=60,
                   NOM_CHAM='VITE',
                   NOM_CMP='DZ',
                   NOEUD='N5',
                   VALE=100.0,
                   PRECISION=0.05,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=U,
                   NUME_ORDRE=60,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   NOEUD='N5',
                   VALE=0.002,
                   PRECISION=0.1,
                   REFERENCE='ANALYTIQUE',),),);

FIN();
