# MODIF  DATE 11/03/2008   AUTEUR MAHFOUZ D.MAHFOUZ 
# TITRE ETUDE : ESSAI BIAXIAL DRAINE (MODELISATION D_PLAN)
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2008  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
#               AVEC LE MODELE DE TYPE DRUCKER-PRAGER A ECROUISSAGE
#               NEGATIF LINEAIRE POUR UN CONFINEMENT DE 2 MPA
# ======================================================================
# Dans ce cas de test, on simule un cas avec les deux lois de
# comportement DRUCKER-PRAGER en condition associee et non-associee
# =====================================================================
DEBUT(   CODE=_F( NOM = 'SSND104B',NIV_PUB_WEB='INTERNET')   )

MAILLAGE = LIRE_MAILLAGE( );


MATER3    = DEFI_MATERIAU(                                                                                                   
                    ELAS  = _F( E           =  1.0E9,
                                NU          =  0.3,
                                RHO         =  2764.0,
                                ALPHA       =  0.0,),
                    DRUCK_PRAGER  = _F( ECROUISSAGE = 'PARABOLIQUE',
                                           ALPHA       =    0.328     ,
                                           P_ULTM      =    1.225E-2  ,
                                           SY          =    2.11E6    ,
                                           SY_ULTM     =    1.00E6    ,),);

CHMAT3    = AFFE_MATERIAU(  MAILLAGE = MAILLAGE,
                           AFFE     = _F(  TOUT  = 'OUI',
                                           MATER = MATER3 ));

MODELE   = AFFE_MODELE(    MAILLAGE = MAILLAGE,
                           AFFE     = _F(  TOUT         = 'OUI',
                                           PHENOMENE    = 'MECANIQUE',
                                           MODELISATION = 'D_PLAN'),
                      );

#***********************************************************************
# *** CHARGEMENT MECANIQUE : FORCE DE COMPRESSION + DDL IMPOSES ********
#***********************************************************************
SIGINIT=CREA_CHAMP(TYPE_CHAM='CART_SIEF_R',
                  OPERATION='AFFE',
                  MODELE=MODELE,
                  AFFE=_F(TOUT='OUI',
                          NOM_CMP=('SIXX','SIYY','SIZZ','SIXY',),
                          VALE=(0.0,0.0,0.0,0.0,),),);

CHAR_UM3 = AFFE_CHAR_MECA( MODELE   = MODELE,
                           PRES_REP = _F(  MAILLE = 'M3',
                                           PRES   = 0.0)
                        )

CHAR_UM4 = AFFE_CHAR_MECA( MODELE   = MODELE,
                           PRES_REP = _F(  MAILLE = 'M4',
                                           PRES = 0.0)
                        )

CHAR_UM5 = AFFE_CHAR_MECA( MODELE   = MODELE,
                           PRES_REP = _F(  MAILLE = 'M5',
                                           PRES = 0.0)
                        )
   
DEPL_M2  = AFFE_CHAR_MECA( MODELE   = MODELE,
                           DDL_IMPO = _F(  MAILLE = 'M2',
                                           DY     = 0.)
                        )

DEPL_M5  = AFFE_CHAR_MECA( MODELE   = MODELE,
                           DDL_IMPO = _F(  MAILLE = 'M5',
                                           DX     = 0.)
                         )

DEPL_M4  = AFFE_CHAR_MECA( MODELE   = MODELE,
                           FACE_IMPO= _F(  MAILLE = 'M4',
                                           DY = 1.)
                         ) 

COEF2    = DEFI_FONCTION(  NOM_PARA    = 'INST',
                           PROL_DROITE = 'CONSTANT',
                           PROL_GAUCHE = 'CONSTANT',
                           VALE=( 1.0,  -0.000,
                                  2.0,  -0.008,  
                                  3.0,  -0.016,    )
                        )

TEMPS    = DEFI_LIST_REEL( DEBUT       = 1.,
                           INTERVALLE  = ( 
                                           _F(  JUSQU_A = 3.000, NOMBRE = 400, ),),
                          )
       
U3       = STAT_NON_LINE( 
                          MODELE     = MODELE,
                          CHAM_MATER = CHMAT3,
                          EXCIT      = (
                                        _F( CHARGE        = CHAR_UM3,),
                                        _F( CHARGE        = DEPL_M5, ),
                                        _F( CHARGE        = DEPL_M2, ),
                                        _F( CHARGE        = DEPL_M4,
                                            FONC_MULT     = COEF2,),),
                         COMP_INCR   = _F( RELATION       = 'DRUCK_PRAGER',
                                           RESI_INTE_RELA = 1.E-6,
                                           ITER_INTE_MAXI = 100,),
                         NEWTON      = _F( MATRICE        = 'TANGENTE',
                                           REAC_ITER      = 1,),
                         ETAT_INIT   = _F( SIGM           = SIGINIT,),
                         CONVERGENCE = _F( RESI_GLOB_RELA = 1.E-10,
                                           ITER_GLOB_MAXI = 50),
                         ARCHIVAGE   = _F( ARCH_ETAT_INIT ='OUI',),
                         INCREMENT   = _F( LIST_INST      = TEMPS,)
                        )
       
U3       = CALC_ELEM( reuse      = U3,
                      OPTION     = ('EPSI_ELGA_DEPL','EPSI_ELNO_DEPL','SIEF_ELNO_ELGA','VARI_ELNO_ELGA'),
                      RESULTAT   = U3,
                    );
    
U3       = CALC_NO( reuse    = U3,     
                    RESULTAT = U3,
                    OPTION   = ('SIEF_NOEU_ELGA','VARI_NOEU_ELGA')
                  )
  
TEST_RESU( RESU = (
###########################
# --- CONTRAINTE SIXX --- #
###########################
                _F(   RESULTAT   = U3,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'SIEF_NOEU_ELGA',
                      NOM_CMP    = 'SIXX',
                      INST       = 2.0,
                      PRECISION  = 1.E-3,
                      VALE       = 5.1133158214079E-10),
###########################
# --- CONTRAINTE SIYY --- #
###########################
                 _F(  RESULTAT   = U3,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'SIEF_NOEU_ELGA',
                      NOM_CMP    = 'SIYY',
                      INST       = 1.07000,
                      PRECISION  = 1.E-3,
                      VALE       = -6.1538461538460E+05),
                 _F(  RESULTAT   = U3,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'SIEF_NOEU_ELGA',
                      NOM_CMP    = 'SIYY',
                      INST       = 1.1600,
                      PRECISION  = 1.E-3,
                      VALE       = -1.4065934065934E+06),
                 _F(  RESULTAT   = U3,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'SIEF_NOEU_ELGA',
                      NOM_CMP    = 'SIYY',
                      INST       = 1.3400,
                      PRECISION  = 1.E-3,
                      VALE       = -2.9890109890109E+06),
                 _F(  RESULTAT   = U3,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'SIEF_NOEU_ELGA',
                      NOM_CMP    = 'SIYY',
                      INST       = 1.5300,
                      PRECISION  = 1.E-3,
                      VALE       = -4.6057566374666E+06),
###############################
# --- VARIABLE INTERNE V1 --- #
###############################
                 _F(  RESULTAT   = U3,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'VARI_NOEU_ELGA',
                      NOM_CMP    = 'V1',
                      CRITERE    = 'ABSOLU',
                      INST       = 1.07000,
                      PRECISION  = 1.E-3,
                      VALE       = 0.0000000000000E+00),
                 _F(  RESULTAT   = U3,
                      REFERENCE  = 'NON_REGRESSION', 
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'VARI_NOEU_ELGA',
                      NOM_CMP    = 'V1',
                      INST       = 1.1600,
                      PRECISION  = 1.E-3,
                      VALE       = 0.0000000000000E+00),
                 _F(  RESULTAT   = U3,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'VARI_NOEU_ELGA',
                      NOM_CMP    = 'V1',
                      INST       = 1.3400,
                      PRECISION  = 1.E-3,
                      VALE       = 0.0000000000000E+00),
                 _F(  RESULTAT   = U3,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'VARI_NOEU_ELGA',
                      NOM_CMP    = 'V1',
                      INST       = 1.5300,
                      PRECISION  = 1.E-3,
                      VALE       = 1.0486981491849E-04),
##########################
# --- DEPLACEMENT DY --- #
##########################
                 _F(  RESULTAT   = U3,
                      REFERENCE  = 'ANALYTIQUE',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'DEPL',
                      NOM_CMP    = 'DY',
                      INST       = 1.07000,
                      PRECISION  = 1.E-3,
                      VALE       = -5.5999999999999E-04),
                 _F(  RESULTAT   = U3,
                      REFERENCE  = 'ANALYTIQUE',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'DEPL',
                      NOM_CMP    = 'DY',
                      INST       = 1.1600,
                      PRECISION  = 1.E-3,
                      VALE       = -1.2800000000000E-03),
                 _F(  RESULTAT   = U3,
                      REFERENCE  = 'ANALYTIQUE',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'DEPL',
                      NOM_CMP    = 'DY',
                      INST       = 1.3400,
                      PRECISION  = 1.E-3,
                      VALE       = -2.7199999999999E-03),
                 _F(  RESULTAT   = U3,
                      REFERENCE  = 'ANALYTIQUE',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'DEPL',
                      NOM_CMP    = 'DY',
                      INST       = 1.5300,
                      PRECISION  = 1.E-3,
                      VALE       = -4.2399999999999E-03),      
    ))
#######################################################################

MATER4    = DEFI_MATERIAU(  ELAS      = _F( E           =  1.0E9,
                                     NU          =  0.3,
                                     RHO         =  2764.0,
                                     ALPHA       =  0.0,),
                    DRUCK_PRAGER  = _F( ECROUISSAGE = 'PARABOLIQUE',
                                           ALPHA       =    0.328     ,
                                           DILAT       =    0.328     ,
                                           P_ULTM      =    1.225E-2  ,
                                           SY          =    2.11E6    ,
                                           SY_ULTM     =    1.00E6    ,),);

CHMAT4   = AFFE_MATERIAU(  MAILLAGE = MAILLAGE,
                           AFFE     = _F(  TOUT  = 'OUI',
                                           MATER = MATER4 ));
U4       = STAT_NON_LINE( 
                          MODELE     = MODELE,
                          CHAM_MATER = CHMAT4,
                          EXCIT      = (
                                        _F( CHARGE        = CHAR_UM3,),
                                        _F( CHARGE        = DEPL_M5, ),
                                        _F( CHARGE        = DEPL_M2, ),
                                        _F( CHARGE        = DEPL_M4,
                                            FONC_MULT     = COEF2,),),
                         COMP_INCR   = _F( RELATION       = 'DRUCK_PRAG_N_A',
                                           RESI_INTE_RELA = 1.E-6,
                                           ITER_INTE_MAXI = 100,),
                         NEWTON      = _F( MATRICE        = 'TANGENTE',
                                           REAC_ITER      = 1,),
                         ETAT_INIT   = _F( SIGM           = SIGINIT,),
                         CONVERGENCE = _F( RESI_GLOB_RELA = 1.E-10,
                                           ITER_GLOB_MAXI = 50),
                         ARCHIVAGE   = _F( ARCH_ETAT_INIT ='OUI',),
                         INCREMENT   = _F( LIST_INST      = TEMPS,)
                        )
       
U4       = CALC_ELEM( reuse      = U4,
                      OPTION     = ('EPSI_ELGA_DEPL','EPSI_ELNO_DEPL','SIEF_ELNO_ELGA','VARI_ELNO_ELGA'),
                      RESULTAT   = U4,
                    );
U4       = CALC_NO( reuse    = U4,     
                    RESULTAT = U4,
                    OPTION   = ('SIEF_NOEU_ELGA','VARI_NOEU_ELGA')
                  )
  
TEST_RESU( RESU = (
###########################
# --- CONTRAINTE SIXX --- #
###########################
                _F(   RESULTAT   = U4,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'SIEF_NOEU_ELGA',
                      NOM_CMP    = 'SIXX',
                      INST       = 2.0,
                      PRECISION  = 1.E-3,
                      VALE       = 8.0654900873493E-10),
###########################
# --- CONTRAINTE SIYY --- #
###########################
                 _F(  RESULTAT   = U4,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'SIEF_NOEU_ELGA',
                      NOM_CMP    = 'SIYY',
                      INST       = 1.07000,
                      PRECISION  = 1.E-3,
                      VALE       = -6.1538461538460E+05),
                 _F(  RESULTAT   = U4,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'SIEF_NOEU_ELGA',
                      NOM_CMP    = 'SIYY',
                      INST       = 1.1600,
                      PRECISION  = 1.E-3,
                      VALE       = -1.4065934065934E+06),
                 _F(  RESULTAT   = U4,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'SIEF_NOEU_ELGA',
                      NOM_CMP    = 'SIYY',
                      INST       = 1.3400,
                      PRECISION  = 1.E-3,
                      VALE       = -2.9890109890109E+06),
                 _F(  RESULTAT   = U4,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'SIEF_NOEU_ELGA',
                      NOM_CMP    = 'SIYY',
                      INST       = 1.5300,
                      PRECISION  = 1.E-3,
                      VALE       = -4.6057566374666E+06),
###############################
# --- VARIABLE INTERNE V1 --- #
###############################
                 _F(  RESULTAT   = U4,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'VARI_NOEU_ELGA',
                      NOM_CMP    = 'V1',
                      CRITERE    = 'ABSOLU',
                      INST       = 1.07000,
                      PRECISION  = 1.E-3,
                      VALE       = 0.0000000000000E+00),
                 _F(  RESULTAT   = U4,
                      REFERENCE  = 'NON_REGRESSION', 
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'VARI_NOEU_ELGA',
                      NOM_CMP    = 'V1',
                      INST       = 1.1600,
                      PRECISION  = 1.E-3,
                      VALE       = 0.0000000000000E+00),
                 _F(  RESULTAT   = U4,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'VARI_NOEU_ELGA',
                      NOM_CMP    = 'V1',
                      INST       = 1.3400,
                      PRECISION  = 1.E-3,
                      VALE       = 0.0000000000000E+00),
                 _F(  RESULTAT   = U4,
                      REFERENCE  = 'NON_REGRESSION',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'VARI_NOEU_ELGA',
                      NOM_CMP    = 'V1',
                      INST       = 1.5300,
                      PRECISION  = 1.E-3,
                      VALE       = 1.0486981491849E-04),
##########################
# --- DEPLACEMENT DY --- #
##########################
                 _F(  RESULTAT   = U4,
                      REFERENCE  = 'ANALYTIQUE',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'DEPL',
                      NOM_CMP    = 'DY',
                      INST       = 1.07000,
                      PRECISION  = 1.E-3,
                      VALE       = -5.5999999999999E-04),
                 _F(  RESULTAT   = U4,
                      REFERENCE  = 'ANALYTIQUE',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'DEPL',
                      NOM_CMP    = 'DY',
                      INST       = 1.1600,
                      PRECISION  = 1.E-3,
                      VALE       = -1.2800000000000E-03),
                 _F(  RESULTAT   = U4,
                      REFERENCE  = 'ANALYTIQUE',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'DEPL',
                      NOM_CMP    = 'DY',
                      INST       = 1.3400,
                      PRECISION  = 1.E-3,
                      VALE       = -2.7199999999999E-03),
                 _F(  RESULTAT   = U4,
                      REFERENCE  = 'ANALYTIQUE',
                      NOEUD      = 'N4',
                      NOM_CHAM   = 'DEPL',
                      NOM_CMP    = 'DY',
                      INST       = 1.5300,
                      PRECISION  = 1.E-3,
                      VALE       = -4.2399999999999E-03),      
    ))
       
FIN();


