# MODIF  DATE 13/09/2010   AUTEUR PELLET J.PELLET 
# TITRE  : VALIDATION DE  CRIT_ELNO_RUPT DE CALC_ELEM
# ssls128a.para = tps_job 60 mem_job 64Mo ncpus 1 liste_test R
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2004  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#---------------------------------------------------------------------
#    - CALCUL STATIQUE D'UNE PLAQUE COMPOSEE DE COUCHES
#    - CALCUl DU CRITERE DE TSAI-HILL
#---------------------------------------------------------------------
#
DEBUT(CODE=_F(NOM='SSLS128A',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

PRE_GMSH();

MAIL=LIRE_MAILLAGE();

MAIL=DEFI_GROUP(reuse =MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_MA=(_F(NOM='DROITE',
                                  GROUP_MA='GM160',),
                               _F(NOM='GAUCHE',
                                  GROUP_MA='GM150',),
                               _F(NOM='TOUT',
                                  TOUT='OUI',),),
                CREA_GROUP_NO=(_F(GROUP_MA='GM150',
                                  NOM='GAUCHE',),
                               _F(GROUP_MA='GM160',
                                  NOM='DROITE',),
                               _F(OPTION='PLAN',
                                  NOM='MILIEU',
                                  NOEUD_CENTRE='N62',
                                  VECT_NORMALE=(1.0,0.0,),
                                  PRECISION=0.2,),),
                INFO=2,);

MOD=AFFE_MODELE(MAILLAGE=MAIL,
                AFFE=(_F(TOUT='OUI',
                         PHENOMENE='MECANIQUE',
                         MODELISATION='DKT',),),);

CARBONE=DEFI_MATERIAU(ELAS_ORTH=_F(E_L=59000,
                                   E_T=59000,
                                   NU_LT=0.08,
                                   G_LT=3700,
                                   XT=560.0,
                                   XC=-475.0,
                                   YT=560,
                                   YC=-475,
                                   S_LT=48,),);

CARA=AFFE_CARA_ELEM(MODELE=MOD,
#                    COQUE=_F(GROUP_MA='GM170',
                   COQUE=_F(GROUP_MA='TOUT',
                             EPAIS=4.48,
                             COQUE_NCOU=16,
                             ANGL_REP=(0.0,0.0,),),);

COMPO=DEFI_COQU_MULT(COUCHE=(_F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=0.0,),
                             _F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=45,),
                             _F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=0.0,),
                             _F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=45,),
                             _F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=0.0,),
                             _F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=45,),
                             _F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=0.0,),
                             _F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=45,),
                             _F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=45,),
                             _F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=0.0,),
                             _F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=45,),
                             _F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=0.0,),
                             _F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=45,),
                             _F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=0.0,),
                             _F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=45,),
                             _F(EPAIS=0.28,
                                MATER=CARBONE,
                                ORIENTATION=0.0,),),
                     IMPRESSION=_F(UNITE=8),);

CHAMPMAT=AFFE_MATERIAU(MAILLAGE=MAIL,
                       AFFE=_F(TOUT='OUI',
                               MATER=COMPO,),);

CONDLIM=AFFE_CHAR_MECA(MODELE=MOD,
                       DDL_IMPO=(_F(NOEUD='N1',
                                    DY=0.0,
                                    DZ=0.0,
                                    DRX=0.0,
                                    DRY=0.0,
                                    DRZ=0.0,),
                                 _F(GROUP_NO='GAUCHE',
                                    DX=0.0,),),
                       FORCE_ARETE=_F(GROUP_MA='DROITE',
                                      FX=-784,),);

RESU=MECA_STATIQUE(MODELE=MOD,
                   CHAM_MATER=CHAMPMAT,
                   CARA_ELEM=CARA,
                   EXCIT=_F(CHARGE=CONDLIM,),);

RESU1=CALC_ELEM( RESULTAT=RESU,
                 OPTION='SIGM_ELNO_DEPL',
                 REPE_COQUE =_F( NUME_COUCHE=1,
                                 NIVE_COUCHE='INF',),);

RESU1=CALC_ELEM(reuse=RESU1, RESULTAT=RESU1,



               OPTION='CRIT_ELNO_RUPT',

               REPE_COQUE =_F( NUME_COUCHE=1,
                               NIVE_COUCHE='INF',),);



TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  RESULTAT=RESU1,
                  NOM_CHAM='CRIT_ELNO_RUPT',
                  NOM_CMP = 'CRITH' ,
                  MAILLE='M49',
                  NOEUD='N1',
                  VALE = 0.344 ,
                  PRECISION = 0.001 ,
                  CRITERE = 'RELATIF',
                   REFERENCE='AUTRE_ASTER')
               )


TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  RESULTAT=RESU1,
                  NOM_CHAM='SIGM_ELNO_DEPL',
                  NOM_CMP = 'SIXX' ,
                  MAILLE='M49',
                  NOEUD='N1',
                  VALE = -242 ,
                  PRECISION = 0.005 ,
                  CRITERE = 'RELATIF',
                  REFERENCE='AUTRE_ASTER')
              )

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  RESULTAT=RESU1,
                  NOM_CHAM='SIGM_ELNO_DEPL',
                  NOM_CMP = 'SIYY' ,
                  MAILLE='M49',
                  NOEUD='N1',
                  VALE = 67 ,
                  PRECISION = 0.006 ,
                  CRITERE = 'RELATIF',
                  REFERENCE='AUTRE_ASTER')
               )

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  RESULTAT=RESU1,
                  NOM_CHAM='CRIT_ELNO_RUPT',
                  NOM_CMP = 'SIGL' ,
                  MAILLE='M49',
                  NOEUD='N1',
                  VALE = -242 ,
                  PRECISION = 0.005 ,
                  CRITERE = 'RELATIF',
                  REFERENCE='AUTRE_ASTER')
              )

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  RESULTAT=RESU1,
                  NOM_CHAM='CRIT_ELNO_RUPT',
                  NOM_CMP = 'SIGT' ,
                  MAILLE='M49',
                  NOEUD='N1',
                  VALE = 67 ,
                  PRECISION = 0.006 ,
                  CRITERE = 'RELATIF',
                  REFERENCE='AUTRE_ASTER')
               )
RESU2=CALC_ELEM( RESULTAT=RESU,
                 OPTION='SIGM_ELNO_DEPL',
                 REPE_COQUE =_F( NUME_COUCHE=2,
                                 NIVE_COUCHE='INF',),);

RESU2=CALC_ELEM( reuse=RESU2, RESULTAT=RESU2,



                 OPTION='CRIT_ELNO_RUPT',

                 REPE_COQUE =_F( NUME_COUCHE=2,
                                 NIVE_COUCHE='INF',),);


TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  RESULTAT=RESU2,
                  NOM_CHAM='CRIT_ELNO_RUPT',
                  NOM_CMP = 'CRITH' ,
                  MAILLE='M49',
                  NOEUD='N1',
                  VALE = 0.223 ,
                  PRECISION = 0.001 ,
                  CRITERE = 'RELATIF',
                  REFERENCE='AUTRE_ASTER')
               )
TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  RESULTAT=RESU2,
                  NOM_CHAM='SIGM_ELNO_DEPL',
                  NOM_CMP = 'SIXX' ,
                  MAILLE='M49',
                  NOEUD='N1',
                  VALE = -108 ,
                  PRECISION = 0.005 ,
                  CRITERE = 'RELATIF',
                  REFERENCE='AUTRE_ASTER')
                 )

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  RESULTAT=RESU2,
                  NOM_CHAM='SIGM_ELNO_DEPL',
                  NOM_CMP = 'SIYY' ,
                  MAILLE='M49',
                  NOEUD='N1',
                  VALE = -67 ,
                  PRECISION = 0.006 ,
                  CRITERE = 'RELATIF',
                  REFERENCE='AUTRE_ASTER')
                  )
TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  RESULTAT=RESU2,
                  NOM_CHAM='CRIT_ELNO_RUPT',
                  NOM_CMP = 'SIGL' ,
                  MAILLE='M49',
                  NOEUD='N1',
                  VALE = -88 ,
                  PRECISION = 0.006 ,
                  CRITERE = 'RELATIF',
                  REFERENCE='AUTRE_ASTER')
                 )

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  RESULTAT=RESU2,
                  NOM_CHAM='CRIT_ELNO_RUPT',
                  NOM_CMP = 'SIGT' ,
                  MAILLE='M49',
                  NOEUD='N1',
                  VALE = -88 ,
                  PRECISION = 0.006 ,
                  CRITERE = 'RELATIF',
                  REFERENCE='AUTRE_ASTER')
                  )

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  RESULTAT=RESU2,
                  NOM_CHAM='CRIT_ELNO_RUPT',
                  NOM_CMP = 'SIGLT' ,
                  MAILLE='M49',
                  NOEUD='N1',
                  VALE = 21 ,
                  PRECISION = 0.006 ,
                  CRITERE = 'RELATIF',
                  REFERENCE='AUTRE_ASTER')
                  )

FIN();
