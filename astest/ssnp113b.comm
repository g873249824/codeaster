# TITRE ROTATION DES CONTRAINTES PRINCIPALES
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================

DEBUT(CODE=_F(NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='NON'))
# SDVERI='NON' car la verification est trop couteuse en CPU

MAIL=LIRE_MAILLAGE(FORMAT='MED',);
MODELE=AFFE_MODELE(AFFE    =_F(TOUT = 'OUI',
                               PHENOMENE='MECANIQUE',
                               MODELISATION='3D_GRAD_EPSI'),
                   MAILLAGE=MAIL);
MATERIAU=DEFI_MATERIAU(MAZARS=_F(K =0.7,
                                 EPSD0=9.375e-5,
                                 AC   =1.15,
                                 AT   =0.8,
                                 BC   =1391.3,
                                 BT   =10000.),
                       NON_LOCAL=_F(LONG_CARA=0.),
                       ELAS=_F(NU=0.2,
                                E=3.2E10),);
CAR_MAT=AFFE_MATERIAU(AFFE=_F(MATER=MATERIAU,
                              TOUT='OUI'),
                      MAILLAGE=MAIL);
CLIM=AFFE_CHAR_MECA(DDL_IMPO=(_F(DX=0.0,
                                 GROUP_NO=('P1','P5','P8','P4'),),
                              _F(DX=0.0,
                                 GROUP_NO=('P9','P10','P11','P12'),),
                              _F(DZ=0.0,
                                 GROUP_NO='P1',
                                 DY=0.0),
                              _F(GROUP_NO=('P5','P11'),
                                DY=0.0),),
                    MODELE=MODELE);
CHAR1=AFFE_CHAR_MECA(DDL_IMPO=(_F(GROUP_NO=('P2','P6','P14'),
                                  DY=0.0),
                               _F(GROUP_NO=('P16','P20','P19','P14'),
                                  DX=1.0),
                               _F(DX=1.0,
                                  GROUP_NO=('P2','P6','P7','P3'),),
                               _F(DY=-0.2,
                                  GROUP_NO=('P17','P10','P18','P19'),),
                               _F(DY=-0.1,
                                  GROUP_NO=('P9','P12'),),
                               _F(DX=0.5,
                                  GROUP_NO=('P13','P15','P17'),),),
                     MODELE=MODELE);
CHAR11=AFFE_CHAR_MECA(DDL_IMPO=(_F(DY=0,
                                   GROUP_NO=('P13','P15'),),
                                _F(DY=-0.1,
                                  GROUP_NO=('P16','P20'),),
                                _F(DX=0.5,
                                   GROUP_NO='P18'),
                                _F(DY=-0.2,
                                   GROUP_NO=('P3','P4','P8','P7'),),),
                     MODELE=MODELE);
CHAR2=AFFE_CHAR_MECA(DDL_IMPO=(_F(DX=1.0,
                                 GROUP_NO=('P2','P6','P7','P3'),),
                               _F(DX=1.0,
                                  GROUP_NO=('P16','P20','P19','P14'),),
                               _F(DY=0.75,
                                  GROUP_NO=('P9','P12'),),
                               _F(DY=3.5,
                                   GROUP_NO=('P19'),),
                               _F(DY=1.5,
                                   GROUP_NO=('P10'),),
                               _F(DX=0.5,
                                   GROUP_NO=('P13','P17','P18','P15'),),
                               _F(DY=1.,
                                   GROUP_NO=('P13','P15'),),
                               _F(DY=2.75,
                                   GROUP_NO=('P16','P20'),),
                               _F(DY=2.5,
                                   GROUP_NO=('P17','P18'),),
                              _F(GROUP_NO='P4',
                                 DY=1.5),
                              _F(GROUP_NO='P8',
                                 DY=1.5),
                              _F(GROUP_NO='P3',
                                 DY=3.5),
                              _F(GROUP_NO='P7',
                                 DY=3.5),
                              _F(GROUP_NO='P2',
                                 DY=2.),
                              _F(GROUP_NO=('P6','P14'),
                                 DY=2.),),
                     MODELE=MODELE);
L_INS1=DEFI_LIST_REEL(DEBUT=0.0,
                      INTERVALLE=(_F(JUSQU_A=1.0,
                                     NOMBRE=10),
                                  _F(JUSQU_A=5.0,
                                     NOMBRE=300) ,), );
FCT_MUL1=DEFI_FONCTION(INTERPOL=('LIN','LIN'),
                       NOM_PARA='INST',
                       VALE=(0.0,0.0,1.0,5.25E-05),);
FCT_MUL2=DEFI_FONCTION(INTERPOL=('LIN','LIN'),
                       NOM_PARA='INST',
                       VALE=(1.0,0.0,5.0,7.875E-4),);
RES1=STAT_NON_LINE(CHAM_MATER=CAR_MAT,
                   MODELE=MODELE,
                   TITRE='BENCH-B LOI MAZARS',
                   CONVERGENCE=_F(ITER_GLOB_MAXI=20,
                                  RESI_GLOB_RELA=1.E-06),
                  COMPORTEMENT  =_F(RELATION='MAZARS'),
                   INCREMENT  =_F(LIST_INST=L_INS1,
                                  INST_FIN = 1.0 ),
                   NEWTON     =_F(MATRICE='TANGENTE'),
                   EXCIT      =(_F(CHARGE=CHAR11,
                                   FONC_MULT=FCT_MUL1),
                                _F(CHARGE=CLIM),
                                _F(CHARGE=CHAR1,
                                   FONC_MULT=FCT_MUL1),), );
RES1=STAT_NON_LINE(reuse     = RES1,
                   CHAM_MATER=CAR_MAT,
                   MODELE    =MODELE,
                   TITRE     ='BENCH-A LOI MAZARS',
                   CONVERGENCE=_F(ITER_GLOB_MAXI=30,
                                  RESI_GLOB_RELA=1.E-4),
                   COMPORTEMENT  =_F(RELATION='MAZARS'),
                   INCREMENT  =_F(INST_FIN=5.0,
                                  LIST_INST=L_INS1,),
                   NEWTON     =_F(
                                  MATRICE='TANGENTE',
                                  REAC_ITER  = 1,
                                  REAC_INCR  = 1,),
                   EXCIT    =(_F(CHARGE=CLIM),
                              _F(CHARGE=CHAR2,
                                 TYPE_CHARGE='DIDI',
                                 FONC_MULT=FCT_MUL2),),
                  ETAT_INIT= _F( EVOL_NOLI=RES1 ),
                  ARCHIVAGE= _F(LIST_INST = L_INS1), );
RES1=CALC_CHAMP(reuse=RES1,RESULTAT=RES1,NUME_ORDRE=(10,25,310),CONTRAINTE=('SIGM_ELNO'),VARI_INTERNE=('VARI_ELNO'),DEFORMATION=('EPSI_ELNO'))

RES1=CALC_CHAMP  ( reuse  = RES1,
                RESULTAT=RES1,
                NUME_ORDRE = (10,25,310),
                DEFORMATION='EPSI_NOEU',CONTRAINTE='SIGM_NOEU',VARI_INTERNE='VARI_NOEU',
                );
TEST_RESU(RESU=(_F(NUME_ORDRE=10,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='EPSI_NOEU',
                   NOEUD='N1',
                   NOM_CMP='EPXX',
                   VALE_CALC= 9.37500000E-05,
                   VALE_REFE=9.3750000000000002E-05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=10,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='EPSI_NOEU',
                   NOEUD='N1',
                   NOM_CMP='EPYY',
                   VALE_CALC=-1.87500000E-05,
                   VALE_REFE=-1.8749999999999998E-05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=10,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='EPSI_NOEU',
                   NOEUD='N1',
                   NOM_CMP='EPXY',
                   VALE_CALC= 5.88523054E-21,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-08,
                   MAILLE='M1',),
                _F(NUME_ORDRE=10,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='SIGM_NOEU',
                   NOEUD='N1',
                   NOM_CMP='SIXX',
                   VALE_CALC= 3.00000000E+06,
                   VALE_REFE=3.E6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=10,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='SIGM_NOEU',
                   NOEUD='N1',
                   NOM_CMP='SIYY',
                   VALE_CALC= 6.90133687E-10,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-08,
                   MAILLE='M1',),
                _F(NUME_ORDRE=10,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='SIGM_NOEU',
                   NOEUD='N1',
                   NOM_CMP='SIXY',
                   VALE_CALC= 0.00000000E+00,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-08,
                   MAILLE='M1',),
                _F(NUME_ORDRE=10,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='VARI_NOEU',
                   NOEUD='N1',
                   NOM_CMP='V1',
                   VALE_CALC= 2.58365218E-15,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',
                   PRECISION=1.E-08,
                   MAILLE='M1',),
                _F(NUME_ORDRE=25,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='EPSI_NOEU',
                   NOEUD='N1',
                   NOM_CMP='EPXX',
                   VALE_CALC= 1.64062500E-04,
                   VALE_REFE=1.64E-4,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=25,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='EPSI_NOEU',
                   NOEUD='N1',
                   NOM_CMP='EPYY',
                   VALE_CALC= 8.67187500E-05,
                   VALE_REFE=8.6700000000000007E-05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=25,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='EPSI_NOEU',
                   NOEUD='N1',
                   NOM_CMP='EPXY',
                   VALE_CALC= 7.03125000E-05,
                   VALE_REFE=7.0300000000000001E-05,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=25,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='SIGM_NOEU',
                   NOEUD='N1',
                   NOM_CMP='SIXX',
                   VALE_CALC= 2.04318614E+06,
                   VALE_REFE=2.043190E6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=25,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='SIGM_NOEU',
                   NOEUD='N1',
                   NOM_CMP='SIYY',
                   VALE_CALC= 1.34628544E+06,
                   VALE_REFE=1.346290E6,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=25,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='SIGM_NOEU',
                   NOEUD='N1',
                   NOM_CMP='SIXY',
                   VALE_CALC= 6.33546088E+05,
                   VALE_REFE=6.33546E5,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=25,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='VARI_NOEU',
                   NOEUD='N1',
                   NOM_CMP='V1',
                   VALE_CALC=0.662108753,
                   VALE_REFE=0.66210999999999998,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=310,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='EPSI_NOEU',
                   NOEUD='N1',
                   NOM_CMP='EPXX',
                   VALE_CALC= 1.50000000E-03,
                   VALE_REFE=1.5E-3,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=310,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='EPSI_NOEU',
                   NOEUD='N1',
                   NOM_CMP='EPYY',
                   VALE_CALC= 2.09062500E-03,
                   VALE_REFE=2.09063E-3,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=310,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='EPSI_NOEU',
                   NOEUD='N1',
                   NOM_CMP='EPXY',
                   VALE_CALC= 1.40625000E-03,
                   VALE_REFE=1.4062499999999999E-3,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=310,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='SIGM_NOEU',
                   NOEUD='N1',
                   NOM_CMP='SIXX',
                   VALE_CALC= 3.68638333E+05,
                   VALE_REFE=3.68638E5,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=310,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='SIGM_NOEU',
                   NOEUD='N1',
                   NOM_CMP='SIYY',
                   VALE_CALC= 4.59446602E+05,
                   VALE_REFE=4.59447E5,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=310,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='SIGM_NOEU',
                   NOEUD='N1',
                   NOM_CMP='SIXY',
                   VALE_CALC= 2.16210166E+05,
                   VALE_REFE=2.16210E5,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                _F(NUME_ORDRE=310,
                   REFERENCE='SOURCE_EXTERNE',
                   RESULTAT=RES1,
                   NOM_CHAM='VARI_NOEU',
                   NOEUD='N1',
                   NOM_CMP='V1',
                   VALE_CALC=0.994234396,
                   VALE_REFE=0.99422999999999995,
                   CRITERE='RELATIF',
                   PRECISION=1.E-3,
                   MAILLE='M1',),
                ),
          )

FIN() ;
