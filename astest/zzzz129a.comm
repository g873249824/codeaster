# TITRE VALIDATION DE LA COMMANDE CREA_RESU MOT CLE FACTEUR PROL_RTZ
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#
# person_in_charge: j-pierre.lefebvre at edf.fr
DEBUT(CODE=_F(NOM='ZZZZ129A', NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'))

MA_1D=LIRE_MAILLAGE(FORMAT='MED',)

MA_1D=DEFI_GROUP ( reuse=MA_1D, MAILLAGE=MA_1D,
                   CREA_GROUP_NO=(_F( TOUT_GROUP_MA = 'OUI'),
                                  _F( GROUP_MA = 'MAILL',
                                      NOM      = 'TOUT',   ),)
              )

CHAMP1 = CREA_CHAMP( TYPE_CHAM = 'NOEU_TEMP_R',
                     OPERATION = 'AFFE',
                     MAILLAGE = MA_1D,
                     AFFE = (_F( GROUP_NO = 'AB',
                                NOM_CMP = 'TEMP',
                                VALE = 60.0,),
                            _F( GROUP_NO = 'BC',
                                NOM_CMP = 'TEMP',
                                VALE =   40.0,),
                            _F( GROUP_NO = 'CD',
                                NOM_CMP = 'TEMP',
                                VALE =   20.0,),
                            _F( GROUP_NO = 'DE',
                                NOM_CMP = 'TEMP',
                                VALE =   10.0,),),
                   ),

CHAMP2 = CREA_CHAMP( TYPE_CHAM = 'NOEU_TEMP_R',
                     OPERATION = 'AFFE',
                     MAILLAGE = MA_1D,
                     AFFE = (_F( GROUP_NO = 'AB',
                                NOM_CMP = 'TEMP',
                                VALE = 100.0,),
                            _F( GROUP_NO = 'BC',
                                NOM_CMP = 'TEMP',
                                VALE =   75.0,),
                            _F( GROUP_NO = 'CD',
                                NOM_CMP = 'TEMP',
                                VALE =   40.0,),
                            _F( GROUP_NO = 'DE',
                                NOM_CMP = 'TEMP',
                                VALE =   0.0,),),
                   ),

RESU_1D = CREA_RESU( OPERATION = 'AFFE',  TYPE_RESU = 'EVOL_THER',
                     NOM_CHAM  = 'TEMP',
                     AFFE = (_F( INST = 1.0,
                                 CHAM_GD = CHAMP1,),
                             _F( INST = 2.0,
                                CHAM_GD = CHAMP2,),
                            ),
                   )

TABL_1D = POST_RELEVE_T ( ACTION= _F( INTITULE  = 'PROL_RTZ',
                                      RESULTAT  = RESU_1D,
                                      NOM_CHAM  = 'TEMP',
                                      GROUP_NO  = 'TOUT',
                                      NOM_CMP   = 'TEMP',
                                      OPERATION = 'EXTRACTION', )
                        )

IMPR_TABLE ( TABLE = TABL_1D,
             NOM_PARA = ( 'INST', 'NOEUD', 'COOR_X', 'TEMP',),
           )

MA_3D=LIRE_MAILLAGE(UNITE=21, )

MA_3D=DEFI_GROUP ( reuse=MA_3D, MAILLAGE=MA_3D,
                   CREA_GROUP_NO=(_F( TOUT_GROUP_MA = 'OUI'),
                                  _F( GROUP_MA = 'CYLIN',
                                      NOM      = 'TOUT',   ),)
              )

RESU_3D = CREA_RESU( OPERATION = 'PROL_RTZ', TYPE_RESU = 'EVOL_THER',
                   PROL_RTZ = _F(
                               TABLE          = TABL_1D,
                               MAILLAGE_FINAL = MA_3D,
                               PROL_DROITE    = 'CONSTANT',
                               PROL_GAUCHE    = 'CONSTANT',
                               REPERE  = 'CYLINDRIQUE',
                               ORIGINE = (5.0, 0.0, 0.0,),
# on a bascule le cylindre de 30 degres autour de X
                              AXE_Z   = (0.0, -25., 43.30127,),
                             ),
                )

TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N1',
                   NOM_CMP='TEMP',
                   VALE_CALC=60.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N9',
                   NOM_CMP='TEMP',
                   VALE_CALC=60.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N169',
                   NOM_CMP='TEMP',
                   VALE_CALC=60.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N171',
                   NOM_CMP='TEMP',
                   VALE_CALC=60.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N2',
                   NOM_CMP='TEMP',
                   VALE_CALC=20.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N10',
                   NOM_CMP='TEMP',
                   VALE_CALC=20.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N145',
                   NOM_CMP='TEMP',
                   VALE_CALC=20.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N149',
                   NOM_CMP='TEMP',
                   VALE_CALC=20.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N97',
                   NOM_CMP='TEMP',
                   VALE_CALC=10.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N101',
                   NOM_CMP='TEMP',
                   VALE_CALC=10.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N146',
                   NOM_CMP='TEMP',
                   VALE_CALC=10.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=1,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N150',
                   NOM_CMP='TEMP',
                   VALE_CALC=10.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=2,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N1',
                   NOM_CMP='TEMP',
                   VALE_CALC=100.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=2,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N9',
                   NOM_CMP='TEMP',
                   VALE_CALC=100.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=2,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N169',
                   NOM_CMP='TEMP',
                   VALE_CALC=100.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=2,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N171',
                   NOM_CMP='TEMP',
                   VALE_CALC=100.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=2,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N2',
                   NOM_CMP='TEMP',
                   VALE_CALC=40.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=2,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N10',
                   NOM_CMP='TEMP',
                   VALE_CALC=40.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=2,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N145',
                   NOM_CMP='TEMP',
                   VALE_CALC=40.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=2,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N149',
                   NOM_CMP='TEMP',
                   VALE_CALC=40.0,
                   CRITERE='RELATIF',
                   ),
                _F(NUME_ORDRE=2,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N97',
                   NOM_CMP='TEMP',
                   VALE_CALC=0.0,
                   CRITERE='ABSOLU',
                   ),
                _F(NUME_ORDRE=2,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N101',
                   NOM_CMP='TEMP',
                   VALE_CALC=0.0,
                   CRITERE='ABSOLU',
                   ),
                _F(NUME_ORDRE=2,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N146',
                   NOM_CMP='TEMP',
                   VALE_CALC=0.0,
                   CRITERE='ABSOLU',
                   ),
                _F(NUME_ORDRE=2,
                   RESULTAT=RESU_3D,
                   NOM_CHAM='TEMP',
                   NOEUD='N150',
                   NOM_CMP='TEMP',
                   VALE_CALC=0.0,
                   CRITERE='ABSOLU',
                   ),
                ),
          )

#
FIN()
