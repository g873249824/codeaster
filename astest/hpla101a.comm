# MODIF  DATE 08/11/2007   AUTEUR SALMONA L.SALMONA 
# RESPONSABLE GNICOLAS G.NICOLAS
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# TITRE CYLINDRE CREUX THERMOELASTIQUE.
# DERIVES PAR RAPPORT A UNE VARIATION DE DOMAINE.
DEBUT(CODE=_F(NOM='HPLA101A', NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='NON'))
#......................................................................
#
# MODELISATION 2D_AXIS:   121 NOEUDS -- 32 MAILLES QUA8
#......................................................................
#
#        INTERNE                   EXTERNE
#               D -----+----- C
# !               !    J    !
#                 !         !
# !               !         !
#                 !         !        10 MM
# !               !         !
#                 !         !
# !               !    F    !
#     19.5 MM   A -----+-----  B
# !-------------->   1.0 MM
#                 <--------->
#======================================================================


MA=LIRE_MAILLAGE( )

MO=AFFE_MODELE(  MAILLAGE=MA,
         AFFE=_F(  TOUT = 'OUI',PHENOMENE = 'MECANIQUE',
                           MODELISATION = 'AXIS'))

MOTHER=AFFE_MODELE(  MAILLAGE=MA,
         AFFE=_F(  TOUT = 'OUI',PHENOMENE = 'THERMIQUE',
                           MODELISATION = 'PLAN'))

MAT=DEFI_MATERIAU(ELAS=_F( E = 2.0E+5, NU = 0.3, RHO = 8.E-6, ALPHA = 1.E-5))

MATHER=DEFI_MATERIAU(THER=_F( LAMBDA = 1.0, RHO_CP = 0.0) )

CHMATHE=AFFE_MATERIAU(  MAILLAGE=MA,
                        AFFE=_F(  TOUT = 'OUI', MATER = MATHER))

THETA=CALC_THETA(   OPTION='BANDE',
                      MODELE=MO,
                      THETA_BANDE=_F( MODULE = 1.,
                                   R_INF = 19.5,
                                   R_SUP = 19.6),
                      GRAD_NOEU_THETA='OUI'
                    )

# ------------------------------------------------------------------
#
CHTHE=AFFE_CHAR_THER(
            MODELE=MOTHER,TEMP_IMPO=(
        _F( GROUP_MA = ('BC',),TEMP = 0.5),
        _F( GROUP_MA = ('DA',),TEMP = -0.5))
                       )
#
TEMPLIN=THER_LINEAIRE(
            SENSIBILITE=(THETA),
                  MODELE=MOTHER,
              CHAM_MATER=CHMATHE,
                  EXCIT=_F( CHARGE = CHTHE)
                         )
#
TEMPLIN=CALC_ELEM(
                   SENSIBILITE=(THETA),
                   reuse=TEMPLIN,
                   RESULTAT=TEMPLIN,
                   OPTION='DETE_ELNO_DLTE'
                  )
#
CALC_NO( reuse=TEMPLIN,  RESULTAT=TEMPLIN,
                 SENSIBILITE=(THETA),
                 OPTION='DETE_NOEU_DLTE')
#
CHDIL=AFFE_CHAR_MECA(  MODELE=MO,
           DDL_IMPO=_F(  GROUP_MA = 'TOUT',   DY = 0.) )

# ------------------------------------------------------------------

CHMAT=AFFE_MATERIAU(  MAILLAGE=MA,
                        AFFE=_F(  TOUT = 'OUI', MATER = MAT),
                        AFFE_VARC=_F(NOM_VARC='TEMP',  EVOL = TEMPLIN, VALE_REF = 0.),
                        )


DEPLDIL=MECA_STATIQUE(
                      SENSIBILITE=(THETA),
                      MODELE=MO,
                      CHAM_MATER=CHMAT,
                      EXCIT=_F( CHARGE = CHDIL),

                         )

CALC_ELEM( reuse= DEPLDIL ,RESULTAT= DEPLDIL ,
                      SENSIBILITE=(THETA),

                      OPTION=('SIGM_ELNO_DEPL',)
                         )
#
CALC_ELEM( reuse=DEPLDIL,
                   RESULTAT=DEPLDIL,
                   SENSIBILITE=(THETA),

                   OPTION=('SIEF_ELGA_DEPL',
                            'DEDE_ELNO_DLDE',
                            'DESI_ELNO_DLSI')
                 )
#
CALC_NO( reuse=DEPLDIL,   RESULTAT=DEPLDIL,
             OPTION=('SIGM_NOEU_DEPL')
                   )

CALC_NO( reuse=DEPLDIL,   RESULTAT=DEPLDIL,
                      SENSIBILITE=(THETA),
             OPTION=('DESI_NOEU_DLSI', 'DEDE_NOEU_DLDE')
                   )

#
TEST_RESU(RESU=(
# DERIVEES DES TEMPERATURES
      _F( RESULTAT = TEMPLIN,  NUME_ORDRE = 0,
          SENSIBILITE=(THETA,),
          NOM_CHAM = 'TEMP',   GROUP_NO = 'A',
          CRITERE = 'ABSOLU',  PRECISION = 1.E-6,
          NOM_CMP = 'TEMP',    VALE = -0.000000E+00, REFERENCE = 'ANALYTIQUE' ),
      _F( RESULTAT = TEMPLIN,  NUME_ORDRE = 0,
          SENSIBILITE=(THETA,),
          NOM_CHAM = 'TEMP',   GROUP_NO = 'F',
          CRITERE = 'RELATIF', PRECISION = 1.E-6,
          NOM_CMP = 'TEMP',    VALE = -0.500000E+00, REFERENCE = 'ANALYTIQUE' ),
# DERIVEES DES DEPLACEMENTS
      _F( RESULTAT = DEPLDIL,  NUME_ORDRE = 1,
          SENSIBILITE=(THETA,),
          NOM_CHAM = 'DEDE_NOEU_DLDE',   GROUP_NO = 'A',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
          NOM_CMP = 'DX',      VALE =  8.280440E-06, REFERENCE = 'NON_REGRESSION' ),
      _F( RESULTAT = DEPLDIL,  NUME_ORDRE = 1,
          SENSIBILITE=(THETA,),
          NOM_CHAM = 'DEDE_NOEU_DLDE',   GROUP_NO = 'F',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
          NOM_CMP = 'DX',      VALE =  1.1902E-06, REFERENCE = 'NON_REGRESSION' ),
# DERIVEES DES CONTRAINTES
      _F( RESULTAT = DEPLDIL,  NUME_ORDRE = 1,
          SENSIBILITE=(THETA,),
          NOM_CHAM = 'DESI_NOEU_DLSI',   GROUP_NO = 'F',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
          NOM_CMP = 'SIYY',    VALE =  1.42491, REFERENCE = 'NON_REGRESSION' ),
      ),);

FIN();
