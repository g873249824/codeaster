# MODIF  DATE 03/07/2007   AUTEUR SALMONA L.SALMONA 
# RESPONSABLE S.CAMBIER
# TITRE Sensibilite au chargement/condition limite dans DYNA_LYNE_HARM
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2002  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
#                                                                       
#                                                                       
# ======================================================================
# ----------------------------------------------------------------------
# SYSTEME MASSE-RESSORT A 8 DEGRES DE LIBERTE AVEC AMORTISSEMENT
# VISQUEUX PROPORTIONNEL (REPONSE HARMONIQUE)
# 9 RESSORTS  8 MASSES  -- K =1.E+5    M =10 --
# ----------------------------------------------------------------------

DEBUT( CODE=_F(  NOM = 'sensd01a',NIV_PUB_WEB='INTERNET') )


# 1. Definition des parametres sensibles
#
F1 = DEFI_PARA_SENSI(    VALE = 2.)

F2 = DEFI_PARA_SENSI(    VALE = 0.)

D1 = DEFI_PARA_SENSI(    VALE = 2.)

#
# 2. Maillage, Modele ...
#

INCLUDE(UNITE=50)

MATER=DEFI_MATERIAU( ELAS=_F(  E = 2.E+11,  NU = 0.3) )

CHMAT=AFFE_MATERIAU(  MAILLAGE=MA,
                           AFFE=_F(  TOUT = 'OUI', MATER = MATER)  )

#
# 3. Chargement ...
#

CH=AFFE_CHAR_MECA_F( MODELE=MO,FORCE_NODALE=(_F(  NOEUD = 'NO5',   FX = F1),
                           _F(  NOEUD = 'NO6',   FX = F2)))

FC=DEFI_FONCTION(    NOM_PARA='FREQ',
                         PROL_DROITE='CONSTANT',
                         PROL_GAUCHE='CONSTANT',
                         VALE_C=(10., 1., 0., 20., 1., 0., 40., 1., 0.,) )                  

#
# 4. Conditions aux limites ...
#

CLIM1 = AFFE_CHAR_MECA( MODELE=MO,DDL_IMPO=(
                   _F( GROUP_NO = 'A_ET_B', DX = 0.,DY = 0.,DZ = 0.),
                            _F( GROUP_NO = 'MASSE',     DY = 0.,   DZ = 0.),
                            ))                                    

CLIM2 = AFFE_CHAR_MECA_F( MODELE=MO,DDL_IMPO=(
                           _F( NOEUD = 'NO2',         DX = D1)                            
                            ))  
                             
#
# 5. Premier membre
#

MATELER=CALC_MATR_ELEM(  MODELE=MO,           OPTION='RIGI_MECA',
                             CARA_ELEM=CARELEM,      
                             CHARGE=( CLIM1, CLIM2,)    )

MATELEM=CALC_MATR_ELEM(  MODELE=MO,           OPTION='MASS_MECA',
                             CARA_ELEM=CARELEM,
                             CHARGE=( CLIM1, CLIM2,)    )                                   

MATELEC=CALC_MATR_ELEM(  MODELE=MO,           OPTION='AMOR_MECA',
                             RIGI_MECA=MATELER,    MASS_MECA=MATELEM,
                             CARA_ELEM=CARELEM,    CHAM_MATER=CHMAT,
                             CHARGE= (CLIM1,CLIM2,)   )

NUM=NUME_DDL(  MATR_RIGI=MATELER  )

MATASSR=ASSE_MATRICE(  MATR_ELEM=MATELER,    NUME_DDL=NUM  )

MATASSM=ASSE_MATRICE(  MATR_ELEM=MATELEM,    NUME_DDL=NUM  )

MATASSC=ASSE_MATRICE(  MATR_ELEM=MATELEC,    NUME_DDL=NUM  )


LIFREQ=DEFI_LIST_REEL(DEBUT=10., INTERVALLE=_F( JUSQU_A = 40., NOMBRE = 1))


#
# 6. Calcul
#

DYHA=DYNA_LINE_HARM( MODELE=MO, CARA_ELEM=CARELEM, CHAM_MATER=CHMAT,
                           MATR_MASS=MATASSM, MATR_RIGI=MATASSR,
                           MATR_AMOR=MATASSC,   LIST_FREQ=LIFREQ,
                              TOUT_CHAM='OUI',
                              EXCIT=(_F( COEF_MULT_C = 1.+0.j, CHARGE = CLIM2),                                                           
                                          _F(FONC_MULT_C = FC, CHARGE = CH)),                             
                              SENSIBILITE=(F1,F2,D1),
)                              


DTZ2=RECU_FONCTION(RESULTAT=DYHA,
                   SENSIBILITE=(F1,F2,D1),
                   NOM_CHAM='DEPL',
                   TOUT_ORDRE='OUI',
                   NOM_CMP='DX',
                   NOEUD='NO5',);

RLTH=POST_RELEVE_T(ACTION=(_F(RESULTAT = DYHA,
                              INTITULE='BIDON',
                              SENSIBILITE=(F1),
                              SENSIBILITE_OPTION='SENSIBILITE_MODULE',
                              NOM_CHAM='DEPL',
                              OPERATION='EXTRACTION',
                              NOEUD='NO5',
                              NOM_CMP='DX',),),);

TINCA=CREA_TABLE(FONCTION=_F(FONCTION=DTZ2,),
                 SENSIBILITE=(F1,F2,D1),
                 )

#
# 7. Test
#----------------------------------------------------------
TEST_FONCTION(VALEUR=(
    _F(FONCTION=DTZ2,
       SENSIBILITE=(F1),
       NOM_PARA='FREQ',VALE_PARA=40.,PRECISION = 1.E-3,
       VALE_REFE_C=-2.5695869E-06-2.7550424E-07j,REFERENCE='ANALYTIQUE'),
       ));

TEST_TABLE(TABLE=TINCA,
           NOM_PARA='DX_R',
           SENSIBILITE=(F1),
           FILTRE          =_F(
                 NOM_PARA='FREQ',
                 CRIT_COMP='EQ',
                 VALE=40.,
                               ),
           VALE=-2.5695869E-06,
           PRECISION=5.E-3,
           REFERENCE='ANALYTIQUE',);
TEST_TABLE(TABLE=TINCA,
           NOM_PARA='DX_I',
           SENSIBILITE=(F1),
           FILTRE          =_F(
                 NOM_PARA='FREQ',
                 CRIT_COMP='EQ',
                 VALE=40.,
                               ),
           VALE=-2.7550424E-07,
           PRECISION=5.E-3,
           REFERENCE='ANALYTIQUE',);
#
TEST_RESU(RESU=(
      _F( RESULTAT = DYHA,    NUME_ORDRE = 2, PARA = 'FREQ',
          SENSIBILITE=(F1),
          CRITERE = 'ABSOLU', VALE = 40., PRECISION = 1.E-8, REFERENCE = 'ANALYTIQUE',),
               ),
         );
#
TEST_RESU(RESU=(
      _F( RESULTAT = DYHA,    NUME_ORDRE = 2, PARA = 'FREQ',
           CRITERE = 'ABSOLU', VALE = 40., PRECISION = 1.E-8, REFERENCE = 'ANALYTIQUE',),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          NOM_CHAM = 'DEPL',   NOEUD = 'NO3',
          CRITERE = 'RELATIF', PRECISION = 1.E-5,
          NOM_CMP = 'DX',    VALE_C = -4.8176281E-01-1.0074952E-01j, REFERENCE = 'ANALYTIQUE' ),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          NOM_CHAM = 'DEPL',   NOEUD = 'NO3',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DY',    VALE_C = 0.00000E+00+0.00000E+00j, REFERENCE = 'ANALYTIQUE' ),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          NOM_CHAM = 'DEPL',   NOEUD = 'NO3',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DZ',    VALE_C = 0.00000E+00+0.00000E+00j, REFERENCE = 'ANALYTIQUE' ),          
      _F( RESULTAT = DYHA,    NUME_ORDRE = 2, PARA = 'FREQ',
          SENSIBILITE=(F1),
          CRITERE = 'ABSOLU', VALE = 40., PRECISION = 1.E-8, REFERENCE = 'ANALYTIQUE',),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(F1),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO5',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
          NOM_CMP = 'DX',    VALE_C = -2.5695869E-06-2.7550424E-07j, REFERENCE = 'ANALYTIQUE' ),                    
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(F1),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO5',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DY',    VALE_C = 0.00000E+00+0.00000E+00j, REFERENCE = 'ANALYTIQUE' ),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(F1),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO5',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DZ',    VALE_C = 0.00000E+00+0.00000E+00j, REFERENCE = 'ANALYTIQUE' ),
      _F( RESULTAT = DYHA,    NUME_ORDRE = 2, PARA = 'FREQ',
          SENSIBILITE=(F2),
          CRITERE = 'ABSOLU', VALE = 40., PRECISION = 1.E-8, REFERENCE = 'ANALYTIQUE',),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(F2),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO5',
          CRITERE = 'RELATIF', PRECISION = 1.E-3,
          NOM_CMP = 'DX',    VALE_C = 6.0508111E-07+1.9567292E-07j, REFERENCE = 'ANALYTIQUE' ),                    
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(F2),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO5',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DY',    VALE_C = 0.00000E+00+0.00000E+00j, REFERENCE = 'ANALYTIQUE' ),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(F2),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO5',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DZ',    VALE_C = 0.00000E+00+0.00000E+00j, REFERENCE = 'ANALYTIQUE' ),         
      _F( RESULTAT = DYHA,    NUME_ORDRE = 2, PARA = 'FREQ',
          SENSIBILITE=(D1),
          CRITERE = 'ABSOLU', VALE = 40., PRECISION = 1.E-8, REFERENCE = 'ANALYTIQUE',),          
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(D1),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO3',
          CRITERE = 'RELATIF', PRECISION = 1.E-5,
          NOM_CMP = 'DX',    VALE_C = -2.4088143E-01-5.0374785E-02j, REFERENCE = 'ANALYTIQUE' ),                    
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(D1),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO3',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DY',    VALE_C = 0.00000E+00+0.00000E+00j, REFERENCE = 'ANALYTIQUE' ),
     _F(  RESULTAT = DYHA,   NUME_ORDRE = 2,
          SENSIBILITE=(D1),
          NOM_CHAM = 'DEPL',   NOEUD = 'NO3',
          CRITERE = 'ABSOLU', PRECISION = 1.E-8,
          NOM_CMP = 'DZ',    VALE_C = 0.00000E+00+0.00000E+00j, REFERENCE = 'ANALYTIQUE' ),
        ),);


FIN( )
#
