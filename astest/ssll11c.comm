# MODIF  DATE 30/07/2012   AUTEUR LEFEBVRE J-P.LEFEBVRE 
# TITRE TREILLIS DE BARRES ARTICULEES SOUS CHARGE PONCTUELLE
# ssll11c.para = tps_job 60 mem_job 256Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#       MODELE BARRE


DEBUT(CODE=_F(NOM='SSLL11C', NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'))

MAILLAGE=LIRE_MAILLAGE( )

MATERIAU=DEFI_MATERIAU( ELAS=_F(  RHO = 1.E04,  E = 1.962E11, NU = 0.3,
                                    AMOR_ALPHA = 0.1,  AMOR_BETA = 0.1))

CH_MATER=AFFE_MATERIAU(  MAILLAGE=MAILLAGE,
                             AFFE=_F(  TOUT = 'OUI', MATER = MATERIAU) )

MODELE=AFFE_MODELE(  MAILLAGE=MAILLAGE,
                           AFFE=_F(  TOUT = 'OUI', PHENOMENE = 'MECANIQUE',
                                  MODELISATION = 'BARRE') )

RAYON1=( 1.E-04 / pi ) ** 0.5

RAYON2=( 2.E-04 / pi ) ** 0.5

CARA_ELE=AFFE_CARA_ELEM(  MODELE=MODELE,BARRE=(
                              _F(  MAILLE = ( 'AC',  'CB', ),
                                      SECTION = 'CERCLE',
                                      CARA = 'R', VALE = RAYON2),
                                    _F(  MAILLE = ( 'CD',  'BD', ),
                                      SECTION = 'CERCLE',
                                      CARA = 'R', VALE = RAYON1)) )

CHARGE=AFFE_CHAR_MECA(  MODELE=MODELE,DDL_IMPO=(
                              _F(  TOUT = 'OUI',  DZ = 0.),
                                       _F(  NOEUD = ( 'A', 'B', ), DX = 0., DY = 0.)),
                              FORCE_NODALE=_F(  NOEUD = 'D', FY = -9810.) )

RIGI_ELE=CALC_MATR_ELEM(  MODELE=MODELE,   OPTION='RIGI_MECA',
                               CHAM_MATER=CH_MATER,  CARA_ELEM=CARA_ELE,
                               CHARGE=CHARGE                )

VECT_ELE=CALC_VECT_ELEM(  CHARGE=CHARGE, OPTION='CHAR_MECA' )

NUMEDDL=NUME_DDL(   MATR_RIGI=RIGI_ELE )

RIGIDITE=ASSE_MATRICE(  MATR_ELEM=RIGI_ELE,  NUME_DDL=NUMEDDL )

FORCE=ASSE_VECTEUR(  VECT_ELEM=VECT_ELE,  NUME_DDL=NUMEDDL )

RIGIDITE=FACTORISER(reuse=RIGIDITE,  MATR_ASSE=RIGIDITE )

FORCE=RESOUDRE(reuse=FORCE,  MATR=RIGIDITE,  CHAM_NO=FORCE )

TEST_RESU(CHAM_NO=(
            _F(  CHAM_GD = FORCE, CRITERE = 'RELATIF', PRECISION = 1.E-4,
              NOEUD = 'C',        NOM_CMP = 'DX',           VALE = 2.6517E-4, REFERENCE = 'ANALYTIQUE'),
            _F(  CHAM_GD = FORCE, CRITERE = 'RELATIF', PRECISION = 1.E-4,
              NOEUD = 'C',        NOM_CMP = 'DY',           VALE = 0.8839E-4, REFERENCE = 'ANALYTIQUE'),
            _F(  CHAM_GD = FORCE, CRITERE = 'RELATIF', PRECISION = 1.E-4,
              NOEUD = 'D',        NOM_CMP = 'DX',           VALE = 3.47902E-3, REFERENCE = 'ANALYTIQUE'),
            _F(  CHAM_GD = FORCE, CRITERE = 'RELATIF', PRECISION = 1.E-4,
              NOEUD = 'D',        NOM_CMP = 'DY',           VALE = -5.60084E-3, REFERENCE = 'ANALYTIQUE'))
             )

# =====================================================================
#                   C A L C U L    H A R M O N I Q U E
# =====================================================================


MACRO_MATR_ASSE(     MODELE=MODELE,          CHARGE=CHARGE,
                     CARA_ELEM=CARA_ELE,    CHAM_MATER=CH_MATER,
                      NUME_DDL=CO("NUM"),MATR_ASSE=(
                     _F(  MATRICE = CO("MATASSR"),  OPTION = 'RIGI_MECA'),
                               _F(  MATRICE = CO("MATASSM"),  OPTION = 'MASS_MECA'),
                               _F(  MATRICE = CO("MATASSC"),  OPTION = 'AMOR_MECA'))
                  )

VECTELE=CALC_VECT_ELEM(  CHARGE=CHARGE,      OPTION='CHAR_MECA' )

VECTASS=ASSE_VECTEUR(  VECT_ELEM=VECTELE,    NUME_DDL=NUM  )

# --------------------------------------------------------------------


DYNHARM=DYNA_VIBRA(TYPE_CALCUL='HARM',
                   BASE_CALCUL='PHYS',
                   MATR_MASS=MATASSM,
                   MATR_RIGI=MATASSR,
                   MATR_AMOR=MATASSC,
                   FREQ=100.,
                   TOUT_CHAM='OUI',
                   EXCIT=_F(COEF_MULT = 1.,
                            VECT_ASSE = VECTASS),);

DYNHARM=CALC_CHAMP(reuse=DYNHARM,RESULTAT=DYNHARM,CONTRAINTE=('EFGE_ELNO'))

TEST_RESU(RESU=(
     _F(  RESULTAT = DYNHARM,   NOM_CHAM = 'DEPL',  NOEUD = 'C',   NOM_CMP = 'DX',
       FREQ = 100.,      VALE_C = 4.0180557023514E-08-4.219877519542E-06j, REFERENCE = 'NON_REGRESSION', VERSION='3.5'),
     _F(  RESULTAT = DYNHARM,   NOM_CHAM = 'DEPL',  NOEUD = 'C',   NOM_CMP = 'DY',
       FREQ = 100.,      VALE_C = 1.6601939026346E-08-1.4065410208823E-06j, REFERENCE = 'NON_REGRESSION', VERSION='3.5'),
     _F(  RESULTAT = DYNHARM,   NOM_CHAM = 'DEPL',  NOEUD = 'D',   NOM_CMP = 'DX',
       FREQ = 100.,      VALE_C = 5.8126321672295E-07-5.5364337063597E-05j, REFERENCE = 'NON_REGRESSION', VERSION='3.5'),
     _F(  RESULTAT = DYNHARM,   NOM_CHAM = 'DEPL',  NOEUD = 'D',   NOM_CMP = 'DY',
       FREQ = 100.,      VALE_C = -9.7259000307554E-07+8.9121528618742E-05j, REFERENCE = 'NON_REGRESSION', VERSION='3.5'),

     _F(  RESULTAT = DYNHARM,   NOM_CHAM = 'VITE',  NOEUD = 'D',   NOM_CMP = 'DX',
       FREQ = 100.,      VALE_C = 0.034786438917973+3.6521845029176E-04j, REFERENCE = 'NON_REGRESSION', VERSION='3.5'),
     _F(  RESULTAT = DYNHARM,   NOM_CHAM = 'VITE',  NOEUD = 'D',   NOM_CMP = 'DY',
       FREQ = 100.,      VALE_C = -0.055996707917066-6.110963217234E-04j, REFERENCE = 'NON_REGRESSION', VERSION='3.5'),

     _F(  RESULTAT = DYNHARM,   NOM_CHAM = 'ACCE',  NOEUD = 'D',   NOM_CMP = 'DX',
       FREQ = 100.,      VALE_C = -0.22947352007841+21.856964189851j, REFERENCE = 'NON_REGRESSION', VERSION='3.5'),
     _F(  RESULTAT = DYNHARM,   NOM_CHAM = 'ACCE',  NOEUD = 'D',   NOM_CMP = 'DY',
       FREQ = 100.,      VALE_C = 0.38396314299240-35.183769243494j, REFERENCE = 'NON_REGRESSION', VERSION='3.5'),

     _F(  RESULTAT = DYNHARM,   NOM_CHAM = 'EFGE_ELNO',
       MAILLE = 'BD',   NOEUD = 'B',   NOM_CMP = 'N',
       FREQ = 100.,      VALE_C = -3.838915774118+331.15804915597j, REFERENCE = 'NON_REGRESSION', VERSION='3.5'),
     _F(  RESULTAT = DYNHARM,   NOM_CHAM = 'EFGE_ELNO',
       MAILLE = 'BD',   NOEUD = 'D',   NOM_CMP = 'N',
       FREQ = 100.,      VALE_C = -3.838915774118+331.15804915597j, REFERENCE = 'NON_REGRESSION', VERSION='3.5'),
           ) )

FIN( )
#
