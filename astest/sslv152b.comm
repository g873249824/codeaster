# MODIF  DATE 13/01/2011   AUTEUR PELLET J.PELLET 
# TITRE POUTRE CONSOLE 3D/PLAQUE
# sslv152b.para = tps_job 320 mem_job 284Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2011  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# ARLEQUIN : RACCORD 3D/PLAQUE INCOMPATIBLE.
#
# Loi de comportement elastoplastique
#
# VERSION 3D/PLAQUE DE SSNP141B

DEBUT(CODE=_F(NOM='SSLV152B',
              NIV_PUB_WEB='INTERNET',),
      DEBUG=_F(SDVERI='OUI',),);

#############################
# 1. Definition de constantes
#############################

p_force = -1.E6;

p_h = 1.0;

p_young = 2.E11;

p_b = 2.0;

p_l = 10.0;

inertie = p_b*p_h**3/12;

########################
# 2. Lecture du maillage
########################

MA_3D=LIRE_MAILLAGE(UNITE=20,
                    FORMAT='MED',);

MA_PLAQ=LIRE_MAILLAGE(UNITE=21,
                      FORMAT='MED',);

MAIL=ASSE_MAILLAGE(MAILLAGE_1=MA_3D,
                   MAILLAGE_2=MA_PLAQ,
                   OPERATION='SUPERPOSE',);

MAIL=DEFI_GROUP(reuse =MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=(_F(GROUP_MA='GM_BAS',),
                               _F(GROUP_MA='GM_HBADR',),),);

MOD=AFFE_MODELE(MAILLAGE=MAIL,
                AFFE=(_F(GROUP_MA=('GM_TOUT',),
                         PHENOMENE='MECANIQUE',
                         MODELISATION='3D',),
                      _F(GROUP_MA=('GM_PLAQ','GM_DROIT',),
                         PHENOMENE='MECANIQUE',
                         MODELISATION='DKT',),),);

CARA=AFFE_CARA_ELEM(MODELE=MOD,
                    COQUE=_F(GROUP_MA='GM_PLAQ',
                             EPAIS=p_h,),);

EFFORT=AFFE_CHAR_MECA(MODELE=MOD,
                      FORCE_ARETE=_F(GROUP_MA='GM_DROIT',
                                     FZ=p_force,),);

ENCAST=AFFE_CHAR_MECA(MODELE=MOD,
                      DDL_IMPO=_F(GROUP_MA='GM_ENCAS',
                                  LIAISON='ENCASTRE',),);

################################################
# 3. Creation des relations de couplage Arlequin
#    entre les groupes de mailles
#    GM_TOUT (maillage fin) et
#    GM_PLAQ  (maillage grossier)
#    Collage sur le modele grossier
################################################

ARLQ=AFFE_CHAR_MECA(MODELE=MOD,
                    ARLEQUIN=_F(GROUP_MA_1='GM_TOUT',
                                GROUP_MA_2='GM_PLAQ',
                                CARA_ELEM=CARA,
                                COLLAGE='GROUP_MA_2',
                                POIDS_FIN=0.9999,),);

####################
# COURBE DE TRACTION
####################

CTRAC=DEFI_FONCTION(NOM_PARA='EPSI',VALE=(0.0023333,480.2E+06,
                          0.01,480.35778E+06,
                          ),PROL_DROITE='LINEAIRE',PROL_GAUCHE='LINEAIRE',);

MA=DEFI_MATERIAU(ELAS=_F(E=p_young,
                         NU=0.3,),
                 TRACTION=_F(SIGM=CTRAC,),);

CHMATER=AFFE_MATERIAU(MAILLAGE=MAIL,
                      AFFE=_F(TOUT='OUI',
                              MATER=MA,),);

LIST=DEFI_LIST_REEL(DEBUT=0.0,
                    INTERVALLE=_F(JUSQU_A=3.0,
                                  NOMBRE=30,),);

RESU=STAT_NON_LINE(MODELE=MOD,
                   CHAM_MATER=CHMATER,
                   CARA_ELEM=CARA,
                   EXCIT=(_F(CHARGE=ARLQ,),
                          _F(CHARGE=EFFORT,),
                          _F(CHARGE=ENCAST,),),
                   COMP_INCR=_F(RELATION='VMIS_ISOT_TRAC',),
                   INCREMENT=_F(LIST_INST=LIST,),
                   NEWTON=_F(MATRICE='TANGENTE',
                             REAC_ITER=1,),);

##############################
# 4. Post-traitement du calcul
#    Tests de non-regression
#    uniquement
##############################

RESU=CALC_ELEM(reuse =RESU,
               RESULTAT=RESU,
               OPTION='SIEF_ELNO',);

RESU=CALC_NO(reuse =RESU,
             RESULTAT=RESU,
             OPTION='SIEF_NOEU',);

X = 9.5;

DPL_2D=POST_RELEVE_T(ACTION=_F(OPERATION='EXTRACTION',
                               INTITULE='DEPL_2D',
                               RESULTAT=RESU,
                               NOM_CHAM='DEPL',
                               INST=3.,
                               GROUP_NO='GM_BAS',
                               NOM_CMP='DZ',),);

TEST_TABLE(TABLE=DPL_2D,
           FILTRE=_F(NOM_PARA='COOR_X',
                     VALE=X,),
           NOM_PARA='DZ',
           VALE=-0.0175268100294,
           CRITERE='RELATIF',
           PRECISION=2.5e-06,
           REFERENCE='NON_REGRESSION',
           VERSION='10.00.19',);

SIXX_Z=POST_RELEVE_T(ACTION=_F(OPERATION='EXTRACTION',
                               INTITULE='SIXX',
                               RESULTAT=RESU,
                               NOM_CHAM='SIEF_NOEU',
                               INST=3.,
                               GROUP_NO='GM_HBADR',
                               NOM_CMP='SIXX',),);

Z = 0.833333;

TEST_TABLE(TABLE=SIXX_Z,
           FILTRE=_F(NOM_PARA='COOR_Z',
                     VALE=Z,),
           NOM_PARA='SIXX',
           VALE=2.6890097886830E+07,
           CRITERE='RELATIF',
           PRECISION=0.005,
           REFERENCE='NON_REGRESSION',
           VERSION='10.00.19',);

FIN();
