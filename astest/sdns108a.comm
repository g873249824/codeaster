# MODIF  DATE 10/10/2012   AUTEUR COURTOIS M.COURTOIS 
#  DATE   : 06/04/12
#  AUTEUR : F. LEBOUVIER (DeltaCAD)
#  TITRE  : REPONSE DYNAMIQUE D UNE DALLE EN BETON ARME (MODELE GLRC_DAMAGE)
# sdns108a.para = tps_job 800 mem_job 1024Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
#           APPUYEE SUR 4 COTES SOUMISE A UNE CHARGE CONCENTREE : 
#           REGIME PLAQUE ELASTO-PLASTIQUE
#
#  DETAILS : MODELISATION Q4GG
#            Mailles QUAD4


DEBUT(CODE=_F(NOM='SDNS108A',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))


# Carateristiques de la dalle
#----------------------------
EP = 0.12          # Epaisseur
AX = 7.854E-4      # Taux de ferraillage
AY = 7.854E-4      # Taux de ferraillage
R0 = 0.6333        # Distance normalisee du ferraillage par rapport au feuillet moyen

# Caracteristiques du beton
#--------------------------
EB   = 35700.E6    # Module d'Young
NUB  = 0.22        # Coefficient de poisson
RHOB = 2500.       # Masse volumique 

# Caracteristiques de l'acier (armatures)
#----------------------------------------
E  = 210000.E6;    # Module d'Young
NU = 0.3;          # Coefficient de poisson


MAIL=LIRE_MAILLAGE(FORMAT='MED');

MAIL=DEFI_GROUP(reuse =MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=(_F(GROUP_MA='LCONTY',),
                               _F(GROUP_MA='LCONTX',),
                               _F(GROUP_MA='LSYMX' ,),
                               _F(GROUP_MA='LSYMY' ,),),);

MOD=AFFE_MODELE(MAILLAGE=MAIL,
                AFFE=_F(TOUT          = 'OUI',
                        PHENOMENE     = 'MECANIQUE',
                        MODELISATION  = 'Q4GG',),);

MAT_B=DEFI_MATERIAU(             ELAS = _F( E    =  EB,
                                            NU   =  NUB,
                                            RHO  =  RHOB,),
                      BETON_ECRO_LINE = _F( D_SIGM_EPSI = 0.0,
                                            SYT   =   4.4E6,
                                            SYC   = -52.5E6,),);

MAT_A=DEFI_MATERIAU(       ELAS = _F( E    =  E,
                                      NU   =  0.,),
                           ECRO_LINE = _F( D_SIGM_EPSI = 0.0,
                                           SY          = 500.E6,),)

CPRG_1 = 1.0E6
CPRG_2 = 7.3E6
MAT = DEFI_GLRC(RELATION='GLRC_DAMAGE',
                BETON = _F(
                           MATER = MAT_B,
                           EPAIS = EP,
                           GAMMA = 0.,
                           QP1   = 0.5,     QP2   = 0.5,
                           BT1   = 1600.E6, BT2   = 1600.E6,

                           C1M1 = CPRG_1,C1M2 = CPRG_1,C1M3 = CPRG_1,
                           C2M1 = CPRG_1,C2M2 = CPRG_1,C2M3 = CPRG_1,
                           C1N1 = CPRG_2,C1N2 = CPRG_2,C1N3 = CPRG_2,
                           C2N1 = CPRG_2,C2N2 = CPRG_2,C2N3 = CPRG_2,
                           ),

                NAPPE = (_F( MATER =  MAT_A,
                             OMX   =  AX,
                             OMY   =  AY,
                             RX    =  R0,
                             RY    =  R0,),
                         _F( MATER =  MAT_A,
                             OMX   =  AX,
                             OMY   =  AY,
                             RX    = -R0,
                             RY    = -R0,)))

CHMAT=AFFE_MATERIAU(MAILLAGE=MAIL,
                    AFFE=_F(TOUT='OUI',
                            MATER=MAT,),);


CARA_ELE=AFFE_CARA_ELEM(MODELE=MOD,
                        COQUE=_F(GROUP_MA='DALLE',INER_ROTA='OUI',
                                 EPAIS=EP,
                                 ANGL_REP=(0.0,0.0,),),);


COND_LIM=AFFE_CHAR_MECA(MODELE=MOD,
                        DDL_IMPO=(_F(GROUP_NO=('LCONTX','LCONTY'),
                                      DZ=0.0,),
                                   _F(GROUP_NO='LSYMX',
                                      DY=0,
                                      DRX=0,),
                                   _F(GROUP_NO='LSYMY',
                                      DX=0,
                                      DRY=0.0,),),);

Force_Z=AFFE_CHAR_MECA(MODELE=MOD,
                    FORCE_NODALE=_F(GROUP_NO='Point_C',
                                   FZ=-2.20E5,),);

F_EVOL=DEFI_FONCTION(NOM_PARA='INST',VALE=(0.0,    0.0,
                                           0.001,  1.0,
                                           0.040,  1.0,
                                           0.041,  0.0,
                                           1.0,    0.0,

                           ),);

#-------------------------------------------------------------------------
# CALCUL IMPLICIT
#-------------------------------------------------------------------------
T_limite = 1.E-2

LIST=DEFI_LIST_REEL(DEBUT=0.0,
                     INTERVALLE=(_F(JUSQU_A=T_limite,PAS=5e-07,),))
LIST_ARC=DEFI_LIST_REEL(DEBUT=0.0,
                     INTERVALLE=(_F(JUSQU_A=T_limite,PAS=1e-06,),))


DYNA_AMO = DYNA_NON_LINE( MODELE = MOD,
                      CHAM_MATER = CHMAT,
                      MASS_DIAG='OUI',
                      CARA_ELEM  = CARA_ELE,
                      COMP_INCR  =_F(RELATION ='GLRC_DAMAGE',
                                     ITER_INTE_MAXI=100,),
                      INCREMENT  =_F(LIST_INST = LIST),
                      ARCHIVAGE  =_F(LIST_INST = LIST_ARC),
                      CONVERGENCE=_F(ITER_GLOB_MAXI=100,
                                     RESI_GLOB_RELA=1.E-6),
                      EXCIT=(_F(CHARGE=COND_LIM,),
                             _F(CHARGE=Force_Z,
                                FONC_MULT=F_EVOL),),
                      NEWTON=_F(MATRICE='TANGENTE',
                                REAC_ITER=1,
                                REAC_INCR=1,),
                      SCHEMA_TEMPS=_F(SCHEMA='DIFF_CENT',
                                      FORMULATION='ACCELERATION',),
                      );

DAMO_DEP=RECU_FONCTION(RESULTAT=DYNA_AMO,
                     NOM_CHAM='DEPL',
                     NOM_CMP='DZ',
                     GROUP_NO='Point_C',);

IMPR_FONCTION(COURBE=(_F(FONCTION=DAMO_DEP,),),);

# ------------------------------
# VERIFICATION DES DEPLACEMENTS
# ------------------------------

# INSTANT = 0.00934s
# EUROPLEXUS (Q4GS GLRC) t=0.0093436, DZ=-0.04890906

TEST_RESU(RESU=_F(NUME_ORDRE=9340,
                  GROUP_NO='Point_C',
                  REFERENCE='SOURCE_EXTERNE',
                  RESULTAT=DYNA_AMO,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DZ',
                  VALE_CALC=-0.046814246,
                  VALE_REFE=-0.048909059999999997,
                  CRITERE='RELATIF',
                  PRECISION=0.050000000000000003,),
          )

FIN();
