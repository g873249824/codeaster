# MODIF  DATE 10/10/2012   AUTEUR COURTOIS M.COURTOIS 
# TITRE validation de la commande AFFE_CHAR_MECA / LIAISON_SOLIDE + TRAN + ANGL_NAUT
# zzzz229a.para = tps_job 60 mem_job 256Mo ncpus 1 liste_test R
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# RESPONSABLE PELLET J.PELLET

#-------------------------------------------------------------------------------------
# description du test :
#----------------------
#  Le maillage est un simple carre [0,1]X[0,1]. Le point C est en (1,1)
#
#  On lui impose de rester "solide" et de subir :
#    - une rotation de 90 degres autour du point (0,1)
#    - puis une translation de vecteur (-1,1)
#
#  La solution analytique est evidente :
#    - le point C : (1,1) -> (1,1) + (-1,1) + (-1,1) = (-1,3)
#                         => deplacement de C : (-2,2)
#
#  Remarques :
#  -----------
#    * Si la rotation est nulle, on peut faire la meme chose avec DDL_IMPO
#    * Si la rotation est forte :
#         le "solide" n'est vraiment pas deforme mais les contraintes ne sont
#         pas forcement nulles (hypothese des petites transformations par defaut)
#---------------------------------------------------------------------------------------


DEBUT(  CODE=_F(NOM='ZZZZ229A',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))
MA=LIRE_MAILLAGE(FORMAT='MED',)
DEFI_GROUP(reuse=MA, MAILLAGE=MA, CREA_GROUP_NO=_F(TOUT_GROUP_MA='OUI',))

MO=AFFE_MODELE(MAILLAGE=MA, AFFE=_F( TOUT = 'OUI',  PHENOMENE = 'MECANIQUE', MODELISATION = 'D_PLAN') )

MAT=DEFI_MATERIAU( ELAS=_F( E = 1.E+05,  NU = 0.3, RHO=9800.)  )
CHAM_MAT=AFFE_MATERIAU(MAILLAGE=MA,  AFFE=_F( TOUT = 'OUI', MATER = MAT) )


CHAR1=AFFE_CHAR_MECA( MODELE=MO, LIAISON_SOLIDE= _F(GROUP_MA = 'ABCD',
          CENTRE=(0,1), ANGL_NAUT=(90,), TRAN=(-1.,1.)))

RESU0=MECA_STATIQUE( MODELE=MO, CHAM_MATER=CHAM_MAT, EXCIT=( _F(CHARGE = CHAR1),), OPTION='SANS')
#CALC_CHAMP(reuse=RESU0, RESULTAT=RESU0, OPTION='SIGM_ELNO')

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  GROUP_NO='C',
                  REFERENCE='ANALYTIQUE',
                  RESULTAT=RESU0,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DX',
                  VALE_CALC=-2.000000000,
                  VALE_REFE=-2.0,),
          )

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  GROUP_NO='C',
                  REFERENCE='ANALYTIQUE',
                  RESULTAT=RESU0,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DY',
                  VALE_CALC=2.000000000,
                  VALE_REFE=2.0,),
          )

#IMPR_RESU(RESU=_F(RESULTAT=RESU0))
#IMPR_RESU(FORMAT='CASTEM',RESU=_F(RESULTAT=RESU0, MAILLAGE=MA)) # pour visualisation

FIN();
