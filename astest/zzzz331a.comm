# MODIF  DATE 04/02/2013   AUTEUR FLEJOU J-L.FLEJOU 
#
# TITRE VALIDATION DES CARACTERISTIQUES DE COQUES/GRILLE FONCTION DE L'ESPACE
# zzzz331a.para = tps_job 60 mem_job 256Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2013  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#
DEBUT(CODE=_F(NOM='ZZZZ331A',NIV_PUB_WEB='INTERNET'), DEBUG=_F(SDVERI='OUI'), )

mail=LIRE_MAILLAGE(UNITE=17, FORMAT='MED',)

modelco=AFFE_MODELE(
   MAILLAGE=mail,
   AFFE=_F(GROUP_MA='surfco', PHENOMENE='MECANIQUE', MODELISATION='DKT',),
)

modelgr=AFFE_MODELE(
   MAILLAGE=mail,
   AFFE=_F(GROUP_MA='surfgr', PHENOMENE='MECANIQUE', MODELISATION='GRILLE_EXCENTRE',),
)

model=AFFE_MODELE(
   MAILLAGE=mail,
   AFFE=(
      _F(GROUP_MA='surfco', PHENOMENE='MECANIQUE', MODELISATION='DKT',),
      _F(GROUP_MA='surfgr', PHENOMENE='MECANIQUE', MODELISATION='GRILLE_EXCENTRE',),
   ),
)

# Coques
epais = FORMULE(VALE='0.001*Z', NOM_PARA=('X','Y','Z',),);
decal = FORMULE(VALE='0.002*Z', NOM_PARA=('X','Y','Z',),);
# Grilles
section = FORMULE(VALE='0.001*Z+0.001*X*Y', NOM_PARA=('X','Y','Z',),);
excent  = FORMULE(VALE='0.002*(Z+X+Y)',     NOM_PARA=('X','Y','Z',),);

caraco=AFFE_CARA_ELEM(MODELE=modelco,
   COQUE=_F(GROUP_MA='surfco', EPAIS_FO=epais, EXCENTREMENT_FO=decal, INER_ROTA='OUI',),
)

caragr=AFFE_CARA_ELEM(MODELE=modelgr,
   GRILLE=_F(GROUP_MA='surfgr', SECTION_FO=section, EXCENTREMENT_FO=excent,),
)

carael=AFFE_CARA_ELEM(MODELE=model,INFO=2,
   COQUE= _F(GROUP_MA='surfco', EPAIS_FO  =epais,   EXCENTREMENT_FO=decal, INER_ROTA='OUI',),
   GRILLE=_F(GROUP_MA='surfgr', SECTION_FO=section, EXCENTREMENT_FO=excent,),
)


# Pour vérifier qu'en croisant les _FO cela fonctionne
caco01=AFFE_CARA_ELEM(MODELE=modelco,
   COQUE=_F(GROUP_MA='surfco', EPAIS_FO=epais, EXCENTREMENT=0.123, INER_ROTA='OUI',),
)
caco02=AFFE_CARA_ELEM(MODELE=modelco,
   COQUE=_F(GROUP_MA='surfco', EPAIS=0.123, EXCENTREMENT_FO=decal, INER_ROTA='OUI',),
)
cagr01=AFFE_CARA_ELEM(MODELE=modelgr,
   GRILLE=_F(GROUP_MA='surfgr', SECTION_FO=section, EXCENTREMENT=0.456,),
)
cagr02=AFFE_CARA_ELEM(MODELE=modelgr,
   GRILLE=_F(GROUP_MA='surfgr', SECTION=0.456, EXCENTREMENT_FO=excent,),
)


cael01=AFFE_CARA_ELEM(MODELE=model,
   COQUE= _F(GROUP_MA='surfco', EPAIS_FO  =epais,   EXCENTREMENT=0.123, INER_ROTA='OUI',),
   GRILLE=_F(GROUP_MA='surfgr', SECTION_FO=section, EXCENTREMENT=0.456,),
)
cael02=AFFE_CARA_ELEM(MODELE=model,
   COQUE= _F(GROUP_MA='surfco', EPAIS     =0.123,   EXCENTREMENT_FO=decal, INER_ROTA='OUI',),
   GRILLE=_F(GROUP_MA='surfgr', SECTION   =0.456,   EXCENTREMENT_FO=excent,),
)
cael03=AFFE_CARA_ELEM(MODELE=model,
   COQUE= _F(GROUP_MA='surfco', EPAIS_FO  =epais,   EXCENTREMENT   =0.123, INER_ROTA='OUI',),
   GRILLE=_F(GROUP_MA='surfgr', SECTION   =0.456,   EXCENTREMENT_FO=excent,),
)
cael04=AFFE_CARA_ELEM(MODELE=model,
   COQUE= _F(GROUP_MA='surfco', EPAIS     =0.123,   EXCENTREMENT_FO=decal, INER_ROTA='OUI',),
   GRILLE=_F(GROUP_MA='surfgr', SECTION_FO=section, EXCENTREMENT   =0.456,),
)
cael05=AFFE_CARA_ELEM(MODELE=model,
   COQUE= _F(GROUP_MA='surfco', EPAIS  =0.123,   EXCENTREMENT=0.123, INER_ROTA='OUI',),
   GRILLE=_F(GROUP_MA='surfgr', SECTION=0.456,   EXCENTREMENT=0.456,),
)


"""
IMPR_CO(CONCEPT=( _F(NOM=caraco,), _F(NOM=caragr,), _F(NOM=carael,),), NIVEAU=-1,)
IMPR_CO(CONCEPT=( _F(NOM=caco01,), _F(NOM=caco02,), _F(NOM=cagr01,),
                  _F(NOM=cagr02,),), NIVEAU=-1,)
IMPR_CO(CONCEPT=( _F(NOM=cael01,), _F(NOM=cael02,), _F(NOM=cael03,),
                  _F(NOM=cael04,),_F(NOM=cael05,),), NIVEAU=-1,)
"""

IMPR_CO(UNITE= 41, CONCEPT=(  _F(NOM=caraco,), _F(NOM=caragr,), _F(NOM=carael,),), NIVEAU=-1,)
TEST_FICHIER(FICHIER='./fort.41',NB_VALE=98,VALE_CALC=4.3262272811951E+06)

IMPR_CO(UNITE= 42, CONCEPT=(  _F(NOM=caco01,), _F(NOM=caco02,), _F(NOM=cagr01,),
                              _F(NOM=cagr02,),), NIVEAU=-1,)
TEST_FICHIER(FICHIER='./fort.42',NB_VALE=156,VALE_CALC=4.2168309363052E+06)

IMPR_CO(UNITE= 43, CONCEPT=(  _F(NOM=cael01,), _F(NOM=cael02,), _F(NOM=cael03,),
                              _F(NOM=cael04,),_F(NOM=cael05,),), NIVEAU=-1,)
TEST_FICHIER(FICHIER='./fort.43',NB_VALE=235,VALE_CALC=9.013357767287E+06)

"""
IMPR_RESU(FORMAT='MED',UNITE=82, CONCEPT=_F(CARA_ELEM=carael,), )
"""
FIN()
