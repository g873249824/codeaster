# MODIF  DATE 30/07/2012   AUTEUR LEFEBVRE J-P.LEFEBVRE 
# TITRE SOUS-STRUCTURATION DYNAMIQUE : PLAQUE MINCE APPUYEE SUR SES BORDS
# perf006a.para = tps_job 500 mem_job 1024Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#    INTERET : MESURER LES PERFORMANCES DE LA SOUS-STRUCTURATION DYNAMIQUE
#----------------------------------------------------------------------------------------
# MODELISATION B : ON NE MAILLE QU' 1/4 DE LA PLAQUE, ON FAIT DE LA SOUS-TRUCTURATION
#-----------------------------------------------------------------------------------------

DEBUT(CODE=_F(NOM='PERF006A',NIV_PUB_WEB='INTERNET'))

MAILLA=LIRE_MAILLAGE(FORMAT='MED')

MODELE=AFFE_MODELE(MAILLAGE=MAILLA,
            AFFE=_F(GROUP_MA='CALCUL', PHENOMENE='MECANIQUE', MODELISATION='DKT'));


MATER=DEFI_MATERIAU(ELAS=_F(E=2.1E11, NU=0.30, RHO=7800.0));



CHAMPMAT=AFFE_MATERIAU(MAILLAGE=MAILLA, AFFE=_F(GROUP_MA='CALCUL', MATER=MATER));

CARELE=AFFE_CARA_ELEM(MODELE=MODELE, COQUE=_F(GROUP_MA='CALCUL', EPAIS=0.1));

########################################################################
#
#        PLAQUE APPUYEE SUR SES BORDS, DECOUPEE EN 4 PARTIES
#   SOUS-STRUCTURATION CLASSIQUE - INTERFACES TYPE CRAIG-BAMPTON
########################################################################


# SOUS-STRUCTURE ENCASTREE - INTERFACE TYPE CRAIG-BAMPTON

CHARGE=AFFE_CHAR_MECA(MODELE=MODELE,
                      DDL_IMPO=(_F(GROUP_NO='DROITE',
                                   DX=0.0,
                                   DY=0.0,
                                   DZ=0.0,
                                   DRX=0.0,
                                   DRY=0.0,
                                   DRZ=0.0),
                                _F(GROUP_NO='GAUCHE',
                                   DX=0.0,
                                   DY=0.0,
                                   DZ=0.0,
                                   DRX=0.0,
                                   DRY=0.0,
                                   DRZ=0.0),
                                _F(GROUP_NO='APPUI_1',
                                   DX=0.0,
                                   DY=0.0,
                                   DZ=0.0),
                                _F(GROUP_NO='APPUI_2',
                                   DX=0.0,
                                   DY=0.0,
                                   DZ=0.0)));

#

MERIME=CALC_MATR_ELEM(OPTION='RIGI_MECA',
                      MODELE=MODELE,
                      CHAM_MATER=CHAMPMAT,
                      CARA_ELEM=CARELE,
                      CHARGE=CHARGE);

#

MEMAME=CALC_MATR_ELEM(OPTION='MASS_MECA',
                      MODELE=MODELE,
                      CHAM_MATER=CHAMPMAT,
                      CARA_ELEM=CARELE,
                      CHARGE=CHARGE);

#

NUMDDL=NUME_DDL(MATR_RIGI=MERIME);

#

RAIDASS=ASSE_MATRICE(MATR_ELEM=MERIME,
                     NUME_DDL=NUMDDL);

#

MASSASS=ASSE_MATRICE(MATR_ELEM=MEMAME,
                     NUME_DDL=NUMDDL);

#

MODES=MODE_ITER_SIMULT(MATR_A=RAIDASS,
                       MATR_B=MASSASS,
                       VERI_MODE=_F(PREC_SHIFT=5.0E-3,
                                      STOP_ERREUR='OUI',
                                      STURM='OUI',
                                      SEUIL=5E-04),
                       CALC_FREQ=_F(OPTION='PLUS_PETITE',
                                    NMAX_FREQ=12));

#
#  DEFINITION DES INTERFACES

LINT_CL=DEFI_INTERF_DYNA(NUME_DDL=NUMDDL,
                         INTERFACE=(_F(NOM='DROITE',
                                       TYPE='CRAIGB',
                                       GROUP_NO='DROITE'),
                                    _F(NOM='GAUCHE',
                                       TYPE='CRAIGB',
                                       GROUP_NO='GAUCHE')));

#
#  CALCUL DE LA BASE MODALE DES SOUS-STRUCTURES

BAMO_CL=DEFI_BASE_MODALE(CLASSIQUE=_F(INTERF_DYNA=LINT_CL,
                                      MODE_MECA=MODES,
                                      NMAX_MODE=10));

#
#  CALCUL DU MACRO-ELEMENT

MAC_EL=MACR_ELEM_DYNA(BASE_MODALE=BAMO_CL);

#
#
#   CALCUL SUR MODELE GENERALISE

MODEGE=DEFI_MODELE_GENE(SOUS_STRUC=(_F(NOM='M_EL1',
                                       MACR_ELEM_DYNA=MAC_EL,
                                       ANGL_NAUT = (0., 0., 0.),
                                       TRANS=(0.,0.,0.)),
                                    _F(NOM='M_EL2',
                                       MACR_ELEM_DYNA=MAC_EL,
                                       ANGL_NAUT=(90.,0.,0.),
                                       TRANS=(0.,0.,0.)),
                                    _F(NOM='M_EL3',
                                       MACR_ELEM_DYNA=MAC_EL,
                                       ANGL_NAUT=(180.,0.,0.),
                                       TRANS=(0.,0.,0.)),
                                    _F(NOM='M_EL4',
                                       MACR_ELEM_DYNA=MAC_EL,
                                       ANGL_NAUT=(270.,0.,0.),
                                       TRANS=(0.,0.,0.))),
                        LIAISON=(_F(SOUS_STRUC_1='M_EL1',
                                    INTERFACE_1='GAUCHE',
                                    SOUS_STRUC_2='M_EL2',
                                    INTERFACE_2='DROITE'),
                                 _F(SOUS_STRUC_1='M_EL2',
                                    INTERFACE_1='GAUCHE',
                                    SOUS_STRUC_2='M_EL3',
                                    INTERFACE_2='DROITE'),
                                 _F(SOUS_STRUC_1='M_EL3',
                                    INTERFACE_1='GAUCHE',
                                    SOUS_STRUC_2='M_EL4',
                                    INTERFACE_2='DROITE'),
                                 _F(SOUS_STRUC_1='M_EL4',
                                    INTERFACE_1='GAUCHE',
                                    SOUS_STRUC_2='M_EL1',
                                    INTERFACE_2='DROITE')),
                        VERIF=_F(PRECISION=1.E-3,
                                 CRITERE='RELATIF'));

#
#  NUMEROTATION DU PROBLEME GENERALISE

NUMEGE=NUME_DDL_GENE(MODELE_GENE=MODEGE);

#
#  ASSEMBLAGE DES MATRICES RAIDEUR ET MASSE

MASGEN=ASSE_MATR_GENE(NUME_DDL_GENE=NUMEGE,
                      OPTION='MASS_GENE');

#

RIGGEN=ASSE_MATR_GENE(NUME_DDL_GENE=NUMEGE,
                      OPTION='RIGI_GENE');

#
#   CALCUL DES MODES PROPRES DE LA STRUCTURE GLOBALE

RESGEN=MODE_ITER_SIMULT(MATR_A=RIGGEN,
                        MATR_B=MASGEN,
                        VERI_MODE=_F(PREC_SHIFT=5.0E-3,
                                      STOP_ERREUR='OUI',
                                      STURM='OUI',
                                      SEUIL=5E-04),
                       SOLVEUR=_F(METHODE='MUMPS',NPREC=9,PCENT_PIVOT=20),
                        CALC_FREQ=_F(OPTION='PLUS_PETITE',
                                     NMAX_FREQ=12));


TEST_RESU(RESU=
       _F( RESULTAT = RESGEN, PARA = 'FREQ', CRITERE = 'RELATIF',
           PRECISION = 5.E-4, NUME_ORDRE = 5, VALE = 8.28, REFERENCE = 'AUTRE_ASTER'))


FIN();
