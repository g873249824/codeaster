# MODIF  DATE 07/02/2012   AUTEUR PELLET J.PELLET 
# TITRE ETUDE:  ESSAI OEDOMETRIQUE NON-DRAINE (MECA PUR) AVEC LA LOI DE CAMCLAY
# ssnv202a.para = tps_job 60 mem_job 60Mo ncpus 1 liste_test S
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# PRESSION DE CONSOLITDATION PCO = 10KPA


DEBUT(CODE=_F(NOM='SSNV202A',NIV_PUB_WEB='INTERNET',VISU_EFICAS='NON'),DEBUG=_F(SDVERI='OUI'))


# PROPRIETES MECANIQUES
E    = 1.2*6.E5 ;
NU   = 0.3      ;
mu = 276923.      ;
RHO  = 1900.    ;


# PROPRIETES ANELASTIQUES (CAMCLAY)
E0     = 2.   ;  # INDICE DES VIDES INITIAL (CORRESPONDANT A PCO)
PATM   = 1.E2 ;
PCO    = 1.E4 ;  # PRESSION DE PRECONSOLIDATION ISOTROPE
M      = 1.02 ;  # CORRESPOND A UN ANGLE DE FROTTEMENT DE 25.85 DEGRES
PCR    = PCO/2. ;       # PRESSION CRITIQUE
N      = E0 /(1.+E0) ;  # POROSITE
KAPA   = 0.05 ;
LAMBD  = 0.2  ;


#    =================
#    MAILLAGE + MODELE
#    =================


MAILLAGE=LIRE_MAILLAGE(FORMAT='MED',);

MODELE=AFFE_MODELE(MAILLAGE=MAILLAGE,
                   AFFE=_F(TOUT = 'OUI',
                           PHENOMENE = 'MECANIQUE',
                           MODELISATION = '3D'));

MAILLAGE=MODI_MAILLAGE(reuse=MAILLAGE,
                       MAILLAGE=MAILLAGE,
                       ORIE_PEAU_3D=_F(GROUP_MA = ('HAUT', 'DEVANT', 'DROITE')));

MAILLAGE = DEFI_GROUP(reuse= MAILLAGE,
                      MAILLAGE=MAILLAGE,
                      CREA_GROUP_MA=_F(NOM='ROCHE',TOUT='OUI'),
                      CREA_GROUP_NO=_F(GROUP_MA='ROCHE'));

SOL=DEFI_MATERIAU(ELAS=_F(E=E,
                          NU=NU,
                          RHO=RHO,
                          ALPHA=0.),
                  CAM_CLAY=_F(MU        =mu,
                              PORO      = N,
                              LAMBDA    = LAMBD,
                              KAPA      = KAPA,
                              M         = M,
                              PRES_CRIT = PCR,
                              KCAM        = 0.,
                              PTRAC       =0.));

CHMAT=AFFE_MATERIAU(MAILLAGE=MAILLAGE,
                    AFFE=_F(TOUT='OUI', MATER=SOL));

DEP_LATE=AFFE_CHAR_MECA(MODELE=MODELE,
                        FACE_IMPO=(_F(GROUP_MA = 'DEVANT', DX = 0.),
                                   _F(GROUP_MA = 'DROITE', DY = 0.)));

DEP_SYM=AFFE_CHAR_MECA(MODELE=MODELE,
                       FACE_IMPO=(_F(GROUP_MA = 'BAS'     , DZ=0.),
                                  _F(GROUP_MA = 'DERRIERE', DX=0.),
                                  _F(GROUP_MA = 'GAUCHE'  , DY=0.)));

TAN=DEFI_LIST_REEL(DEBUT=0.,
                   INTERVALLE=(_F(JUSQU_A = 1. , NOMBRE = 50),
                               _F(JUSQU_A = 2. , NOMBRE = 10),
                               _F(JUSQU_A = 10., NOMBRE = 10)));

SIEF=CREA_CHAMP(TYPE_CHAM='ELGA_SIEF_R',
                OPERATION='AFFE',
                MODELE=MODELE,
                PROL_ZERO='OUI',
                AFFE=_F(TOUT    = 'OUI',
                        NOM_CMP = ('SIXX','SIYY','SIZZ'),
                        VALE    = (-PCO,-PCO,-PCO)));


#   ====================
#   CALCUL QUASISTATIQUE
#   ====================


DEP_V=AFFE_CHAR_MECA(MODELE=MODELE,
                     FACE_IMPO=_F(GROUP_MA = 'HAUT',DZ = 1.));

EVOL_DEV=DEFI_FONCTION(NOM_PARA='INST',
                       PROL_DROITE='LINEAIRE',
                       PROL_GAUCHE='CONSTANT',
                       VALE=(0. ,  0.     ,
                             1. , -1.E-2  ,
                             2. , -2.E-02 ,
                             10., -10.E-02));

U1=STAT_NON_LINE(MODELE=MODELE,
                 CHAM_MATER=CHMAT,
                 EXCIT=(_F(CHARGE = DEP_SYM),
                        _F(CHARGE = DEP_LATE),
                        _F(CHARGE = DEP_V,
                           FONC_MULT = EVOL_DEV)),
                 COMP_INCR=_F(RELATION = 'CAM_CLAY'),
                 ETAT_INIT=_F(SIGM=SIEF),
                 INCREMENT=_F(LIST_INST    = TAN,
                              INST_FIN     = 10.,),
                 NEWTON=_F(MATRICE   = 'TANGENTE',
                           REAC_ITER = 1),
                 CONVERGENCE=_F(RESI_GLOB_RELA = 1.E-6,
                                ITER_GLOB_MAXI = 10));

U1=CALC_ELEM(reuse=U1,
             OPTION=('VARI_ELNO','EPSI_ELNO'),
             RESULTAT=U1);

TAB_VARI=POST_RELEVE_T(ACTION=_F(INTITULE='VARI_NOEU',
                                 NOEUD='NO8',
                                 RESULTAT=U1,
                                 NOM_CHAM='VARI_ELNO',
                                 NOM_CMP=('V1','V3','V4','V5','V6','V7'),
                                 OPERATION='EXTRACTION'));

TAB_EPSZ=POST_RELEVE_T(ACTION=_F(INTITULE='EPSI_ELNO',
                                 NOEUD='NO8',
                                 RESULTAT=U1,
                                 NOM_CHAM='EPSI_ELNO',
                                 NOM_CMP='EPZZ',
                                 OPERATION='EXTRACTION'));

TAB_VARI=CALC_TABLE(reuse=TAB_VARI,
                    TABLE=TAB_VARI,
                    ACTION=_F(OPERATION='COMB',
                              TABLE=TAB_EPSZ,
                              NOM_PARA='INST'));


# TEST DE LA CONTRAINTE VOLUMIQUE PAR RAPPORT AUX REFERENCES FLAQ
TEST_TABLE(TABLE=TAB_VARI,
           NOM_PARA='V3',
           VALE=10070.,
           PRECISION=0.01,
           CRITERE='RELATIF',
           REFERENCE='SOURCE_EXTERNE',
           FILTRE=_F(NOM_PARA='EPZZ',
                     VALE=-0.001,
                     PRECISION=.00009,
                     CRITERE='ABSOLU'));

TEST_TABLE(TABLE=TAB_VARI,
           NOM_PARA='V3',
           VALE=10500.,
           PRECISION=0.01,
           CRITERE='RELATIF',
           REFERENCE='SOURCE_EXTERNE',
           FILTRE=_F(NOM_PARA='EPZZ',
                     VALE=-0.005,
                     PRECISION=.00009,
                     CRITERE='ABSOLU'));

TEST_TABLE(TABLE=TAB_VARI,
           NOM_PARA='V3',
           VALE=11010.,
           PRECISION=0.01,
           CRITERE='RELATIF',
           REFERENCE='SOURCE_EXTERNE',
           FILTRE=_F(NOM_PARA='EPZZ',
                     VALE=-0.01,
                     PRECISION=.00009,
                     CRITERE='ABSOLU'));

TEST_TABLE(TABLE=TAB_VARI,
           NOM_PARA='V3',
           VALE=12480.,
           PRECISION=0.01,
           CRITERE='RELATIF',
           REFERENCE='SOURCE_EXTERNE',
           FILTRE=_F(NOM_PARA='EPZZ',
                     VALE=-0.02,
                     PRECISION=.00009,
                     CRITERE='ABSOLU'));

TEST_TABLE(TABLE=TAB_VARI,
           NOM_PARA='V3',
           VALE=41840.,
           PRECISION=0.01,
           CRITERE='RELATIF',
           REFERENCE='SOURCE_EXTERNE',
           FILTRE=_F(NOM_PARA='EPZZ',
                     VALE=-0.1,
                     PRECISION=.00009,
                     CRITERE='ABSOLU'));


# TEST DE LA NORME DU DEVIATEUR DES CONTRAINTES PAR RAPPORT AUX REFERENCES FLAQ
TEST_TABLE(TABLE=TAB_VARI,
           NOM_PARA='V4',
           VALE=521.,
           PRECISION=0.015,
           CRITERE='RELATIF',
           REFERENCE='SOURCE_EXTERNE',
           FILTRE=_F(NOM_PARA='EPZZ',
                     VALE=-0.001,
                     PRECISION=.00009,
                     CRITERE='ABSOLU'));

TEST_TABLE(TABLE=TAB_VARI,
           NOM_PARA='V4',
           VALE=2016.,
           PRECISION=0.01,
           CRITERE='RELATIF',
           REFERENCE='SOURCE_EXTERNE',
           FILTRE=_F(NOM_PARA='EPZZ',
                     VALE=-0.005,
                     PRECISION=.00009,
                     CRITERE='ABSOLU'));

TEST_TABLE(TABLE=TAB_VARI,
           NOM_PARA='V4',
           VALE=3068.,
           PRECISION=0.01,
           CRITERE='RELATIF',
           REFERENCE='SOURCE_EXTERNE',
           FILTRE=_F(NOM_PARA='EPZZ',
                     VALE=-0.01,
                     PRECISION=.00009,
                     CRITERE='ABSOLU'));

TEST_TABLE(TABLE=TAB_VARI,
           NOM_PARA='V4',
           VALE=4219.,
           PRECISION=0.01,
           CRITERE='RELATIF',
           REFERENCE='SOURCE_EXTERNE',
           FILTRE=_F(NOM_PARA='EPZZ',
                     VALE=-0.02,
                     PRECISION=.00009,
                     CRITERE='ABSOLU'));

TEST_TABLE(TABLE=TAB_VARI,
           NOM_PARA='V4',
           VALE=13020.,
           PRECISION=0.01,
           CRITERE='RELATIF',
           REFERENCE='SOURCE_EXTERNE',
           FILTRE=_F(NOM_PARA='EPZZ',
                     VALE=-0.1,
                     PRECISION=.00009,
                     CRITERE='ABSOLU'));


# TEST DE L'INDICE DES VIDES PAR RAPPORT AUX REFERENCES GEFDYN
TEST_TABLE(TABLE=TAB_VARI,
           NOM_PARA='V7',
           VALE=1.997,
           PRECISION=0.001,
           CRITERE='RELATIF',
           REFERENCE='SOURCE_EXTERNE',
           FILTRE=_F(NOM_PARA='EPZZ',
                     VALE=-0.001,
                     PRECISION=.00009,
                     CRITERE='ABSOLU'));

TEST_TABLE(TABLE=TAB_VARI,
           NOM_PARA='V7',
           VALE=1.985,
           PRECISION=0.001,
           CRITERE='RELATIF',
           REFERENCE='SOURCE_EXTERNE',
           FILTRE=_F(NOM_PARA='EPZZ',
                     VALE=-0.005,
                     PRECISION=.00009,
                     CRITERE='ABSOLU'));

TEST_TABLE(TABLE=TAB_VARI,
           NOM_PARA='V7',
           VALE=1.970,
           PRECISION=0.001,
           CRITERE='RELATIF',
           REFERENCE='SOURCE_EXTERNE',
           FILTRE=_F(NOM_PARA='EPZZ',
                     VALE=-0.01,
                     PRECISION=.00009,
                     CRITERE='ABSOLU'));

TEST_TABLE(TABLE=TAB_VARI,
           NOM_PARA='V7',
           VALE=1.940,
           PRECISION=0.001,
           CRITERE='RELATIF',
           REFERENCE='SOURCE_EXTERNE',
           FILTRE=_F(NOM_PARA='EPZZ',
                     VALE=-0.02,
                     PRECISION=.00009,
                     CRITERE='ABSOLU'));

TEST_TABLE(TABLE=TAB_VARI,
           NOM_PARA='V7',
           VALE=1.700,
           PRECISION=0.001,
           CRITERE='RELATIF',
           REFERENCE='SOURCE_EXTERNE',
           FILTRE=_F(NOM_PARA='EPZZ',
                     VALE=-0.1,
                     PRECISION=.00009,
                     CRITERE='ABSOLU'));

FIN () ;
