# MODIF  DATE 27/10/2009   AUTEUR SELLENET N.SELLENET 
# TITRE CALCUL ELASTO-PLASTIQUE D'UN ANNEAU CREUX SOUMIS A UNE PRESSION INTERIEURE
# perf004c.para = tps_job 3700 mem_job 580Mo ncpus 1 liste_test P
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2008  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#       INTERET : MESURER LES PERFORMANCES D'UN CALCUL ELASTO-PLASTIQUE 3D
#---------------------------------------------------------------------------

DEBUT(CODE=_F(NOM='PERF004C',NIV_PUB_WEB='INTERNET'),MEMOIRE=_F(DYNAMIQUE=400,))

MA=LIRE_MAILLAGE(FORMAT='MED')

MA = MODI_MAILLAGE( reuse=MA,  MAILLAGE=MA, ORIE_PEAU_3D=_F(GROUP_MA = ('P1')))

MO=AFFE_MODELE(MAILLAGE=MA,
         AFFE=_F(TOUT='OUI', PHENOMENE='MECANIQUE', MODELISATION='3D') )


MAT1=DEFI_MATERIAU(ELAS=_F(E= 5.E11, NU=0.3, RHO=9800. ),
                   ECRO_LINE=_F(D_SIGM_EPSI=1.0E4, SY=1.0E9,),
                  )


CHMAT=AFFE_MATERIAU(MAILLAGE=MA, AFFE=_F(TOUT='OUI',MATER=MAT1))

CHAR1=AFFE_CHAR_MECA(MODELE=MO,
        PRES_REP=_F(  GROUP_MA = 'P1',  PRES = 2.E6) ,
        DDL_IMPO=(_F(GROUP_NO=('A',), DX=0., DY=0., DZ=0.,),
                  _F(GROUP_NO=('A2'), DY=0., DZ=0.,),
                  _F(GROUP_NO=('X1'), DZ=0.),
        ))

RAMPE=DEFI_FONCTION(NOM_PARA='INST', VALE=(0., 0., 20., 20.))
LINST1=DEFI_LIST_REEL(DEBUT=0.,
         INTERVALLE=(_F(JUSQU_A = 9.0,  NOMBRE = 1),
                     _F(JUSQU_A = 10.0, NOMBRE = 4),
                    )
         )


RESU=STAT_NON_LINE( MODELE=MO, CHAM_MATER=CHMAT, INFO=1,
             SOLVEUR=_F(NPREC=9),
             EXCIT=( _F(CHARGE = CHAR1, FONC_MULT=RAMPE),),
             INCREMENT=_F(LIST_INST = LINST1, ),
             #COMP_INCR=_F(  RELATION = 'ELAS'),
             COMP_INCR=_F(RELATION='VMIS_ISOT_LINE',),
             NEWTON=_F(  MATRICE = 'TANGENTE', REAC_ITER = 1),
             #RECH_LINEAIRE=_F( ITER_LINE_MAXI = 10),
             CONVERGENCE=_F(ARRET='OUI',
                            ITER_GLOB_MAXI=20,
                            ITER_GLOB_ELAS=25),
             )

TEST_RESU(RESU=(_F( RESULTAT = RESU,  NOM_CHAM='DEPL', GROUP_NO='X2', NOM_CMP='DZ',
                    CRITERE = 'RELATIF',  NUME_ORDRE = 3,
                    REFERENCE='NON_REGRESSION', VALE = 5.5E-3,  PRECISION = 2.E-2,)))

if 0 :
    # pour faire une belle image :
    RESU=CALC_ELEM(reuse =RESU, RESULTAT=RESU,
               OPTION=('SIEF_ELNO_ELGA','EQUI_ELNO_SIGM','VARI_ELNO_ELGA',),)

    RESU=CALC_NO(reuse =RESU, RESULTAT=RESU, OPTION=('EQUI_NOEU_SIGM','VARI_NOEU_ELGA'),);

    IMPR_RESU(FORMAT='CASTEM', UNITE=38,
              RESU=_F(MAILLAGE=MA, RESULTAT=RESU, NOM_CHAM=('DEPL','EQUI_NOEU_SIGM','VARI_NOEU_ELGA',)))

if 0 :
    # pour evaluer le % de PG plastifies, on compte ceux qui ont V2=1.0 :
    X1=CREA_CHAMP(  OPERATION='EXTR', TYPE_CHAM='ELGA_VARI_R', INFO=2,
                    NOM_CHAM='VARI_ELGA', RESULTAT=RESU, NUME_ORDRE=5)


FIN()
