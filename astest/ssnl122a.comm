# MODIF  DATE 13/02/2007   AUTEUR PELLET J.PELLET 
# TITRE POUTRE DROITE CANTILEVER MULTI-FIBRES : FORCE PONCTUELLE 
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2002  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
#                                                                       
#                                                                       
# ======================================================================
# - Force ponctuelle en extremite F = (Fx, Fy, Fz) de facon a generer dans
#     la poutre de la flexion composee.
# - Le premier pas reste elastique, le deuxieme plastifie la poutre
#

DEBUT( CODE=_F( NOM = 'SSNL122A',NIV_PUB_WEB='INTERNET') ,)

# Lecture du maillage
MA = LIRE_MAILLAGE()

# AFFECTATION DES MODELES DE COMPORTEMENT
MO = AFFE_MODELE(
   MAILLAGE= MA,
   VERIF=('MAILLE','NOEUD'),
   AFFE=(
      _F(GROUP_MA=('S002','S001',),
         PHENOMENE= 'MECANIQUE',
         MODELISATION= 'POU_D_TGM'),
))

GF=DEFI_GEOM_FIBRE(
FIBRE = (
#  Sections: /RE40X20, modele: POU_D_TGM, Epa: 4, lar: 8
  _F( CARA = 'SURFACE', COOR_AXE_POUTRE = (0.0 , 0.0),
      GROUP_FIBRE = ('SECF2',),
      VALE = ( 
# Nombre de fibre : 32
        -1.75000e-02,  -7.50000e-03,   2.50000e-05,
        -1.75000e-02,  -2.50000e-03,   2.50000e-05,
        -1.75000e-02,   2.50000e-03,   2.50000e-05,
        -1.75000e-02,   7.50000e-03,   2.50000e-05,
        -1.25000e-02,  -7.50000e-03,   2.50000e-05,
        -1.25000e-02,  -2.50000e-03,   2.50000e-05,
        -1.25000e-02,   2.50000e-03,   2.50000e-05,
        -1.25000e-02,   7.50000e-03,   2.50000e-05,
        -7.50000e-03,  -7.50000e-03,   2.50000e-05,
        -7.50000e-03,  -2.50000e-03,   2.50000e-05,
        -7.50000e-03,   2.50000e-03,   2.50000e-05,
        -7.50000e-03,   7.50000e-03,   2.50000e-05,
        -2.50000e-03,  -7.50000e-03,   2.50000e-05,
        -2.50000e-03,  -2.50000e-03,   2.50000e-05,
        -2.50000e-03,   2.50000e-03,   2.50000e-05,
        -2.50000e-03,   7.50000e-03,   2.50000e-05,
         2.50000e-03,  -7.50000e-03,   2.50000e-05,
         2.50000e-03,  -2.50000e-03,   2.50000e-05,
         2.50000e-03,   2.50000e-03,   2.50000e-05,
         2.50000e-03,   7.50000e-03,   2.50000e-05,
         7.50000e-03,  -7.50000e-03,   2.50000e-05,
         7.50000e-03,  -2.50000e-03,   2.50000e-05,
         7.50000e-03,   2.50000e-03,   2.50000e-05,
         7.50000e-03,   7.50000e-03,   2.50000e-05,
         1.25000e-02,  -7.50000e-03,   2.50000e-05,
         1.25000e-02,  -2.50000e-03,   2.50000e-05,
         1.25000e-02,   2.50000e-03,   2.50000e-05,
         1.25000e-02,   7.50000e-03,   2.50000e-05,
         1.75000e-02,  -7.50000e-03,   2.50000e-05,
         1.75000e-02,  -2.50000e-03,   2.50000e-05,
         1.75000e-02,   2.50000e-03,   2.50000e-05,
         1.75000e-02,   7.50000e-03,   2.50000e-05,
# Points particuliers : 4
        -2.00000e-02,  -1.00000e-02,   0.00000e+00,
        -2.00000e-02,   1.00000e-02,   0.00000e+00,
         2.00000e-02,   1.00000e-02,   0.00000e+00,
         2.00000e-02,  -1.00000e-02,   0.00000e+00,
# // Position des Jauges : 24
        -2.00000e-02,  -7.50000e-03,   0.00000e+00,
        -2.00000e-02,  -2.50000e-03,   0.00000e+00,
        -2.00000e-02,   2.50000e-03,   0.00000e+00,
        -2.00000e-02,   7.50000e-03,   0.00000e+00,
        -1.75000e-02,   1.00000e-02,   0.00000e+00,
        -1.25000e-02,   1.00000e-02,   0.00000e+00,
        -7.50000e-03,   1.00000e-02,   0.00000e+00,
        -2.50000e-03,   1.00000e-02,   0.00000e+00,
         2.50000e-03,   1.00000e-02,   0.00000e+00,
         7.50000e-03,   1.00000e-02,   0.00000e+00,
         1.25000e-02,   1.00000e-02,   0.00000e+00,
         1.75000e-02,   1.00000e-02,   0.00000e+00,
         2.00000e-02,   7.50000e-03,   0.00000e+00,
         2.00000e-02,   2.50000e-03,   0.00000e+00,
         2.00000e-02,  -2.50000e-03,   0.00000e+00,
         2.00000e-02,  -7.50000e-03,   0.00000e+00,
         1.75000e-02,  -1.00000e-02,   0.00000e+00,
         1.25000e-02,  -1.00000e-02,   0.00000e+00,
         7.50000e-03,  -1.00000e-02,   0.00000e+00,
         2.50000e-03,  -1.00000e-02,   0.00000e+00,
        -2.50000e-03,  -1.00000e-02,   0.00000e+00,
        -7.50000e-03,  -1.00000e-02,   0.00000e+00,
        -1.25000e-02,  -1.00000e-02,   0.00000e+00,
        -1.75000e-02,  -1.00000e-02,   0.00000e+00,
           ), ),

#  Sections: /RE40X20, modele: POU_D_TGM, Epa: 4, lar: 8
  _F( CARA = 'SURFACE', COOR_AXE_POUTRE = (0.0 , 0.0),
      GROUP_FIBRE = ('SECF1',),
      VALE = ( 
# Nombre de fibre : 32
        -1.75000e-02,  -7.50000e-03,   2.50000e-05,
        -1.75000e-02,  -2.50000e-03,   2.50000e-05,
        -1.75000e-02,   2.50000e-03,   2.50000e-05,
        -1.75000e-02,   7.50000e-03,   2.50000e-05,
        -1.25000e-02,  -7.50000e-03,   2.50000e-05,
        -1.25000e-02,  -2.50000e-03,   2.50000e-05,
        -1.25000e-02,   2.50000e-03,   2.50000e-05,
        -1.25000e-02,   7.50000e-03,   2.50000e-05,
        -7.50000e-03,  -7.50000e-03,   2.50000e-05,
        -7.50000e-03,  -2.50000e-03,   2.50000e-05,
        -7.50000e-03,   2.50000e-03,   2.50000e-05,
        -7.50000e-03,   7.50000e-03,   2.50000e-05,
        -2.50000e-03,  -7.50000e-03,   2.50000e-05,
        -2.50000e-03,  -2.50000e-03,   2.50000e-05,
        -2.50000e-03,   2.50000e-03,   2.50000e-05,
        -2.50000e-03,   7.50000e-03,   2.50000e-05,
         2.50000e-03,  -7.50000e-03,   2.50000e-05,
         2.50000e-03,  -2.50000e-03,   2.50000e-05,
         2.50000e-03,   2.50000e-03,   2.50000e-05,
         2.50000e-03,   7.50000e-03,   2.50000e-05,
         7.50000e-03,  -7.50000e-03,   2.50000e-05,
         7.50000e-03,  -2.50000e-03,   2.50000e-05,
         7.50000e-03,   2.50000e-03,   2.50000e-05,
         7.50000e-03,   7.50000e-03,   2.50000e-05,
         1.25000e-02,  -7.50000e-03,   2.50000e-05,
         1.25000e-02,  -2.50000e-03,   2.50000e-05,
         1.25000e-02,   2.50000e-03,   2.50000e-05,
         1.25000e-02,   7.50000e-03,   2.50000e-05,
         1.75000e-02,  -7.50000e-03,   2.50000e-05,
         1.75000e-02,  -2.50000e-03,   2.50000e-05,
         1.75000e-02,   2.50000e-03,   2.50000e-05,
         1.75000e-02,   7.50000e-03,   2.50000e-05,
# Points particuliers : 4
        -2.00000e-02,  -1.00000e-02,   0.00000e+00,
        -2.00000e-02,   1.00000e-02,   0.00000e+00,
         2.00000e-02,   1.00000e-02,   0.00000e+00,
         2.00000e-02,  -1.00000e-02,   0.00000e+00,
           ), ),
),
            )

# DEFINITION DES MATERIAUX
#            DES CARACTERISTIQUES ELASTIQUES et PLASTIQUES DES POUTRES
# Comportement du materiau : E360.
MAT0001 = DEFI_MATERIAU(
   ELAS =_F( E= 2.100000e+11, NU= 3.000000e-01, RHO= 7.850000e+03,
             ALPHA= 6.700000e-06),
   ECRO_LINE= _F( D_SIGM_EPSI = 1.0E+08 ,
                  SY= 400.0E+06),
)

COMPF=DEFI_COMPOR(GEOM_FIBRE=GF,MATER_SECT=MAT0001,
                  MULTIFIBRE=(_F(GROUP_FIBRE=('SECF1','SECF2'),
                                 MATER=MAT0001, RELATION='VMIS_ISOT_LINE'),))

# -------------------------------------------------------
# Affectation des materiaux
CHMAT = AFFE_MATERIAU( MAILLAGE= MA, MODELE= MO, 
   AFFE=(
# Pour les poutres ou les barres ou les cables
# Elements avec le materiau : E360.
_F( GROUP_MA= ('S002','S001'),MATER= MAT0001 ),
      ),
AFFE_COMPOR=_F(GROUP_MA=('S001','S002'),COMPOR=COMPF));


# AFFECTATION DES CARACTERISTIQUES DES ELEMENTS
CAREL = AFFE_CARA_ELEM( MODELE= MO,
# Sections de spref /RE40X20 de modele POU_D_TGM
POUTRE=(
   _F(SECTION= 'GENERALE', GROUP_MA=('S002','S001',),
   CARA= ( 'A','IY','IZ','AY',
           'AZ','EY','EZ','JX',
           'JG','IYR2','IZR2'),
   PREC_INERTIE=6.7e-2,
   VALE= ( 8.000000e-04,2.666667e-08,1.066667e-07,1.191790e+00,
           1.172840e+00,0.000000e+00,0.000000e+00,7.093682e-08,
           1.438125e-12,0.000000e+00,0.000000e+00 ) ),
),
GEOM_FIBRE=GF,
MULTIFIBRE=(_F(GROUP_MA='S002',GROUP_FIBRE='SECF2'),
            _F(GROUP_MA='S001',GROUP_FIBRE='SECF1'),),
ORIENTATION=(
# Pour les poutres
   _F(GROUP_MA= 'S002', CARA= 'ANGL_VRIL',
      VALE= 9.000000e+01 ),
   _F(GROUP_MA= 'S001', CARA= 'ANGL_VRIL',
      VALE= 9.000000e+01 ),
  ),
)


# ----------------------------------------------------------------------
# --------------- DEFINITION DES CHARGEMENTS VARIABLES -----------------

# fonction de chargement :
FCHG000X = DEFI_FONCTION(
       NOM_PARA= 'INST',  VALE= (
     0.0,      0.0,
     1.0,  80000.0,
    ), PROL_GAUCHE= 'CONSTANT',
       PROL_DROITE= 'CONSTANT')

FCHG000Y = DEFI_FONCTION(
       NOM_PARA= 'INST',  VALE= (
     0.0,      0.0,
     1.0,  -150.0,
     3.0,  -320.0,
    ), PROL_GAUCHE= 'CONSTANT',
       PROL_DROITE= 'CONSTANT')

FCHG000Z = DEFI_FONCTION(
       NOM_PARA= 'INST',  VALE= (
     0.0,      0.0,
     1.0,  -200.0,
     3.0,  -450.0,
    ), PROL_GAUCHE= 'CONSTANT',
       PROL_DROITE= 'CONSTANT')

# fonction de chargement : constant. Valeur maxi : 0.000000e+00
FCHG0002 = DEFI_FONCTION(
       NOM_PARA= 'INST',  VALE= (
     0.0000000e+00,  0.0000000e+00,
     1.0000000e+00,  0.0000000e+00,
    ), PROL_GAUCHE= 'CONSTANT',
       PROL_DROITE= 'CONSTANT')

TEMPS = DEFI_LIST_REEL(
   DEBUT = 0.000000e+00,
   INTERVALLE= _F(JUSQU_A= 2.0, PAS=1.0) )

# ----------------------------------------------------------------------
# ----------------------- DEPLACEMENTS ---------------------------------
DEPLT = AFFE_CHAR_MECA_F(
   MODELE= MO,
   DDL_IMPO=(
      _F( NOEUD= ('G00202',),
          DX =FCHG0002, DY =FCHG0002, DZ =FCHG0002,
          DRX=FCHG0002, DRY=FCHG0002, DRZ=FCHG0002,),
))

# ----------------------------------------------------------------------
# --------------------------- EFFORTS ----------------------------------
FORCT = AFFE_CHAR_MECA_F(
   MODELE= MO,
   FORCE_NODALE=(
      _F( NOEUD= ('G00101',),
          FX=FCHG000X, FY=FCHG000Y, FZ=FCHG000Z) ) )

# **********************************************************************
#                  C A L C U L   N O N   L I N E A I R E
# **********************************************************************

STNL = STAT_NON_LINE(
   MODELE    = MO,
   CHAM_MATER= CHMAT,
   CARA_ELEM = CAREL,
   EXCIT=(
     _F(CHARGE = DEPLT ),
     _F(CHARGE = FORCT ),
   ),
   INCREMENT= _F(LIST_INST = TEMPS),
   NEWTON= _F(MATRICE = 'TANGENTE', REAC_ITER= 1),
   COMP_INCR=(
   _F(RELATION= 'MULTIFIBRE', 
      DEFORMATION= 'PETIT',
      GROUP_MA=('S002','S001',)),
   ),
)


STNL=CALC_ELEM(reuse =STNL,
               RESULTAT=STNL,
               OPTION='SIEF_ELNO_ELGA',);


TEST_RESU( RESU=(
_F( RESULTAT = STNL,  NUME_ORDRE = 1, NOM_CHAM = 'SIEF_ELGA',
    MAILLE = 'E00200', POINT = 1, SOUS_POINT=36,
    REFERENCE='ANALYTIQUE',
    NOM_CMP  = 'SIXX', VALE = 389.884E+06, PRECISION = 2.0E-04),
_F( RESULTAT = STNL,  NUME_ORDRE = 1, NOM_CHAM = 'SIEF_ELGA',
    MAILLE = 'E00200', POINT = 1, SOUS_POINT=33,
    REFERENCE='ANALYTIQUE',
    NOM_CMP  = 'SIXX', VALE = 164.717E+06, PRECISION = 2.0E-04),
_F( RESULTAT = STNL,  NUME_ORDRE = 1, NOM_CHAM = 'SIEF_ELGA',
    MAILLE = 'E00200', POINT = 1, SOUS_POINT=34,
    REFERENCE='ANALYTIQUE',
    NOM_CMP  = 'SIXX', VALE =-189.884E+06, PRECISION = 2.0E-04),

_F( RESULTAT = STNL,  NUME_ORDRE = 2, NOM_CHAM = 'SIEF_ELGA',
    MAILLE = 'E00200', POINT = 1, SOUS_POINT=36,
    REFERENCE='NON_REGRESSION',
    NOM_CMP  = 'SIXX', VALE = 0.4000864E+09, PRECISION = 2.0E-04),
_F( RESULTAT = STNL,  NUME_ORDRE = 2, NOM_CHAM = 'SIEF_ELGA',
    MAILLE = 'E00200', POINT = 1, SOUS_POINT=33,
    REFERENCE='NON_REGRESSION',
    NOM_CMP  = 'SIXX', VALE = 0.1972341E+09, PRECISION = 2.0E-04),
_F( RESULTAT = STNL,  NUME_ORDRE = 2, NOM_CHAM = 'SIEF_ELGA',
    MAILLE = 'E00200', POINT = 1, SOUS_POINT=34,
    REFERENCE='NON_REGRESSION',
    NOM_CMP  = 'SIXX', VALE =-0.3765896E+09, PRECISION = 2.0E-04),

_F( RESULTAT = STNL,  NUME_ORDRE = 1, NOM_CHAM = 'SIEF_ELNO_ELGA',
    MAILLE = 'E00200', NOEUD='G00202',REFERENCE='ANALYTIQUE',
    NOM_CMP  = 'SIMAX', VALE = 394.307E+06, PRECISION = 2.0E-04),
_F( RESULTAT = STNL,  NUME_ORDRE = 1, NOM_CHAM = 'SIEF_ELNO_ELGA',
    MAILLE = 'E00200', NOEUD='I00200',REFERENCE='ANALYTIQUE',
    NOM_CMP  = 'SIMAX', VALE = 355.066E+06, PRECISION = 2.0E-04),
_F( RESULTAT = STNL,  NUME_ORDRE = 1, NOM_CHAM = 'SIEF_ELNO_ELGA',
    MAILLE = 'E00200', NOEUD='G00202',REFERENCE='ANALYTIQUE',
    NOM_CMP  = 'SIMIN', VALE = -194.307E+06, PRECISION = 2.0E-04),
_F( RESULTAT = STNL,  NUME_ORDRE = 1, NOM_CHAM = 'SIEF_ELNO_ELGA',
    MAILLE = 'E00200', NOEUD='I00200',REFERENCE='ANALYTIQUE',
    NOM_CMP  = 'SIMIN', VALE =-155.066E+06, PRECISION = 2.0E-04),

_F( RESULTAT = STNL,  NUME_ORDRE = 2, NOM_CHAM = 'SIEF_ELNO_ELGA',
    MAILLE = 'E00200', NOEUD='G00202',REFERENCE='NON_REGRESSION',
    NOM_CMP  = 'SIMAX', VALE = 400.091E+06, PRECISION = 2.0E-04),
_F( RESULTAT = STNL,  NUME_ORDRE = 2, NOM_CHAM = 'SIEF_ELNO_ELGA',
    MAILLE = 'E00200', NOEUD='I00200',REFERENCE='NON_REGRESSION',
    NOM_CMP  = 'SIMAX', VALE = 400.053E+06, PRECISION = 2.0E-04),
_F( RESULTAT = STNL,  NUME_ORDRE = 2, NOM_CHAM = 'SIEF_ELNO_ELGA',
    MAILLE = 'E00200', NOEUD='G00202',REFERENCE='NON_REGRESSION',
    NOM_CMP  = 'SIMIN', VALE =-385.441E+06, PRECISION = 2.0E-04),
_F( RESULTAT = STNL,  NUME_ORDRE = 2, NOM_CHAM = 'SIEF_ELNO_ELGA',
    MAILLE = 'E00200', NOEUD='I00200',REFERENCE='NON_REGRESSION',
    NOM_CMP  = 'SIMIN', VALE =-306.905E+06, PRECISION = 2.0E-04),
) )

FIN()
