# MODIF  DATE 20/09/2004   AUTEUR DURAND C.DURAND 
# TITRE COMPORTEMENT NON LINEAIRE EN ROTATION SUR UN DISCRET A 2 NOEUDS
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2003  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# UTILISATION : ASSEMBLAGE COMBUSTIBLE, LIAISON TUBE-GRILLE EN ROTATION
# VALIDATION DE LA DEPENDANCE DE LA FONCTION 
#   M(TEMP,FLUENCE)=F(ALPHA(TEMP,FLUENCE)) 


DEBUT( CODE=_F(  NOM = 'SSNL113B',NIV_PUB_WEB='INTRANET')   )

MA=LIRE_MAILLAGE(  )

MO=AFFE_MODELE(        MAILLAGE=MA,

                         AFFE=_F(  GROUP_MA = 'DISC',
                                PHENOMENE = 'MECANIQUE',

                                MODELISATION = 'DIS_TR')
                       )

CAREL=AFFE_CARA_ELEM(   MODELE=MO,

                             DISCRET=_F(  GROUP_MA = 'DISC',
                                      CARA = (   'K_TR_D_L', ),
                                      VALE = (    1.E4, 1.E4, 1.E4,
                                                1.E4, 1.E4, 1.E3,
                                           ))
                                              )


ALPH1 = FORMULE(NOM_PARA=('TEMP','INST'),VALE='0.1')

ALPHA1 = CALC_FONC_INTERP ( FONCTION = ALPH1,
       NOM_RESU = 'DRZ',
       NOM_PARA = 'INST',
       VALE_PARA = (0.),
       PROL_DROITE='EXCLU',
       PROL_GAUCHE='EXCLU',
       INTERPOL='LIN',
       NOM_PARA_FONC = 'TEMP',
       VALE_PARA_FONC = (0.),
       PROL_DROITE_FONC='CONSTANT',
       PROL_GAUCHE_FONC='CONSTANT',
       INTERPOL_FONC='LIN'
       )
       
ALPH2 = FORMULE(NOM_PARA=('TEMP','INST'),VALE='0.15')
ALPHA2 = CALC_FONC_INTERP ( FONCTION = ALPH2,
       NOM_RESU = 'DRZ',
       NOM_PARA = 'INST',
       VALE_PARA = (0.),
       PROL_DROITE='EXCLU',
       PROL_GAUCHE='EXCLU',
       INTERPOL='LIN',
       NOM_PARA_FONC = 'TEMP',
       VALE_PARA_FONC = (0.),
       PROL_DROITE_FONC='CONSTANT',
       PROL_GAUCHE_FONC='CONSTANT',
       INTERPOL_FONC='LIN'
       )
ALPH3 = FORMULE(NOM_PARA=('TEMP','INST'),VALE='0.2')

ALPHA3 = CALC_FONC_INTERP ( FONCTION = ALPH3,
       NOM_RESU = 'DRZ',
       NOM_PARA = 'INST',
       VALE_PARA = (0.),
       PROL_DROITE='EXCLU',
       PROL_GAUCHE='EXCLU',
       INTERPOL='LIN',
       NOM_PARA_FONC = 'TEMP',
       VALE_PARA_FONC = (0.),
       PROL_DROITE_FONC='CONSTANT',
       PROL_GAUCHE_FONC='CONSTANT',
       INTERPOL_FONC='LIN'
       )
       
ALPH4 = FORMULE(NOM_PARA=('TEMP','INST'),VALE='1.')
ALPHA4 = CALC_FONC_INTERP ( FONCTION = ALPH4,
       NOM_RESU = 'DRZ',
       NOM_PARA = 'INST',
       VALE_PARA = (0.),
       PROL_DROITE='EXCLU',
       PROL_GAUCHE='EXCLU',
       INTERPOL='LIN',
       NOM_PARA_FONC = 'TEMP',
       VALE_PARA_FONC = (0.),
       PROL_DROITE_FONC='CONSTANT',
       PROL_GAUCHE_FONC='CONSTANT',
       INTERPOL_FONC='LIN'
       )       
M11 = FORMULE(NOM_PARA=('TEMP','INST'),VALE='100.')

M1 = CALC_FONC_INTERP ( FONCTION = M11,
       NOM_RESU = 'DRZ',
       NOM_PARA = 'INST',
       VALE_PARA = (0.),
       PROL_DROITE='EXCLU',
       PROL_GAUCHE='EXCLU',
       INTERPOL='LIN',
       NOM_PARA_FONC = 'TEMP',
       VALE_PARA_FONC = (0.),
       PROL_DROITE_FONC='CONSTANT',
       PROL_GAUCHE_FONC='CONSTANT',
       INTERPOL_FONC='LIN'
       )
       
M22 = FORMULE(NOM_PARA=('TEMP','INST'),VALE='125.')
M2 = CALC_FONC_INTERP ( FONCTION = M22,
       NOM_RESU = 'DRZ',
       NOM_PARA = 'INST',
       VALE_PARA = (0.),
       PROL_DROITE='EXCLU',
       PROL_GAUCHE='EXCLU',
       INTERPOL='LIN',
       NOM_PARA_FONC = 'TEMP',
       VALE_PARA_FONC = (0.),
       PROL_DROITE_FONC='CONSTANT',
       PROL_GAUCHE_FONC='CONSTANT',
       INTERPOL_FONC='LIN'
       )
       
M33 = FORMULE(NOM_PARA=('TEMP','INST'),VALE='150.')

M3 = CALC_FONC_INTERP ( FONCTION = M33,
       NOM_RESU = 'DRZ',
       NOM_PARA = 'INST',
       VALE_PARA = (0.),
       PROL_DROITE='EXCLU',
       PROL_GAUCHE='EXCLU',
       INTERPOL='LIN',
       NOM_PARA_FONC = 'TEMP',
       VALE_PARA_FONC = (0.),
       PROL_DROITE_FONC='CONSTANT',
       PROL_GAUCHE_FONC='CONSTANT',
       INTERPOL_FONC='LIN'
       )
       
M44 = FORMULE(NOM_PARA=('TEMP','INST'),VALE='350.')
M4= CALC_FONC_INTERP ( FONCTION = M44,
       NOM_RESU = 'DRZ',
       NOM_PARA = 'INST',
       VALE_PARA = (0.),
       PROL_DROITE='EXCLU',
       PROL_GAUCHE='EXCLU',
       INTERPOL='LIN',
       NOM_PARA_FONC = 'TEMP',
       VALE_PARA_FONC = (0.),
       PROL_DROITE_FONC='CONSTANT',
       PROL_GAUCHE_FONC='CONSTANT',
       INTERPOL_FONC='LIN'
       )   
         
MAT=DEFI_MATERIAU(    DIS_CONTACT=_F( ANGLE_1 = ALPHA1,
                                      ANGLE_2 = ALPHA2,
                                      ANGLE_3 = ALPHA3,
                                      ANGLE_4 = ALPHA4,
                                      MOMENT_1 = M1,
                                      MOMENT_2 = M2,
                                      MOMENT_3 = M3,
                                      MOMENT_4 = M4,),
                           ELAS=_F( E = 1.E5, NU = 0.3)
                        )

CHMAT1=AFFE_MATERIAU(   MAILLAGE=MA,
                           AFFE=_F(  TOUT = 'OUI', MATER = MAT)
                        )

CHART1=AFFE_CHAR_MECA(  MODELE=MO,DDL_IMPO=(
                           _F(  NOEUD = 'N1',
                                     DX = 0., DY = 0., DZ = 0.,
                                     DRX = 0., DRY = 0., DRZ = 0.),
                          _F(  NOEUD = 'N2',
                                     DX = 0., DZ = 0.,
                                     DRX = 0., DRY = 0.),
                          _F(  NOEUD = 'N2',
                                     DRZ = 0.1)) )

CHART2=AFFE_CHAR_MECA(  MODELE=MO,DDL_IMPO=(
                          _F(  NOEUD = 'N1',
                                     DX = 0., DY = 0., DZ = 0.,
                                     DRX = 0., DRY = 0., DRZ = 0.),
                          _F(  NOEUD = 'N2',
                                     DX = 0., DZ = 0.,
                                     DRX = 0., DRY = 0.)),
                           FORCE_NODALE=_F(  NOEUD = 'N2',
                                          MZ = 60.) )

FONCT=DEFI_FONCTION(   NOM_PARA='INST',
                           VALE=( 0.,    0.,
                                  1.,    1.,
                                  2.,    2.,
                                  3.,    3.,
                                  4.,    2.,
                                  5.,    1.,
                                  ) )

LINST=DEFI_LIST_REEL( DEBUT=0.,INTERVALLE=(
                         _F( JUSQU_A = 1., NOMBRE = 2),
                         _F( JUSQU_A = 2., NOMBRE = 5),
                         _F( JUSQU_A = 3., NOMBRE = 5),
                         _F( JUSQU_A = 4., NOMBRE = 2),
                         _F( JUSQU_A = 5., NOMBRE = 2))
                       )

REST1=STAT_NON_LINE( 
                            MODELE=MO,
                        CHAM_MATER=CHMAT1,
                         CARA_ELEM=CAREL,
                             EXCIT=_F( 
                CHARGE = CHART1,
                FONC_MULT = FONCT),
                         COMP_INCR=_F( 
                RELATION = 'DIS_CONTACT',
                GROUP_MA = 'DISC'),
                         INCREMENT=_F( 
                LIST_INST = LINST),
                            NEWTON=_F( 
                MATRICE = 'TANGENTE'),
                     RECH_LINEAIRE=_F( 
                ITER_LINE_MAXI = 3)
              )

REST2=STAT_NON_LINE( 
                            MODELE=MO,
                        CHAM_MATER=CHMAT1,
                         CARA_ELEM=CAREL,
                             EXCIT=_F( 
                CHARGE = CHART2,
                FONC_MULT = FONCT),
                         COMP_INCR=_F( 
                RELATION = 'DIS_CONTACT',
                GROUP_MA = 'DISC'),
                         INCREMENT=_F( 
                LIST_INST = LINST),
                            NEWTON=_F( 
                MATRICE = 'TANGENTE'),
                       CONVERGENCE=_F( 
                ITER_GLOB_MAXI = 50,
                ITER_INTE_MAXI = 50),
                     RECH_LINEAIRE=_F( 
                ITER_LINE_MAXI = 3)
              )

TEST_RESU(RESU=( 
    _F( RESULTAT = REST1, INST = 1., NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'MFZ',
     MAILLE = 'M1', POINT = 1, VALE = 100., PRECISION =1.E-4,
     REFERENCE='AUTRE_ASTER'),
    _F( RESULTAT = REST1, INST = 2., NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'MFZ',
     MAILLE = 'M1', POINT = 1, VALE = 150., PRECISION = 1.E-4,
     REFERENCE='AUTRE_ASTER'),
    _F( RESULTAT = REST1, INST = 3., NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'MFZ',
     MAILLE = 'M1', POINT = 1, VALE = 175., PRECISION = 1.E-4,
     REFERENCE='AUTRE_ASTER'),
    _F( RESULTAT = REST1, INST = 4., NOM_CHAM = 'SIEF_ELGA', NOM_CMP = 'MFZ',
     MAILLE = 'M1', POINT = 1, VALE = 75., PRECISION = 1.E-4,
     REFERENCE='AUTRE_ASTER'))
          )

TEST_RESU(RESU=( 
    _F( RESULTAT = REST2, INST = 1., NOM_CHAM = 'DEPL', NOM_CMP = 'DRZ',
     NOEUD = 'N2', VALE = 0.06, PRECISION = 1.E-4,
     REFERENCE='AUTRE_ASTER'),
    _F( RESULTAT = REST2, INST = 2., NOM_CHAM = 'DEPL', NOM_CMP = 'DRZ',
     NOEUD = 'N2', VALE = 0.14, PRECISION = 1.E-4,
     REFERENCE='AUTRE_ASTER'),
    _F( RESULTAT = REST2, INST = 3., NOM_CHAM = 'DEPL', NOM_CMP = 'DRZ',
     NOEUD = 'N2', VALE = 0.32, PRECISION = 2.E-4,
     REFERENCE='AUTRE_ASTER'),
    _F( RESULTAT = REST2, INST = 4., NOM_CHAM = 'DEPL', NOM_CMP = 'DRZ',
     NOEUD = 'N2', VALE = 0.26, PRECISION = 2.E-4,
     REFERENCE='AUTRE_ASTER'))
          )

FIN()
#
