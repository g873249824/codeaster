# MODIF  DATE 04/09/2007   AUTEUR DURAND C.DURAND 
# TITRE FONCTIONS, NAPPES, VALIDATION DE CALC_FONCTION / FRACTILE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2007  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================

DEBUT(CODE=_F(NOM='ZZZZ100F',NIV_PUB_WEB='INTERNET',),DEBUG=_F(SDVERI='OUI',),)

#========================================================================
#     DEFINITION DES NAPPES ET DES FONCTIONS
#========================================================================

N1=DEFI_NAPPE(NOM_PARA='INST',
              PARA=(111.,222.),
              NOM_PARA_FONC='X',
              DEFI_FONCTION=(_F(VALE=(1.0,3.0,2.0,4.0,),),
                             _F(VALE=(1.0,3.0,2.0,4.0,),),),)

N2=DEFI_NAPPE(NOM_PARA='INST',
              PARA=(111.,222.),
              NOM_PARA_FONC='X',
              DEFI_FONCTION=(_F(VALE=(1.0,4.0,2.0,9.0,),),
                             _F(VALE=(1.0,4.0,2.0,9.0,),),),)

N3=DEFI_NAPPE(NOM_PARA='INST',
              PARA=(111.,222.),
              NOM_PARA_FONC='X',
              DEFI_FONCTION=(_F(VALE=(1.0,8.0,2.0,7.0,),),
                             _F(VALE=(1.0,8.0,2.0,7.0,),),),)

F1=DEFI_FONCTION(  NOM_PARA='INST',
                   VALE=( 1., 1.,
                          3., 3.,
                          5., 2.,     )  )

F2=DEFI_FONCTION(  NOM_PARA='INST',
                   VALE=( 1., 3.,
                          3., 1.,
                          5., 3.,     )  )

F3=DEFI_FONCTION(  NOM_PARA='INST',
                   VALE=( 1., 7.,
                          3., 4.,
                          5.,-3.,    )  )

#========================================================================
#     CAS NAPPE. FRACTILE = 1 : CORRESPOND A L ENVELOPPE SUP DE LA NAPPE
#========================================================================
N4=CALC_FONCTION(FRACTILE=_F(FONCTION=(N1,N2,N3),
                             FRACT=1.) )

TEST_FONCTION(VALEUR=_F(FONCTION=N4,
                        NOM_PARA=('INST','X',),
                        VALE_PARA=(222.,1.,),
                        VALE_REFE=8.,
                        REFERENCE='ANALYTIQUE'),)

TEST_FONCTION(VALEUR=_F(FONCTION=N4,
                        NOM_PARA=('INST','X',),
                        VALE_PARA=(111.,2.,),
                        VALE_REFE=9.,
                        REFERENCE='ANALYTIQUE'),)

#========================================================================
#     CAS NAPPE. FRACTILE = 0 : CORRESPOND A L ENVELOPPE INF DE LA NAPPE
#========================================================================
N5=CALC_FONCTION(FRACTILE=_F(FONCTION=(N1,N2,N3),
                             FRACT=0.) )

TEST_FONCTION(VALEUR=_F(FONCTION=N5,
                        NOM_PARA=('INST','X',),
                        VALE_PARA=(222.,1.,),
                        VALE_REFE=3.,
                        REFERENCE='ANALYTIQUE'),)

TEST_FONCTION(VALEUR=_F(FONCTION=N5,
                        NOM_PARA=('INST','X',),
                        VALE_PARA=(111.,2.,),
                        VALE_REFE=4.,
                        REFERENCE='ANALYTIQUE'),)

#========================================================================
#     CAS NAPPE. FRACTILE = 0.7
#========================================================================
N6=CALC_FONCTION(FRACTILE=_F(FONCTION=(N1,N2,N3),
                             FRACT=0.7) )

TEST_FONCTION(VALEUR=_F(FONCTION=N6,
                        NOM_PARA=('INST','X',),
                        VALE_PARA=(222.,1.,),
                        VALE_REFE=5.6,
                        REFERENCE='ANALYTIQUE'),)

TEST_FONCTION(VALEUR=_F(FONCTION=N6,
                        NOM_PARA=('INST','X',),
                        VALE_PARA=(111.,2.,),
                        VALE_REFE=7.8,
                        REFERENCE='ANALYTIQUE'),)

#========================================================================
#     CAS FONCTION. FRACTILE = 0 : CORRESPOND A L ENVELOPPE INF DE LA FONCTION
#========================================================================
F4=CALC_FONCTION(FRACTILE=_F(FONCTION=(F1,F2,F3),
                             FRACT=0.) )

TEST_FONCTION(VALEUR=_F(FONCTION=F4,
                        NOM_PARA='INST',
                        VALE_PARA=1.,
                        VALE_REFE=1.,
                        REFERENCE='ANALYTIQUE'),)

TEST_FONCTION(VALEUR=_F(FONCTION=F4,
                        NOM_PARA='INST',
                        VALE_PARA=3.,
                        VALE_REFE=1.,
                        REFERENCE='ANALYTIQUE'),)

TEST_FONCTION(VALEUR=_F(FONCTION=F4,
                        NOM_PARA='INST',
                        VALE_PARA=5.,
                        VALE_REFE=-3.,
                        REFERENCE='ANALYTIQUE'),)

#========================================================================
#     CAS FONCTION. FRACTILE = 1 : CORRESPOND A L ENVELOPPE SUP DE LA FONCTION
#========================================================================
F5=CALC_FONCTION(FRACTILE=_F(FONCTION=(F1,F2,F3),
                             FRACT=1.) )

TEST_FONCTION(VALEUR=_F(FONCTION=F5,
                        NOM_PARA='INST',
                        VALE_PARA=1.,
                        VALE_REFE=7.,
                        REFERENCE='ANALYTIQUE'),)

TEST_FONCTION(VALEUR=_F(FONCTION=F5,
                        NOM_PARA='INST',
                        VALE_PARA=3.,
                        VALE_REFE=4.,
                        REFERENCE='ANALYTIQUE'),)

TEST_FONCTION(VALEUR=_F(FONCTION=F5,
                        NOM_PARA='INST',
                        VALE_PARA=5.,
                        VALE_REFE=3.,
                        REFERENCE='ANALYTIQUE'),)

#========================================================================
#     CAS FONCTION. FRACTILE = 0.9
#========================================================================
F6=CALC_FONCTION(FRACTILE=_F(FONCTION=(F1,F2,F3),
                             FRACT=0.9) )

TEST_FONCTION(VALEUR=_F(FONCTION=F6,
                        NOM_PARA='INST',
                        VALE_PARA=1.,
                        VALE_REFE=6.2,
                        REFERENCE='ANALYTIQUE'),)

TEST_FONCTION(VALEUR=_F(FONCTION=F6,
                        NOM_PARA='INST',
                        VALE_PARA=3.,
                        VALE_REFE=3.8,
                        REFERENCE='ANALYTIQUE'),)

TEST_FONCTION(VALEUR=_F(FONCTION=F6,
                        NOM_PARA='INST',
                        VALE_PARA=5.,
                        VALE_REFE=2.8,
                        REFERENCE='ANALYTIQUE'),)

#========================================================================
#     VALIDATION DE L ENVELOPPE DE NAPPES A SUPPORTS DISJOINTS
#========================================================================

#========================================================================
#     DEFINITION DES NAPPES ET DES FONCTIONS
#========================================================================

E1=DEFI_NAPPE(NOM_PARA='INST',
              PARA=(111.,333.),
              NOM_PARA_FONC='X',
              DEFI_FONCTION=(_F(VALE=(1.0,13.0,2.0,4.0,),),
                             _F(VALE=(1.0,3.0,2.0,4.0,),),),)

E2=DEFI_NAPPE(NOM_PARA='INST',
              PARA=(111.,222.),
              NOM_PARA_FONC='X',
              PROL_DROITE='LINEAIRE',
              DEFI_FONCTION=(_F(VALE=(1.0,4.0,2.0,9.0,),),
                             _F(VALE=(1.0,4.0,2.0,6.0,),),),)

E3=DEFI_NAPPE(NOM_PARA='INST',
              PARA=(111.,222.),
              PROL_DROITE='LINEAIRE',
              NOM_PARA_FONC='X',
              DEFI_FONCTION=(_F(VALE=(1.0,8.0,2.0,7.0,),),
                             _F(VALE=(1.0,7.0,2.0,10.0,),),),)

E4=CALC_FONCTION(ENVELOPPE=_F(FONCTION=(E1,E2,E3),) )

TEST_FONCTION(VALEUR=_F(FONCTION=E4,
                        NOM_PARA=('INST','X',),
                        VALE_PARA=(111.,1.,),
                        VALE_REFE=13.,
                        REFERENCE='ANALYTIQUE'),)
TEST_FONCTION(VALEUR=_F(FONCTION=E4,
                        NOM_PARA=('INST','X',),
                        VALE_PARA=(111.,2.,),
                        VALE_REFE=9.,
                        REFERENCE='ANALYTIQUE'),)
TEST_FONCTION(VALEUR=_F(FONCTION=E4,
                        NOM_PARA=('INST','X',),
                        VALE_PARA=(222.,1.,),
                        VALE_REFE=8.,
                        REFERENCE='ANALYTIQUE'),)
TEST_FONCTION(VALEUR=_F(FONCTION=E4,
                        NOM_PARA=('INST','X',),
                        VALE_PARA=(222.,2.,),
                        VALE_REFE=10.,
                        REFERENCE='ANALYTIQUE'),)
TEST_FONCTION(VALEUR=_F(FONCTION=E4,
                        NOM_PARA=('INST','X',),
                        VALE_PARA=(333.,1.,),
                        VALE_REFE=6.,
                        REFERENCE='ANALYTIQUE'),)
TEST_FONCTION(VALEUR=_F(FONCTION=E4,
                        NOM_PARA=('INST','X',),
                        VALE_PARA=(333.,2.,),
                        VALE_REFE=13.,
                        REFERENCE='ANALYTIQUE'),)

FIN();
