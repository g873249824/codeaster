# TITRE PLAQUE DST EXCENTREE SOUMISE A UNE FORCE MEMBRANAIRE
# ======================================================================
# COPYRIGHT (C) 1991 - 2015  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# SSLS116C
# PLAQUE  RECTANGULAIRE EXCENTREE
# LE MODELE COMPORTE 66 NOEUDS ET 100 ELEMENTS DST
# LE COTE A1A4 EST ENCASTRE
# ON IMPOSE UNE FORCE LINEIQUE SELON X SUR LE COTE A2A3
# CALCUL 1 : PLAQUE NON EXCENTREE
# CALCUL 2 : PLAQUE EXCENTREE
# MODELISATION DST
#             67 NOEUDS  100 MAILLES TRI3
#----------------------------------------------------------------------
#POINTS:  A4                          A3
#           -------------------------
#           -                       -
#           -                       -
#  Y        -                       -
#           -                       -
# I         -------------------------
# I       A1                          A2
# --> X
# ______________________________________________________________________
#

DEBUT(CODE=_F(NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

MA=LIRE_MAILLAGE(FORMAT='MED', )

MA=DEFI_GROUP( reuse=MA,   MAILLAGE=MA,
  CREA_GROUP_MA=_F(  NOM = 'TOUT', TOUT = 'OUI'))

MA=DEFI_GROUP( reuse=MA,  MAILLAGE=MA,
                     CREA_GROUP_NO=_F( GROUP_MA = 'PLAQ1',
                                    NOM = 'PLAQ1')
                 )

MO=AFFE_MODELE(  MAILLAGE=MA,
                    AFFE=_F( TOUT = 'OUI', PHENOMENE = 'MECANIQUE',
                    MODELISATION = 'DST') )

EP=AFFE_CARA_ELEM(  MODELE=MO,COQUE=(

#   POUR AFFECTER DES CARACTERISTIQUES AUX MAILLES DE BORD
#   DONC EVITER LES ALARMES
                       _F(  GROUP_MA = 'TOUT',  EPAIS = 0.2),
                       _F( GROUP_MA = 'PLAQ1', EPAIS = 0.2,
                       ANGL_REP = (0.,0.,),  EXCENTREMENT = 0.1,
                       INER_ROTA = 'OUI'))
                     )

EP2=AFFE_CARA_ELEM(  MODELE=MO,COQUE=(

#   POUR AFFECTER DES CARACTERISTIQUES AUX MAILLES DE BORD
#   DONC EVITER LES ALARMES
                       _F(  GROUP_MA = 'TOUT',  EPAIS = 0.2),
                       _F( GROUP_MA = 'PLAQ1', EPAIS = 0.2,
                      ANGL_REP = (0.,0.,),
                       INER_ROTA = 'OUI'))
                     )

MAT1A=DEFI_MATERIAU(  ELAS_ORTH=_F( E_L = 20000., E_T = 20000.,
                       E_N = 20000., NU_LT = 0., NU_LN = 0., NU_TN = 0.,
                       G_LT = 2000.,  G_LN = 0., G_TN = 0.,
                       RHO = 1000.) )

MU=DEFI_COMPOSITE(
               COUCHE=_F( EPAIS = 0.2, MATER = MAT1A, ORIENTATION = 0.)
                      )

CHMUL=AFFE_MATERIAU(  MAILLAGE=MA,
                          AFFE=_F( TOUT = 'OUI',MATER = MU) )

CHME=AFFE_CHAR_MECA(  MODELE=MO,
                         DDL_IMPO=_F(
         GROUP_MA = 'L14',
         DX = 0., DY = 0., DZ = 0.,  DRX = 0., DRY = 0., DRZ = 0.),
           FORCE_ARETE=_F(  GROUP_MA = 'L12',  FX = 1000., MY = 100.)
                                  )

CHME2=AFFE_CHAR_MECA(  MODELE=MO,
                         DDL_IMPO=_F(
         GROUP_MA = 'L14',
         DX = 0., DY = 0., DZ = 0.,  DRX = 0., DRY = 0., DRZ = 0.),
           FORCE_ARETE=_F(  GROUP_MA = 'L12',  FX = 1000.)
                                  )

# ______________________________________________________________________
#
#                         RESOLUTION
# ______________________________________________________________________
#
# CALCUL AVEC LA PLAQUE EXCENTREE
#################################
MEL=CALC_MATR_ELEM(  MODELE=MO, CHARGE=(CHME,),
                       CHAM_MATER=CHMUL,
                         CARA_ELEM=EP, OPTION='RIGI_MECA' )

MASEL=CALC_MATR_ELEM(  MODELE=MO, CHARGE=(CHME,),
                       CHAM_MATER=CHMUL,
                         CARA_ELEM=EP, OPTION='MASS_MECA' )

NU=NUME_DDL(  MATR_RIGI=MEL )

MATASS=ASSE_MATRICE(  MATR_ELEM=MEL, NUME_DDL=NU )

MATASM=ASSE_MATRICE(  MATR_ELEM=MASEL, NUME_DDL=NU )

MODES=CALC_MODES(MATR_RIGI=MATASS,
                 OPTION='PLUS_PETITE',
                 CALC_FREQ=_F(NMAX_FREQ=4,
                              ),
                 MATR_MASS=MATASM,
                 )


DEP=MECA_STATIQUE(MODELE=MO,
                   CHAM_MATER=CHMUL,
                   CARA_ELEM=EP,
                   EXCIT=_F(CHARGE=CHME,),);



# CALCUL AVEC LA PLAQUE NON EXCENTREE
#####################################
MEL2=CALC_MATR_ELEM(  MODELE=MO, CHARGE=(CHME2,),
                       CHAM_MATER=CHMUL,
                         CARA_ELEM=EP2, OPTION='RIGI_MECA' )

MASEL2=CALC_MATR_ELEM(  MODELE=MO, CHARGE=(CHME2,),
                       CHAM_MATER=CHMUL,
                         CARA_ELEM=EP2, OPTION='MASS_MECA' )

NU2=NUME_DDL(  MATR_RIGI=MEL2 )

MATASS2=ASSE_MATRICE(  MATR_ELEM=MEL2, NUME_DDL=NU2 )

MATASM2=ASSE_MATRICE(  MATR_ELEM=MASEL2, NUME_DDL=NU2 )

MODES2=CALC_MODES(MATR_RIGI=MATASS2,
                  OPTION='PLUS_PETITE',
                  CALC_FREQ=_F(NMAX_FREQ=4,
                               ),
                  MATR_MASS=MATASM2,
                  )



DEP2=MECA_STATIQUE(MODELE=MO,
                   CHAM_MATER=CHMUL,
                   CARA_ELEM=EP2,
                   EXCIT=_F(CHARGE=CHME2,),);


# ______________________________________________________________________
#
# ______________________________________________________________________
#
TEST_RESU(RESU=(_F(NUME_ORDRE=1,
                   RESULTAT=DEP2,
                   NOM_CHAM='DEPL',
                   NOEUD='N66',
                   NOM_CMP='DX',
                   VALE_CALC=2.5,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   RESULTAT=DEP2,
                   NOM_CHAM='DEPL',
                   NOEUD='N66',
                   NOM_CMP='DY',
                   VALE_CALC=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   RESULTAT=DEP2,
                   NOM_CHAM='DEPL',
                   NOEUD='N66',
                   NOM_CMP='DZ',
                   VALE_CALC=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   RESULTAT=DEP2,
                   NOM_CHAM='DEPL',
                   NOEUD='N66',
                   NOM_CMP='DRX',
                   VALE_CALC=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   RESULTAT=DEP2,
                   NOM_CHAM='DEPL',
                   NOEUD='N66',
                   NOM_CMP='DRY',
                   VALE_CALC=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   RESULTAT=DEP2,
                   NOM_CHAM='DEPL',
                   NOEUD='N52',
                   NOM_CMP='DX',
                   VALE_CALC=2.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   RESULTAT=DEP2,
                   NOM_CHAM='DEPL',
                   NOEUD='N52',
                   NOM_CMP='DY',
                   VALE_CALC=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   RESULTAT=DEP2,
                   NOM_CHAM='DEPL',
                   NOEUD='N52',
                   NOM_CMP='DZ',
                   VALE_CALC=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   RESULTAT=DEP2,
                   NOM_CHAM='DEPL',
                   NOEUD='N52',
                   NOM_CMP='DRX',
                   VALE_CALC=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   RESULTAT=DEP2,
                   NOM_CHAM='DEPL',
                   NOEUD='N52',
                   NOM_CMP='DRY',
                   VALE_CALC=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   REFERENCE='AUTRE_ASTER',
                   RESULTAT=DEP,
                   NOM_CHAM='DEPL',
                   NOEUD='N66',
                   NOM_CMP='DX',
                   VALE_CALC=2.500000000,
                   VALE_REFE=2.5,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   REFERENCE='AUTRE_ASTER',
                   RESULTAT=DEP,
                   NOM_CHAM='DEPL',
                   NOEUD='N66',
                   NOM_CMP='DY',
                   VALE_CALC= 4.94916608E-14,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   REFERENCE='AUTRE_ASTER',
                   RESULTAT=DEP,
                   NOM_CHAM='DEPL',
                   NOEUD='N66',
                   NOM_CMP='DZ',
                   VALE_CALC= 1.71204023E-12,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   REFERENCE='AUTRE_ASTER',
                   RESULTAT=DEP,
                   NOM_CHAM='DEPL',
                   NOEUD='N66',
                   NOM_CMP='DRX',
                   VALE_CALC= 3.81601001E-13,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   REFERENCE='AUTRE_ASTER',
                   RESULTAT=DEP,
                   NOM_CHAM='DEPL',
                   NOEUD='N66',
                   NOM_CMP='DRY',
                   VALE_CALC=-1.25680716E-13,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   REFERENCE='AUTRE_ASTER',
                   RESULTAT=DEP,
                   NOM_CHAM='DEPL',
                   NOEUD='N52',
                   NOM_CMP='DX',
                   VALE_CALC=2.000000015,
                   VALE_REFE=2.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   REFERENCE='AUTRE_ASTER',
                   RESULTAT=DEP,
                   NOM_CHAM='DEPL',
                   NOEUD='N52',
                   NOM_CMP='DY',
                   VALE_CALC= 4.07616246E-14,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   REFERENCE='AUTRE_ASTER',
                   RESULTAT=DEP,
                   NOM_CHAM='DEPL',
                   NOEUD='N52',
                   NOM_CMP='DZ',
                   VALE_CALC= 5.43798542E-13,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   REFERENCE='AUTRE_ASTER',
                   RESULTAT=DEP,
                   NOM_CHAM='DEPL',
                   NOEUD='N52',
                   NOM_CMP='DRX',
                   VALE_CALC= 3.01207033E-13,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   REFERENCE='AUTRE_ASTER',
                   RESULTAT=DEP,
                   NOM_CHAM='DEPL',
                   NOEUD='N52',
                   NOM_CMP='DRY',
                   VALE_CALC=-3.46389584E-14,
                   VALE_REFE=0.0,
                   CRITERE='ABSOLU',),
                _F(NUME_ORDRE=1,
                   PARA='FREQ',
                   RESULTAT=MODES2,
                   VALE_CALC=1.4439528243636E-3,
                   CRITERE='RELATIF',),
                _F(NUME_ORDRE=2,
                   PARA='FREQ',
                   RESULTAT=MODES2,
                   VALE_CALC=3.7155436902842E-3,
                   CRITERE='RELATIF',),
                _F(NUME_ORDRE=3,
                   PARA='FREQ',
                   RESULTAT=MODES2,
                   VALE_CALC=9.0153708874319E-3,
                   CRITERE='RELATIF',),
                _F(NUME_ORDRE=4,
                   PARA='FREQ',
                   RESULTAT=MODES2,
                   VALE_CALC=0.013470807823186,
                   CRITERE='RELATIF',),
                _F(NUME_ORDRE=1,
                   PARA='FREQ',
                   REFERENCE='AUTRE_ASTER',
                   RESULTAT=MODES,
                   VALE_CALC= 1.44657816E-03,
                   VALE_REFE=1.4439500000000001E-3,
                   CRITERE='RELATIF',
                   PRECISION=2.E-3,),
                _F(NUME_ORDRE=2,
                   PARA='FREQ',
                   REFERENCE='AUTRE_ASTER',
                   RESULTAT=MODES,
                   VALE_CALC= 3.79844657E-03,
                   VALE_REFE=3.7155399999999998E-3,
                   CRITERE='RELATIF',
                   PRECISION=0.023,),
                _F(NUME_ORDRE=3,
                   PARA='FREQ',
                   REFERENCE='AUTRE_ASTER',
                   RESULTAT=MODES,
                   VALE_CALC= 9.13052856E-03,
                   VALE_REFE=9.01537E-3,
                   CRITERE='RELATIF',
                   PRECISION=0.012999999999999999,),
                _F(NUME_ORDRE=4,
                   PARA='FREQ',
                   REFERENCE='AUTRE_ASTER',
                   RESULTAT=MODES,
                   VALE_CALC=0.014077177,
                   VALE_REFE=0.0134708,
                   CRITERE='RELATIF',
                   PRECISION=0.045999999999999999,),
                ),
          )

FIN()
#
