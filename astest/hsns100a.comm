# MODIF  DATE 22/11/2001   AUTEUR VABHHTS J.PELLET 
# TITRE PLAQUE SOUMISE A UN GRADIENT DE TEMPERATURE DANS L'EPAISSEUR
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
#CAS_TEST__: HSNS100A
# ----------------------------------------------------------------------
# MODELISATION : DKT ET COQUE_3D
# ----------------------------------------------------------------------
#

DEBUT(CODE=_F(  NOM = 'HSNS100A',NIV_PUB_WEB='INTERNET') )

M=LIRE_MAILLAGE( )

M=DEFI_GROUP( reuse=M,   MAILLAGE=M,
  CREA_GROUP_MA=_F(  NOM = 'TOUT', TOUT = 'OUI'))

M=DEFI_GROUP(reuse=M,  MAILLAGE=M,
        CREA_GROUP_NO=_F( TOUT_GROUP_MA = 'OUI'))

TEMPER=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_TEMP_R', MAILLAGE=M,
        AFFE=_F(   TOUT = 'OUI',
           NOM_CMP = ('TEMP', 'TEMP_INF', 'TEMP_SUP',),
           VALE = ( 0.,     -50.,       +50., )) )

MO=AFFE_MODELE(    MAILLAGE=M,AFFE=(
       # TRIA3 : DKT
       _F( MAILLE = ('M1','M2',),
       PHENOMENE = 'MECANIQUE', MODELISATION = 'DKT'),
       # QUAD4 : DKQ
       _F( MAILLE = ('M3',),
       PHENOMENE = 'MECANIQUE', MODELISATION = 'DKT'),
       # TRIA7 : MEC3TR7H
       _F( MAILLE = ('M4','M5',),
       PHENOMENE = 'MECANIQUE', MODELISATION = 'COQUE_3D'),
       # QUAD9 : MEC3QU9H
       _F( MAILLE = ('M6',),
       PHENOMENE = 'MECANIQUE', MODELISATION = 'COQUE_3D'))
  )

CARAC=AFFE_CARA_ELEM(  MODELE=MO,
           COQUE=_F(COQUE_NCOU=5,
       GROUP_MA = 'TOUT',
 EPAIS = 0.10, MODI_METRIQUE = 'OUI',
                            A_CIS = 1.E+5) )

ACIER=DEFI_MATERIAU(       ELAS=_F( E = 2.,  NU = 0.3, ALPHA = 1.E-2),
           ECRO_LINE=_F( D_SIGM_EPSI = .2, SY = 10000.) )

CM=AFFE_MATERIAU(   MAILLAGE=M,
       AFFE=_F( TOUT = 'OUI', MATER = ACIER, TEMP_REF = 20.))

CH_LA=AFFE_CHAR_MECA(   MODELE=MO,
         TEMP_CALCULEE=TEMPER,DDL_IMPO=(
        _F( TOUT = 'OUI', DRZ = 0.),
        _F( GROUP_NO = 'BOUT1', DX = 0., DY = 0., DRZ = 0.),
        _F( GROUP_NO = 'BOUT1', DRX = 0.,DRY = 0.,DZ = 0.))
           )

CH_FO=AFFE_CHAR_MECA(    MODELE=MO,

         FORCE_NODALE=_F( GROUP_NO = 'BOUT2',   FX = 1.0000, FY = 1.0000, FZ = 1.0000)
         )

RAMPE=DEFI_FONCTION(   NOM_PARA='INST',
           PROL_GAUCHE='LINEAIRE',  PROL_DROITE='LINEAIRE',
           VALE=(0.0,0.0,1.0,1.0,))

L_INST=DEFI_LIST_REEL(  DEBUT=0.0,
              INTERVALLE=_F( JUSQU_A = 1.0,      NOMBRE = 3) )

U2=STAT_NON_LINE(
                            MODELE=MO,
                        CHAM_MATER=CM,
                         CARA_ELEM=CARAC,EXCIT=(
                             _F(
                CHARGE = CH_FO,
                FONC_MULT = RAMPE), _F(
                CHARGE = CH_LA)),
                         COMP_INCR=_F( RELATION = 'VMIS_ISOT_LINE', ),
                         INCREMENT=_F(
                LIST_INST = L_INST,
                NUME_INST_FIN = 2),
                            NEWTON=_F(
                MATRICE = 'ELASTIQUE'),
                       CONVERGENCE=_F(
                ITER_GLOB_MAXI = 30,
                ITER_INTE_MAXI = 30,
                RESI_INTE_RELA = 1.E-8)
              )

U2=CALC_ELEM( reuse=U2,
                            OPTION=(
                  'SIEF_ELNO_ELGA',  'VARI_ELNO_ELGA',),
                          RESULTAT=U2,
                            MODELE=MO,
                        CHAM_MATER=CM,
                         CARA_ELEM=CARAC
              )

U2=STAT_NON_LINE( reuse=U2,
                            MODELE=MO,
                        CHAM_MATER=CM,
                         CARA_ELEM=CARAC,EXCIT=(
                             _F(
                CHARGE = CH_FO,
                FONC_MULT = RAMPE), _F(
                CHARGE = CH_LA)),
                         COMP_INCR=_F( RELATION = 'VMIS_ISOT_LINE', ),
                         ETAT_INIT=_F(
                EVOL_NOLI = U2,
                NUME_ORDRE = 2),
                         INCREMENT=_F(
                LIST_INST = L_INST,
                NUME_INST_FIN = 3),
                            NEWTON=_F(
                MATRICE = 'TANGENTE',
                REAC_ITER = 2),
                       CONVERGENCE=_F(
                ITER_INTE_MAXI = 30,
                RESI_INTE_RELA = 1.E-8)
              )

U2=CALC_ELEM( reuse=U2,
                            OPTION=(
                  'SIEF_ELNO_ELGA',  'VARI_ELNO_ELGA',),
                          RESULTAT=U2,
                        NUME_ORDRE=3,
                            MODELE=MO,
                        CHAM_MATER=CM,
                         CARA_ELEM=CARAC
              )

U2=CALC_ELEM( reuse=U2, CHAM_MATER=CM,  RESULTAT=U2,
                 MODELE=MO,
                 EXCIT=_F( CHARGE = CH_LA),
                   CARA_ELEM=CARAC, TOUT_ORDRE='OUI',
                 NUME_COUCHE=1,  NIVE_COUCHE='SUP',
                  OPTION='EPSI_ELNO_DEPL'
                    )

#L'OPTION DEGE_ELNO_DEPL N'EXISTE PAS POUR LES ELEMENTS COQUE
#NECESSITE DU PARTAGE DES OPTIONS SUIVANT LES ELEMENTS


U2=CALC_ELEM( reuse=U2, CHAM_MATER=CM,  RESULTAT=U2,
                 MODELE=MO,
                 EXCIT=_F( CHARGE = CH_LA),
                   CARA_ELEM=CARAC,
                   MAILLE=('M1','M2','M3',),
                 TOUT_ORDRE='OUI',
                 NUME_COUCHE=1,  NIVE_COUCHE='SUP',
                  OPTION=( 'DEGE_ELNO_DEPL',
                         )
                    )

TEST_RESU(RESU=(

# DEPL :
  _F( RESULTAT = U2,NOM_CHAM = 'DEPL',NUME_ORDRE = 3,
        NOEUD = 'N1',  NOM_CMP = 'DY', VALE = 1.10831E+02),
  _F( RESULTAT = U2,NOM_CHAM = 'DEPL',NUME_ORDRE = 3,
        NOEUD = 'N1',   NOM_CMP = 'DZ', VALE = 1.1379E+05),
  _F( RESULTAT = U2,NOM_CHAM = 'DEPL',NUME_ORDRE = 3,
        NOEUD = 'N17',  NOM_CMP = 'DRY', VALE = -1.9616E+04),

# SIEF_ELGA :
  _F( RESULTAT = U2,NOM_CHAM = 'SIEF_ELGA',NUME_ORDRE = 3,
        MAILLE = 'M1', POINT = 3, SOUS_POINT = 16,NOM_CMP = 'SIXY', VALE = 2.53107E+00),
        #element DKT : MXX est stocke sous SIXY du sous_point : 3*nb_cou +1
  _F( RESULTAT = U2,NOM_CHAM = 'SIEF_ELGA',NUME_ORDRE = 3,
        MAILLE = 'M5', POINT = 1, SOUS_POINT = 14, NOM_CMP = 'SIYY', VALE = -1.6665E+02),

# SIEF_ELNO_ELGA :
  _F( RESULTAT = U2,NOM_CHAM = 'SIEF_ELNO_ELGA',NUME_ORDRE = 3,
        MAILLE = 'M1', NOEUD = 'N8', NOM_CMP = 'MXX', VALE = 3.594152E+00),
  _F( RESULTAT = U2,NOM_CHAM = 'SIEF_ELNO_ELGA',NUME_ORDRE = 3,
        MAILLE = 'M5', NOEUD = 'Z2',  NOM_CMP = 'NXY', VALE = -7.83839E-01),

# SIEF_ELGA :
  _F( RESULTAT = U2,NOM_CHAM = 'SIEF_ELGA',NUME_ORDRE = 3,
        MAILLE = 'M1', POINT = 1,SOUS_POINT = 1, NOM_CMP = 'SIXX',  VALE = -5.57986E+02),
  _F( RESULTAT = U2,NOM_CHAM = 'SIEF_ELGA',NUME_ORDRE = 3,
        MAILLE = 'M1', POINT = 1,SOUS_POINT = 6, NOM_CMP = 'SIXX', VALE = -1.08505E+02),

# VARI_ELGA :
  _F( RESULTAT = U2,NOM_CHAM = 'VARI_ELGA',NUME_ORDRE = 3,
        MAILLE = 'M5', POINT = 1, NOM_CMP = 'V1',  VALE = 0.0E0,
        CRITERE = 'ABSOLU'),

# EPSI_ELNO_DEPL :
  _F( RESULTAT = U2,NOM_CHAM = 'EPSI_ELNO_DEPL',NUME_ORDRE = 3,
        MAILLE = 'M1', NOEUD = 'N16', NOM_CMP = 'EPXY', VALE = -8.590736E+00),

# DEGE_ELNO_DEPL :
  _F( RESULTAT = U2,NOM_CHAM = 'DEGE_ELNO_DEPL',NUME_ORDRE = 3,
        MAILLE = 'M1', NOEUD = 'N8', NOM_CMP = 'GAX', VALE = -9.358623E+00))

                           )

FIN()
#
##
#########################################################################
#    &U2 = CALC_ELEM (CHAM_MATER: CM RESULTAT: U2
#                 MODELE:MO
#                 EXCIT:(CHARGE: CH_LA)
#                 CARA_ELEM : CARAC TOUT_ORDRE:'OUI'
#                 NUME_COUCHE:1  NIVE_COUCHE:'SUP'
#                 OPTION: ( 'EFGE_ELNO_DEPL'
#                           'SIEF_ELGA_DEPL'
#                           'SIGM_ELNO_DEPL')
#                    );
#
## EFGE_ELNO_DEPL :
#  RESU:(RESULTAT:U2,NOM_CHAM:'EFGE_ELNO_DEPL',NUME_ORDRE:3
#        MAILLE:M1 NOEUD:N16 NOM_CMP:'NXX' VALE:1.34572E+00)
#  RESU:(RESULTAT:U2,NOM_CHAM:'EFGE_ELNO_DEPL',NUME_ORDRE:3
#        MAILLE:M1 NOEUD:N8  NOM_CMP:'MXX' VALE:3.5917E+00)
#  RESU:(RESULTAT:U2,NOM_CHAM:'EFGE_ELNO_DEPL',NUME_ORDRE:3
#        MAILLE:M5 NOEUD:N12  NOM_CMP:'MXX' VALE:2.44038E+00)
#
## SIEF_ELGA_DEPL :
#  RESU:(RESULTAT:U2,NOM_CHAM:'SIEF_ELGA_DEPL',NUME_ORDRE:3
#        MAILLE:M1 POINT: 3 NOM_CMP:'MXX' VALE:2.52864E+00)
#  RESU:(RESULTAT:U2,NOM_CHAM:'SIEF_ELGA_DEPL',NUME_ORDRE:3
#        MAILLE:M6 POINT: 4  NOM_CMP:'SIXX' VALE:1.12938E+02 )
#
## SIGM_ELNO_DEPL :
#  RESU:(RESULTAT:U2,NOM_CHAM:'SIGM_ELNO_DEPL',NUME_ORDRE:3
#        MAILLE:M1 NOEUD: N8 NOM_CMP:'SIYY' VALE:6.499432E+02)
#  RESU:(RESULTAT:U2,NOM_CHAM:'SIGM_ELNO_DEPL',NUME_ORDRE:3
#        MAILLE:M6 NOEUD: N12  NOM_CMP:'SIXX' VALE:-1.36513E+03)
#
