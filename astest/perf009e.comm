# MODIF  DATE 29/10/2012   AUTEUR DELMAS J.DELMAS 
# TITRE CALCUL DE PERFORMANCE : POMPE RIS
# perf009e.para = tps_job 1200 mem_job 2863Mo liste_test PI
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================

# Partitionnement en 4 sous-domaines (DEFI_PART_FETI), 4 processeurs max
# Matrice distribuee par processeur (MATR_DISTRIBUEE)
# Mumps Out-Of-Core (GESTION_MEMOIRE='OUT_OF_CORE')

DEBUT(CODE=_F(NOM='PERF009E',
              NIV_PUB_WEB='INTERNET',
              VISU_EFICAS='OUI',),
      IMPR_MACRO='OUI',);

MA=DEFI_MATERIAU(ELAS=_F(E=200000.0,
                         NU=0.3,),);

MAIL=LIRE_MAILLAGE(FORMAT='MED',
                   VERI_MAIL=_F(VERIF='OUI',
                                APLAT=1e-07,),);

MAIL=DEFI_GROUP(reuse =MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=_F(TOUT_GROUP_MA='OUI',),);

MODE=AFFE_MODELE(MAILLAGE=MAIL,
                 AFFE=_F(TOUT='OUI',
                         PHENOMENE='MECANIQUE',
                         MODELISATION='3D',),);

MATE=AFFE_MATERIAU(MAILLAGE=MAIL,
                   AFFE=_F(TOUT='OUI',
                           MATER=MA,),);

CHAR=AFFE_CHAR_MECA(MODELE=MODE,
                    FACE_IMPO=_F(GROUP_MA='Face_Bas',
                                 DX=0.0,
                                 DY=0.0,
                                 DZ=0.0,),);

PRES=AFFE_CHAR_MECA(MODELE=MODE,
                    PRES_REP=_F(GROUP_MA='Int',
                                PRES=100.,),);

PART=DEFI_PART_FETI(NB_PART=4,
                    MODELE=MODE,
                    EXCIT=_F(#CHARGE=CHAR,
                             ),
                    CORRECTION_CONNEX='NON',
                    METHODE='KMETIS',
                    NOM_GROUP_MA='SD',);

MODE=MODI_MODELE(reuse =MODE,
                 MODELE=MODE,
                 PARTITION=_F(PARALLELISME='SOUS_DOMAINE',
                              PARTITION=PART,),);

DEP=MECA_STATIQUE(MODELE=MODE,
                  CHAM_MATER=MATE,
                  EXCIT=(_F(CHARGE=CHAR,),
                         _F(CHARGE=PRES,),),
                  OPTION='SANS',
                  SOLVEUR=_F(METHODE='MUMPS',
                             GESTION_MEMOIRE='OUT_OF_CORE',
                             RESI_RELA=-1.0,
                             MATR_DISTRIBUEE='OUI',),);

DEPLM=POST_RELEVE_T(ACTION=_F(OPERATION='MOYENNE',
                              INTITULE='Deplacement moyen sur Haut',
                              RESULTAT=DEP,
                              NOM_CHAM='DEPL',
                              GROUP_NO='Haut',
                              TOUT_CMP='OUI',),);

IMPR_TABLE(TABLE=DEPLM,);

TEST_TABLE(
           VALE_CALC=3.8367900000000001,
           TOLE_MACHINE=1.E-3,
           NOM_PARA='DX',
           TABLE=DEPLM,
           FILTRE=_F(CRIT_COMP='EQ',
                     NOM_PARA='QUANTITE',
                     VALE_K='MOMENT_0',),
           )

TEST_TABLE(
           VALE_CALC=-7.4144699999999997,
           TOLE_MACHINE=1.E-3,
           NOM_PARA='DY',
           TABLE=DEPLM,
           FILTRE=_F(CRIT_COMP='EQ',
                     NOM_PARA='QUANTITE',
                     VALE_K='MOMENT_0',),
           )

TEST_TABLE(
           VALE_CALC=2.8753299999999999,
           TOLE_MACHINE=1.E-3,
           NOM_PARA='DZ',
           TABLE=DEPLM,
           FILTRE=_F(CRIT_COMP='EQ',
                     NOM_PARA='QUANTITE',
                     VALE_K='MOMENT_0',),
           )

FIN();
