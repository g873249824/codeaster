# ======================================================================
# COPYRIGHT (C) 1991 - 2016  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
DEBUT(CODE=_F(NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

MAIL=LIRE_MAILLAGE(FORMAT='MED',VERI_MAIL=_F(VERIF='OUI'),);



MODMECA=AFFE_MODELE(MAILLAGE=MAIL,
                    AFFE=_F(GROUP_MA=('ENCAST','SYME','CHARGE','VIROLE'),
                            PHENOMENE='MECANIQUE',
                            MODELISATION='3D',),);

MODI_MAILLAGE(reuse =MAIL,
                   MAILLAGE=MAIL,
                   ORIE_PEAU_3D=_F(GROUP_MA=('ENCAST','SYME','CHARGE',),),
                   );


EL=4.E10
ET=2.1E11
EN=2.1E11
GLT=0.45E10
GTN=0.35E10
GLN=0.45E10
NULT=0.0142857143
NULN=0.0142857143
NUTN=0.075

ACIER=DEFI_MATERIAU(   ELAS_ORTH=_F( E_L   = EL,
                                     E_T   = ET,
                                     E_N   = EN,
                                     G_LT  = GLT,
                                     G_TN  = GTN,
                                     G_LN  = GLN,
                                     NU_LT = NULT,
                                     NU_LN = NULN,
                                     NU_TN = NUTN,
                                     )
                    )



CHMAT=AFFE_MATERIAU(MAILLAGE=MAIL,
                    AFFE=_F(GROUP_MA='VIROLE',
                            MATER=ACIER,),);

CARAELE=AFFE_CARA_ELEM(MODELE=MODMECA,
                       MASSIF=_F(GROUP_MA='VIROLE',
                                ANGL_AXE=(0.0,90.0),
                                ORIG_AXE=(0.,0.,0.)),);

BLOCAGE=AFFE_CHAR_MECA(MODELE=MODMECA,
                       DDL_IMPO=(_F(GROUP_MA='ENCAST',
                                    DZ=0.0,),
                                 _F(GROUP_MA='SYME',
                                    DY=0.0,),
                                 _F(GROUP_NO='PM',
                                    DX=0.0,),),);

PHYDR=DEFI_FONCTION(NOM_PARA='Z',
                    VALE=(0.0,15000.0,16.0,0.0),);

PH=AFFE_CHAR_MECA_F(MODELE=MODMECA,
                    PRES_REP=_F(GROUP_MA='CHARGE',
                                   PRES=PHYDR,),);


# PASSAGE PAR MECA_STATIQUE

ELAS=MECA_STATIQUE(MODELE=MODMECA,
                    CHAM_MATER=CHMAT,
                    CARA_ELEM=CARAELE,
                    EXCIT=(_F(CHARGE=BLOCAGE,),
                           _F(CHARGE=PH,),),);

R = 5.7;

L = 16.0;

h = 0.04;

P = 15000.0;

Nuthetaz=NULT*ET/EL
Etheta=ET
Er=EN
DZMAX = (-(Nuthetaz)*P*R*L)/Etheta/h/2.
DXMAX  = P*R**2/(h*Er)

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  GROUP_NO='A3',
                  REFERENCE='ANALYTIQUE',
                  RESULTAT=ELAS,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DZ',
                  VALE_CALC=-6.06741789E-06,
                  VALE_REFE=-6.1071428632500006E-06,
                  PRECISION=1.E-2,),
          )

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  GROUP_NO='A4',
                  REFERENCE='ANALYTIQUE',
                  RESULTAT=ELAS,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DZ',
                  VALE_CALC=-6.06741784E-06,
                  VALE_REFE=-6.1071428632500006E-06,
                  PRECISION=1.E-2,),
          )

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  GROUP_NO='PM',
                  REFERENCE='ANALYTIQUE',
                  RESULTAT=ELAS,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DY',
                  VALE_CALC= 5.71369058E-05,
                  VALE_REFE=5.8017857142857149E-05,
                  PRECISION=0.02,),
          )

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  GROUP_NO='A1',
                  REFERENCE='ANALYTIQUE',
                  RESULTAT=ELAS,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DX',
                  VALE_CALC= 5.71369111E-05,
                  VALE_REFE=5.8017857142857149E-05,
                  PRECISION=0.02,),
          )

# PASSAGE PAR STAT_NON_LINE (INFORMATIQUEMENT C EST DIFFERENT)

LIST=DEFI_LIST_REEL(DEBUT=0.0,
                    INTERVALLE=_F(JUSQU_A=1.0,
                                  NOMBRE=1,),);

ELAS2=STAT_NON_LINE(MODELE=MODMECA,
                    CHAM_MATER=CHMAT,
                    CARA_ELEM=CARAELE,
                    COMPORTEMENT=_F(RELATION='ELAS'),
                    INCREMENT=_F(LIST_INST=LIST,),
                    EXCIT=(_F(CHARGE=BLOCAGE,),
                           _F(CHARGE=PH,),),);

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  GROUP_NO='A3',
                  REFERENCE='ANALYTIQUE',
                  RESULTAT=ELAS2,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DZ',
                  VALE_CALC=-6.06741789E-06,
                  VALE_REFE=-6.1071428632500006E-06,
                  PRECISION=1.E-2,),
          )

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  GROUP_NO='A4',
                  REFERENCE='ANALYTIQUE',
                  RESULTAT=ELAS2,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DZ',
                  VALE_CALC=-6.06741784E-06,
                  VALE_REFE=-6.1071428632500006E-06,
                  PRECISION=1.E-2,),
          )

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  GROUP_NO='PM',
                  REFERENCE='ANALYTIQUE',
                  RESULTAT=ELAS2,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DY',
                  VALE_CALC= 5.71369090E-05,
                  VALE_REFE=5.8017857142857149E-05,
                  PRECISION=0.02,),
          )

TEST_RESU(RESU=_F(NUME_ORDRE=1,
                  GROUP_NO='A1',
                  REFERENCE='ANALYTIQUE',
                  RESULTAT=ELAS2,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DX',
                  VALE_CALC= 5.71369081E-05,
                  VALE_REFE=5.8017857142857149E-05,
                  PRECISION=0.02,),
          )

FIN();
