
# MODIF  DATE 28/01/2008   AUTEUR PELLET J.PELLET 
# TITRE ESSAI DE FLUAGE EN 3D VENDOCHAB
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2005  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
#----------------------------------------------------------------------
#    TEST MODELE VISCO-PLASTIQUE COUPLE AVEC L'ENDOMMAGEMENT
#     ISOTROPE DE CHABOCHE EN ANISOTHERME ( VENDOCHAB)
#    ESSAI EN TRACTION (RELAXATION) EXPLICITE
#    DEPLACEMENT IMPOSE A TEMPERATURE ANISOTHERME DANS LE TEMPS
#----------------------------------------------------------------------
#         ELEMENT HEXA 8 NOEUDS EN TRACTION
#              ETAT UNIAXIAL DE CONTRAINTE DEFORMATION
#       UNITES : NEWTON , MILLIMETRE , SECONDE (N,MM,S,->MPA)
#
#               Z       A                     A = 3 MM
#               L<------------->
#               L                             L = 30 MM
#                / N5            N8
#              >O--------------O      X
#              /L             /L      L
#         N6  / L         N7 / L      L
#           >O--+-----------O  L      L
#            L  L           L  L      L
#            L  L           L  L      L
#            L  L           L  L      L  L
#            L  L           L  L      L
#            L  L           L  L      L
#            L  L           L  L      L
#            L  L           L  L      L
#            L  L           L  L      L
#            L  L           L  L      L
#            L  L/ N1       L  L N4   L
#            L >O-----------L--O-> Y  V
#            L /V           L /
#         N2 L/          N3 L/
#           >O--------------O
#
#          /
#         X
#
#----------------------------------------------------------------------

DEBUT(CODE=_F(NOM='SSNV183A',
              NIV_PUB_WEB='INTERNET',),);
#----------------------------------------------------------------------
#              TEST MODELE VENDOCHAB 3D
#      PAS DE CHARGEMENT THERMIQUE (ALPHA = 0 )
#      RELAXATION D UNE EPROUVETTE PARRALELIPIPEDIQUE
#      EN TRACTION UNIAXIALE
#      CHAMPS DE TEMPERATURE ANISOTHERME
#      K_D NE DEPEND QUE DE LA TEMPERATURE (FONCTION)
#----------------------------------------------------------------------

EPROU=LIRE_MAILLAGE();

EPROU=DEFI_GROUP(reuse =EPROU,
                 MAILLAGE=EPROU,
                 CREA_GROUP_MA=_F(NOM='FACE',
                                  OPTION='FACE_NORMALE',
                                  VECT_NORMALE=(0.0,0.0,1.0,),),);

EPD3=AFFE_MODELE(MAILLAGE=EPROU,
                 AFFE=_F(MAILLE=('MA1','MA2',),
                         PHENOMENE='MECANIQUE',
                         MODELISATION='3D',),);

ACIER=DEFI_MATERIAU(ELAS=_F(E=150000.0,
                            NU=0.3,),
                    VENDOCHAB=_F(S_VP=0.0,
                                 SEDVP1=0.0,
                                 SEDVP2=0.0,
                                 N_VP=12.0,
                                 M_VP=9.0,
                                 K_VP=2110.0,
                                 R_D=6.3,
                                 A_D=3191.0,
                                 K_D=14.0,),);

MAT=AFFE_MATERIAU(MAILLAGE=EPROU,
                  AFFE=_F(MAILLE='MA1',
                          MATER=ACIER,
                          ),);

LINST=DEFI_LIST_REEL(DEBUT=0.0,
                     INTERVALLE=(_F(JUSQU_A=0.2,
                                    NOMBRE=10,),
                                 _F(JUSQU_A=2.0,
                                    NOMBRE=10,),
                                 _F(JUSQU_A=20.0,
                                    NOMBRE=10,),
                                 _F(JUSQU_A=200.0,
                                    NOMBRE=10,),
                                 _F(JUSQU_A=2000.0,
                                    NOMBRE=10,),
                                 _F(JUSQU_A=20000.0,
                                    NOMBRE=10,),
                                 _F(JUSQU_A=200000.0,
                                    NOMBRE=10,),
                                 _F(JUSQU_A=1000000.0,
                                    NOMBRE=30,),
                                 _F(JUSQU_A=1600000.0,
                                    NOMBRE=30,),
                                 _F(JUSQU_A=1700000.0,
                                    NOMBRE=40,),
                                 _F(JUSQU_A=1800000.0,
                                    NOMBRE=40,),
                                 _F(JUSQU_A=1900000.0,
                                    NOMBRE=40,),
                                 _F(JUSQU_A=2000000.0,
                                    NOMBRE=40,),
                                 _F(JUSQU_A=2100000.0,
                                    NOMBRE=40,),
                                 _F(JUSQU_A=2200000.0,
                                    NOMBRE=40,),
                                 _F(JUSQU_A=2300000.0,
                                    NOMBRE=40,),
                                 _F(JUSQU_A=2400000.0,
                                    NOMBRE=40,),
                                 _F(JUSQU_A=2500000.0,
                                    NOMBRE=40,),),);

COND_LIM=AFFE_CHAR_MECA(MODELE=EPD3,
                        DDL_IMPO=(_F(NOEUD='N1',
                                     DX=0.0,
                                     DY=0.0,
                                     DZ=0.0,),
                                  _F(NOEUD='N2',
                                     DY=0.0,
                                     DZ=0.0,),
                                  _F(NOEUD='N3',
                                     DZ=0.0,),
                                  _F(NOEUD='N4',
                                     DX=0.0,
                                     DZ=0.0,),
                                  _F(NOEUD='N5',
                                     DX=0.0,
                                     DY=0.0,),
                                  _F(NOEUD='N6',
                                     DY=0.0,),
                                  _F(NOEUD='N8',
                                     DX=0.0,),),
                        PRES_REP=_F(GROUP_MA='FACEINT',
                                    PRES=-200.0,),);

COEF_TR=DEFI_FONCTION(NOM_PARA='INST',
                      VALE=(0.0,0.0,0.1,1.0,100.0,1.0,1500000.0,1.0,2400000.0,1.0,2450000.0,1.0,3000000.0,1.0,),);

SOLNL=STAT_NON_LINE(MODELE=EPD3,
                    CHAM_MATER=MAT,
                    EXCIT=_F(CHARGE=COND_LIM,
                             FONC_MULT=COEF_TR,),
                    COMP_INCR=_F(RELATION='VENDOCHAB',
                                 DEFORMATION='PETIT',
                                 RESI_INTE_RELA=1e-06,
                                 ITER_INTE_MAXI=60,
                                 RESO_INTE='RUNGE_KUTTA_2',
                                 TOUT='OUI',),
                    INCREMENT=_F(LIST_INST=LINST,),
                    NEWTON=_F(REAC_INCR=5,
                              MATRICE='ELASTIQUE',
                              REAC_ITER=3,),
                    CONVERGENCE=_F(RESI_GLOB_RELA=1e-06,
                                   ITER_GLOB_MAXI=60),
                    TITRE='TEST RELAXATION SIMPLE',);

SOLNL=CALC_ELEM(reuse =SOLNL,
                MODELE=EPD3,
                CHAM_MATER=MAT,
                RESULTAT=SOLNL,
                OPTION=('SIEF_ELNO_ELGA','VARI_ELNO_ELGA',),);

TEST_RESU(RESU=(_F(RESULTAT=SOLNL,
                   NUME_ORDRE=82,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V9',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.0152596,
                   PRECISION=0.005,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL,
                   NUME_ORDRE=100,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V9',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.0330676,
                   PRECISION=0.005,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL,
                   NUME_ORDRE=290,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V9',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.099465369,
                   PRECISION=0.005,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL,
                   NUME_ORDRE=390,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V9',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.137520763,
                   PRECISION=0.005,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL,
                   NUME_ORDRE=490,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V9',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.266018229,
                   PRECISION=0.015,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL,
                   NUME_ORDRE=82,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V8',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.002300147,
                   PRECISION=0.005,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL,
                   NUME_ORDRE=100,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V8',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.003179469,
                   PRECISION=0.005,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL,
                   NUME_ORDRE=290,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V8',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.00495103,
                   PRECISION=0.005,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL,
                   NUME_ORDRE=390,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V8',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.005592847,
                   PRECISION=0.005,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL,
                   NUME_ORDRE=490,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V8',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.00699749,
                   PRECISION=0.005,
                   REFERENCE='ANALYTIQUE',),),);
# IMPLICITE

SOLNL2=STAT_NON_LINE(MODELE=EPD3,
                     CHAM_MATER=MAT,
                     EXCIT=_F(CHARGE=COND_LIM,
                              FONC_MULT=COEF_TR,),
                     COMP_INCR=_F(RELATION='VENDOCHAB',
                                  DEFORMATION='PETIT',
                                  RESI_INTE_RELA=1e-06,
                                  ITER_INTE_MAXI=60,
                                  TOUT='OUI',),
                     INCREMENT=_F(LIST_INST=LINST,),
                     NEWTON=_F(REAC_ITER=3,),
                     CONVERGENCE=_F(RESI_GLOB_RELA=1e-06,
                                    ITER_GLOB_MAXI=60),
                     TITRE='TEST RELAXATION SIMPLE',);

SOLNL2=CALC_ELEM(reuse =SOLNL2,
                 MODELE=EPD3,
                 CHAM_MATER=MAT,
                 RESULTAT=SOLNL2,
                 OPTION=('SIEF_ELNO_ELGA','VARI_ELNO_ELGA',),);

TEST_RESU(RESU=(_F(RESULTAT=SOLNL2,
                   NUME_ORDRE=82,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V9',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.0152596,
                   PRECISION=0.006,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL2,
                   NUME_ORDRE=100,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V9',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.0330676,
                   PRECISION=0.008,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL2,
                   NUME_ORDRE=290,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V9',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.099465369,
                   PRECISION=0.014,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL2,
                   NUME_ORDRE=390,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V9',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.137520763,
                   PRECISION=0.02,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL2,
                   NUME_ORDRE=82,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V8',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.002300147,
                   PRECISION=0.015,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL2,
                   NUME_ORDRE=100,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V8',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.003179469,
                   PRECISION=0.008,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL2,
                   NUME_ORDRE=290,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V8',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.00495103,
                   PRECISION=0.005,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL2,
                   NUME_ORDRE=390,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V8',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.005592847,
                   PRECISION=0.005,
                   REFERENCE='ANALYTIQUE',),
                _F(RESULTAT=SOLNL2,
                   INST=2500000,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V8',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.00699749,
                   PRECISION=(0.06,1e-06,),
                   REFERENCE='ANALYTIQUE',),),);

TABR=POST_RELEVE_T(ACTION=_F(INTITULE='R',
                             NOEUD='N1',
                             RESULTAT=SOLNL2,
                             NOM_CHAM='VARI_ELNO_ELGA',
                             NOM_CMP='V8',
                             OPERATION='EXTRACTION',),);

TABD=POST_RELEVE_T(ACTION=_F(INTITULE='D',
                             NOEUD='N1',
                             RESULTAT=SOLNL2,
                             NOM_CHAM='VARI_ELNO_ELGA',
                             NOM_CMP='V9',
                             OPERATION='EXTRACTION',),);

IMPR_TABLE(TABLE=TABR,UNITE=29,
           FORMAT='TABLEAU',
           NOM_PARA=('INST','V8',),);

IMPR_TABLE(TABLE=TABD,UNITE=29,
           FORMAT='TABLEAU',
           NOM_PARA=('INST','V9',),);

####
# TEST DE SIGM_INTERNE
####

SIG_CART=CREA_CHAMP(TYPE_CHAM='CART_SIEF_R',
                  OPERATION='AFFE',
                  MODELE=EPD3,
                  AFFE=_F(TOUT='OUI',
                          NOM_CMP=('SIXX','SIYY','SIZZ','SIXY','SIXZ','SIYZ'),
                          VALE=(0.,0.,200.,0.,0.,0.),),);


SIG_CHAM=CREA_CHAMP(TYPE_CHAM='ELGA_SIEF_R',
                  OPERATION='AFFE',
                  MODELE=EPD3,
                  AFFE=_F(TOUT='OUI',
                          NOM_CMP=('SIXX','SIYY','SIZZ','SIXY','SIXZ','SIYZ'),
                          VALE=(0.,0.,200.,0.,0.,0.),),);



CL=AFFE_CHAR_MECA(MODELE=EPD3,
                        DDL_IMPO=(_F(NOEUD='N1',
                                     DX=0.0,
                                     DY=0.0,
                                     DZ=0.0,),
                                  _F(NOEUD='N2',
                                     DY=0.0,
                                     DZ=0.0,),
                                  _F(NOEUD='N3',
                                     DZ=0.0,),
                                  _F(NOEUD='N4',
                                     DX=0.0,
                                     DZ=0.0,),
                                  _F(NOEUD='N5',
                                     DX=0.0,
                                     DY=0.0,),
                                  _F(NOEUD='N6',
                                     DY=0.0,),
                                  _F(NOEUD='N8',
                                     DX=0.0,),),
                                    );
CHA_CART=AFFE_CHAR_MECA(MODELE=EPD3,
                        SIGM_INTERNE=_F(SIGM=SIG_CART),            
                                    );

CHA_CHAM=AFFE_CHAR_MECA(MODELE=EPD3,
                        SIGM_INTERNE=_F(SIGM=SIG_CHAM),            
                                    );


MS_PRES=MECA_STATIQUE(MODELE=EPD3,
                    CHAM_MATER=MAT,
                    EXCIT=_F(CHARGE=COND_LIM,),
                        );
                    
MS_CART=MECA_STATIQUE(MODELE=EPD3,
                    CHAM_MATER=MAT,
                    EXCIT=(
                    _F(CHARGE=CL),
                    _F(CHARGE=CHA_CART),
                        ))
                    
MS_CHAM=MECA_STATIQUE(MODELE=EPD3,
                    CHAM_MATER=MAT,
                    EXCIT=(
                    _F(CHARGE=CL),
                    _F(CHARGE=CHA_CHAM),
                        ))

SNL_CART=STAT_NON_LINE(MODELE=EPD3,
                    CHAM_MATER=MAT,
                    EXCIT=(
                    _F(CHARGE=CL),
                    _F(CHARGE=CHA_CART,FONC_MULT=COEF_TR,),
                             ),
                    COMP_INCR=_F(RELATION='VENDOCHAB',
                                 ITER_INTE_MAXI=60,
                                 RESO_INTE='RUNGE_KUTTA_2',),
                    INCREMENT=_F(LIST_INST=LINST,NUME_INST_FIN=82),
                    NEWTON=_F(MATRICE='ELASTIQUE',PREDICTION='EXTRAPOL'),
                    CONVERGENCE=_F(ITER_GLOB_MAXI=60),)

SNL_CHAM=STAT_NON_LINE(MODELE=EPD3,
                    CHAM_MATER=MAT,
                    EXCIT=(
                    _F(CHARGE=CL),
                    _F(CHARGE=CHA_CHAM,FONC_MULT=COEF_TR,),
                             ),
                    COMP_INCR=_F(RELATION='VENDOCHAB',
                                 ITER_INTE_MAXI=60,
                                 RESO_INTE='RUNGE_KUTTA_2',),
                    INCREMENT=_F(LIST_INST=LINST,NUME_INST_FIN=82),
                    NEWTON=_F(MATRICE='ELASTIQUE',PREDICTION='EXTRAPOL'),
                    CONVERGENCE=_F(ITER_GLOB_MAXI=60),)

SNL_CHAM=CALC_ELEM(reuse =SNL_CHAM,
                 MODELE=EPD3,
                 CHAM_MATER=MAT,
                 RESULTAT=SNL_CHAM,
                 OPTION=('SIEF_ELNO_ELGA','VARI_ELNO_ELGA',),);
                 
SNL_CART=CALC_ELEM(reuse =SNL_CART,
                 MODELE=EPD3,
                 CHAM_MATER=MAT,
                 RESULTAT=SNL_CART,
                 OPTION=('SIEF_ELNO_ELGA','VARI_ELNO_ELGA',),);
                 
TEST_RESU(RESU=_F(RESULTAT=MS_PRES,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   NOEUD='N8',
                   NUME_ORDRE=1,
                   VALE=4.00000E-03,
                   REFERENCE='ANALYTIQUE',),)
                   
TEST_RESU(RESU=_F(RESULTAT=MS_CART,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   NOEUD='N8',
                   NUME_ORDRE=1,
                   VALE=4.00000E-03,
                   REFERENCE='ANALYTIQUE',),)
                   
TEST_RESU(RESU=_F(RESULTAT=MS_CHAM,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   NOEUD='N8',
                   NUME_ORDRE=1,
                   VALE=4.00000E-03,
                   REFERENCE='ANALYTIQUE',),)
                   
TEST_RESU(RESU=_F(RESULTAT=SNL_CART,
                   NUME_ORDRE=82,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V9',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.0152596,
                   PRECISION=0.006,
                   REFERENCE='ANALYTIQUE',),)

TEST_RESU(RESU=_F(RESULTAT=SNL_CHAM,
                   NUME_ORDRE=82,
                   NOM_CHAM='VARI_ELNO_ELGA',
                   NOM_CMP='V9',
                   MAILLE='MA1',
                   NOEUD='N1',
                   VALE=0.0152596,
                   PRECISION=0.006,
                   REFERENCE='ANALYTIQUE',),)
                   

FIN();
#
