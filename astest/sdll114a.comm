# MODIF  DATE 30/07/2012   AUTEUR LEFEBVRE J-P.LEFEBVRE 
# TITRE POUTRE DE SECTION RECTANGULAIRE VARIABLE (POSEE-POSEE)
# sdll114a.para = tps_job 60 mem_job 512Mo ncpus 1 liste_test R
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#CAS_TEST__: SDLL114A
# SDLL114/A
#    MODES DE DEFORMATION EN FLEXION
#    POUTRE ELANCEE L=2M, H0=0.06M, H1=0.03M
#    LARGEUR CONSTANTE B=0.05M
#    ORIENTEE SELON L'AXE Z, AFFINITE D'AXE PARALLELE A X OU Y
#    MODELISATION POU_D_E, 11 NOEUDS, 10 SEG2
#    REF: R.D.BLEVINS(8.21, 8.22) ET VALIDATION POUX EANV1/A

DEBUT(  CODE=_F(  NOM = 'SDLL114A',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

#
#12.01

MAPOU=LIRE_MAILLAGE()

MAPOU=DEFI_GROUP( reuse=MAPOU,   MAILLAGE=MAPOU,
  CREA_GROUP_MA=_F(  NOM = 'TOUT', TOUT = 'OUI'))

#
#22.01

MOPOU=AFFE_MODELE(  MAILLAGE=MAPOU,
                      AFFE=_F(  TOUT = 'OUI', PHENOMENE = 'MECANIQUE',
                             MODELISATION = 'POU_D_E')
                    )

#
#23.01 MATER

MTPOU=DEFI_MATERIAU( ELAS=_F(  E = 2.E11,  NU = 0.3,  RHO = 7800.) )

#
#23.02 CHAM_MATER

AMPOU=AFFE_MATERIAU(  MAILLAGE=MAPOU,
                        AFFE=_F(  TOUT = 'OUI', MATER = MTPOU)
                      )

#25.01 CHAR_MECA

CHPOU=AFFE_CHAR_MECA(
               MODELE=MOPOU,DDL_IMPO=(

                   _F(  GROUP_NO = 'PA',   DX = 0.,  DY = 0., DZ = 0., DRZ = 0.),
                   _F(  GROUP_NO = 'PB',   DY = 0.,  DX = 0.))
                       )

#
#24.01 CARA_ELEM
#
# AFFINITE PARALLELE A Y
CARELX=AFFE_CARA_ELEM(    MODELE=MOPOU, INFO=2,
                          POUTRE=(

     _F(  MAILLE = 'M1', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',    'HZ2',   ),
          VALE = (  0.05,  0.0600,   0.0570, )),
     _F(  MAILLE = 'M2', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',    'HZ2',   ),
          VALE = (  0.05,  0.0570,   0.0540, )),
     _F(  MAILLE = 'M3', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',    'HZ2',   ),
          VALE = (  0.05,  0.0540,   0.0510, )),
     _F(  MAILLE = 'M4', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',    'HZ2',   ),
          VALE = (  0.05,  0.0510,   0.0480, )),
     _F(  MAILLE = 'M5', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',    'HZ2',   ),
          VALE = (  0.05,  0.0480,   0.0450, )),
     _F(  MAILLE = 'M6', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',    'HZ2',   ),
          VALE = (  0.05,  0.0450,   0.0420, )),
     _F(  MAILLE = 'M7', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',    'HZ2',   ),
          VALE = (  0.05,  0.0420,   0.0390, )),
     _F(  MAILLE = 'M8', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',    'HZ2',   ),
          VALE = (  0.05,  0.0390,   0.0360, )),
     _F(  MAILLE = 'M9', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',    'HZ2',   ),
          VALE = (  0.05,  0.0360,   0.0330, )),
     _F(  MAILLE = 'M10', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',    'HZ2',   ),
          VALE = (  0.05,  0.0330,   0.0300, )))

                        )

#
# AFFINITE PARALLELE A Z PAR ROTATION ET CALCUL PAR HOMOTHETIQUE
CARELY=AFFE_CARA_ELEM(    MODELE=MOPOU, INFO=2,

   ORIENTATION=_F( GROUP_MA = 'TOUT', CARA = 'ANGL_VRIL', VALE = 90., ),

   POUTRE=(

     _F(  MAILLE = 'M1', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',   'HZ1',     'HZ2',   ),
          VALE = (  0.05,   0.0600,    0.0570, )),
     _F(  MAILLE = 'M2', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',     'HZ2',   ),
          VALE = (  0.05,  0.0570,     0.0540, )),
     _F(  MAILLE = 'M3', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',     'HZ2',   ),
          VALE = (  0.05,  0.0540,    0.0510, )),
     _F(  MAILLE = 'M4', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',     'HZ2',   ),
          VALE = (  0.05,  0.0510,    0.0480, )),
     _F(  MAILLE = 'M5', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',     'HZ2',   ),
          VALE = (  0.05,  0.0480,    0.0450, )),
     _F(  MAILLE = 'M6', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',     'HZ2',   ),
          VALE = (  0.05,  0.0450,    0.0420, )),
     _F(  MAILLE = 'M7', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',     'HZ2',   ),
          VALE = (  0.05,  0.0420,    0.0390, )),
     _F(  MAILLE = 'M8', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',     'HZ2',   ),
          VALE = (  0.05,  0.0390,    0.0360, )),
     _F(  MAILLE = 'M9', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',     'HZ2',   ),
          VALE = (  0.05,  0.0360,    0.0330, )),
     _F(  MAILLE = 'M10', SECTION = 'RECTANGLE', VARI_SECT = 'AFFINE',
          CARA = ( 'HY',  'HZ1',     'HZ2',   ),
          VALE = (  0.05,  0.0330,    0.0300, )))
                        )

#
#61.04 TABL_MASS_INER
MASSX=POST_ELEM(    MODELE=MOPOU,
                      CHAM_MATER=AMPOU,
                      CARA_ELEM=CARELX,
                      MASS_INER=(_F(  GROUP_MA = 'POU', ),
                      _F( MAILLE = 'M1'),),
                      TITRE=( 'POUTRE AFFINE  ',)
                  )

MASSY=POST_ELEM(    MODELE=MOPOU,
                      CHAM_MATER=AMPOU,
                      CARA_ELEM=CARELY,
                      MASS_INER=(_F(  GROUP_MA = 'POU', ),
                      _F( MAILLE = 'M1'),),
                      TITRE=( 'POUTRE AFFINE ROTATION 90',)
                  )

TEST_TABLE(      TABLE=MASSX,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='MASSE',
                     VALE=35.1                )

TEST_TABLE(      TABLE=MASSX,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='CDG_X',
                  CRITERE='ABSOLU',
                     VALE=0.                  )

TEST_TABLE(      TABLE=MASSX,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='CDG_Y',
                  CRITERE='ABSOLU',
                     VALE=0.                  )

TEST_TABLE(      TABLE=MASSX,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='CDG_Z',
                     VALE=0.88888             )

TEST_TABLE(      TABLE=MASSX,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='IX_G',
                     VALE=11.273979            )

TEST_TABLE(      TABLE=MASSX,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='IY_G',
                     VALE=11.27325479          )

TEST_TABLE(      TABLE=MASSX,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='IZ_G',
                     VALE=1.389375E-02         )

TEST_TABLE(      TABLE=MASSX,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='IX_PRIN_G',
                     VALE=1.389375E-02         )

TEST_TABLE(      TABLE=MASSX,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='IY_PRIN_G',
                     VALE=11.2732479           )

TEST_TABLE(      TABLE=MASSX,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='IZ_PRIN_G',
                     VALE=11.273979           )

TEST_TABLE(      TABLE=MASSY,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='MASSE',
                VALE=35.1                     )

TEST_TABLE(      TABLE=MASSY,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='CDG_X',
                  CRITERE='ABSOLU',
                     VALE=0.                  )

TEST_TABLE(      TABLE=MASSY,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='CDG_Y',
                  CRITERE='ABSOLU',
                     VALE=0.                  )

TEST_TABLE(      TABLE=MASSY,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='CDG_Z',
                     VALE=0.88888             )

TEST_TABLE(      TABLE=MASSY,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='IX_G',
                     VALE=11.2732479          )

TEST_TABLE(      TABLE=MASSY,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='IY_G',
                     VALE=11.273979           )

TEST_TABLE(      TABLE=MASSY,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='IZ_G',
                     VALE=1.3893755E-02       )

TEST_TABLE(      TABLE=MASSY,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='IX_PRIN_G',
                     VALE=1.389375E-02        )

TEST_TABLE(      TABLE=MASSY,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='IY_PRIN_G',
                     VALE=11.2732479          )

TEST_TABLE(      TABLE=MASSY,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = 'POU'),
                 NOM_PARA='IZ_PRIN_G',
                     VALE=11.2732479          )

# --------------------------------------------------------------------
# ====================================
#
#41.01 MATR_ELEM_DEPL_R
RIGIDX=CALC_MATR_ELEM(
                          OPTION='RIGI_MECA',
                          MODELE=MOPOU,
                          CHARGE=CHPOU,
                          CARA_ELEM=CARELX,
                          CHAM_MATER=AMPOU
                        )

#
RIGIDY=CALC_MATR_ELEM(
                          OPTION='RIGI_MECA',
                          MODELE=MOPOU,
                          CHARGE=CHPOU,
                          CARA_ELEM=CARELY,
                          CHAM_MATER=AMPOU
                        )

#
#41.01 MATR_ELEM_DEPL_R
MASSEX=CALC_MATR_ELEM(
                           OPTION='MASS_MECA',
                           MODELE=MOPOU,
                           CHARGE=CHPOU,
                           CARA_ELEM=CARELX,
                           CHAM_MATER=AMPOU
                         )

#
MASSEY=CALC_MATR_ELEM(
                           OPTION='MASS_MECA',
                           MODELE=MOPOU,
                           CHARGE=CHPOU,
                           CARA_ELEM=CARELY,
                           CHAM_MATER=AMPOU
                         )

#
#42.01 NUME_DDL
NURX=NUME_DDL(    MATR_RIGI=RIGIDX )

NURY=NUME_DDL(    MATR_RIGI=RIGIDY )

#
#42.02 MATR_ASSE_DEPL_R
RIGIDXX=ASSE_MATRICE(
                         MATR_ELEM=RIGIDX,
                          NUME_DDL=NURX
                      )

RIGIDXY=ASSE_MATRICE(
                         MATR_ELEM=RIGIDY,
                          NUME_DDL=NURY
                      )

#42.02 MATR_ASSE_DEPL_R
MASSEXX=ASSE_MATRICE(
                         MATR_ELEM=MASSEX,
                          NUME_DDL=NURX
                      )

MASSEXY=ASSE_MATRICE(
                         MATR_ELEM=MASSEY,
                          NUME_DDL=NURY
                      )

#52.01 MODE_MECA
MODPOUX=MODE_ITER_INV(
                          MATR_A=RIGIDXX,
                          MATR_B=MASSEXX,
                          CALC_FREQ=_F( FREQ = (0., 300.,))
#                ' (AFFINITE // X) &RL'
#               ' 0.06X0.05 A 0.03X0.05 POSEE POSEE  SDLL114 ')
                        )

MODPOUY=MODE_ITER_INV(
                          MATR_A=RIGIDXY,
                          MATR_B=MASSEXY,
                          CALC_FREQ=_F( FREQ = (0., 300.,))
#                'TOURNEE DE 90 DEGRES AUTOUR DE Z (AFFINITE //Y) &RL'
#               ' 0.06X0.05 A 0.03X0.05 POSEE POSEE  SDLL114 ')
                        )

#72.01

TEST_RESU(RESU=(
#A2X
             _F(  RESULTAT = MODPOUX,  PARA = 'FREQ',
                     CRITERE = 'RELATIF',  PRECISION = 0.043,
                     NUME_MODE = 1,       VALE = 2.4883719438590E+01),
# EN ATTENTE DES VALEURS A TESTER  DANS LE SENS X
                  _F(  RESULTAT = MODPOUX,  PARA = 'FREQ',
                     CRITERE = 'RELATIF',  PRECISION = 0.011,
                     NUME_MODE = 3,       VALE = 1.0117166656029E+02),
                  _F(  RESULTAT = MODPOUX,  PARA = 'FREQ',
                     CRITERE = 'RELATIF',  PRECISION = 0.016,
                     NUME_MODE = 5,       VALE = 2.2717436461294E+02),
#A2Y
                  _F(  RESULTAT = MODPOUY,  PARA = 'FREQ',
                     CRITERE = 'RELATIF',  PRECISION = 0.043,
                     NUME_MODE = 1,       VALE = 2.4883721494878E+01),
                  _F(  RESULTAT = MODPOUY,  PARA = 'FREQ',
                     CRITERE = 'RELATIF',  PRECISION = 0.011,
                     NUME_MODE = 3,       VALE = 1.0117166656029E+02),
                  _F(  RESULTAT = MODPOUY,  PARA = 'FREQ',
                     CRITERE = 'RELATIF',  PRECISION = 0.016,
                     NUME_MODE = 5,       VALE = 2.2717436461294E+02))
         )

#
FIN( )
#
