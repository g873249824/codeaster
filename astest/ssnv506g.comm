# TITRE INDENTATION ELASTOPLASTIQUE D UN DEMI-PLAN
# ======================================================================
# COPYRIGHT (C) 1991 - 2013  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#       PAR UN INDENTEUR SPHERIQUE ELASTIQUE
#       REPRISE CAS-TEST SSNV506G: 3D (H8), METHODE CONTINUE
#       SPHERE RIGIDE MODELISER UNIQUEMENT PAR LA SURFACE DE CONTACT

DEBUT(CODE=_F(NOM='SSNV506G',
              NIV_PUB_WEB='INTERNET',),
      DEBUG=_F(SDVERI='OUI',),
      IGNORE_ALARM='CALCULEL2_63',);

# <CALCULEL2_63> : DANS UN MODELE, IL EXISTE DES ELEMENTS DE TYPE "BORD" QUI N'ONT PAS DE VOISIN AVEC RIGIDITE
#  LE MODELE PROVOQUANT CES ALARMES CONTIENT UNE SURFACE RIGIDE POUR LE CONTACT
#-------------------------------------------------------
#                      LECTURE MAILLAGE SSNV506G.MGIB
#-------------------------------------------------------

MA=LIRE_MAILLAGE(FORMAT='MED',
                 INFO=1,);

SSNV506G=CREA_MAILLAGE(MAILLAGE=MA,
                       RESTREINT=_F(GROUP_MA=('BATI','BASE','SBXY','SBYZ','SESC','SMAI',),
                                    GROUP_NO=('S','E',),),);

#-------------------------------------------------------
#                     DEFINITION DU MODELE
#-------------------------------------------------------

SSNV506G=DEFI_GROUP(reuse =SSNV506G,
                    MAILLAGE=SSNV506G,
                    CREA_GROUP_NO=_F(TOUT_GROUP_MA='OUI',),);

MO=AFFE_MODELE(MAILLAGE=SSNV506G,
               AFFE=_F(TOUT='OUI',
                       PHENOMENE='MECANIQUE',
                       MODELISATION='3D',),);

# REORENTATION DES NORMALES DES SURFACES DE CONTACT

SSNV506G=MODI_MAILLAGE(reuse =SSNV506G,
                       MAILLAGE=SSNV506G,
                       ORIE_PEAU_3D=_F(GROUP_MA='SESC',),
                       INFO=1,);

SSNV506G=MODI_MAILLAGE(reuse =SSNV506G,
                       MAILLAGE=SSNV506G,
                       ORIE_NORM_COQUE=_F(GROUP_MA='SMAI',
                                          VECT_NORM=(0.0,-1.0,0.0,),
                                          GROUP_NO='E',),
                       INFO=1,);

#----------------------------------------------------------------------
#                      DEFINITION DES MATERIAUX
#----------------------------------------------------------------------

MSPH=DEFI_MATERIAU(ELAS=_F(E=210000,
                           NU=0.29999999999999999,),);

MBATI=DEFI_MATERIAU(ELAS=_F(E=210000,
                            NU=0.29999999999999999,),
                    ECRO_LINE=_F(D_SIGM_EPSI=0.0,
                                 SY=50.0,),);

CHMAT=AFFE_MATERIAU(MAILLAGE=SSNV506G,
                    AFFE=(_F(GROUP_MA='SMAI',
                             MATER=MSPH,),
                          _F(GROUP_MA='BATI',
                             MATER=MBATI,),),);

#----------------------------------------------------------------------
#              DEFINITION DES PARAMETRES DE CHARGEMENT
#----------------------------------------------------------------------

RAMPE=DEFI_FONCTION(NOM_PARA='INST',
                    VALE=(0.0,0.0,
                          1.0,1.0,
                          ),
                    PROL_DROITE='LINEAIRE',PROL_GAUCHE='LINEAIRE',);

LINST=DEFI_LIST_REEL(DEBUT=0.0,
                     INTERVALLE=(_F(JUSQU_A=0.01,
                                    NOMBRE=10,),
                                 _F(JUSQU_A=0.1,
                                    NOMBRE=18,),
                                 _F(JUSQU_A=1.0,
                                    NOMBRE=9,),),);

#---------------------------------------------------------------------
#              AFFECTATION DES CONDITIONS AUX LIMITES
#                     ET DU DEPLACEMENT IMPOSE
#---------------------------------------------------------------------

DPLIMPO=AFFE_CHAR_CINE(MODELE=MO,
                       MECA_IMPO=(_F(GROUP_NO='SMAI',
                                    DX=0.,
                                    DY=-100.,
                                    DZ=0.,),
                                 _F(GROUP_NO='BASE',
                                    DX=0.,
                                    DY=0.,
                                    DZ=0.,),
                                 _F(GROUP_NO='SBYZ',
                                    DX=0.,),
                                 _F(GROUP_NO='SBXY',
                                    DZ=0.,),),);

CONT=DEFI_CONTACT(MODELE=MO,
                  FORMULATION='DISCRETE',
                  LISSAGE='OUI',
                  RESI_ABSO=1.e-3,
                  ZONE=_F(GROUP_MA_MAIT='SMAI',
                          GROUP_MA_ESCL='SESC',
                          ALGO_CONT='GCP',),);

DEFLIST=DEFI_LIST_INST(DEFI_LIST=_F(METHODE='MANUEL',
                                    LIST_INST=LINST,),);

#----------------------------------------------------------------------
#                         RESOLUTION
#----------------------------------------------------------------------

SSNV506=STAT_NON_LINE(MODELE=MO,
                      CHAM_MATER=CHMAT,
                      EXCIT=_F(CHARGE=DPLIMPO,
                               FONC_MULT=RAMPE,),
                      CONTACT=CONT,
                      COMPORTEMENT=(_F(RELATION='VMIS_ISOT_LINE',
                                   GROUP_MA='BATI',),
                                   _F(RELATION='ELAS',
                                   GROUP_MA='SMAI',),),
                      INCREMENT=_F(LIST_INST=DEFLIST,
                                   INST_FIN=0.02,),
                      METHODE='NEWTON',
                      NEWTON=_F(MATRICE='TANGENTE',
                                REAC_ITER=1,),
                      SOLVEUR=_F(METHODE='GCPC',
                                 PRE_COND='LDLT_SP',
                                 SYME='OUI',),
                      INFO=1,);

#----------------------------------------------------------------------
#                         POST TRAITEMENT
#----------------------------------------------------------------------

SSNV506=CALC_CHAMP(reuse =SSNV506,
                   RESULTAT=SSNV506,
                   FORCE='REAC_NODA',);

TAB_REAC=POST_RELEVE_T(ACTION=_F(OPERATION='EXTRACTION',
                                 INTITULE='FORCE',
                                 RESULTAT=SSNV506,
                                 NOM_CHAM='REAC_NODA',
                                 LIST_INST=LINST,
                                 GROUP_NO='SESC',
                                 RESULTANTE='DY',),);

#----------------------------------------------------------------------
#                   TESTS DES RESULTATS
#----------------------------------------------------------------------
# TESTS SUR DES VALEURS ANALYTIQUES

TEST_TABLE(TABLE=TAB_REAC,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=0.02,),
           NOM_PARA='DY',
           VALE_REFE=-320135.1,
           PRECISION=0.2,
           REFERENCE='ANALYTIQUE',
           VALE_CALC=-3.6492888860861E+05,)


FIN();
