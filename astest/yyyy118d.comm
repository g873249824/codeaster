# MODIF  DATE 16/09/2008   AUTEUR LEFEBVRE J-P.LEFEBVRE 
# TITRE   SUIVI PERFORMANCE :
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2008  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY  
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY  
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR     
# (AT YOUR OPTION) ANY LATER VERSION.                                                    
#                                                                       
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT   
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF            
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU      
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                              
#                                                                       
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE     
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,         
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.        
# ======================================================================
#         TUBE + FISSURE CIRCONFERENTIELLE - PETSC CG
#--------------------------------------------------------

# CONTENU DU FICHIER DE CONFIGURATION .petscrc DEVANT 
# FIGURER DANS LE $HOME DU COMPTE D'EXECUTION
#
# EN VERSION SEQUENTIELLE :
# =======================
#
#      -ksp_type cg
#      -pc_type ilu
#      -pc_factor_mat_ordering_type natural
#      -pc_factor_levels 1
#      -pc_factor_fill 3.0
#      -ksp_rtol 1.0e-6
#      -ksp_norm_type unpreconditioned
#      -info
#
# EN VERSION PARALELE :
# ===================
#      -ksp_type cg
#      -pc_type bjacobi
#      -sub_pc_type ilu
#      -sub_pc_factor_mat_ordering_type natural
#      -sub_pc_factor_levels 1
#      -sub_pc_factor_fill 3.0
#      -ksp_rtol 1.0e-6
#      -ksp_norm_type unpreconditioned
#      -no_signal_handler
#      -info

DEBUT(CODE=_F( NOM = 'YYYY118D',NIV_PUB_WEB='INTRANET'),
      MEMOIRE=_F( DYNAMIQUE=100,),
)

PRE_IDEAS()

MAIL=LIRE_MAILLAGE( )

MAIL=DEFI_GROUP( reuse=MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=_F( 
                          GROUP_MA = 'HAUT'))

MAIL=DEFI_GROUP( reuse=MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=_F( 
                          GROUP_MA = 'BAS'))

MAIL=DEFI_GROUP( reuse=MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=_F( 
                          GROUP_MA = 'LEVRE1'))

MAIL=DEFI_GROUP( reuse=MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=_F( 
                          GROUP_MA = 'LEVRE2'))

MAIL=DEFI_GROUP( reuse=MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=_F( 
                          GROUP_MA = 'PINT'))

MAIL=DEFI_GROUP( reuse=MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=_F( 
                          GROUP_MA = 'SYMY'))

LISTINSM=DEFI_LIST_REEL( 
              DEBUT=0.,
         
                     INTERVALLE=_F( JUSQU_A = 1.,NOMBRE = 1)
                                 )

VARN=DEFI_FONCTION(  NOM_PARA='INST',
                           PROL_DROITE='LINEAIRE',
                           PROL_GAUCHE='LINEAIRE',
                           VALE=(0., 0.,
                                 1., 1.,
                                 2., 0.,))

VARP=DEFI_FONCTION(  NOM_PARA='INST',
                           PROL_DROITE='LINEAIRE',
                           PROL_GAUCHE='LINEAIRE',
                           VALE=(0., 0.,
                                 1., 0.,
                                 2., 1.,))

MOMECA=AFFE_MODELE( 
           MAILLAGE=MAIL,
           AFFE=_F( 
              TOUT = 'OUI',
              PHENOMENE = 'MECANIQUE',
              MODELISATION = '3D'))

MAIL=MODI_MAILLAGE( reuse=MAIL,   MAILLAGE=MAIL,
                  ORIE_PEAU_3D=_F(  GROUP_MA =  'HAUT',  )
                     )

TRACAUS=DEFI_FONCTION(   NOM_PARA='EPSI',  PROL_DROITE='LINEAIRE',
                                       PROL_GAUCHE='LINEAIRE',
                      VALE=( 5.724E-5,     10.,
                             1.145E-4,     20.,
                             1.718E-4,     30.,
                             2.292E-4,     40.,
                             2.870E-4,     50.,
                             3.458E-4,     60.,
                             4.065E-4,     70.,
                             4.710E-4,     80.,
                             5.416E-4,     90.,
                             6.222E-4,     100.,
                             7.178E-4,     110.,
                             8.354E-4,     120.,
                             9.843E-4,     130.,
                             1.176E-3,     140.,
                             1.425E-3,     150.,
                             1.750E-3,     160.,
                             2.174E-3,     170.,
                             2.722E-3,     180.,
                             3.428E-3,     190.,
                             4.329E-3,     200.,
                             5.469E-3,     210.,
                             6.900E-3,     220.,
                             8.681E-3,     230.,
                             1.088E-2,     240.,
                             1.358E-2,     250.,
                             1.686E-2,     260.,
                             2.082E-2,     270.,
                             2.558E-2,     280.,
                             3.125E-2,     290.,
                             3.798E-2,     300.,
                             4.593E-2,     310.,
                             5.525E-2,     320.,
                             6.614E-2,     330.,
                             7.880E-2,     340.,
                             9.345E-2,     350.,
                             1.103E-1,     360.,
                             1.298E-1,     370.,
                             1.520E-1,     380.,
                             1.773E-1,     390.,
                             2.061E-1,     400.,
                             2.387E-1,     410.,
                             2.755E-1,     420.,
                             3.169E-1,     430.,
                             3.635E-1,     440.,
                             4.157E-1,     450.,
                             4.740E-1,     460.,
                             5.389E-1,     470.,
                             6.112E-1,     480.,
                             6.914E-1,     490.,
                             7.802E-1,     500.,
                                             ))

MAT=DEFI_MATERIAU( 
                ELAS=_F( E = 174700.,
                      NU = 0.3),
                 TRACTION=_F( SIGM = TRACAUS))

CHM=AFFE_MATERIAU( 
           MAILLAGE=MAIL,
           AFFE=_F( 
                  TOUT = 'OUI',
                  MATER = MAT))

CLDEP=AFFE_CHAR_MECA( 
            MODELE=MOMECA,DDL_IMPO=(
            _F( 
                    GROUP_NO = 'BAS',
                    DZ = 0.),
            _F( 
                    NOEUD = 'N1528',
                    DX = 0.,
                    DY = 0.),
            _F( 
                    GROUP_NO = 'SYMY',
                    DY = 0.))
                     )

CLN=AFFE_CHAR_MECA( 
            MODELE=MOMECA,
            PRES_REP=_F( 
                     GROUP_MA = 'HAUT',
                     PRES = -1.))

CLP=AFFE_CHAR_MECA( 
            MODELE=MOMECA,
            PRES_REP=_F( 
                     GROUP_MA = 'PINT',
                     PRES = 1.))

U=STAT_NON_LINE(  INFO=1,
            MODELE=MOMECA,
            CHAM_MATER=CHM,EXCIT=(
            _F(  CHARGE = CLDEP),
            _F(  CHARGE = CLN,
                    FONC_MULT = VARN),
            _F(  CHARGE = CLP,
                    FONC_MULT = VARP)),
            COMP_ELAS=_F( RELATION = 'ELAS'),
            INCREMENT=_F( LIST_INST = LISTINSM),
            NEWTON=_F(  MATRICE = 'ELASTIQUE'),
            CONVERGENCE=_F( RESI_GLOB_RELA = 1.0E-5,
                         ITER_GLOB_MAXI = 1,
                         ARRET = 'OUI'),
            SOLVEUR=_F( METHODE          = 'PETSC',
                        ALGORITHME       = 'CG',
                        PRE_COND         = 'LDLT_INC',
                        NIVE_REMPLISSAGE = 1,
                        REMPLISSAGE      = 3.0,
                        RENUM            = 'RCMK', )
                   )

TEST_RESU( RESU=( 
         _F( RESULTAT = U,
             NOM_CHAM = 'DEPL',   NUME_ORDRE = 1,
             NOEUD = 'N1123',    NOM_CMP = 'DX',
#    REFERENCE OBTENUE POUR MODELISATION A :
             REFERENCE = 'AUTRE_ASTER',
             VALE = 2.11630E-04,  PRECISION = 1.E-4 ),
         _F( RESULTAT = U,
             NOM_CHAM = 'DEPL',   NUME_ORDRE = 1,
             NOEUD = 'N1044',    NOM_CMP = 'DZ',
#    REFERENCE OBTENUE POUR MODELISATION A :
             REFERENCE = 'AUTRE_ASTER',
             VALE = 1.41895E-02,  PRECISION = 1.E-4 )
                )  
          )

FIN()
#
