# person_in_charge: sebastien.fayolle at edf.fr
# TITRE  : ENDOMMAGEMENT D UNE PLAQUE PLANE SOUS SOLLICITATIONS VARIEES
# ======================================================================
# COPYRIGHT (C) 1991 - 2013  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================s
#
#  DETAILS : MODELISATION : MULTI-COUCHES
#                          (DKT- ENDO_ISOT_BETON+2*GRILLE ACIER)
#                                           VS.
#                           DKTG (GLRC_DM)
#            MAILLAGE     : TRIA3
#            CHARGEMENT   : FLEXION CYCLIQUE
#            REMARQUE 1   : LES PARAMETRES GLRC_DM ONT ETE IDENTIFIES
#                           PAR CE TEST

DEBUT(CODE=_F(
              NIV_PUB_WEB='INTERNET',),);

# PARAMETRES
EP = 0.1;

DR0 = 0.03;

t1 = 1.0;

t2 = (3 * t1);

t3 = (4.0 * t1);

dt = 0.05;

fx = 500000.0;

EGM = 35625000000.0;

EGF = 38660000000.0;

EB = 32308000000.0;


# -- MAILLAGE MULTI-COUCHES --

MAIL=LIRE_MAILLAGE();

MAIL=DEFI_GROUP(reuse =MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=(_F(GROUP_MA='A1A2',),
                               _F(GROUP_MA='A4A3',),
                               _F(GROUP_MA='A2A4',),
                               _F(GROUP_MA='A3A1',),),);

MAIL=MODI_MAILLAGE(reuse =MAIL,
                   MAILLAGE=MAIL,
                   ORIE_NORM_COQUE=_F(GROUP_MA='DALLE',
                                      VECT_NORM=(0.,0.,1.,),
                                      GROUP_NO='A1',),);

# MAILLAGE ENDO_ISOT

MA=CREA_MAILLAGE(MAILLAGE=MAIL,
                 CREA_MAILLE=(_F(NOM='ACIER2L',
                                   GROUP_MA='DALLE',
                                   PREF_MAILLE='A2L',),
                                _F(NOM='ACIER1T',
                                   GROUP_MA='DALLE',
                                   PREF_MAILLE='A1T',),
                                _F(NOM='ACIER2T',
                                   GROUP_MA='DALLE',
                                   PREF_MAILLE='A2T',),
                                _F(NOM='ACIER1L',
                                   GROUP_MA='DALLE',
                                   PREF_MAILLE='A1L',),
                                _F(NOM='DALLE_G',
                                   GROUP_MA='DALLE',
                                   PREF_MAILLE='G',),),);

# -- MODELE ENDO_ISOT --

MO=AFFE_MODELE(MAILLAGE=MA,
               INFO=1,
               AFFE=(_F(GROUP_MA='DALLE',
                        PHENOMENE='MECANIQUE',
                        MODELISATION='DKT',),
                     _F(GROUP_MA='ACIER1L',
                        PHENOMENE='MECANIQUE',
                        MODELISATION='GRILLE_EXCENTRE',),
                     _F(GROUP_MA='ACIER1T',
                        PHENOMENE='MECANIQUE',
                        MODELISATION='GRILLE_EXCENTRE',),
                     _F(GROUP_MA='ACIER2L',
                        PHENOMENE='MECANIQUE',
                        MODELISATION='GRILLE_EXCENTRE',),
                     _F(GROUP_MA='ACIER2T',
                        PHENOMENE='MECANIQUE',
                        MODELISATION='GRILLE_EXCENTRE',),),);

# -- MODELE GLRC_DM ET DHRC --

MO_G=AFFE_MODELE(MAILLAGE=MA,
                 INFO=1,
                 AFFE=_F(GROUP_MA='DALLE_G',
                         PHENOMENE='MECANIQUE',
                         MODELISATION='DKTG',),);

# -- MATERIAUX --
# BETON & ACIER ENDO_ISOT

BETON_E=DEFI_MATERIAU(ELAS=_F(E=EB,
                              NU=0.2,
                              RHO=2500.0,),
                      BETON_ECRO_LINE=_F(D_SIGM_EPSI=(-0.2 * EB),
                                         SYT=3.4E6,),);

ACIER=DEFI_MATERIAU(ELAS=_F(E=2.E11,
                            NU=0.2,
                            RHO=7800.0,
                            AMOR_ALPHA=3.7771128018011707E-05,
                            AMOR_BETA=2.6476993459625175,),
                    ECRO_LINE=_F(D_SIGM_EPSI=3.E8,
                                 SY=5.70000000E8,),
                    INFO=1,);

#BETON GLRC_DM
MAT_G=DEFI_MATERIAU(ELAS_GLRC=_F(E_M=EGM,
                                 NU_M=0.18,
                                 E_F=EGF,
                                 NU_F=0.17,),
                    GLRC_DM=_F(GAMMA_T=0.06,
                               GAMMA_C=0.8,
                               GAMMA_F=0.45,
                               NYT=3.7E5,
                               MYF=9.E3,),);


#BETON DHRC
MAT_D=DEFI_MATERIAU(ELAS_DHRC=_F(
                            A0=(3.685E+09, 6.985E+08, 0.000E+00, 4.944E+03, 6.651E+02, 0.000E+00,
                                3.684E+09, 0.000E+00, 6.161E+02, 4.318E+03, 0.000E+00, 1.409E+09,
                                0.000E+00, 0.000E+00, 8.309E+02, 3.154E+06, 5.835E+05, 0.000E+00,
                                3.028E+06, 0.000E+00, 1.177E+06,),
                               ),

                    DHRC=_F(
                               NYD=(1.7E6*1.7E6*1.476E-11*EP,1.7E6*1.7E6*1.476E-11*EP,),
                               SCRIT=(.5E5*EP,.5E5*EP,.5E5*EP,.5E5*EP,),

                               AA_C=( 2.086E+00, 2.085E+00, 1.000E+00, 2.063E+00, 1.764E+00,
                                      1.000E+00, 2.086E+00, 1.000E+00, 1.764E+00, 2.096E+00,
                                      1.000E+00, 1.118E+00, 1.000E+00, 1.000E+00, 1.122E+00,
                                      2.088E+00, 2.092E+00, 1.000E+00, 2.096E+00, 1.000E+00,
                                      1.120E+00, 2.085E+00, 2.085E+00, 1.000E+00, 2.058E+00,
                                      1.764E+00, 1.000E+00, 2.086E+00, 1.000E+00, 1.764E+00,
                                      2.085E+00, 1.000E+00, 1.118E+00, 1.000E+00, 1.000E+00,
                                      1.122E+00, 2.088E+00, 2.092E+00, 1.000E+00, 2.096E+00,
                                      1.000E+00, 1.120E+00,),

                               AA_T=( 1.952E+00, 1.704E+00, 1.000E+00, 2.017E+00, 1.233E+00,
                                      1.000E+00, 1.945E+00, 1.000E+00, 1.224E+00, 2.025E+00,
                                      1.000E+00, 1.118E+00, 1.000E+00, 1.000E+00, 1.122E+00,
                                      2.004E+00, 1.882E+00, 1.000E+00, 2.025E+00, 1.000E+00,
                                      1.120E+00, 1.952E+00, 1.705E+00, 1.000E+00, 2.015E+00,
                                      1.233E+00, 1.000E+00, 1.945E+00, 1.000E+00, 1.224E+00,
                                      2.026E+00, 1.000E+00, 1.118E+00, 1.000E+00, 1.000E+00,
                                      1.122E+00, 2.004E+00, 1.882E+00, 1.000E+00, 2.025E+00,
                                      1.000E+00, 1.120E+00,),

                               GA_C=( 8.998E-01, 8.914E-01, 1.000E+00, 1.017E+01, 3.416E+00,
                                      1.000E+00, 8.998E-01, 1.000E+00, 3.416E+00, 1.034E+01,
                                      1.000E+00, 3.928E-01, 1.000E+00, 1.000E+00, 2.248E+01,
                                      9.035E-01, 8.912E-01, 1.000E+00, 8.969E-01, 1.000E+00,
                                      3.944E-01, 8.998E-01, 8.914E-01, 1.000E+00, -8.195E+00,
                                      -1.416E+00, 1.000E+00, 8.998E-01, 1.000E+00, -1.416E+00,
                                      -8.325E+00, 1.000E+00, 3.928E-01, 1.000E+00, 1.000E+00,
                                      -2.048E+01, 9.035E-01, 8.912E-01, 1.000E+00, 8.970E-01,
                                      1.000E+00, 3.943E-01,),

                               GA_T=( 1.007E-01, 2.211E-01, 1.000E+00, 8.651E+01, 1.590E+01,
                                      1.000E+00, 9.489E-02, 1.000E+00, 1.549E+01, 8.919E+01,
                                      1.000E+00, 3.928E-01, 1.000E+00, 1.000E+00, 2.248E+01,
                                      1.112E-01, 1.883E-01, 1.000E+00, 2.908E-02, 1.000E+00,
                                      3.944E-01, 1.005E-01, 2.210E-01, 1.000E+00, -8.454E+01,
                                     -1.390E+01, 1.000E+00, 9.489E-02, 1.000E+00, -1.350E+01,
                                     -8.718E+01, 1.000E+00, 3.928E-01, 1.000E+00, 1.000E+00,
                                     -2.048E+01, 1.111E-01, 1.882E-01, 1.000E+00, 2.917E-02,
                                      1.000E+00, 3.943E-01,),

                               AB=(  1.219E+00, 6.895E-01, 1.000E+00, 1.191E+00, 6.234E-01,
                                     1.000E+00, 6.351E-01, 1.238E+00, 1.000E+00, 6.522E-01,
                                     1.260E+00, 1.000E+00, 1.227E+00, 6.950E-01, 1.000E+00,
                                     1.199E+00, 6.287E-01, 1.000E+00, 6.315E-01, 1.219E+00,
                                     1.000E+00, 6.473E-01, 1.241E+00, 1.000E+00,),

                               GB=( -1.071E+08, -2.012E+07, 0.000E+00, 3.474E+06, 6.100E+05,
                                     0.000E+00, -1.689E+07, -1.035E+08, 0.000E+00, 4.224E+05,
                                     2.594E+06, 0.000E+00, -1.070E+08, -2.007E+07, 0.000E+00,
                                    -3.470E+06, -6.087E+05, 0.000E+00, -1.684E+07, -1.034E+08,
                                     0.000E+00, -4.208E+05, -2.592E+06, 0.000E+00,),

                               C0=(  5.756E+07, 0.000E+00, 0.000E+00, 5.717E+07, 5.753E+07,
                                     0.000E+00, 0.000E+00, 5.712E+07,),

                               AC=(  1.865E+00, 1.000E+00, 1.000E+00, 1.779E+00, 1.872E+00,
                                     1.000E+00, 1.000E+00, 1.785E+00,),

                               GC=(  2.310E-01, 1.000E+00, 1.000E+00, 2.605E-01, 2.327E-01,
                                     1.000E+00, 1.000E+00, 2.577E-01,),
                              ),
                   );

MATOR=DEFI_MATERIAU(ELAS=_F(E=2.e11,
                            NU=0.0,
                            RHO=7800.0,),);

# -- AFFECTATION DU MATERIAU POUR GLRC_DM --

MATER_G=AFFE_MATERIAU(MAILLAGE=MA,
                      AFFE=(_F(GROUP_MA='DALLE_G',
                             MATER=MAT_G,),
                           ),
                     );

# -- AFFECTATION DU MATERIAU POUR DHRC --

MATER_D=AFFE_MATERIAU(MAILLAGE=MA,
                    AFFE=(_F(GROUP_MA='DALLE_G',
                             MATER=MAT_D,),
                           ),
                     );

# -- AFFECTATION DU MATERIAU POUR ENDO_ISOT --

MATER=AFFE_MATERIAU(MAILLAGE=MA,
                    AFFE=(_F(GROUP_MA='DALLE',
                             MATER=BETON_E,),
                          _F(GROUP_MA='ACIER1L',
                             MATER=ACIER,),
                          _F(GROUP_MA='ACIER1T',
                             MATER=ACIER,),
                          _F(GROUP_MA='ACIER2L',
                             MATER=ACIER,),
                          _F(GROUP_MA='ACIER2T',
                             MATER=ACIER,),),);

COEF_DRZ = 1e-10;

# -- AFFECTATION DES CARACTERISTIQUES POUR ENDO_ISOT --

CAEL=AFFE_CARA_ELEM(MODELE=MO,
                    INFO=1,
                    COQUE=_F(GROUP_MA='DALLE',
                             EPAIS=EP,
                             ANGL_REP=(0.0,0.0,),
                             COQUE_NCOU=11,
                             INER_ROTA='OUI',
                             MODI_METRIQUE='NON',),
                    GRILLE=(_F(GROUP_MA='ACIER1L',
                               SECTION=8.0E-4,
                               ANGL_REP=(0.0,0.0,),
                               EXCENTREMENT=(-(EP) * 0.4),
                               COEF_RIGI_DRZ=COEF_DRZ,),
                            _F(GROUP_MA='ACIER1T',
                               SECTION=8.0E-4,
                               ANGL_REP=(90.0,0.0,),
                               EXCENTREMENT=(-(EP) * 0.4),
                               COEF_RIGI_DRZ=COEF_DRZ,),
                            _F(GROUP_MA='ACIER2L',
                               SECTION=8.0E-4,
                               ANGL_REP=(0.0,0.0,),
                               EXCENTREMENT=(EP * 0.4),
                               COEF_RIGI_DRZ=COEF_DRZ,),
                            _F(GROUP_MA='ACIER2T',
                               SECTION=8.0E-4,
                               ANGL_REP=(90.0,0.0,),
                               EXCENTREMENT=(EP * 0.4),
                               COEF_RIGI_DRZ=COEF_DRZ,),),);

# -- AFFECTATION DES CARACTERISTIQUES POUR GLRC_DM ET DHRC --

CAEL_G=AFFE_CARA_ELEM(MODELE=MO_G,
                      COQUE=_F(GROUP_MA='DALLE_G',
                               EPAIS=EP,
                               ANGL_REP=(90.0,0.0,),
                               INER_ROTA='OUI',),);

# -- CONDITIONS LIMITES POUR ENDO_ISOT --

COND_0=AFFE_CHAR_MECA(MODELE=MO,
                      DDL_IMPO=(_F(GROUP_NO='A1',
                                   DX=0.0,
                                   DY=0.0,
                                   DZ=0.0,
                                   DRX=0.0,
                                   DRY=0.0,
                                   DRZ=0.0,),
                                _F(GROUP_MA='A3A1',
                                   DX=0.0,
                                   DRY=0.0,),),);

# -- CONDITIONS LIMITES POUR GLRC_DM ET DHRC --

COND_0G=AFFE_CHAR_MECA(MODELE=MO_G,
                      DDL_IMPO=(_F(GROUP_NO='A1',
                                   DX=0.0,
                                   DY=0.0,
                                   DZ=0.0,
                                   DRX=0.0,
                                   DRY=0.0,
                                   DRZ=0.0,),
                                _F(GROUP_MA='A3A1',
                                   DX=0.0,
                                   DRY=0.0,),),);

# -- CHARGEMENT IMPOSE POUR ENDO_ISOT --

COND_1=AFFE_CHAR_MECA(MODELE=MO,
                      DDL_IMPO=_F(GROUP_MA='A2A4',
                                  DRY=DR0,),);

# -- CHARGEMENT IMPOSE POUR GLRC_DM ET DHRC --

COND_1G=AFFE_CHAR_MECA(MODELE=MO_G,
                      DDL_IMPO=_F(GROUP_MA='A2A4',
                                  DRY=DR0,),);

# -- FONCTION MULTIPLICATRICE POUR LE CHARGEMENT --

chf1=DEFI_FONCTION(NOM_PARA='INST',VALE=(0.,0.,
                         t1,1.,
                         t2,-1.,
                         t3,0.,
                         ),PROL_DROITE='CONSTANT',PROL_GAUCHE='CONSTANT',);

inst1=DEFI_LIST_REEL(DEBUT=0.0,
                     INTERVALLE=_F(JUSQU_A=t3,
                                   PAS=(dt / 2.0),),);

DEFLIST=DEFI_LIST_INST(DEFI_LIST=_F(METHODE='MANUEL',
                                    LIST_INST=inst1,),
                       ECHEC=_F(ACTION        = 'DECOUPE',
                                SUBD_METHODE  = 'MANUEL',
                                SUBD_PAS=4,
                                SUBD_PAS_MINI=0.0001,),);

#-----------------------------------------------
# CALCUL DES RESULTATS POUR LE CHARGEMENT chf1
#-----------------------------------------------

RESU_R1=STAT_NON_LINE(MODELE=MO,
                      CHAM_MATER=MATER,
                      CARA_ELEM=CAEL,
                      EXCIT=(_F(CHARGE=COND_0,
                                FONC_MULT=chf1,),
                             _F(CHARGE=COND_1,
                                FONC_MULT=chf1,),),
                      COMPORTEMENT=(_F(RELATION='ENDO_ISOT_BETON',
                                    ITER_CPLAN_MAXI=20,
                                    GROUP_MA='DALLE',),
                                 _F(RELATION='GRILLE_ISOT_LINE',
                                    GROUP_MA=('ACIER1L','ACIER2L','ACIER1T','ACIER2T',),),),
                      INCREMENT=_F(LIST_INST=DEFLIST,
                                   INST_FIN=3.975,
                                   PRECISION=0.1,),
                      NEWTON=_F(REAC_ITER=1,),
                      CONVERGENCE=_F(ITER_GLOB_MAXI=25,
                                     RESI_GLOB_MAXI=5.e-5,
                                     ITER_GLOB_ELAS=300,),
                      ARCHIVAGE=_F(LIST_INST=inst1,),);


RESU_R1=CALC_CHAMP(reuse =RESU_R1,RESULTAT=RESU_R1,PRECISION=1.E-3,
             FORCE=('FORC_NODA',),)

RESU_R1=CALC_CHAMP(reuse =RESU_R1,RESULTAT=RESU_R1,GROUP_MA='DALLE',
             DEFORMATION=('DEGE_ELNO'))

RESU_D1=STAT_NON_LINE(MODELE=MO_G,
                      CHAM_MATER=MATER_D,
                      CARA_ELEM=CAEL_G,
                      EXCIT=(_F(CHARGE=COND_0G,
                                FONC_MULT=chf1,),
                             _F(CHARGE=COND_1G,
                                FONC_MULT=chf1,),),
                      COMPORTEMENT=_F(RELATION='DHRC',),
                      INCREMENT=_F(LIST_INST=DEFLIST,
                                   PRECISION=0.1,),
                      NEWTON=_F(REAC_ITER=1,),
                      CONVERGENCE=_F(ITER_GLOB_MAXI=25,),
                      ARCHIVAGE=_F(LIST_INST=inst1,),);

RESU_D1=CALC_CHAMP(reuse =RESU_D1,RESULTAT=RESU_D1,PRECISION=1.E-3,
             FORCE=('FORC_NODA',),
             DEFORMATION=('DEGE_ELNO'),
             VARI_INTERNE=('VARI_NOEU'),
             );

RESU_G1=STAT_NON_LINE(MODELE=MO_G,
                      CHAM_MATER=MATER_G,
                      CARA_ELEM=CAEL_G,
                      EXCIT=(_F(CHARGE=COND_0G,
                                FONC_MULT=chf1,),
                             _F(CHARGE=COND_1G,
                                FONC_MULT=chf1,),),
                      COMPORTEMENT=_F(RELATION='GLRC_DM',),
                      INCREMENT=_F(LIST_INST=DEFLIST,
                                   PRECISION=0.1,),
                      NEWTON=_F(REAC_ITER=1,),
                      CONVERGENCE=_F(ITER_GLOB_MAXI=25,),
                      ARCHIVAGE=_F(LIST_INST=inst1,),);

RESU_G1=CALC_CHAMP(reuse =RESU_G1,RESULTAT=RESU_G1,PRECISION=1.E-3,
             FORCE=('FORC_NODA',),
             DEFORMATION=('DEGE_ELNO'),
             VARI_INTERNE=('VARI_NOEU'),
             );

# -- POST TRAITEMENT --

TMYA4_R1=POST_RELEVE_T(ACTION=(_F(OPERATION='EXTRACTION',
                                 INTITULE='A4MY',
                                 RESULTAT=RESU_R1,
                                 NOM_CHAM='FORC_NODA',
                                 GROUP_NO='A4',
                                 NOM_CMP='DRY',),
                               ),);

TMYA4_R1=CALC_TABLE(reuse =TMYA4_R1,
               TABLE=TMYA4_R1,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

TMYA2_R1=POST_RELEVE_T(ACTION=(_F(OPERATION='EXTRACTION',
                                 INTITULE='A2MY',
                                 RESULTAT=RESU_R1,
                                 NOM_CHAM='FORC_NODA',
                                 GROUP_NO='A2',
                                 NOM_CMP='DRY',),),);

TMYA2_R1=CALC_TABLE(reuse =TMYA2_R1,
               TABLE=TMYA2_R1,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

TMYA6_R1=POST_RELEVE_T(ACTION=(_F(OPERATION='EXTRACTION',
                                 INTITULE='A6MY',
                                 RESULTAT=RESU_R1,
                                 NOM_CHAM='FORC_NODA',
                                 GROUP_NO='A6',
                                 NOM_CMP='DRY',),),);

TMYA6_R1=CALC_TABLE(reuse =TMYA6_R1,
               TABLE=TMYA6_R1,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

TMYA2_R1=CALC_TABLE(reuse =TMYA2_R1,
                    TABLE=TMYA2_R1,
                    ACTION=(_F(OPERATION='EXTR',
                               NOM_PARA=('INST','DRY',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('DRY','MYA2',),),),);

TMYA4_R1=CALC_TABLE(reuse =TMYA4_R1,
                    TABLE=TMYA4_R1,
                    ACTION=(_F(OPERATION='EXTR',
                               NOM_PARA=('INST','DRY',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('DRY','MYA4',),),),);

TMYA6_R1=CALC_TABLE(reuse =TMYA6_R1,
                    TABLE=TMYA6_R1,
                    ACTION=(_F(OPERATION='EXTR',
                               NOM_PARA=('INST','DRY',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('DRY','MYA6',),),),);

SUM_MY = FORMULE(VALE='MYA2+MYA4+MYA6',
                 NOM_PARA=('MYA2','MYA4','MYA6',),);

TMY_R1=CALC_TABLE(TABLE=TMYA2_R1,
                  ACTION=(_F(OPERATION='COMB',
                             TABLE=TMYA4_R1,
                             NOM_PARA='INST',),
                          _F(OPERATION='COMB',
                             TABLE=TMYA6_R1,
                             NOM_PARA='INST',),
                          _F(OPERATION='OPER',
                             FORMULE=SUM_MY,
                             NOM_PARA='MY',),
                          _F(OPERATION='EXTR',
                             NOM_PARA=('INST','MY',),),),);

DETRUIRE(CONCEPT=_F(NOM=(TMYA2_R1,TMYA4_R1,TMYA6_R1,),),);

TRX_R1=POST_RELEVE_T(ACTION=(_F(OPERATION='EXTRACTION',
                               INTITULE='A4RX',
                               RESULTAT=RESU_R1,
                               NOM_CHAM='DEPL',
                               GROUP_NO='A4',
                               NOM_CMP='DRX',),),);

TRX_R1=CALC_TABLE(reuse =TRX_R1,
               TABLE=TRX_R1,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

TRX_R1=CALC_TABLE(reuse =TRX_R1,
                  TABLE=TRX_R1,
                  ACTION=_F(OPERATION='RENOMME',
                            NOM_PARA=('DRX','RX',),),);

IMPR_TABLE(TABLE=TMY_R1,);

IMPR_TABLE(TABLE=TRX_R1,);

#########################################################"

TMYA4_D1=POST_RELEVE_T(ACTION=(_F(OPERATION='EXTRACTION',
                                 INTITULE='A4MY',
                                 RESULTAT=RESU_D1,
                                 NOM_CHAM='FORC_NODA',
                                 GROUP_NO='A4',
                                 NOM_CMP='DRY',),
                                ),);

TMYA4_D1=CALC_TABLE(reuse =TMYA4_D1,
               TABLE=TMYA4_D1,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

TMYA2_D1=POST_RELEVE_T(ACTION=(_F(OPERATION='EXTRACTION',
                                 INTITULE='A2MY',
                                 RESULTAT=RESU_D1,
                                 NOM_CHAM='FORC_NODA',
                                 GROUP_NO='A2',
                                 NOM_CMP='DRY',),),);

TMYA2_D1=CALC_TABLE(reuse =TMYA2_D1,
               TABLE=TMYA2_D1,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

TMYA6_D1=POST_RELEVE_T(ACTION=(_F(OPERATION='EXTRACTION',
                                 INTITULE='A6MY',
                                 RESULTAT=RESU_D1,
                                 NOM_CHAM='FORC_NODA',
                                 GROUP_NO='A6',
                                 NOM_CMP='DRY',),),);


TMYA6_D1=CALC_TABLE(reuse =TMYA6_D1,
               TABLE=TMYA6_D1,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

TD_D1=POST_RELEVE_T(ACTION=(_F(OPERATION='EXTRACTION',
                              INTITULE='A4D1',
                              RESULTAT=RESU_D1,
                              NOM_CHAM='VARI_NOEU',
                              GROUP_NO='A4',
                              NOM_CMP=('V1','V2','V3','V4','V5','V6',),),
                             ),

                              );

TD_D1=CALC_TABLE(reuse =TD_D1,
               TABLE=TD_D1,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

TD_D1=CALC_TABLE(reuse =TD_D1,
                 TABLE=TD_D1,
                 ACTION=(_F(OPERATION='EXTR',
                               NOM_PARA=('INST','V1','V2','V3','V4','V5','V6',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('V1','D1',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('V2','D2',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('V3','EX1',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('V4','EY1',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('V5','EX2',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('V6','EY2',),),),);

TMYA2_D1=CALC_TABLE(reuse =TMYA2_D1,
                    TABLE=TMYA2_D1,
                    ACTION=(_F(OPERATION='EXTR',
                               NOM_PARA=('INST','DRY',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('DRY','MYA2',),),),);

TMYA4_D1=CALC_TABLE(reuse =TMYA4_D1,
                    TABLE=TMYA4_D1,
                    ACTION=(_F(OPERATION='EXTR',
                               NOM_PARA=('INST','DRY',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('DRY','MYA4',),),),);

TMYA6_D1=CALC_TABLE(reuse =TMYA6_D1,
                    TABLE=TMYA6_D1,
                    ACTION=(_F(OPERATION='EXTR',
                               NOM_PARA=('INST','DRY',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('DRY','MYA6',),),),);

TMY_D1=CALC_TABLE(TABLE=TMYA2_D1,
                  ACTION=(_F(OPERATION='COMB',
                             TABLE=TMYA4_D1,
                             NOM_PARA='INST',),
                          _F(OPERATION='COMB',
                             TABLE=TMYA6_D1,
                             NOM_PARA='INST',),
                          _F(OPERATION='OPER',
                             FORMULE=SUM_MY,
                             NOM_PARA='MYD',),
                          _F(OPERATION='EXTR',
                             NOM_PARA=('INST','MYD',),),),);

DETRUIRE(CONCEPT=_F(NOM=(TMYA2_D1,TMYA4_D1,TMYA6_D1,),),);

TRX_D1=POST_RELEVE_T(ACTION=(_F(OPERATION='EXTRACTION',
                               INTITULE='A4RX',
                               RESULTAT=RESU_D1,
                               NOM_CHAM='DEPL',
                               GROUP_NO='A4',
                               NOM_CMP='DRX',),
                              ),);

TRX_D1=CALC_TABLE(reuse =TRX_D1,
               TABLE=TRX_D1,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

TRX_D1=CALC_TABLE(reuse =TRX_D1,
                  TABLE=TRX_D1,
                  ACTION=(_F(OPERATION='EXTR',
                             NOM_PARA=('INST','DRX',),),
                          _F(OPERATION='RENOMME',
                             NOM_PARA=('DRX','RXD',),),),);

IMPR_TABLE(TABLE=TMY_D1,);

IMPR_TABLE(TABLE=TRX_D1,);

IMPR_TABLE(TABLE=TD_D1,);

###############################################################
TMYA4_G1=POST_RELEVE_T(ACTION=(_F(OPERATION='EXTRACTION',
                                 INTITULE='A4MY',
                                 RESULTAT=RESU_G1,
                                 NOM_CHAM='FORC_NODA',
                                 GROUP_NO='A4',
                                 NOM_CMP='DRY',),
                                ),);

TMYA4_G1=CALC_TABLE(reuse =TMYA4_G1,
               TABLE=TMYA4_G1,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

TMYA2_G1=POST_RELEVE_T(ACTION=(_F(OPERATION='EXTRACTION',
                                 INTITULE='A2MY',
                                 RESULTAT=RESU_G1,
                                 NOM_CHAM='FORC_NODA',
                                 GROUP_NO='A2',
                                 NOM_CMP='DRY',),),);

TMYA2_G1=CALC_TABLE(reuse =TMYA2_G1,
               TABLE=TMYA2_G1,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

TMYA6_G1=POST_RELEVE_T(ACTION=(_F(OPERATION='EXTRACTION',
                                 INTITULE='A6MY',
                                 RESULTAT=RESU_G1,
                                 NOM_CHAM='FORC_NODA',
                                 GROUP_NO='A6',
                                 NOM_CMP='DRY',),),);


TMYA6_G1=CALC_TABLE(reuse =TMYA6_G1,
               TABLE=TMYA6_G1,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

TD_G1=POST_RELEVE_T(ACTION=(_F(OPERATION='EXTRACTION',
                              INTITULE='A4D1',
                              RESULTAT=RESU_G1,
                              NOM_CHAM='VARI_NOEU',
                              GROUP_NO='A4',
                              NOM_CMP=('V1','V2',),),
                             ),

                              );

TD_G1=CALC_TABLE(reuse =TD_G1,
               TABLE=TD_G1,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

TD_G1=CALC_TABLE(reuse =TD_G1,
                 TABLE=TD_G1,
                 ACTION=(_F(OPERATION='EXTR',
                               NOM_PARA=('INST','V1','V2',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('V1','D1',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('V2','D2',),),),);

TMYA2_G1=CALC_TABLE(reuse =TMYA2_G1,
                    TABLE=TMYA2_G1,
                    ACTION=(_F(OPERATION='EXTR',
                               NOM_PARA=('INST','DRY',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('DRY','MYA2',),),),);

TMYA4_G1=CALC_TABLE(reuse =TMYA4_G1,
                    TABLE=TMYA4_G1,
                    ACTION=(_F(OPERATION='EXTR',
                               NOM_PARA=('INST','DRY',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('DRY','MYA4',),),),);

TMYA6_G1=CALC_TABLE(reuse =TMYA6_G1,
                    TABLE=TMYA6_G1,
                    ACTION=(_F(OPERATION='EXTR',
                               NOM_PARA=('INST','DRY',),),
                            _F(OPERATION='RENOMME',
                               NOM_PARA=('DRY','MYA6',),),),);

TMY_G1=CALC_TABLE(TABLE=TMYA2_G1,
                  ACTION=(_F(OPERATION='COMB',
                             TABLE=TMYA4_G1,
                             NOM_PARA='INST',),
                          _F(OPERATION='COMB',
                             TABLE=TMYA6_G1,
                             NOM_PARA='INST',),
                          _F(OPERATION='OPER',
                             FORMULE=SUM_MY,
                             NOM_PARA='MYG',),
                          _F(OPERATION='EXTR',
                             NOM_PARA=('INST','MYG',),),),);

DETRUIRE(CONCEPT=_F(NOM=(TMYA2_G1,TMYA4_G1,TMYA6_G1,),),);

TRX_G1=POST_RELEVE_T(ACTION=(_F(OPERATION='EXTRACTION',
                               INTITULE='A4RX',
                               RESULTAT=RESU_G1,
                               NOM_CHAM='DEPL',
                               GROUP_NO='A4',
                               NOM_CMP='DRX',),
                              ),);

TRX_G1=CALC_TABLE(reuse =TRX_G1,
               TABLE=TRX_G1,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

TRX_G1=CALC_TABLE(reuse =TRX_G1,
                  TABLE=TRX_G1,
                  ACTION=(_F(OPERATION='EXTR',
                             NOM_PARA=('INST','DRX',),),
                          _F(OPERATION='RENOMME',
                             NOM_PARA=('DRX','RXG',),),),);

IMPR_TABLE(TABLE=TMY_G1,);

IMPR_TABLE(TABLE=TRX_G1,);

IMPR_TABLE(TABLE=TD_G1,);
###################################################################"

DREL_MYG = FORMULE(VALE='(MYG-MYD)/MYD',
                  NOM_PARA=('MYD','MYG',),);

DREL_RXG = FORMULE(VALE='(RXG-RXD)/RXD',
                  NOM_PARA=('RXD','RXG',),);

D_MY_1G=CALC_TABLE(TABLE=TMY_D1,
                  ACTION=(_F(OPERATION='COMB',
                             TABLE=TMY_G1,
                             NOM_PARA='INST',),
                          _F(OPERATION='FILTRE',
                             NOM_PARA='MY',
                             CRIT_COMP='NE',
                             VALE=0.0,),
                          _F(OPERATION='OPER',
                             FORMULE=DREL_MYG,
                             NOM_PARA='MYG_MYD',),
                         ),
                  );

D_RX_1G=CALC_TABLE(TABLE=TRX_D1,
                  ACTION=(_F(OPERATION='COMB',
                             TABLE=TRX_G1,
                             NOM_PARA='INST',),
                          _F(OPERATION='FILTRE',
                             NOM_PARA='RX',
                             CRIT_COMP='NE',
                             VALE=0.0,),
                          _F(OPERATION='OPER',
                             FORMULE=DREL_RXG,
                             NOM_PARA='RXG_RXD',),
                         ),
                  );

DREL_MY = FORMULE(VALE='(MYG-MY)/MY',
                  NOM_PARA=('MY','MYG',),);

DREL_RX = FORMULE(VALE='(RXG-RX)/RX',
                  NOM_PARA=('RX','RXG',),);

D_MY_1=CALC_TABLE(TABLE=TMY_R1,
                  ACTION=(_F(OPERATION='COMB',
                             TABLE=TMY_G1,
                             NOM_PARA='INST',),
                          _F(OPERATION='FILTRE',
                             NOM_PARA='MY',
                             CRIT_COMP='NE',
                             VALE=0.0,),
                          _F(OPERATION='OPER',
                             FORMULE=DREL_MY,
                             NOM_PARA='MYG_MY',),
                         ),
                  );

D_RX_1=CALC_TABLE(TABLE=TRX_R1,
                  ACTION=(_F(OPERATION='COMB',
                             TABLE=TRX_G1,
                             NOM_PARA='INST',),
                          _F(OPERATION='FILTRE',
                             NOM_PARA='RX',
                             CRIT_COMP='NE',
                             VALE=0.0,),
                          _F(OPERATION='OPER',
                             FORMULE=DREL_RX,
                             NOM_PARA='RXG_RX',),
                         ),
                  );

#IMPR_TABLE(TABLE=D_MY_1,);
#IMPR_TABLE(TABLE=D_RX_1,);

##----- FLEXION POSITIVE - PHASE ELASTIQUE -----

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=0.103291,
           NOM_PARA='MYG_MYD',
           TABLE=D_MY_1G,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=0.05,),
           )

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=-0.0810968,
           NOM_PARA='RXG_RXD',
           TABLE=D_RX_1G,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=0.05,),
           )

##----- FLEXION POSITIVE - PHASE ENDOMMAGEMENT -----

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=-0.00149298,
           NOM_PARA='MYG_MYD',
           TABLE=D_MY_1G,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=0.25,),
           )

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=-0.35993,
           NOM_PARA='RXG_RXD',
           TABLE=D_RX_1G,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=0.25,),
           )

##----- FLEXION POSITIVE - PHASE GLISSEMENT -----

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=0.0615694,
           NOM_PARA='MYG_MYD',
           TABLE=D_MY_1G,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=0.8,),
           )

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=-0.486351,
           NOM_PARA='RXG_RXD',
           TABLE=D_RX_1G,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=0.8,),
           )

##----- FLEXION POSITIVE - PHASE DECHARGEMENT -----

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=0.107169,
           NOM_PARA='MYG_MYD',
           TABLE=D_MY_1G,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=1.5,),
           )

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=-0.491002,
           NOM_PARA='RXG_RXD',
           TABLE=D_RX_1G,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=1.5,),
           )

##----- FLEXION NEGATIVE - PHASE ELASTIQUE -----

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=0.485367,

           NOM_PARA='MYG_MYD',
           TABLE=D_MY_1G,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=2.05,),
           )

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=0.174931,

           NOM_PARA='RXG_RXD',
           TABLE=D_RX_1G,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=2.05,),
           )

##----- FLEXION NEGATIVE - PHASE ENDOMMAGEMENT/GLISSEMENT -----

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=0.097709,

           NOM_PARA='MYG_MYD',
           TABLE=D_MY_1G,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=3.0,),
           )

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=-0.0999544,

           NOM_PARA='RXG_RXD',
           TABLE=D_RX_1G,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=3.0,),
           )

##----- FLEXION NEGATIVE - PHASE DECHARGEMENT -----

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=0.136824,

           NOM_PARA='MYG_MYD',
           TABLE=D_MY_1G,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=3.5,),
           )

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=-0.0756421,

           NOM_PARA='RXG_RXD',
           TABLE=D_RX_1G,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=3.5,),
           )

#----- FLEXION POSITIVE - PHASE ELASTIQUE -----

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=0.32363904026559,

           NOM_PARA='MYG_MY',
           TABLE=D_MY_1,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=0.25,),
           )

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=0.55298981239458,

           NOM_PARA='RXG_RX',
           TABLE=D_RX_1,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=0.25,),
           )

#----- FLEXION POSITIVE - PHASE ENDOMMAGEMENT -----

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=0.86683816855685,

           NOM_PARA='MYG_MY',
           TABLE=D_MY_1,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=1.0,),
           )

#----- FLEXION POSITIVE - PHASE DECHARGEMENT -----

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=0.86683818352636,

           NOM_PARA='MYG_MY',
           TABLE=D_MY_1,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=1.5,),
           )

#----- FLEXION NEGATIVE - PHASE ELASTIQUE -----

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=0.70927432768805,

           NOM_PARA='MYG_MY',
           TABLE=D_MY_1,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=2.25,),
           )


#----- FLEXION NEGATIVE - PHASE ENDOMMAGEMENT -----

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=0.89534595227661,

           NOM_PARA='MYG_MY',
           TABLE=D_MY_1,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=3.0,),
           )

#----- FLEXION NEGATIVE - PHASE DECHARGEMENT -----

TEST_TABLE(CRITERE='ABSOLU',
           VALE_CALC=0.89534600125573,

           NOM_PARA='MYG_MY',
           TABLE=D_MY_1,
           FILTRE=_F(NOM_PARA='INST',
                     VALE=3.5,),
           )

FIN();
