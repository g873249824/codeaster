# MODIF  DATE 07/06/2002   AUTEUR DURAND C.DURAND 
# TITRE TREILLIS DE BARRES ARTICULEES SOUS CHARGE PONCTUELLE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
# RESPONSABLE JMBHH01 J.M.PROIX
#CAS_TEST__: SSLL11A
# SSLL11/A                    COMMANDES                          7/03/91
# TREILLIS DE BARRES ARTICULEES SOUS CHARGE PONCTUELLE
# FY = -98100 N
#                                                   REF: SFM.VPCS SSLL11
#=======================================================================


DEBUT(CODE=_F(  NOM = 'SSLL11A',NIV_PUB_WEB='INTERNET') )

MA=LIRE_MAILLAGE(  )

MATER=DEFI_MATERIAU( ELAS=_F(  RHO = 1.E04,  E = 1.962E11, NU = 0.3,
                                 AMOR_ALPHA = 0.1,  AMOR_BETA = 0.1)  )

CHMAT=AFFE_MATERIAU(  MAILLAGE=MA,
                          AFFE=_F(  TOUT = 'OUI',      MATER = MATER)  )

MODELE=AFFE_MODELE(   MAILLAGE=MA,
                            AFFE=_F(  TOUT = 'OUI',   MODELISATION = 'POU_D_T',
                                   PHENOMENE = 'MECANIQUE')  )

EP1=0.005

RAY1=DEFI_VALEUR(  R8=EVAL("""(1.E-04 + PI*EP1*EP1) / (2.*PI*EP1) """) )

RAY2=DEFI_VALEUR(  R8=EVAL("""( 2.E-04 / PI ) ** 0.5 """) )

CAREL=AFFE_CARA_ELEM(  MODELE=MODELE,POUTRE=(
                     _F(  MAILLE = ( 'AC',  'BC', ),  SECTION = 'CERCLE',
                              CARA = 'R',   VALE = RAY2),
                            _F(  MAILLE = ( 'CD',  'BD', ), SECTION = 'CERCLE',
                              CARA = ( 'R', 'EP', ), VALE = (RAY1, EP1,))) )

CHARGE=AFFE_CHAR_MECA(  MODELE=MODELE,DDL_IMPO=(
             _F(  TOUT = 'OUI',  DZ = 0.,  DRX = 0.,  DRY = 0.),
                      _F(  NOEUD = ( 'A',  'B', ),    DX = 0.,   DY = 0.)),
             FORCE_NODALE=_F(  NOEUD = 'D',       FY = -9810.)   )

MATRR=CALC_MATR_ELEM(   MODELE=MODELE,      OPTION='RIGI_MECA',
                             CHAM_MATER=CHMAT,   CARA_ELEM=CAREL,
                             CHARGE=CHARGE     )

VEL=CALC_VECT_ELEM(   CHARGE=CHARGE,     OPTION='CHAR_MECA' )

NU=NUME_DDL(   MATR_RIGI=MATRR  )

MATASS=ASSE_MATRICE(   MATR_ELEM=MATRR,     NUME_DDL=NU  )

VECASS=ASSE_VECTEUR(   VECT_ELEM=VEL,       NUME_DDL=NU  )

MATASS=FACT_LDLT( reuse=MATASS,  MATR_ASSE=MATASS  )

VECASS=RESO_LDLT( reuse=VECASS,  MATR_FACT=MATASS,       CHAM_NO=VECASS )

#---------------------------------------------------------------------


TEST_RESU(CHAM_NO=( 
            _F(  CHAM_GD = VECASS,   CRITERE = 'RELATIF',   PRECISION = 3.E-4,
              NOEUD = 'C',        NOM_CMP = 'DX',            VALE = 2.6517E-4),
            _F(  CHAM_GD = VECASS,   CRITERE = 'RELATIF',   PRECISION = 3.E-4,
              NOEUD = 'C',        NOM_CMP = 'DY',            VALE = 0.8839E-4),
            _F(  CHAM_GD = VECASS,   CRITERE = 'RELATIF',   PRECISION = 3.E-4,
              NOEUD = 'D',        NOM_CMP = 'DX',            VALE = 3.47902E-3),
            _F(  CHAM_GD = VECASS,   CRITERE = 'RELATIF',   PRECISION = 3.E-4,
        NOEUD = 'D',        NOM_CMP = 'DY',            VALE = -5.60084E-3)) )

# =====================================================================
#               C H A M _ E L E M   --->   C H A M _ N O
# =====================================================================


CH1=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_DEPL_R', MAILLAGE=MA,AFFE=(
                       _F(  NOEUD = 'A',
            NOM_CMP = (    'DX',       'DY',       'DZ',
                          'DRX',       'DRY',       'DRZ',      ),
            VALE = (  6.93641E+07, -3.41702E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00, -4.45267E-08,   )),
                       _F(  NOEUD = 'B',
            NOM_CMP = (    'DX',       'DY',       'DZ',
                          'DRX',       'DRY',       'DRZ',      ),
            VALE = ( -1.21374E+08, -1.69849E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00,  2.99239E+06,   )),
                       _F(  NOEUD = 'C',
            NOM_CMP = (    'DX',       'DY',       'DZ',
                          'DRX',       'DRY',       'DRZ',      ),
            VALE = (  6.32523E+07,  8.76166E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00,  1.58985E+06,   )),
                       _F(  NOEUD = 'D',
            NOM_CMP = (    'DX',       'DY',       'DZ',
                          'DRX',       'DRY',       'DRZ',      ),
            VALE = ( -2.64964E+07, -9.73549E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00,  9.68575E-08,   )))
                    )

CH2=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_SIEF_R', MAILLAGE=MA,AFFE=(
                       _F(  NOEUD = 'A',
            NOM_CMP = (    'SIXX',       'SIYY',       'SIZZ',
                          'SIXY',       'SIXZ',       'SIYZ',      ),
            VALE = (  6.93641E+07, -3.41702E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00, -4.45267E-08,   )),
                       _F(  NOEUD = 'B',
            NOM_CMP = (    'SIXX',       'SIYY',       'SIZZ',
                          'SIXY',       'SIXZ',       'SIYZ',      ),
            VALE = ( -1.21374E+08, -1.69849E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00,  2.99239E+06,   )),
                       _F(  NOEUD = 'C',
            NOM_CMP = (    'SIXX',       'SIYY',       'SIZZ',
                          'SIXY',       'SIXZ',       'SIYZ',      ),
            VALE = (  6.32523E+07,  8.76166E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00,  1.58985E+06,   )),
                       _F(  NOEUD = 'D',
            NOM_CMP = (    'SIXX',       'SIYY',       'SIZZ',
                          'SIXY',       'SIXZ',       'SIYZ',      ),
            VALE = ( -2.64964E+07, -9.73549E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00,  9.68575E-08,   )))
                    )

RESU1=MECA_STATIQUE(  MODELE=MODELE,
                           CHAM_MATER=CHMAT,   CARA_ELEM=CAREL,
                           EXCIT=_F(  CHARGE = CHARGE)             )

# SIGM_ELNO_DEPL PRODUIT MAINTENANT DES CONTRAINTES SIXX COMBINANT
# L'EFFORT NORMAL ET LA FLEXION : COMME IL N'Y A PAS DE ROTULES
# LA FLEXION EST NON NEGLIGEABLE


RESU1=CALC_ELEM(reuse=RESU1,  MODELE=MODELE,
                      OPTION=( 'SIPO_ELNO_DEPL', 'SIGM_ELNO_DEPL', ),
                      CHAM_MATER=CHMAT,   CARA_ELEM=CAREL,
                      RESULTAT=RESU1                             )

RESU1=CALC_ELEM(reuse=RESU1,  MODELE=MODELE,
                      OPTION='SIGM_ELNO_CART',
                      CHAM_MATER=CHMAT,   CARA_ELEM=CAREL,
                      RESULTAT=RESU1                             )

RESU1=CALC_NO(reuse=RESU1,  OPTION='SIGM_NOEU_CART',
                    RESULTAT=RESU1                               )

TEST_RESU(RESU=( 
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIPO_ELNO_DEPL',  NUME_ORDRE = 1,
MAILLE = 'AC', NOEUD = 'A',    NOM_CMP = 'SN',    VALE = 6.93641E+07),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIPO_ELNO_DEPL',  NUME_ORDRE = 1,
MAILLE = 'BC', NOEUD = 'B',    NOM_CMP = 'SN',    VALE = -3.46815E+07),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIPO_ELNO_DEPL',  NUME_ORDRE = 1,
MAILLE = 'CD', NOEUD = 'C',    NOM_CMP = 'SN',    VALE = 1.55074E+08),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIPO_ELNO_DEPL',  NUME_ORDRE = 1,
MAILLE = 'BD', NOEUD = 'D',    NOM_CMP = 'SN',    VALE = -2.08067E+08))
            )

TEST_RESU(RESU=( 
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIGM_NOEU_CART',  NUME_ORDRE = 1,
       NOEUD = 'A',    NOM_CMP = 'SIXX',    VALE = 4.90478E+07),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIGM_NOEU_CART',  NUME_ORDRE = 1,
       NOEUD = 'A',    NOM_CMP = 'SIYY',    VALE = 4.90478E+07),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIGM_NOEU_CART',  NUME_ORDRE = 1,
       NOEUD = 'A',    NOM_CMP = 'SIXY',    VALE = 2.41620E+03),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIGM_NOEU_CART',  NUME_ORDRE = 1,
       NOEUD = 'A',    NOM_CMP = 'SIXZ',    VALE = 2.41620E+03),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIGM_NOEU_CART',  NUME_ORDRE = 1,
       NOEUD = 'B',    NOM_CMP = 'SIXX',    VALE = -6.34170E+07),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIGM_NOEU_CART',  NUME_ORDRE = 1,
       NOEUD = 'B',    NOM_CMP = 'SIYY',    VALE = -9.03343E+07),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIGM_NOEU_CART',  NUME_ORDRE = 1,
       NOEUD = 'B',    NOM_CMP = 'SIXY',    VALE = -9.86483E+03),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIGM_NOEU_CART',  NUME_ORDRE = 1,
       NOEUD = 'B',    NOM_CMP = 'SIXZ',    VALE = 1.20101E+03))
            )

FIN( )
#
