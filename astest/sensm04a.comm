# MODIF  DATE 07/12/2010   AUTEUR PELLET J.PELLET 
# RESPONSABLE PABHHHH N. TARDIEU
# TITRE SENSIBILITE AUX DONNEES MATERIAUX EN MECA_STATIQUE ORTHOTROPE 2D
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2002  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#=======================================================================
DEBUT( CODE=_F(  NOM = 'SENSM04A',NIV_PUB_WEB='INTERNET',VISU_EFICAS='NON'),)
#
#          J                               OPPOSE
#           *-------------------------------*
#           !               !               !
#           !               !               !
#           !               !               !
#           !               * CENTRE        !
#           !               !               !
#           !               !               !
#           !               !               !
#           *-------------------------------*
#       ORIGINE                              I
#
#              1   < X < 11
#             -1.5 < Y <  1.5
#
# Chargement par une force nodale au noeud OPPOSE
# La solution de reference de sensibilite parvient
# d'un calcul par differences finies.
#
#
# 1. Definition/memorisation des fonctions constantes
#
#
# 2. Definition du disctionnaire des parametres
#

mot_cle =["E_L", "E_T", "E_N", "NU_LT", "NU_LN", "NU_TN", "G_LT", "G_LN", "G_TN" ]
sensible=[2.E5,  1.E5,  3.E5,     0.4,     0.3,     0.4,   2.E5,   1.E5,   3.E5  ]

#
# 2. Definition des parametres sensibles
#
n=len(sensible)
PS=[None]*n

for i in range(n):
  PS[i]=DEFI_PARA_SENSI(VALE=sensible[i])

#
# 3. Prealable
#
#PRE_GIBI()
MAILLAGE=LIRE_MAILLAGE();
#
# 3.1. Modele
#
MODEMECA=AFFE_MODELE(MAILLAGE=MAILLAGE,
                     AFFE=_F(TOUT='OUI',
                             PHENOMENE='MECANIQUE',
                             MODELISATION='C_PLAN',),);

#
# 3.2. Mise en place des materiaux
#
MAT=DEFI_MATERIAU( ELAS_ORTH_FO=_F(E_L   = PS[0],
                                   E_T   = PS[1],
                                   E_N   = PS[2],
                                   NU_LT = PS[3],
                                   NU_LN = PS[4],
                                   NU_TN = PS[5],
                                   G_LT  = PS[6],
                                   G_LN  = PS[7],
                                   G_TN  = PS[8]))

#
# 3.3. Affectation des materiaux
#
MATEMAIL=AFFE_MATERIAU(MAILLAGE=MAILLAGE,
                       AFFE=_F(TOUT='OUI',MATER=MAT,),);

#
# 3.4. Chargements
#
CH_0=AFFE_CHAR_MECA(MODELE=MODEMECA,
                    DDL_IMPO=(_F(GROUP_NO='ORIGINE', DX=0.0,DY=0.0),
                              _F(GROUP_MA='BORD_GAU',DX=0.0)),);
#
CH_1=AFFE_CHAR_MECA(MODELE=MODEMECA,
                    FORCE_NODALE=(_F(GROUP_NO='OPPOSE',
                                     FX=10.,
                                     FY=3.,))
                                       );

#
# 4. Calcul
#

RES=MECA_STATIQUE(MODELE=MODEMECA,
                   CHAM_MATER=MATEMAIL,
                   EXCIT=(_F(CHARGE=CH_0),_F(CHARGE=CH_1,),),
                   SENSIBILITE=tuple(PS),
                  );

RES = CALC_ELEM( reuse = RES, RESULTAT = RES, OPTION = ('EPSI_ELNO_DEPL','SIGM_ELNO_DEPL') );

RES = CALC_NO( reuse =  RES  , RESULTAT  =  RES  , OPTION = ('REAC_NODA',),);


CALC_SENSI( reuse = RES,RESULTAT = RES , SENSIBILITE = tuple(PS),
              OPTION     = ('EPSI_ELNO_DEPL','SIGM_ELNO_DEPL','SIEF_ELGA_DEPL','REAC_NODA',),
              );



TAB_REF=POST_RELEVE_T(ACTION=_F(INTITULE='SENSIBILITE',
                            GROUP_NO=('I'),
                            RESULTAT=RES,
                            NOM_CHAM='DEPL',
                            NUME_ORDRE=1,
                            NOM_CMP='DY',
                            OPERATION='EXTRACTION',),);

TAB_REFS=POST_RELEVE_T(ACTION=_F(INTITULE='SENSIBILITE',
                            GROUP_NO=('I'),
                            RESULTAT=RES,
                            NOM_CHAM='DEPL',
                            NUME_ORDRE=1,
                            NOM_CMP='DY',
                            SENSIBILITE=tuple(PS),
                            OPERATION='EXTRACTION',),)

TA_R_EP=POST_RELEVE_T(ACTION=_F(INTITULE='SENSIBILITE',
                            NOEUD='N179',
                            MAILLE='M47',
                            RESULTAT=RES,
                            NOM_CHAM='EPSI_ELNO_DEPL',
                            NUME_ORDRE=1,
                            NOM_CMP='EPXY',
                            OPERATION='EXTRACTION',),);

TA_R_EPS=POST_RELEVE_T(ACTION=_F(INTITULE='SENSIBILITE',
                            NOEUD='N179',
                            MAILLE='M47',
                            RESULTAT=RES,
                            NOM_CHAM='EPSI_ELNO_DEPL',
                            NUME_ORDRE=1,
                            NOM_CMP='EPXY',
                            SENSIBILITE=tuple(PS),
                            OPERATION='EXTRACTION',),);

TA_R_SI=POST_RELEVE_T(ACTION=_F(INTITULE='SENSIBILITE',
                            NOEUD='N179',
                            MAILLE='M47',
                            RESULTAT=RES,
                            NOM_CHAM='SIGM_ELNO_DEPL',
                            NUME_ORDRE=1,
                            NOM_CMP='SIYY',
                            OPERATION='EXTRACTION',),);

TA_R_SIS=POST_RELEVE_T(ACTION=_F(INTITULE='SENSIBILITE',
                            NOEUD='N179',
                            MAILLE='M47',
                            RESULTAT=RES,
                            NOM_CHAM='SIGM_ELNO_DEPL',
                            NUME_ORDRE=1,
                            SENSIBILITE=tuple(PS),
                            NOM_CMP='SIYY',
                            OPERATION='EXTRACTION',),);

FIN()


