# MODIF  DATE 28/05/2004   AUTEUR LEBOUVIE F.LEBOUVIER 
# TITRE ORTHOTROPIE DANS UN REPERE QUELCONQUE (3D)
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
#

DEBUT(CODE=_F( NOM = 'SSLV131A',NIV_PUB_WEB='INTERNET') )

MA=LIRE_MAILLAGE( )

DEFI_GROUP( reuse=MA,   MAILLAGE=MA,
  CREA_GROUP_MA=_F(  NOM = 'TOUT', TOUT = 'OUI'))

#================================

# MATERIAU ISOTROPE TRANSVERSE  =

#================================


MATISTR=DEFI_MATERIAU(
           ELAS_ISTR=_F(  E_L = 11000.,   E_N = 8000.,
                          NU_LN = 0.15,   NU_LT = 0.18,
                           G_LN = 7000.) )

CHMATIST=AFFE_MATERIAU(  MAILLAGE=MA,
           AFFE=_F(  TOUT = 'OUI',   MATER = MATISTR) )

MOD3D=AFFE_MODELE(  MAILLAGE=MA,
           AFFE=_F( MAILLE = 'TET1', MODELISATION = '3D',
           PHENOMENE = 'MECANIQUE'))

CAREL3D=AFFE_CARA_ELEM(MODELE=MOD3D,
                       MASSIF=_F(  GROUP_MA = 'TOUT',
                                   ANGL_REP = (30.,20.,10.,)))

CHAR3D=AFFE_CHAR_MECA(  MODELE=MOD3D,DDL_IMPO=(
              _F( NOEUD = 'A',   DX = 0.,       DY = 0.,     DZ = 0.),
              _F( NOEUD = 'B',   DX = 9.,       DY = 14.,    DZ = 18.),
              _F( NOEUD = 'C',   DX = 13.,      DY = 21.,    DZ = 26.),
              _F( NOEUD = 'D',   DX = 5.,      DY = 8.,    DZ = 11.)))


MEST1=MECA_STATIQUE(       MODELE=MOD3D,    CHAM_MATER=CHMATIST,
              CARA_ELEM=CAREL3D,    EXCIT=_F( CHARGE = CHAR3D),

          )

CALC_ELEM( reuse= MEST1 ,RESULTAT= MEST1 ,            
                  

           OPTION=('EPSI_ELGA_DEPL',
           'SIGM_ELNO_DEPL',)  )

CALC_ELEM(reuse=MEST1,      
                       RESULTAT=MEST1,
                         OPTION='ENEL_ELGA',
                  )

CALC_ELEM(reuse=MEST1,      
                       RESULTAT=MEST1,
                         OPTION='ENEL_ELNO_ELGA',
                  )

CALC_NO(  reuse=MEST1,
                       RESULTAT=MEST1,
                         OPTION='ENEL_NOEU_ELGA',
                  )

TEST_RESU(RESU=(
     # DEPLACEMENTS
       _F(  RESULTAT = MEST1,  NOM_CHAM = 'DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,
         NOEUD = 'C',       NOM_CMP = 'DY',    VALE = 21.),
     # DEFORMATIONS
       _F(  RESULTAT = MEST1,  NOM_CHAM = 'EPSI_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'EPXY',    VALE = 3.),
       _F(  RESULTAT = MEST1,  NOM_CHAM = 'EPSI_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'EPXZ',    VALE = 4.),
     # CONTRAINTES  (1) :
       _F(  RESULTAT = MEST1,  NOM_CHAM = 'EPSI_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'EPYZ',    VALE = 6.),
       _F(  RESULTAT = MEST1,  NOM_CHAM = 'SIEF_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'SIXX',    VALE = 50461.97124),
       _F(  RESULTAT = MEST1,  NOM_CHAM = 'SIEF_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'SIYY',    VALE = 80136.03723),
       _F(  RESULTAT = MEST1,  NOM_CHAM = 'SIEF_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'SIZZ',    VALE = 68682.13737),
       _F(  RESULTAT = MEST1,  NOM_CHAM = 'SIEF_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'SIXY',    VALE = 39559.09646),
       _F(  RESULTAT = MEST1,  NOM_CHAM = 'SIEF_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'SIXZ',    VALE = 30622.54263),
       _F(  RESULTAT = MEST1,  NOM_CHAM = 'SIEF_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'SIYZ',    VALE = 84027.57994),
     # CONTRAINTES  (2) :
       _F(  RESULTAT = MEST1,  NOM_CHAM = 'SIGM_ELNO_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         NOEUD = 'C',       NOM_CMP = 'SIXX',    VALE = 50461.97124),
     # DENSITE D'ENERGIE DE DEFORMATION  (1) :
       _F(  RESULTAT = MEST1,  NOM_CHAM = 'ENEL_ELGA', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-6,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'TOTALE',    VALE = 1.23652248E6),
     # DENSITE D'ENERGIE DE DEFORMATION  (2) :
       _F(  RESULTAT = MEST1,  NOM_CHAM = 'ENEL_ELNO_ELGA', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-6,  MAILLE = 'TET1',
         NOEUD = 'A',       NOM_CMP = 'TOTALE',    VALE = 1.23652248E6))
            )

#---------------------------------------------



#=======================

# MATERIAU ORTHOTROPE  =

#=======================

MATORTH=DEFI_MATERIAU(
           ELAS_ORTH=_F(
              E_L = 11000.,     E_T = 5000.,   E_N = 8000.,
              NU_TN = 0.11,       NU_LN = 0.15,    NU_LT = 0.396,
              G_TN = 13000.,     G_LN = 7000.,   G_LT = 10500.) )

CHMATORT=AFFE_MATERIAU(  MAILLAGE=MA,
           AFFE=_F(  TOUT = 'OUI',   MATER = MATORTH) )


MEST2=MECA_STATIQUE(       MODELE=MOD3D,    CHAM_MATER=CHMATORT,
            CARA_ELEM=CAREL3D,    EXCIT=_F( CHARGE = CHAR3D),

           )

CALC_ELEM( reuse= MEST2 ,RESULTAT= MEST2 ,            
                

           OPTION=('EPSI_ELGA_DEPL',
           'SIGM_ELNO_DEPL',)  )

CALC_ELEM(reuse=MEST2,      
                       RESULTAT=MEST2,
                         OPTION='ENEL_ELGA',
                  )

CALC_ELEM(reuse=MEST2,      
                       RESULTAT=MEST2,
                         OPTION='ENEL_ELNO_ELGA',
                  )

TEST_RESU(RESU=(
     # DEPLACEMENTS
       _F(  RESULTAT = MEST2,  NOM_CHAM = 'DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,
         NOEUD = 'C',       NOM_CMP = 'DY',    VALE = 21.),
     # DEFORMATIONS
       _F(  RESULTAT = MEST2,  NOM_CHAM = 'EPSI_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'EPXY',    VALE = 3.),
       _F(  RESULTAT = MEST2,  NOM_CHAM = 'EPSI_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'EPXZ',    VALE = 4.),
     # CONTRAINTES  (1) :
       _F(  RESULTAT = MEST2,  NOM_CHAM = 'EPSI_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'EPYZ',    VALE = 6.),
       _F(  RESULTAT = MEST2,  NOM_CHAM = 'SIEF_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'SIXX',    VALE = 2370.539917),
       _F(  RESULTAT = MEST2,  NOM_CHAM = 'SIEF_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'SIYY',    VALE = 78600.67657),
       _F(  RESULTAT = MEST2,  NOM_CHAM = 'SIEF_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'SIZZ',    VALE = 78692.31825),
       _F(  RESULTAT = MEST2,  NOM_CHAM = 'SIEF_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'SIXY',    VALE = 86435.10036),
       _F(  RESULTAT = MEST2,  NOM_CHAM = 'SIEF_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'SIXZ',    VALE = 16449.62266),
       _F(  RESULTAT = MEST2,  NOM_CHAM = 'SIEF_ELGA_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'SIYZ',    VALE = 125577.2269),
     # CONTRAINTES  (2) :
       _F(  RESULTAT = MEST2,  NOM_CHAM = 'SIGM_ELNO_DEPL', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-7,  MAILLE = 'TET1',
         NOEUD = 'C',       NOM_CMP = 'SIXX',    VALE = 2370.539917),
     # DENSITE D'ENERGIE DE DEFORMATION  (1) :
       _F(  RESULTAT = MEST2,  NOM_CHAM = 'ENEL_ELGA', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-6,  MAILLE = 'TET1',
         POINT = 1,       NOM_CMP = 'TOTALE',    VALE = 1.5528625E6),
     # DENSITE D'ENERGIE DE DEFORMATION  (2) :
       _F(  RESULTAT = MEST2,  NOM_CHAM = 'ENEL_ELNO_ELGA', NUME_ORDRE = 1,
        CRITERE = 'RELATIF',   PRECISION = 1.E-6,  MAILLE = 'TET1',
         NOEUD = 'A',       NOM_CMP = 'TOTALE',    VALE = 1.5528625E6))
            )

FIN()
#
