# MODIF  DATE 06/11/2007   AUTEUR BOYERE E.BOYERE 
# RESPONSABLE ADBHHPM P.MASSIN
# DATE   : 10/07/2000
# AUTEUR : F. LEBOUVIER
# TITRE  : FLAMBEMENT D'UNE ENVELOPPE CYLINDRIQUE SOUS PRESSION
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
#          EXTERNE
#---------------------------------------------------------------------
#  - CALCUL DE STABILITE D'UNE ENVELOPPE CYLINDRIQUE MINCE
#    CALCUL DES CHARGES CRITIQUES CONDUISANT AU FLAMBEMENT ELASTIQUE
#  - MODELISATION AVEC DES ELEMENTS 'COQUE_3D'(TRIA7)
#---------------------------------------------------------------------

DEBUT(CODE=_F(NOM='SDLS505A',
              NIV_PUB_WEB='INTERNET',),);

#
#PRE_IDEAS ();

MA=LIRE_MAILLAGE();

#

MAIL=CREA_MAILLAGE(MAILLAGE=MA,
                   MODI_MAILLE=_F(TOUT='OUI',
                                  OPTION='TRIA6_7',),);

MAIL=DEFI_GROUP(reuse =MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=_F(NOEUD='NO7',
                                 NOM='A',),);

#

MOEL=AFFE_MODELE(MAILLAGE=MAIL,
                 AFFE=(_F(GROUP_MA='TOUT_ELT',
                          PHENOMENE='MECANIQUE',
                          MODELISATION='COQUE_3D',),
                       _F(GROUP_MA='ARETE',
                          PHENOMENE='MECANIQUE',
                          MODELISATION='3D',),),);

#
#---------------------------------------------------------------------
#                     CARACTERISTIQUES ELEMENTAIRES
#---------------------------------------------------------------------

CAEL=AFFE_CARA_ELEM(MODELE=MOEL,
                    COQUE=_F(GROUP_MA='TOUT_ELT',
                             EPAIS=0.00045,
                             ANGL_REP=(90.,0.,),
                             A_CIS=9000.,),);

#
#---------------------------------------------------------------------
#                     CARACTERISTIQUES MATERIAUX
#---------------------------------------------------------------------

MATERIAU=DEFI_MATERIAU(ELAS=_F(E=2.E+11,
                               NU=0.3,),);

#

CHAM_MAT=AFFE_MATERIAU(MAILLAGE=MAIL,
                       AFFE=_F(TOUT='OUI',
                               MATER=MATERIAU,),);

#
#---------------------------------------------------------------------
#                     CHARGEMENTS
#---------------------------------------------------------------------

CON_LI=AFFE_CHAR_MECA(MODELE=MOEL,
                      DDL_IMPO=(_F(GROUP_NO='O_PRIME',
                                   DX=0.,
                                   DY=0.,),
                                _F(GROUP_NO='E',
                                   DY=0.,),
                                _F(GROUP_NO='CONTOUR',
                                   DZ=0.,),),);

#

CHARGE=AFFE_CHAR_MECA(MODELE=MOEL,
                      FORCE_ARETE=_F(GROUP_MA='ARETE',
                                     FZ=-0.025,),
                      FORCE_COQUE=_F(GROUP_MA='CYLINDRE',
                                     PRES=-1.,),);

#
#---------------------------------------------------------------------
#                        RESOLUTION
#---------------------------------------------------------------------

RES=MECA_STATIQUE(MODELE=MOEL,
                  CHAM_MATER=CHAM_MAT,
                  CARA_ELEM=CAEL,
                  EXCIT=(_F(CHARGE=CON_LI,),
                         _F(CHARGE=CHARGE,),),);

#

SIG=CREA_CHAMP(TYPE_CHAM='ELGA_SIEF_R',
               OPERATION='EXTR',
               RESULTAT=RES,
               NOM_CHAM='SIEF_ELGA_DEPL',
               TYPE_MAXI='MINI',
               TYPE_RESU='VALE',);

#

MEL_RI_G=CALC_MATR_ELEM(OPTION='RIGI_GEOM',
                        MODELE=MOEL,
                        CARA_ELEM=CAEL,
                        SIEF_ELGA=SIG,);

#

MEL_RI_M=CALC_MATR_ELEM(OPTION='RIGI_MECA',
                        MODELE=MOEL,
                        CHAM_MATER=CHAM_MAT,
                        CARA_ELEM=CAEL,
                        CHARGE=(CHARGE,CON_LI,),);

#

NUM=NUME_DDL(MATR_RIGI=MEL_RI_M,);

#

MAS_RI_M=ASSE_MATRICE(MATR_ELEM=MEL_RI_M,
                      NUME_DDL=NUM,);

#

MAS_RI_G=ASSE_MATRICE(MATR_ELEM=MEL_RI_G,
                      NUME_DDL=NUM,);

#

RESULT=MODE_ITER_SIMULT(MATR_A=MAS_RI_M,
                        MATR_B=MAS_RI_G,
                        METHODE='SORENSEN',
                        TYPE_RESU='MODE_FLAMB',
                        CALC_FREQ=_F(OPTION='PLUS_PETITE',),
                        VERI_MODE=_F(SEUIL=1.E-5,),);

IMPR_CO(CONCEPT=_F(NOM=RESULT,),);

RES_NORM=NORM_MODE(MODE=RESULT,
                   NORME='TRAN',);

CHA_DEPL=CREA_CHAMP(TYPE_CHAM='NOEU_DEPL_R',
                    OPERATION='EXTR',
                    RESULTAT=RESULT,
                    NOM_CHAM='DEPL',
                    NUME_MODE=1,);

MODE_1=CREA_CHAMP(TYPE_CHAM='NOEU_DEPL_R',
                  OPERATION='EXTR',
                  RESULTAT=RES_NORM,
                  NOM_CHAM='DEPL',
                  NUME_ORDRE=10,);

RESU2=MODI_REPERE(RESULTAT=RES_NORM,
                  NUME_ORDRE=10,
                  MODI_CHAM=_F(TYPE_CHAM='VECT_3D',
                               NOM_CHAM='DEPL',
                               NOM_CMP=('DX','DY','DZ',),),
                  DEFI_REPERE=_F(REPERE='CYLINDRIQUE',
                                 ORIGINE=(0.0,0.0,0.0,),
                                 AXE_Z=(0.0,0.0,1.0,),),
                  INFO=2,);

#
#---------------------------------------------------------------------
#                        VERIFICATION DES RESULTATS
#---------------------------------------------------------------------

TEST_RESU(CHAM_NO=(_F(CHAM_GD=MODE_1,
                      NOEUD='NO6',
                      NOM_CMP='DX',
                      VALE=-0.01021,
                      CRITERE='RELATIF',
                      PRECISION=0.01,),
                   _F(CHAM_GD=MODE_1,
                      NOEUD='NO6',
                      NOM_CMP='DY',
                      VALE=1.0,
                      CRITERE='RELATIF',
                      PRECISION=0.01,),
                   _F(CHAM_GD=MODE_1,
                      NOEUD='NO172',
                      NOM_CMP='DX',
                      VALE=-0.392,
                      CRITERE='RELATIF',
                      PRECISION=0.045,),
                   _F(CHAM_GD=MODE_1,
                      NOEUD='NO172',
                      NOM_CMP='DY',
                      VALE=-0.928,
                      CRITERE='RELATIF',
                      PRECISION=0.045,),
                   _F(CHAM_GD=MODE_1,
                      NOEUD='NO6',
                      NOM_CMP='DX',
                      VALE=-0.01021,
                      CRITERE='RELATIF',
                      PRECISION=0.001,
                      REFERENCE='NON_REGRESSION',),
                   _F(CHAM_GD=MODE_1,
                      NOEUD='NO6',
                      NOM_CMP='DY',
                      VALE=1.0,
                      CRITERE='RELATIF',
                      PRECISION=0.001,
                      REFERENCE='NON_REGRESSION',),
                   _F(CHAM_GD=MODE_1,
                      NOEUD='NO172',
                      NOM_CMP='DX',
                      VALE=-0.376,
                      CRITERE='RELATIF',
                      PRECISION=0.001,
                      REFERENCE='NON_REGRESSION',),
                   _F(CHAM_GD=MODE_1,
                      NOEUD='NO172',
                      NOM_CMP='DY',
                      VALE=-0.9498,
                      CRITERE='RELATIF',
                      PRECISION=0.001,
                      REFERENCE='NON_REGRESSION',),),
          RESU=_F(RESULTAT=RESULT,
                  NUME_MODE=10,
                  PARA='CHAR_CRIT',
                  VALE=-1523000.0,
                  CRITERE='RELATIF',
                  PRECISION=0.108,),);

TEST_RESU(RESU=(_F(RESULTAT=RESU2,
                   NUME_ORDRE=10,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   NOEUD='NO6',
                   VALE=-1.0,
                   CRITERE='RELATIF',
                   PRECISION=0.01,),
                _F(RESULTAT=RESU2,
                   NUME_ORDRE=10,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   NOEUD='NO6',
                   VALE=-0.01021,
                   CRITERE='RELATIF',
                   PRECISION=0.01,),
                _F(RESULTAT=RESU2,
                   NUME_ORDRE=10,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   NOEUD='NO172',
                   VALE=1.0,
                   CRITERE='RELATIF',
                   PRECISION=0.025,),
                _F(RESULTAT=RESU2,
                   NUME_ORDRE=10,
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   NOEUD='NO172',
                   VALE=0.01021,
                   CRITERE='RELATIF',
                   PRECISION=0.025,),),);

#

FIN();

#
# 

