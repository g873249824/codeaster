
# MODIF  DATE 17/05/2004   AUTEUR CIBHHBC M.LOPES 
# TITRE POUTRE ENCASTREE A UNE EXTREMITE ET CHARGEE PAR DES FORCES
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================
#       UNITAIRES SUR SON AUTRE EXTREMITE. AXE INCLINE DE 30 DEGRES
# MODELISATION COQUE - POU_D_E - RELATIONS LINEAIRES POUTRES-COQUES
#======================================================================

DEBUT(CODE=_F(NOM='SSLX101A',
              NIV_PUB_WEB='INTERNET',),);

COS30=0.8660254037844;

MA=LIRE_MAILLAGE(VERI_MAIL=_F(VERIF='NON',),);
#-----------   SECTION TUBE FIN CIRCULAIRE  --------------------
#  SUR UNE MOITIE DE LA LONGUEUR POUTRE MAILLEE EN COQUES
#  SUR L'AUTRE MOITIE DE LA LONGUEUR POUTRE MAILLEE EN POUTRES
#---------------------------------------------------------------

MA=DEFI_GROUP(reuse =MA,
              MAILLAGE=MA,
              CREA_GROUP_NO=_F(GROUP_MA='CERCL1',),);

MO1=AFFE_MODELE(MAILLAGE=MA,
                AFFE=(_F(GROUP_MA=('CYL','CERCL1','CERCL2',),
                         PHENOMENE='MECANIQUE',
                         MODELISATION='DKT',),
                      _F(GROUP_MA='POU',
                         PHENOMENE='MECANIQUE',
                         MODELISATION='POU_D_E',),
                      _F(MAILLE='P_ORIG',
                         PHENOMENE='MECANIQUE',
                         MODELISATION='DIS_TR',),),);

MATR=DEFI_MATERIAU(ELAS=_F(E=200000000000.0,
                           NU=0.3,),);

CHMAT=AFFE_MATERIAU(MAILLAGE=MA,
                    AFFE=_F(TOUT='OUI',
                            MATER=MATR,),);

CAREL1=AFFE_CARA_ELEM(MODELE=MO1,
                      POUTRE=_F(GROUP_MA='POU',
                                SECTION='CERCLE',
                                CARA=('R','EP',),
                                VALE=(2.0,0.1,),),
                      COQUE=_F(GROUP_MA=('CYL','CERCL1','CERCL2',),
                               EPAIS=0.1,),
                      DISCRET=_F(MAILLE='P_ORIG',
                                 CARA='M_TR_D_N',
                                 VALE=(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,),),);

CH1=AFFE_CHAR_MECA(MODELE=MO1,
                   DDL_IMPO=_F(GROUP_NO='P_ORIG',
                               DX=0.0,
                               DY=0.0,
                               DZ=0.0,
                               DRX=0.0,
                               DRY=0.0,
                               DRZ=0.0,),
                   LIAISON_ELEM=(_F(OPTION='COQ_POU',
                                    GROUP_MA_1='CERCL2',
                                    GROUP_NO_2='NOPOU1',
                                    CARA_ELEM=CAREL1,
                                    AXE_POUTRE=(COS30,0.5,0.0,),),
                                 _F(OPTION='COQ_POU',
                                    GROUP_MA_1='CERCL1',
                                    GROUP_NO_2='P_ORIG',
                                    CARA_ELEM=CAREL1,
                                    AXE_POUTRE=(COS30,0.5,0.0,),),),);

CHTX=AFFE_CHAR_MECA(MODELE=MO1,
                    FORCE_NODALE=_F(GROUP_NO='NOPOU2',
                                    FX=COS30,
                                    FY=0.5,),);

CHRX=AFFE_CHAR_MECA(MODELE=MO1,
                    FORCE_NODALE=_F(GROUP_NO='NOPOU2',
                                    MX=COS30,
                                    MY=0.5,),);

CHRY=AFFE_CHAR_MECA(MODELE=MO1,
                    FORCE_NODALE=_F(GROUP_NO='NOPOU2',
                                    MX=-0.5,
                                    MY=COS30,),);

CHRZ=AFFE_CHAR_MECA(MODELE=MO1,
                    FORCE_NODALE=_F(GROUP_NO='NOPOU2',
                                    MZ=1.0,),);

MEST1=MACRO_ELAS_MULT(MODELE=MO1,
                      CHAM_MATER=CHMAT,
                      CARA_ELEM=CAREL1,
                      CHAR_MECA_GLOBAL=CH1,
                      CAS_CHARGE=(_F(NOM_CAS='TX',
                                     CHAR_MECA=CHTX,),
                                  _F(NOM_CAS='RX',
                                     CHAR_MECA=CHRX,),
                                  _F(NOM_CAS='RY',
                                     CHAR_MECA=CHRY,),
                                  _F(NOM_CAS='RZ',
                                     CHAR_MECA=CHRZ,),),);

TEST_RESU(RESU=(_F(RESULTAT=MEST1,
                   NOM_CAS='TX',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='NOPOU2',
                   VALE=2.8273e-10,
                   REFERENCE='ANALYTIQUE',
                   PRECISION=0.03,),
                _F(RESULTAT=MEST1,
                   NOM_CAS='TX',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='NOPOU2',
                   VALE=1.6324e-10,
                   REFERENCE='ANALYTIQUE',
                   PRECISION=0.03,),
                _F(RESULTAT=MEST1,
                   NOM_CAS='RX',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRX',
                   GROUP_NO='NOPOU2',
                   VALE=1.93195e-10,
                   REFERENCE='ANALYTIQUE',
                   PRECISION=0.04,),
                _F(RESULTAT=MEST1,
                   NOM_CAS='RX',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRY',
                   GROUP_NO='NOPOU2',
                   VALE=1.11541e-10,
                   REFERENCE='ANALYTIQUE',
                   PRECISION=0.04,),
                _F(RESULTAT=MEST1,
                   NOM_CAS='RY',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DZ',
                   GROUP_NO='NOPOU2',
                   VALE=-6.864e-09,
                   REFERENCE='ANALYTIQUE',
                   PRECISION=0.06,),
                _F(RESULTAT=MEST1,
                   NOM_CAS='RY',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRX',
                   GROUP_NO='NOPOU2',
                   VALE=-8.58e-11,
                   REFERENCE='ANALYTIQUE',
                   PRECISION=0.04,),
                _F(RESULTAT=MEST1,
                   NOM_CAS='RY',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRY',
                   GROUP_NO='NOPOU2',
                   VALE=1.48611e-10,
                   REFERENCE='ANALYTIQUE',
                   PRECISION=0.04,),
                _F(RESULTAT=MEST1,
                   NOM_CAS='RZ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DX',
                   GROUP_NO='NOPOU2',
                   VALE=-3.432e-09,
                   REFERENCE='ANALYTIQUE',
                   PRECISION=0.06,),
                _F(RESULTAT=MEST1,
                   NOM_CAS='RZ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DY',
                   GROUP_NO='NOPOU2',
                   VALE=5.944e-09,
                   REFERENCE='ANALYTIQUE',
                   PRECISION=0.06,),
                _F(RESULTAT=MEST1,
                   NOM_CAS='RZ',
                   NOM_CHAM='DEPL',
                   NOM_CMP='DRZ',
                   GROUP_NO='NOPOU2',
                   VALE=1.716e-10,
                   REFERENCE='ANALYTIQUE',
                   PRECISION=0.04,),),);

FIN();
#
#
#IMPR_RESU( MODELE : MO1
#RESU:( MAILLAGE : MA
#RESULTAT: MEST1 FORMAT :'CASTEM'));
#   IMPR_RESU( RESU:( RESULTAT: MEST1
#               GROUP_NO : (NOPOU1,NOPOU2 ) )) ;
##SUR UNE MOITIE DE LA LONGUEUR POUTRE MAILLEE EN COQUES
##SUR L'AUTRE MOITIE DE LA LONGUEUR POUTRE MAILLEE EN POUTRES
##---------------------------------------------------------------

#
#&MA = DEFI_GROUP(MAILLAGE : MA
#                 CREA_GROUP_NO:(GROUP_MA :LREC1)) ;
#MO2 = AFFE_MODELE      (
#        MAILLAGE: MA
#        AFFE:(GROUP_MA: (POUMAS,LREC1,LREC2),
#                         PHENOMENE:'MECANIQUE',MODELISATION:'Q4G')
#        AFFE:(GROUP_MA: POU2,
#                        PHENOMENE:'MECANIQUE',MODELISATION:'POU_D_E')
#                        );
#
# CAREL2 = AFFE_CARA_ELEM ( MODELE: MO2
#          # SECTION RECTANGLE :
#          POUTRE: ( GROUP_MA: POU2   SECTION: 'GENERALE'
#          CARA:(   'A'            'IY'              'IZ'
#                                                    'JX'
#                    'RY'           'RZ'             'RT')
#          VALE:  (  0.6           0.3345          0.1175
#                                                    1.29E-7
#                    0.55            1.05            0.1)
#                  )
#           COQUE : ( GROUP_MA: (POUMAS,LREC1,LREC2),
#                     EPAIS   : 0.1 )
#                       );
# CH3 = AFFE_CHAR_MECA( MODELE: MO2
#                       DDL_IMPO: (GROUP_NO:LREC1
#                       DX:0. DY:0. DZ:0. DRX:0. DRY:0. DRZ:0.)
#                       FORCE_NODALE: (GROUP_NO :P2POU
#                                      FX:1. MY:1. MZ:1.)
#                     );
#
# CH4 = AFFE_CHAR_MECA( MODELE: MO2
#                       LIAISON_ELEM : (OPTION     : 'COQ_POU'
#                                       CARA_ELEM  : CAREL2
#                                       AXE_POUTRE : (1. 0. 0.)
#                                       GROUP_MA_1 : LREC2
#                                       GROUP_NO_2 : P1POU
#                                    )
#                      ) ;
#
# MEST2 = MECA_STATIQUE ( MODELE     : MO2 , CHAM_MATER : CHMAT
#                         CARA_ELEM  : CAREL2
#                         EXCIT:(CHARGE: CH3 )
#                         EXCIT:(CHARGE: CH4)
#                        );
#
#IMPR_RESU( RESU:( MAILLAGE : MA FORMAT :'CASTEM')
#           RESU:( RESULTAT: MEST2 FORMAT:'CASTEM'));
#
# TEST_RESU(
#   RESU:(RESULTAT: MEST2 NOM_CHAM:'DEPL' NUME_ORDRE:1
#         NOEUD:N3035  NOM_CMP:'DX' VALE: 6.666667E-10)
#   RESU:(RESULTAT: MEST2 NOM_CHAM:'DEPL' NUME_ORDRE:1
#         PRECISION:5.D-3
#         NOEUD:N3035  NOM_CMP:'DY' VALE: 1.3617E-7)
#   RESU:(RESULTAT: MEST2 NOM_CHAM:'DEPL' NUME_ORDRE:1
#         PRECISION:3.5D-3
#         NOEUD:N3035  NOM_CMP:'DZ' VALE: -4.78326E-8)
#   RESU:(RESULTAT: MEST2 NOM_CHAM:'DEPL' NUME_ORDRE:1
#         PRECISION:2.1D-3
#         NOEUD:N3035  NOM_CMP:'DRY' VALE: 1.195815E-9)
#   RESU:(RESULTAT: MEST2 NOM_CHAM:'DEPL' NUME_ORDRE:1
#         PRECISION:3.D-3
#         NOEUD:N3035  NOM_CMP:'DRZ' VALE: 3.40425E-9)
#          );
#FIN( ) ;
