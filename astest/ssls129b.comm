# MODIF  DATE 20/10/2011   AUTEUR SELLENET N.SELLENET 
# TITRE  :  MODELISATION D UNE COQUE DOUBLEMENT SINUSOIDALE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2011  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# CALCUL QUASI-STATIQUE D'UNE COQUE SOUMIS A DIFFERENTS TYPES DE CHARGES
# FORCE LINEIQUE SELON X
# FORCE LINEIQUE SELON Y
# FORCE LINEIQUE SELON Z
# MODELISATION COQUE_3D


DEBUT(CODE=_F(NOM='SSLS129B',NIV_PUB_WEB='INTERNET',VISU_EFICAS='NON'),DEBUG=_F(SDVERI='OUI'))

MAILLA=LIRE_MAILLAGE(FORMAT='MED',);
EPAI_COQ = 20;


MAIL=CREA_MAILLAGE(MAILLAGE=MAILLA,
                   MODI_MAILLE=_F(GROUP_MA='PLAQUE',
                                  OPTION='QUAD8_9',),);

MAIL=DEFI_GROUP(reuse =MAIL,
                MAILLAGE=MAIL,
                CREA_GROUP_NO=(_F(GROUP_MA='DROITE',),
                               _F(GROUP_MA='GAUCHE',),),);

MODELE=AFFE_MODELE(MAILLAGE=MAIL,
                   AFFE=_F(GROUP_MA=('PLAQUE','GAUCHE','DROITE',),
                           PHENOMENE='MECANIQUE',
                           MODELISATION='COQUE_3D',),);
# DEFINITION DU MATERIAU

ACIER=DEFI_MATERIAU(ELAS=_F(E=204000.0,
                            NU=0.3,),);
#

CHMAT=AFFE_MATERIAU(MAILLAGE=MAIL,
                    AFFE=_F(GROUP_MA='PLAQUE',
                            MATER=ACIER,),);
#

CARA_ELE=AFFE_CARA_ELEM(MODELE=MODELE,
         COQUE=_F(GROUP_MA=('PLAQUE','DROITE','GAUCHE',), EPAIS=EPAI_COQ, COQUE_NCOU=1,))


#
# DEFINITION CONDITION LIMITE

CC=AFFE_CHAR_MECA(MODELE=MODELE,
                  DDL_IMPO=_F(GROUP_MA='GAUCHE',
                              DX=0.0,
                              DY=0.0,
                              DZ=0.0,
                              DRX=0.0,
                              DRY=0.0,
                              DRZ=0.0,),);
#
# DEFINITION DES CHARGES
#
# FORCE LINEIQUE EN X SUR LA PARTIE DROITE

FORCEX=AFFE_CHAR_MECA(MODELE=MODELE,
                      FORCE_ARETE=_F(GROUP_MA='DROITE',
                                     FX=10.0,),);

# FORCE LINEIQUE EN Z SUR LA PARTIE DROITE

FORCEZ=AFFE_CHAR_MECA(MODELE=MODELE,
                      FORCE_ARETE=_F(GROUP_MA='DROITE',
                                     FZ=-10.0,),);
# RESOLUTION PAR STAT_NON_LINE

LIST=DEFI_LIST_REEL(DEBUT=0.0,
                    INTERVALLE=_F(JUSQU_A=1.0,
                                  NOMBRE=1,),);

SNL1=STAT_NON_LINE(MODELE=MODELE,
                   CHAM_MATER=CHMAT,
                   CARA_ELEM=CARA_ELE,
                   EXCIT=(_F(CHARGE=CC,),
                          _F(CHARGE=FORCEX,),),
                   COMP_INCR=_F(RELATION='ELAS',),
                   INCREMENT=_F(LIST_INST=LIST,),
                   CONVERGENCE=_F(RESI_GLOB_RELA=1e-08,),);

SNL1=CALC_ELEM(reuse =SNL1,
               RESULTAT=SNL1,
               OPTION='EFGE_ELNO',);

SNL1=CALC_NO(reuse =SNL1,
             RESULTAT=SNL1,
             OPTION=('FORC_NODA','EFGE_NOEU'),
             );

SNL3=STAT_NON_LINE(MODELE=MODELE,
                   CHAM_MATER=CHMAT,
                   CARA_ELEM=CARA_ELE,
                   EXCIT=(_F(CHARGE=CC,),
                          _F(CHARGE=FORCEZ,),),
                   COMP_INCR=_F(RELATION='ELAS',),
                   INCREMENT=_F(LIST_INST=LIST,),
                   CONVERGENCE=_F(RESI_GLOB_RELA=1e-08,),);

SNL3=CALC_ELEM(reuse =SNL3,
               RESULTAT=SNL3,
               OPTION='EFGE_ELNO',);

SNL3=CALC_NO(reuse =SNL3,
             RESULTAT=SNL3,
             OPTION=('FORC_NODA','EFGE_NOEU'),
             );

PSNL1=POST_RELEVE_T(ACTION=(_F(INTITULE='PSNL1_GAUCHE',
                              GROUP_NO='GAUCHE',
                              RESULTAT=SNL1,
                              NOM_CHAM='FORC_NODA',
                              RESULTANTE=('DX','DY','DZ',),
                              MOMENT=('DRX','DRY','DRZ',),
                              POINT=(0.0,0.0,0.0,),
                              OPERATION='EXTRACTION',),
                           _F(INTITULE='PSNL1_DROITE',
                              GROUP_NO='DROITE',
                              RESULTAT=SNL1,
                              NOM_CHAM='FORC_NODA',
                              RESULTANTE=('DX','DY','DZ',),
                              MOMENT=('DRX','DRY','DRZ',),
                              POINT=(0.0,0.0,0.0,),
                              OPERATION='EXTRACTION',),
                              ),);

PSNL3=POST_RELEVE_T(ACTION=(_F(INTITULE='PSNL3_GAUCHE',
                              GROUP_NO='GAUCHE',
                              RESULTAT=SNL3,
                              NOM_CHAM='FORC_NODA',
                              RESULTANTE=('DX','DY','DZ',),
                              MOMENT=('DRX','DRY','DRZ',),
                              POINT=(0.0,0.0,0.0,),
                              OPERATION='EXTRACTION',),
                           _F(INTITULE='PSNL3_DROITE',
                              GROUP_NO='DROITE',
                              RESULTAT=SNL3,
                              NOM_CHAM='FORC_NODA',
                              RESULTANTE=('DX','DY','DZ',),
                              MOMENT=('DRX','DRY','DRZ',),
                              POINT=(0.0,0.0,0.0,),
                              OPERATION='EXTRACTION',),
                              ),);

# Filtrage etat inital

PSNL1=CALC_TABLE(reuse =PSNL1,
               TABLE=PSNL1,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

PSNL3=CALC_TABLE(reuse =PSNL3,
               TABLE=PSNL3,
               ACTION=(_F(
                          OPERATION = 'FILTRE',
                          NOM_PARA  = 'NUME_ORDRE',
                          CRIT_COMP = 'GT',
                          VALE    = 0,
                         ),),);

# TEST SUR LE RESULTAT STAT_NON_LINE 1

# DEPLACEMENT

TEST_RESU(RESU=_F(RESULTAT=SNL1,
                  NUME_ORDRE=1,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DX',
                  GROUP_NO='B',
                  CRITERE='RELATIF',
                  PRECISION=5.E-02,
                  VALE=5.6766753846415E-03,
                  REFERENCE='AUTRE_ASTER'),);

TEST_RESU(RESU=_F(RESULTAT=SNL1,
                  NUME_ORDRE=1,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DX',
                  GROUP_NO='C',
                  CRITERE='RELATIF',
                  PRECISION=5.E-02,
                  VALE=5.8374935232020E-03,
                  REFERENCE='AUTRE_ASTER'),);

# FORCES NODALES

TEST_TABLE(       TABLE=PSNL1,
                NOM_PARA='RESULT_X',
                  FILTRE=_F(  NOM_PARA = 'INTITULE',
                           VALE_K = 'PSNL1_GAUCHE',      ),
                    VALE=-2.00000E+03,
                    PRECISION=1.E-09,
               REFERENCE='ANALYTIQUE',
           )

TEST_TABLE(       TABLE=PSNL1,
                NOM_PARA='RESULT_X',
                  FILTRE=_F(  NOM_PARA = 'INTITULE',
                           VALE_K = 'PSNL1_DROITE',      ),
                    VALE=2.00000E+03,
                    PRECISION=1.E-09,
               REFERENCE='ANALYTIQUE',
           )



#EFFORTS GENERALISES

TEST_RESU(RESU=(_F(RESULTAT=SNL1,
                   NUME_ORDRE=1,
                   NOM_CHAM='EFGE_NOEU',
                   NOM_CMP='NXX',
                   GROUP_NO='A',
                   VALE=2.50331639552E+01,
                   CRITERE='RELATIF',
                   PRECISION=5.E-02,
                   REFERENCE='AUTRE_ASTER',
                   ),
                   ),);

TEST_RESU(RESU=(_F(RESULTAT=SNL1,
                   NUME_ORDRE=1,
                   NOM_CHAM='EFGE_NOEU',
                   NOM_CMP='NXX',
                   GROUP_NO='D',
                   VALE=2.50228554928E+01,
                   CRITERE='RELATIF',
                   PRECISION=5.E-02,
                   REFERENCE='AUTRE_ASTER',
                   ),
                   ),);

# TEST SUR LE RESULTAT STAT_NON_LINE 3


# DEPLACEMENT

TEST_RESU(RESU=_F(RESULTAT=SNL3,
                  NUME_ORDRE=1,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DZ',
                  GROUP_NO='B',
                  CRITERE='RELATIF',
                  PRECISION=2.5E-02,
                  VALE=-6.2097302104194,
                  REFERENCE='AUTRE_ASTER',),);


TEST_RESU(RESU=_F(RESULTAT=SNL3,
                  NUME_ORDRE=1,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DZ',
                  GROUP_NO='C',
                  CRITERE='RELATIF',
                  PRECISION=2.5E-02,
                  VALE=-6.2082328310698,
                  REFERENCE='AUTRE_ASTER',),);


# FORCES NODALES

TEST_TABLE(       TABLE=PSNL3,
                NOM_PARA='RESULT_Z',
                  FILTRE=_F(  NOM_PARA = 'INTITULE',
                           VALE_K = 'PSNL3_GAUCHE',      ),
                    VALE=2.00000E+03,
                  PRECISION=1.E-09,
               REFERENCE='ANALYTIQUE',
           )

TEST_TABLE(       TABLE=PSNL3,
                NOM_PARA='RESULT_Z',
                  FILTRE=_F(  NOM_PARA = 'INTITULE',
                           VALE_K = 'PSNL3_DROITE',      ),
                    VALE=-2.00000E+03,
                  PRECISION=1.E-09,
               REFERENCE='ANALYTIQUE',
           )


# EFFORTS GENERALISES

TEST_RESU(RESU=(_F(RESULTAT=SNL3,
                  NUME_ORDRE=1,
                  NOM_CMP='NXX',
                  NOM_CHAM='EFGE_NOEU',
                  GROUP_NO='A',
                  CRITERE='RELATIF',
                  PRECISION=0.09,
                  VALE=-9.52577169452E+02,
                  REFERENCE='AUTRE_ASTER',),
                  _F(RESULTAT=SNL3,
                  NUME_ORDRE=1,
                  NOM_CMP='NXX',
                  NOM_CHAM='EFGE_NOEU',
                  GROUP_NO='D',
                  CRITERE='RELATIF',
                  PRECISION=0.10,
                  VALE=-9.53727461895E+02,
                  REFERENCE='AUTRE_ASTER',),
                  ),)


# RESOLUTION PAR MECA_STATIQUE

RESU1=MECA_STATIQUE(MODELE=MODELE,
                    CHAM_MATER=CHMAT,
                    CARA_ELEM=CARA_ELE,
                    EXCIT=(_F(CHARGE=CC,),
                           _F(CHARGE=FORCEX,),),);

RESU1=CALC_ELEM(reuse =RESU1,
                RESULTAT=RESU1,
                OPTION=('EFGE_ELNO'),);

RESU1=CALC_NO(reuse =RESU1,
              RESULTAT=RESU1,
              OPTION=('FORC_NODA','EFGE_NOEU',),
              );

RESU3=MECA_STATIQUE(MODELE=MODELE,
                    CHAM_MATER=CHMAT,
                    CARA_ELEM=CARA_ELE,
                    EXCIT=(_F(CHARGE=CC,),
                           _F(CHARGE=FORCEZ,),),);

RESU3=CALC_ELEM(reuse =RESU3,
                RESULTAT=RESU3,
                OPTION='EFGE_ELNO',);

RESU3=CALC_NO(reuse =RESU3,
              RESULTAT=RESU3,
              OPTION=('FORC_NODA','EFGE_NOEU',),
              );

PSL1=POST_RELEVE_T(ACTION=(_F(INTITULE='PSL1_GAUCHE',
                              GROUP_NO='GAUCHE',
                              RESULTAT=RESU1,
                              NOM_CHAM='FORC_NODA',
                              RESULTANTE=('DX','DY','DZ',),
                              MOMENT=('DRX','DRY','DRZ',),
                              POINT=(0.0,0.0,0.0,),
                              OPERATION='EXTRACTION',),
                           _F(INTITULE='PSL1_DROITE',
                              GROUP_NO='DROITE',
                              RESULTAT=RESU1,
                              NOM_CHAM='FORC_NODA',
                              RESULTANTE=('DX','DY','DZ',),
                              MOMENT=('DRX','DRY','DRZ',),
                              POINT=(0.0,0.0,0.0,),
                              OPERATION='EXTRACTION',),
                              ),);

PSL3=POST_RELEVE_T(ACTION=(_F(INTITULE='PSL3_GAUCHE',
                              GROUP_NO='GAUCHE',
                              RESULTAT=RESU3,
                              NOM_CHAM='FORC_NODA',
                              RESULTANTE=('DX','DY','DZ',),
                              MOMENT=('DRX','DRY','DRZ',),
                              POINT=(0.0,0.0,0.0,),
                              OPERATION='EXTRACTION',),
                           _F(INTITULE='PSL3_DROITE',
                              GROUP_NO='DROITE',
                              RESULTAT=RESU3,
                              NOM_CHAM='FORC_NODA',
                              RESULTANTE=('DX','DY','DZ',),
                              MOMENT=('DRX','DRY','DRZ',),
                              POINT=(0.0,0.0,0.0,),
                              OPERATION='EXTRACTION',),
                              ),);


# TEST SUR LE RESULTAT MECA_STATIQUE 1


# DEPLACEMENT

TEST_RESU(RESU=_F(RESULTAT=RESU1,
                  NUME_ORDRE=1,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DX',
                  GROUP_NO='B',
                  CRITERE='RELATIF',
                  PRECISION=5.E-02,
                  VALE=5.6766753846415E-03,
                  REFERENCE='AUTRE_ASTER'),);

TEST_RESU(RESU=_F(RESULTAT=RESU1,
                  NUME_ORDRE=1,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DX',
                  GROUP_NO='C',
                  CRITERE='RELATIF',
                  PRECISION=5.E-02,
                  VALE=5.8374935232020E-03,
                  REFERENCE='AUTRE_ASTER'),);


# FORCES NODALES

TEST_TABLE(       TABLE=PSL1,
                NOM_PARA='RESULT_X',
                  FILTRE=_F(  NOM_PARA = 'INTITULE',
                           VALE_K = 'PSL1_GAUCHE',      ),
                    VALE=-2.00000E+03,
                    PRECISION=1.E-05,
               REFERENCE='ANALYTIQUE',
           )

TEST_TABLE(       TABLE=PSL1,
                NOM_PARA='RESULT_X',
                  FILTRE=_F(  NOM_PARA = 'INTITULE',
                           VALE_K = 'PSL1_DROITE',      ),
                    VALE=2.00000E+03,
                    PRECISION=1.E-05,
               REFERENCE='ANALYTIQUE',
           )


# EFFORTS GENERALISES

TEST_RESU(RESU=(_F(RESULTAT=RESU1,
                   NUME_ORDRE=1,
                   NOM_CHAM='EFGE_NOEU',
                   NOM_CMP='NXX',
                   GROUP_NO='A',
                   VALE=2.50331639552E+01,
                   CRITERE='RELATIF',
                   PRECISION=5.E-02,
                   REFERENCE='AUTRE_ASTER',
                   ),
                   ),);

TEST_RESU(RESU=(_F(RESULTAT=RESU1,
                   NUME_ORDRE=1,
                   NOM_CHAM='EFGE_NOEU',
                   NOM_CMP='NXX',
                   GROUP_NO='D',
                   VALE=2.50228554928E+01,
                   CRITERE='RELATIF',
                   PRECISION=5.E-02,
                   REFERENCE='AUTRE_ASTER',
                   ),
                   ),);

# TEST SUR LE RESULTAT STAT_NON_LINE 3


# DEPLACEMENT

TEST_RESU(RESU=_F(RESULTAT=RESU3,
                  NUME_ORDRE=1,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DZ',
                  GROUP_NO='B',
                  CRITERE='RELATIF',
                  PRECISION=2.5E-02,
                  VALE=-6.2097302104194,
                  REFERENCE='AUTRE_ASTER',),);


TEST_RESU(RESU=_F(RESULTAT=RESU3,
                  NUME_ORDRE=1,
                  NOM_CHAM='DEPL',
                  NOM_CMP='DZ',
                  GROUP_NO='C',
                  CRITERE='RELATIF',
                  PRECISION=2.5E-02,
                  VALE=-6.2082328310698,
                  REFERENCE='AUTRE_ASTER',),);


# FORCES NODALES

TEST_TABLE(       TABLE=PSL3,
                NOM_PARA='RESULT_Z',
                  FILTRE=_F(  NOM_PARA = 'INTITULE',
                           VALE_K = 'PSL3_GAUCHE',      ),
                    VALE=2.00000E+03,
                  PRECISION=1.E-05,
               REFERENCE='ANALYTIQUE',
           )

TEST_TABLE(       TABLE=PSL3,
                NOM_PARA='RESULT_Z',
                  FILTRE=(_F(  NOM_PARA = 'INTITULE',
                           VALE_K = 'PSL3_DROITE',      ),
                           _F(NOM_PARA='NUME_ORDRE',VALE_I=1),),
                    VALE=-2.00000E+03,
                  PRECISION=1.E-05,
               REFERENCE='ANALYTIQUE',
           )


# EFFORTS GENERALISES

TEST_RESU(RESU=(_F(RESULTAT=RESU3,
                  NUME_ORDRE=1,
                  NOM_CMP='NXX',
                  NOM_CHAM='EFGE_NOEU',
                  GROUP_NO='A',
                  CRITERE='RELATIF',
                  PRECISION=0.09,
                  VALE=-9.52577169452E+02,
                  REFERENCE='AUTRE_ASTER',),
                  _F(RESULTAT=RESU3,
                  NUME_ORDRE=1,
                  NOM_CMP='NXX',
                  NOM_CHAM='EFGE_NOEU',
                  GROUP_NO='D',
                  CRITERE='RELATIF',
                  PRECISION=0.10,
                  VALE=-9.53727461895E+02,
                  REFERENCE='AUTRE_ASTER',),
                  ),)


FIN();
