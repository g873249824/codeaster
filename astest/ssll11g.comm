# MODIF  DATE 30/07/2012   AUTEUR LEFEBVRE J-P.LEFEBVRE 
# TITRE TREILLIS DE BARRES ARTICULEES SOUS CHARGE PONCTUELLE
# ssll11g.para = tps_job 60 mem_job 512Mo ncpus 1 liste_test R
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2012  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR
# (AT YOUR OPTION) ANY LATER VERSION.
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.
# ======================================================================
# RESPONSABLE FLEJOU J-L.FLEJOU
#CAS_TEST__: SSLL11G
# SSLL11/A                    COMMANDES                         27/12/07
# TREILLIS DE BARRES ARTICULEES SOUS CHARGE PONCTUELLE
# FY = -98100 N
#                                                   REF: SFM.VPCS SSLL11
#=======================================================================


DEBUT(CODE=_F(  NOM = 'SSLL11G',NIV_PUB_WEB='INTERNET'),DEBUG=_F(SDVERI='OUI'))

MA=LIRE_MAILLAGE(  )

MATER=DEFI_MATERIAU( ELAS=_F(  RHO = 1.E04,  E = 1.962E11, NU = 0.3,
                                 AMOR_ALPHA = 0.1,  AMOR_BETA = 0.1)  )

CHMAT=AFFE_MATERIAU(  MAILLAGE=MA,
                          AFFE=_F(  TOUT = 'OUI',      MATER = MATER)  )

MODELE=AFFE_MODELE(   MAILLAGE=MA,
                            AFFE=_F(  TOUT = 'OUI',   MODELISATION = 'POU_D_TG',
                                   PHENOMENE = 'MECANIQUE')  )

EP1=0.005

RAY1=(1.E-04 + pi*EP1*EP1) / (2.*pi*EP1)

RAY2=( 2.E-04 / pi ) ** 0.5

CAREL=AFFE_CARA_ELEM(  MODELE=MODELE,POUTRE=(
                     _F(  MAILLE = ( 'AC',  'BC', ),  SECTION = 'CERCLE',
                              CARA = 'R',   VALE = RAY2),
                            _F(  MAILLE = ( 'CD',  'BD', ), SECTION = 'CERCLE',
                              CARA = ( 'R', 'EP', ), VALE = (RAY1, EP1,))) )

CHARGE=AFFE_CHAR_MECA(  MODELE=MODELE,DDL_IMPO=(
             _F(  TOUT = 'OUI',  DZ = 0.,  DRX = 0.,  DRY = 0.),
                      _F(  NOEUD = ( 'A',  'B', ),    DX = 0.,   DY = 0.)),
             FORCE_NODALE=_F(  NOEUD = 'D',       FY = -9810.)   )

MATRR=CALC_MATR_ELEM(   MODELE=MODELE,      OPTION='RIGI_MECA',
                             CHAM_MATER=CHMAT,   CARA_ELEM=CAREL,
                             CHARGE=CHARGE     )

VEL=CALC_VECT_ELEM(   CHARGE=CHARGE,     OPTION='CHAR_MECA' )

NU=NUME_DDL(   MATR_RIGI=MATRR  )

MATASS=ASSE_MATRICE(   MATR_ELEM=MATRR,     NUME_DDL=NU  )

VECASS=ASSE_VECTEUR(   VECT_ELEM=VEL,       NUME_DDL=NU  )

MATASS=FACTORISER( reuse=MATASS,  MATR_ASSE=MATASS  )

VECASS=RESOUDRE( reuse=VECASS,  MATR=MATASS,       CHAM_NO=VECASS )

#---------------------------------------------------------------------

TEST_RESU(CHAM_NO=(
            _F(  CHAM_GD = VECASS,   CRITERE = 'RELATIF',   PRECISION = 3.E-4,
              NOEUD = 'C',        NOM_CMP = 'DX',            VALE = 2.6517E-4, REFERENCE = 'ANALYTIQUE'),
            _F(  CHAM_GD = VECASS,   CRITERE = 'RELATIF',   PRECISION = 3.E-4,
              NOEUD = 'C',        NOM_CMP = 'DY',            VALE = 0.8839E-4, REFERENCE = 'ANALYTIQUE'),
            _F(  CHAM_GD = VECASS,   CRITERE = 'RELATIF',   PRECISION = 3.E-4,
              NOEUD = 'D',        NOM_CMP = 'DX',            VALE = 3.47902E-3, REFERENCE = 'ANALYTIQUE'),
            _F(  CHAM_GD = VECASS,   CRITERE = 'RELATIF',   PRECISION = 3.E-4,
        NOEUD = 'D',        NOM_CMP = 'DY',            VALE = -5.60084E-3, REFERENCE = 'ANALYTIQUE')) )

# =====================================================================
#               C H A M _ E L E M   --->   C H A M _ N O
# =====================================================================


CH1=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_DEPL_R', MAILLAGE=MA,AFFE=(
                       _F(  NOEUD = 'A',
            NOM_CMP = (    'DX',       'DY',       'DZ',
                          'DRX',       'DRY',       'DRZ',      ),
            VALE = (  6.93641E+07, -3.41702E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00, -4.45267E-08,   )),
                       _F(  NOEUD = 'B',
            NOM_CMP = (    'DX',       'DY',       'DZ',
                          'DRX',       'DRY',       'DRZ',      ),
            VALE = ( -1.21374E+08, -1.69849E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00,  2.99239E+06,   )),
                       _F(  NOEUD = 'C',
            NOM_CMP = (    'DX',       'DY',       'DZ',
                          'DRX',       'DRY',       'DRZ',      ),
            VALE = (  6.32523E+07,  8.76166E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00,  1.58985E+06,   )),
                       _F(  NOEUD = 'D',
            NOM_CMP = (    'DX',       'DY',       'DZ',
                          'DRX',       'DRY',       'DRZ',      ),
            VALE = ( -2.64964E+07, -9.73549E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00,  9.68575E-08,   )))
                    )

CH2=CREA_CHAMP( OPERATION='AFFE', TYPE_CHAM='NOEU_SIEF_R', MAILLAGE=MA,AFFE=(
                       _F(  NOEUD = 'A',
            NOM_CMP = (    'SIXX',       'SIYY',       'SIZZ',
                          'SIXY',       'SIXZ',       'SIYZ',      ),
            VALE = (  6.93641E+07, -3.41702E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00, -4.45267E-08,   )),
                       _F(  NOEUD = 'B',
            NOM_CMP = (    'SIXX',       'SIYY',       'SIZZ',
                          'SIXY',       'SIXZ',       'SIYZ',      ),
            VALE = ( -1.21374E+08, -1.69849E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00,  2.99239E+06,   )),
                       _F(  NOEUD = 'C',
            NOM_CMP = (    'SIXX',       'SIYY',       'SIZZ',
                          'SIXY',       'SIXZ',       'SIYZ',      ),
            VALE = (  6.32523E+07,  8.76166E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00,  1.58985E+06,   )),
                       _F(  NOEUD = 'D',
            NOM_CMP = (    'SIXX',       'SIYY',       'SIZZ',
                          'SIXY',       'SIXZ',       'SIYZ',      ),
            VALE = ( -2.64964E+07, -9.73549E+03,  0.00000E+00,
                        0.00000E+00,  0.00000E+00,  9.68575E-08,   )))
                    )

RESU1=MECA_STATIQUE(  MODELE=MODELE,
                           CHAM_MATER=CHMAT,   CARA_ELEM=CAREL,
                           EXCIT=_F(  CHARGE = CHARGE)             )

# SIPM_ELNO PRODUIT MAINTENANT DES CONTRAINTES SIXX COMBINANT
# L'EFFORT NORMAL ET LA FLEXION : COMME IL N'Y A PAS DE ROTULES
# LA FLEXION EST NON NEGLIGEABLE


RESU1=CALC_CHAMP(reuse=RESU1,CONTRAINTE=('SIPO_ELNO','SIPM_ELNO'),RESULTAT=RESU1)


#---------------------------------------------------------------------

TEST_RESU(RESU=(
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIPO_ELNO',  NUME_ORDRE = 1,
MAILLE = 'AC', NOEUD = 'A',    NOM_CMP = 'SN',    VALE = 6.93641E+07, REFERENCE = 'ANALYTIQUE'),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIPO_ELNO',  NUME_ORDRE = 1,
MAILLE = 'BC', NOEUD = 'B',    NOM_CMP = 'SN',    VALE = -3.46815E+07, REFERENCE = 'ANALYTIQUE'),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIPO_ELNO',  NUME_ORDRE = 1,
MAILLE = 'CD', NOEUD = 'C',    NOM_CMP = 'SN',    VALE = 1.55074E+08, REFERENCE = 'ANALYTIQUE'),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIPO_ELNO',  NUME_ORDRE = 1,
MAILLE = 'BD', NOEUD = 'D',    NOM_CMP = 'SN',    VALE = -2.08067E+08, REFERENCE = 'ANALYTIQUE'))
            )

TEST_RESU(RESU=(
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIPM_ELNO',  NUME_ORDRE = 1,
       MAILLE='AC', NOEUD = 'A',    NOM_CMP = 'SIXX',    VALE = 6.93641E+07, REFERENCE = 'ANALYTIQUE'),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIPM_ELNO',  NUME_ORDRE = 1, PRECISION = 5.5E-2,
       MAILLE='AC', NOEUD = 'A',    NOM_CMP = 'SIXY',    VALE = 3.41702E+03, REFERENCE = 'ANALYTIQUE'),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIPM_ELNO',  NUME_ORDRE = 1, PRECISION = 1.E-6,
       MAILLE='AC', NOEUD = 'A',    NOM_CMP = 'SIXY',    VALE = 3.5879765842803E+03, REFERENCE = 'NON_REGRESSION'),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIPM_ELNO',  NUME_ORDRE = 1,
       MAILLE='BC', NOEUD = 'B',    NOM_CMP = 'SIXX',    VALE = -3.80667E+07, REFERENCE = 'ANALYTIQUE'),
     _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIPM_ELNO',  NUME_ORDRE = 1, PRECISION = 5.5E-2,
       MAILLE='BC', NOEUD = 'B',    NOM_CMP = 'SIXY',    VALE = 1.56495E+04, REFERENCE = 'ANALYTIQUE'),
      _F(  RESULTAT = RESU1,   NOM_CHAM = 'SIPM_ELNO',  NUME_ORDRE = 1, PRECISION = 1.E-6,
       MAILLE='BC', NOEUD = 'B',    NOM_CMP = 'SIXY',    VALE = 1.6431825573968E+04, REFERENCE = 'NON_REGRESSION'),
            ))


#---------------------------------------------------------------------

T0 = POST_RELEVE_T ( ACTION=_F( INTITULE = 'CH1',
                                OPERATION = 'EXTREMA',
                                CHAM_GD = CH1,         ), )  ;
IMPR_TABLE( TABLE = T0 )  ;

T1 = POST_RELEVE_T ( ACTION=_F( INTITULE = 'DEPL',
                                OPERATION = 'EXTREMA',
                                NOM_CHAM = 'DEPL',
                                NOM_CMP = ('DX','DRZ'),
                                RESULTAT = RESU1       ), )  ;
IMPR_TABLE( TABLE = T1 )  ;

T2 = POST_RELEVE_T ( ACTION=_F( INTITULE = 'SIGM',
                                OPERATION = 'EXTREMA',
                                NOM_CHAM = 'SIPM_ELNO',
                                TOUT_CMP = 'OUI',
                                RESULTAT = RESU1       ), )  ;
IMPR_TABLE( TABLE = T2 )  ;

#---------------------------------------------------------------------

TEST_TABLE( TABLE=T0,
            FILTRE=_F( NOM_PARA = 'EXTREMA',
                       VALE_K   = 'MAX'    ),
            NOM_PARA='VALE', REFERENCE='NON_REGRESSION', VERSION='8.2.7',
            VALE=  6.93641E+07   )

TEST_TABLE( TABLE=T0,
            FILTRE=_F( NOM_PARA = 'EXTREMA',
                       VALE_K   = 'MIN'    ),
            NOM_PARA='VALE', REFERENCE='NON_REGRESSION', VERSION='8.2.7',
            VALE= -1.21374E+08   )

TEST_TABLE( TABLE=T0,
            FILTRE=_F( NOM_PARA = 'EXTREMA',
                       VALE_K   = 'MAX_ABS'    ),
            NOM_PARA='VALE', REFERENCE='NON_REGRESSION', VERSION='8.2.7',
            VALE=  1.21374E+08   )

TEST_TABLE( TABLE=T1,
            FILTRE=_F( NOM_PARA = 'EXTREMA',
                       VALE_K   = 'MAX'    ),
            NOM_PARA='VALE', REFERENCE='NON_REGRESSION', VERSION='8.2.7',
            VALE=  3.47838E-03   )

TEST_TABLE( TABLE=T1,
            FILTRE=_F( NOM_PARA = 'EXTREMA',
                       VALE_K   = 'MIN'    ),
            NOM_PARA='VALE', REFERENCE='NON_REGRESSION', VERSION='8.2.7',
            VALE= -6.18920E-03   )

TEST_TABLE( TABLE=T1,
            FILTRE=_F( NOM_PARA = 'EXTREMA',
                       VALE_K   = 'MAX_ABS'    ),
            NOM_PARA='VALE', REFERENCE='NON_REGRESSION', VERSION='8.2.7',
            VALE= 6.18920E-03   )

TEST_TABLE( TABLE=T2,
            FILTRE=_F( NOM_PARA = 'EXTREMA',
                       VALE_K   = 'MAX'    ),
            NOM_PARA='VALE', REFERENCE='NON_REGRESSION', VERSION='8.2.7',
            VALE=  1.62542E+08   )

TEST_TABLE( TABLE=T2,
            FILTRE=_F( NOM_PARA = 'EXTREMA',
                       VALE_K   = 'MIN'    ),
            NOM_PARA='VALE', REFERENCE='NON_REGRESSION', VERSION='8.2.7',
            VALE= -2.17437E+08   )

TEST_TABLE( TABLE=T2,
            FILTRE=_F( NOM_PARA = 'EXTREMA',
                       VALE_K   = 'MAX_ABS'    ),
            NOM_PARA='VALE', REFERENCE='NON_REGRESSION', VERSION='8.2.7',
            VALE= 2.17437E+08   )

#---------------------------------------------------------------------

FIN( )
#
