# MODIF  DATE 04/11/2003   AUTEUR LEBOUVIE F.LEBOUVIER 
# TITRE VALIDATION DE MACR_CARA_POUTRE
#            CONFIGURATION MANAGEMENT OF EDF VERSION
# ======================================================================
# COPYRIGHT (C) 1991 - 2001  EDF R&D                  WWW.CODE-ASTER.ORG
# THIS PROGRAM IS FREE SOFTWARE; YOU CAN REDISTRIBUTE IT AND/OR MODIFY
# IT UNDER THE TERMS OF THE GNU GENERAL PUBLIC LICENSE AS PUBLISHED BY
# THE FREE SOFTWARE FOUNDATION; EITHER VERSION 2 OF THE LICENSE, OR   
# (AT YOUR OPTION) ANY LATER VERSION.                                 
#
# THIS PROGRAM IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL, BUT 
# WITHOUT ANY WARRANTY; WITHOUT EVEN THE IMPLIED WARRANTY OF          
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. SEE THE GNU    
# GENERAL PUBLIC LICENSE FOR MORE DETAILS.                            
#
# YOU SHOULD HAVE RECEIVED A COPY OF THE GNU GENERAL PUBLIC LICENSE   
# ALONG WITH THIS PROGRAM; IF NOT, WRITE TO EDF R&D CODE_ASTER,       
#    1 AVENUE DU GENERAL DE GAULLE, 92141 CLAMART CEDEX, FRANCE.      
# ======================================================================


DEBUT( CODE=_F(  NOM = 'SSLL107G',NIV_PUB_WEB='INTERNET') )

MATER=DEFI_MATERIAU(   ELAS=_F(  E = 1234567.890,  NU = 0.3) )

TCARS=MACR_CARA_POUTRE(   GROUP_MA_BORD='LR1',
                                NOEUD='N64' )

#
# --- VALEURS DE REFERENCE: OPERATEUR AFFE_CARA_ELEM
#

IMPR_TABLE(TABLE=TCARS)


TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='AIRE',
                PRECISION=0.005,
                    VALE=1.E-3      )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='CDG_X',
                 CRITERE='ABSOLU',
                     VALE=0.              )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='CDG_Y',
                 CRITERE='ABSOLU',
                     VALE=0.              )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='IX_G',
                PRECISION=0.009,
                    VALE=2.0833333E-7     )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='IY_G',
                PRECISION=0.009,
                    VALE=3.333333E-08      )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='IXY_G',
                 CRITERE='ABSOLU',
                     VALE=0.               )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='IY_PRIN_G',
                PRECISION=0.009,
                     VALE=3.333333E-08     )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='IZ_PRIN_G',
                PRECISION=0.009,
                     VALE=2.0833333E-7     )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='ALPHA',
                     VALE=90.               )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='Y_MIN',
                    VALE=-2.5000E-02       )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='Y_MAX',
                     VALE=2.5000E-02       )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='Z_MIN',
                    VALE=-1.0000E-02       )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='Z_MAX',
                     VALE=1.0000E-02       )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='CT',
                PRECISION=0.009,
                     VALE=9.9805E-8        )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='AY',
                     VALE=1.2     )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='AZ',
                     VALE=1.2     )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='EY',
                 CRITERE='ABSOLU',
                     VALE=0.               )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='EZ',
                 CRITERE='ABSOLU',
                     VALE=0.               )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='PCTX',
                 CRITERE='ABSOLU',
                     VALE=0.               )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                NOM_PARA='PCTY',
                 CRITERE='ABSOLU',
                     VALE=0.               )

TEST_TABLE(     TABLE=TCARS,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = '.9000006'),
                PRECISION=0.05,
                NOM_PARA='RT',
                REFERENCE = 'ANALYTIQUE',
                VALE=1.85637E-2         )

TCAR2=MACR_CARA_POUTRE(     GROUP_MA_BORD=('LGR1', 'LGR2',),
                                      GROUP_MA=('GR1','GR2',),
                                UNITE_MAILLAGE=38,
                                         NOEUD=('N64', 'N64',),
                                LONGUEUR=0.0002,
                                MATERIAU=MATER,
                                 LIAISON='ENCASTREMENT',
                            )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR1'),
                NOM_PARA='AIRE',
                    VALE=5.E-4      )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR1'),
                NOM_PARA='CDG_X',
                 CRITERE='ABSOLU',
                     VALE=0.              )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR1'),
                NOM_PARA='CDG_Y',
                     VALE=-1.25E-2            )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR1'),
                NOM_PARA='IX_G',
                    VALE=2.60417E-08     )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR1'),
                NOM_PARA='IY_G',
                PRECISION=0.009,
                    VALE=1.66667E-08      )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR1'),
                NOM_PARA='IXY_G',
                 CRITERE='ABSOLU',
                     VALE=0.               )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR1'),
                NOM_PARA='AY',
                     VALE=1.2     )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR1'),
                NOM_PARA='AZ',
                     VALE=1.2     )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR1'),
                PRECISION=0.03,
                REFERENCE = 'ANALYTIQUE',
                NOM_PARA='RT',
                     VALE=1.51908E-02     )


TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR2'),
                NOM_PARA='AIRE',
                    VALE=5.E-4      )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR2'),
                NOM_PARA='CDG_X',
                 CRITERE='ABSOLU',
                     VALE=0.              )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR2'),
                NOM_PARA='CDG_Y',
                     VALE=1.25E-2            )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR2'),
                NOM_PARA='IX_G',
                    VALE=2.60417E-08     )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR2'),
                NOM_PARA='IY_G',
                PRECISION=0.009,
                    VALE=1.66667E-08      )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR2'),
                NOM_PARA='IXY_G',
                 CRITERE='ABSOLU',
                     VALE=0.               )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR2'),
                NOM_PARA='AY',
                     VALE=1.2     )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR2'),
                NOM_PARA='AZ',
                     VALE=1.2     )

TEST_TABLE(     TABLE=TCAR2,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'GR2'),
                PRECISION=0.03,
                NOM_PARA='RT',
                REFERENCE = 'ANALYTIQUE',
                     VALE=1.51908E-02     )

# POUR L'ENSEMBLE DES DEUX GROUPES ON DOIT AVOIR AY=AZ=1.2

IMPR_TABLE(TABLE=TCAR2);


TEST_TABLE(     TABLE=TCAR2,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = '.9000070'),
                 NOM_PARA='AY',
                      VALE=1.2     )

TEST_TABLE(     TABLE=TCAR2,
                   FILTRE=_F(  NOM_PARA = 'LIEU',
                            VALE_K = '.9000070'),
                 NOM_PARA='AZ',
                      VALE=1.2     )

# AVEC UN SEUL GROUPE ON DOIT RETROUVER LES MEMES RESULTATS

TCAR3=MACR_CARA_POUTRE(     GROUP_MA_BORD='LR1',
                                      GROUP_MA='RECTANG',
                                UNITE_MAILLAGE=39,
                                   NOEUD='N64',
                                LONGUEUR=0.02,
                                MATERIAU=MATER,
                                 LIAISON='ENCASTREMENT'
                            )

TEST_TABLE(     TABLE=TCAR3,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'RECTANG'),
                NOM_PARA='AY',
                     VALE=1.2     )

TEST_TABLE(     TABLE=TCAR3,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'RECTANG'),
                NOM_PARA='AZ',
                     VALE=1.2     )

TEST_TABLE(     TABLE=TCAR3,
                  FILTRE=_F(  NOM_PARA = 'LIEU',
                           VALE_K = 'RECTANG'),
                PRECISION=0.05,
                NOM_PARA='RT',
                REFERENCE = 'ANALYTIQUE',
                     VALE=1.85637E-2        )

FIN()
