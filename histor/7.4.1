

-----------------------------------------------------------------------
--- AUTEUR acbhhcd G.DEVESA   DATE  le 11/01/2005 a 13:09:39

REALISATION EL 2005-002
   INTERET_UTILISATEUR : NON
   TITRE  test RIGI_MISS_3D et DIS_CONTACT en dynamique
   FONCTIONNALITE
   On cree un nouveau cas test MISS06A testant le decollement dynamique
   sous sollicitation sismique d'une structure par rapport a un sol
   modelise par MISS3D. Apres la generation des caracteristiques de
   rigidite sous la fondation par AFFE_CARA_ELEM option RIGI_MISS_3D,
   on lance DYNA_NON_LINE avec une relation DIS_CHOC et materiau
   DIS_CONTACT pour les ressorts de contact associes au tapis de sol.
   On teste les deplacements verticaux maximaux obtenus sur la fondation
   lors des decollements.

   Test livre dans le cadre du projet OMERSI

   RESU_FAUX_VERSION_EXPLOITATION    :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : OUI
   DOC_V : V1.10.125
   EXPL_  : Doc du nouveau cas test miss06a
   VALIDATION : Test MISS06A
   NB_JOURS_TRAV  : 3.5


-----------------------------------------------------------------------
--- AUTEUR cibhhpd L.SALMONA   DATE  le 21/01/2005 a 18:06:56

CORRECTION AL 2004-407
   POUR LE COMPTE DE : M. ABBAS
   INTERET_UTILISATEUR : OUI
   NB_JOURS_TRAV : 6.5
   TITRE :Contact-Gestion par bloc

   FONCTIONNALITE : La gestion par bloc de la matrice de contact n'avait été que
   partiellement réalisée lors de l'EL2004-101. En effet, seule la déclaration des
   SD dans crsdco avait été réalisée.

   DETAILS:
      Pour pouvoir utiliser la séparation par bloc, il a fallu modifier les
      routines cfaca2 (qui calcule effectivement la matrice) et elpiv1 et
      elpiv2 (qui s'occupe de l'élimination des pivots nuls).
      La principale difficulté rencontrée était de sélectionner la bonne adresse
      dans le bloc modifié connaissant le numéro de la liaison.
      A noter que pour éviter des surcouts de temps CPU, on travaille désormais
      par bloc. Ainsi, lors de la boucle sur toutes les liaisons a changer, on
      verifie auparavant que le bloc susceptible d'être modifie n'est pas déjà
      ouvert auquel cas on ferme éventuellement l'ancien bloc ouvert et non
      utilisé.
      Remarque :
      --------
      Dans la commande DEBUT le paramètre TAILLE_BLOC qui définit la taille des
      blocs de la matrice s'applique à la fois a la matrice mécanique globale et
      à la matrice de contact. Peut etre serait-il judicieux d'introduire un
      nouveau mot clé pour la matrice de contact.


   RESU_FAUX_VERSION_EXPLOITATION    : NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   : NON
   RESTITUTION_VERSION_EXPLOITATION  : OUI
   RESTITUTION_VERSION_DEVELOPPEMENT : OUI
   VALIDATION : liste du contact + ssnv503b modifié
   Dans le cas test ssnv503b, on force l ecriture de la matrice de contact sur
   deux blocs.
   IMPACT_DOCUMENTAIRE : NON


-----------------------------------------------------------------------
--- AUTEUR durand C.DURAND   DATE  le 24/01/2005 a 18:34:17

------------------------------------------------------------------------------
CORRECTION AL 2005-023
   INTERET_UTILISATEUR : NON
   TITRE suppression variable 'blan' dans astermodule.c
   FONCTIONNALITE superviseur
   RESU_FAUX_VERSION_EXPLOITATION   :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT  :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
   néant
   DETAILS
   NB_JOURS_TRAV  : 0.
------------------------------------------------------------------------------
CORRECTION AL 2005-022
   INTERET_UTILISATEUR : NON
   TITRE cas test efica01a en INTRANET
   FONCTIONNALITE superviseur
   RESU_FAUX_VERSION_EXPLOITATION   :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT  :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
   néant
   DETAILS
   NB_JOURS_TRAV  : 0.
------------------------------------------------------------------------------
CORRECTION AL 2005-021
   INTERET_UTILISATEUR : NON
   TITRE impressions dans calc_flui_stru
   FONCTIONNALITE superviseur
   RESU_FAUX_VERSION_EXPLOITATION   :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT  :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
   cas test sdnl112c
   DETAILS
   modification de l'impression dans la routine fluimp.f.
   A la demande d'André Adobes, je fais écrire numéro de mode ET numéro
   d'ordre :
   MODE : NUMERO D'ORDRE: 7 / NUME_MODE: 21 / FREQ:  6.15376E+01
   au lieu de :
   MODE N   7     FREQUENCE =  6.153761D+01
   NB_JOURS_TRAV  : 0.
------------------------------------------------------------------------------
CORRECTION AL 2005-007
   INTERET_UTILISATEUR : NON
   TITRE impressions parasites en poursuite, apres un include_materiau
   FONCTIONNALITE include_materiau
   RESU_FAUX_VERSION_EXPLOITATION   :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT  :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
   étude jointe
   DETAILS
   Les noms préfixés ET NON PREFIXES des concepts d'un include_materiau
   figurent dans le contexte global. Seuls les noms préfixés du nom de matériau
   ont un sens. Ca pose un pb à la relecture de la base (et depicklage)
   en poursuite.

   Dans la méthode Cata.ops.INCLUDE_MATERIAU, après la création du g_context,
   on le purge des références incohérentes avec le nom du concept pointé :

    self.make_contexte(f,self.text)
    for k,v in self.g_context.items() :
        if isinstance(v,ASSD) and k!=v.nom : del self.g_context[k]

   Ainsi, à la relecture et recréation du contexte lu dans le fichier pickle,
   pas de risque de message parasite sur nom incohérent.
   NB_JOURS_TRAV  : 0.5
------------------------------------------------------------------------------
CORRECTION AL 2005-010

INTERET_UTILISATEUR : OUI

TITRE : MACR_FIAB_IMPR

FONCTIONNALITE : Le couplage avec MEFISTO pour la mécanique fiabiliste
plante quand les gradients sont tous calculés par différences finies.

RESU_FAUX_VERSION_EXPLOITATION: NON
RESU_FAUX_VERSION_DEVELOPPEMENT: NON
RESTITUTION_VERSION_EXPLOITATION: OUI
RESTITUTION_VERSION_DEVELOPPEMENT: OUI

IMPACT_DOCUMENTAIRE:  NON
VALIDATION :
DETAILS :
Dans macr_fiab_impr_ops, programme python qui pilote la macro
MACR_FIAB_IMPR, on imprime les gradients calculés par Code_Aster.
Pour cela, on fait la boucle "for val in GRADIENTS :", la variable
GRADIENTS étant un mot-clé facteur. Quand aucun gradient n'a été calculé
par un calcul de sensibilité, la variable GRADIENTS vaut None. Et
l'instruction "for val in GRADIENTS :" ne marche plus ! Je corrige en
filtrant ces impressions sur la valeur None de la variable GRADIENTS.

NB_JOURS_TRAV : 0.5
-----------------------------------------------------------------------
CORRECTION AL 2005-012
   INTERET_UTILISATEUR : NON
   TITRE scories impr_courbe dans les tests
   FONCTIONNALITE cas tests
   RESU_FAUX_VERSION_EXPLOITATION   :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT  :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
   cas tests concernés
   DETAILS
   Il subsiste des appels (en commentaire ou non) à IMPR_COURBE dans les
   fichiers de commandes des tests en version NEW8, alors que cette commande
   a été résorbée en 7.3.29
   NB_JOURS_TRAV  : 0.5
------------------------------------------------------------------------------


-----------------------------------------------------------------------
--- AUTEUR f1bhhaj J.ANGLES   DATE  le 10/01/2005 a 14:57:18

RESTITUTION HORS AREX
TITRE : La restitution de l'EL 2004-219 n'a pas été prise en compte (7.3.25).
FONCTIONNALITE : CALC_FATIGUE. L'évolution consistait à ajouter un coefficient
     dans les critères de fatigue MATAKE, DANG_VAN_MODI_AC, DOMM_MAXI et
     DANG_VAN_MODI_AV de manière à prendre en compte un préécrouissage.
INTERET_UTILISATEUR : NON
DETAILS :
L'évolution nous a conduit à modifier les routines deltau.f, dtauno.f, avgrma.f
avgrno.f, avcrit.f, projax.f, proax0.f, raxini.f rnomat.f et calc_fatigue.capy.
Dans calc_fatigue.capy on ajoute la ligne suivante dans le bloc b_fatigue_multi:

     COEF_PREECROU =SIMP(statut='f',typ='R',defaut= 1.0E+0),

RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  OUI
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : NON
VALIDATION : SSLV135, calculs RRA et FATHER
NB_JOURS_TRAV  : 1.0



-----------------------------------------------------------------------
--- AUTEUR f6bhhbo P.DEBONNIERES   DATE  le 31/01/2005 a 18:14:02

CORRECTION AL 2005-025
   INTERET_UTILISATEUR : OUI
   TITRE Correction du calcul de sensibilite en mecanique
         non-lineaire dans le cas de la loi Drucker-Prager
   FONCTIONNALITE  STAT_NON_LINE  -  Mot-cle SENSIBILITE
   On traite un bug detecte par Antoine Brodin (lors de son
   stage) qu'il n'avait pas eu le temps de corriger. Un nouveau
   test qu'il avait developpe est ajoute pour valider cette
   correction.
   VALIDATION
   Ajout du cas-test SENSM14A :
     SENSM14A : CALCUL DE SENSIBILITE 2D (LOI DRUCKER-PRAGER)
   RESU_FAUX_VERSION_EXPLOITATION : OUI   DEPUIS : 7.3.21
   RESU_FAUX_VERSION_DEVELOPPEMENT : OUI   DEPUIS : 7.3.21
   RESTITUTION_VERSION_EXPLOITATION  : OUI
   RESTITUTION_VERSION_DEVELOPPEMENT : OUI
   IMPACT_DOCUMENTAIRE : OUI

   DOC_V : V1.01.191
   EXPL_ : Ajout d'un cas-test (calcul de cavite 2D)
   NB_JOURS_TRAV : 12.
   DETAILS
   Le probleme venait de l'appel au calcul de l'operateur
   tangent de Drucker-Prager dans NSDRPR. Cet appel etait
   fait via REDRPR, qui n'etait pas adaptee. J'ai remplace
   cet appel par un appel direct a DPMATA, avec une prepa-
   ration ad hoc.
   Modification de la routine FORTRAN :
    nsdrpr


-----------------------------------------------------------------------
--- AUTEUR galenne E.GALENNE   DATE  le 10/01/2005 a 12:57:09

CORRECTION AL 2004-446
   INTERET_UTILISATEUR : NON
   TITRE Problème de génération maillage ASCOUF
   FONCTIONNALITE
   Un utilisateur a signalé une erreur dans la génération automatique du maillage avec la
   macro-commande macr_ascouf_calc dans le cas d'un coude fissuré de 30° (sortie brutale
   de la procédure gibi).
   Ce problème provient du fait que le bloc fissure, de taille non paramétrable, est plus
   grand que le coude et dépasse donc à la fois côté 'tube droit' et côté 'tube GV'. Ce
   cas n'avait pas été envisagé dans la procédure de maillage, alors que les cas où le
   bloc fissure dépassait sur l'une ou l'autre des extrémités du coude étaient traités.

   On modifie donc en conséquence la procédure de maillage des coudes fissurés, en
   s'inspirant des deux cas précédents.

   Fichier modifié : ascouf_fiss_v4.datg

   RESU_FAUX_VERSION_EXPLOITATION   :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT  :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   NON
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
   Passage de l'étude avec le coude de 30°
   DETAILS
   NB_JOURS_TRAV  : 2.5


-----------------------------------------------------------------------
--- AUTEUR godard V.GODARD   DATE  le 25/01/2005 a 10:33:28

------------------------------------------------------------------------------
CORRECTION AL 2004-457
   INTERET_UTILISATEUR : NON
   TITRE : probleme de C_PLAN_GRAD_EPSI, simplification de l'affectation du modele au maille de bord pour *GRAD_EPSI
   FONCTIONNALITE : Simplification dans AFFE_MODELE pour GRAD_EPSI
   RESU_FAUX_VERSION_EXPLOITATION  :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON

   VALIDATION: ssla103d, ssnp124c, ssnp124d, ssnp127a, ssnp127b
                        ssnv157a, ssnv157b, ssnv157c, ssnv157d, ssnv157e
                        ssnv157f, ssnv157g, ssnv175a

   DETAILS:Le catalogue gener_mecpg2.cata, éléments relatifs à la modélisation
           C_PLAN_GRAD_EPSI,ne permet pas d'utiliser l'option RIGI_MECA_ELAS
           (il est redondant pour RIGI_MECA_TANG). Il faut donc changer un
           RIGI_MECA_TANG en RIGI_MECA_ELAS.catalogue à modifier:gener_mecpg2.cata

           De plus, l'utilisation des modélisations non locales à gradient de déformation *_GRAD_EPSI
           est rendu pénible par le fait qu'on doit différencier les mailles de bords, auxquelles on affecte
           le chargement ou les conditions limites, du reste du maillage. Pour un calcul 3D par exemple,
           il fallait affecter la modélisation 3D_GRAD_EPSI aux mailles volumiques et
           la modélisation 3D aux mailles de bords que l'on chargeait.
           Je propose de résoudre le problème en ajoutant des éléments de bord
           (qui ne prennent pas an compte les déformations régularisées) dans le catalogue des modélisations
           (3D_GRAD_EPSI, D_PLAN_GRAD_EPSI, C_PLAN_GRAD_EPSI). Il n'y aura alors plus de distinction
           à faire dans AFFE_MODELE pour les mailles de bord (plus simple pour l'utilisateur).
           catalogue à modifier: phenomene_modelisation.cata

   NB_JOURS_TRAV  : 0.5
------------------------------------------------------------------------------



-----------------------------------------------------------------------
--- AUTEUR lebouvie F.LEBOUVIER   DATE  le 31/01/2005 a 14:52:01

-----------------------------------------------------------------------
CLASSEMENT SANS SUITE AL 2004-267
   NB_JOURS_TRAV  : 2.0
   INTERET_UTILISATEUR : OUI
   TITRE : MACR_ASCOUF_CALC, fond de fissure fermé
   FONCTIONNALITE
   DETAILS
   - L'utilisateur réalise le calcul élastique linéaire d'une transition
   d'épaisseur comportant un défaut axisymétrique débouchant en peau externe.
   Le maillage a été effectué dans une première exécution avec la macro-commande
   MACR_ASCOUF_MAIL.
   - Le calcul est effectué en poursuite, avec la macro MACR_ASCOUF_CALC.
   Le problème est au niveau de la commande DEFI_FOND_FISS appelée par
   MACR_ASCOUF_CALC : <E> <DEFI_FOND_FISS> <GVERIF> ERREUR : LE FOND DE FISSURE
   POSSEDE UN NOEUD REPETE 2 FOIS : NOEUD N11123  . REVOIR LES DONNEES
   - Le problème vient de la mise en donnée. Ce type de fissure est caractérisé
   dans MACR_ASCOUF_CALC par le mot-clé TYPE_MAILLAGE auquel on attribue la
   chaîne 'FISS_AXIS_DEB', l'utilisateur utilisé 'FISS_COUDE'.
   - L'étude fournie a été passée en NEW6 et en NEW7 sans problème.
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
------------------------------------------------------------------------------
CORRECTION AL 2004-355
   INTERET_UTILISATEUR : OUI
   TITRE : ASPIC08A et état initial
   FONCTIONNALITE
   DETAILS
   En 7.3.18, il a été restitué une vérification dans STAT_NON_LINE : si l'état
   initial (avant le premier instant de calcul) est tel que la variable de
   commande (température, hydratation, séchage...) n'est pas identique à la
   température de référence, on obtient des alarmes supplémentaires:
   <A> <STAT_NON_LINE> <OP0070> LES VARIABLES DE COMMANDES INITIALES INDUISENT
       DES CONTRAINTES INCOMPATIBLES > dans ce cas-test, la variable de
       commande est la température.
   Dans le cas-test aspic08a, l'analyse de la température de référence, de
   l'état initial (t=0) et de la température calculée à l'instant t=1 montre que
   les températures sont les mêmes à espilson près (220.00000001):
      - TEMP_REF=220°.
      - L'état initial (t=0) résulte d'un calcul thermique en STATIONNAIRE.
        La structure échange par convection avec l'extérieur avec une
        température extérieure imposée de 220°, on trouve bien 220° partout.
      - A l'instant t=1 la température résulte d'un calcul en TRANSITOIRE.
        La structure échange par convection avec l'extérieur avec une
        température extérieure imposée toujours de 220° (t=1s), on trouve
        220° partout.
   D'autre part à l'instant t=1, il n'y a pas de chargement. Donc a t=0 et t=1,
   le calcul est isotherme et les contraintes sont nulles. On essaye donc dans
   nmconv de comparer VMAX0=1.797436196966483E-008 (valeur max du résidu à t=0,
   donc a l'instant initial) à VMAX2=2.764201788325166E-8 (valeur max du résidu
   à t=1, ou en général on a des contraintes). Donc habituellement, VMAX2 est
   grand, mais ici il est négligeable (comparable à VMAX0).
   Modifications apportées:
    - Dans le cas-test, il y a un calcul inutile. Si on prend 1 comme instant
      initial de calcul, et que l'on prend le numéro d'ordre 34 au lieu de 35
      dans le TEST_RESU, on retrouve les mêmes résultats, et on supprime donc
      l'alarme sur l'état initial.
    - Pour éviter le même type d'alarme dans le futur, on modifie la ligne
      289 de la routine nmconv :
       IF(VMAX2.GT.0) THEN par IF(VMAX2.GT.PARCRI(IND(2)))
   Fichiers modifiés:
      - nmconv
      - aspic08a
   RESU_FAUX_VERSION_EXPLOITATION   :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT  :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
   NB_JOURS_TRAV  : 3.5
------------------------------------------------------------------------------
CORRECTION AL 2004-359
   POUR LE COMPTE DE :  E. GALENNE
   INTERET_UTILISATEUR : OUI
   TITRE : ASCOU19A et CALC_G_THETA_T
   FONCTIONNALITE :
   DETAIL :
   - La réalisation de l'EL2004_154 (Transmission des SD MODELE, MATERIAU et
     EXCIT dans l'opérateur CALC_G) a conduit a un résultat NOOK sur le test
     d'un CALC_G local. Un écart de 8% est observé par rapport a la référence
     (valeur de non regression). La valeur de référence a été obtenue sans tenir
     compte des chargements qui sont maintenant pris en compte automatiquement
     (ils sont extraits de la SD résultat). L'écart est du à l'absence du
     chargement lors du calcul de la valeur de référence: -> on modifie donc la
     valeur de référence.
   - La différence observée entre le résultat donné par la macro MACR_CALC_ASCOUF
     et le résultat donné par les commandes déployées équivalentes de la macro
     sont maintenant les mêmes  (l'erreur constatée n'a pas pu être reproduite).
   - Fichier modifié
     cas-test : ascou19a.comm
   RESU_FAUX_VERSION_EXPLOITATION    : NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   : NON
   RESTITUTION_VERSION_EXPLOITATION  : OUI
   RESTITUTION_VERSION_DEVELOPPEMENT : OUI
   VALIDATION : Passage du cas-test ascou19a
   IMPACT_DOCUMENTAIRE : NON
   NB_JOURS_TRAV : 1.5
-------------------------------------------------------------------------------
REALISATION EL 2005-010
   POUR LE COMPTE DE : J.L. FLEJOU
   INTERET_UTILISATEUR : NON
   TITRE : résorber CARA_SECT de affe_cara_elem.capy
   FONCTIONNALITE :
   DETAIL :
   Dans le catalogue de la commande AFFE_CARA_ELEM, on note la présence du
   mot-clé CARA_SECT qui n'a jamais été documenté. L'objectif de ce mot clé
   était de pouvoir affecter à des mailles des caractéristiques directement
   issues de la macro commande MACR_CARA_POUTRE. Aster se plante quand on essaie
   d'utiliser ce mot-clé, en faisant par exemple :
   CARA_ELE=AFFE_CARA_ELEM(
       MODELE=MODELE,
       POUTRE=(    _F(GROUP_MA = 'SEC_1', CARA_SECT= SECTION, ), ) )
   On supprime donc ce mot-clé. Les valeurs produites par la MACR_CARA_POUTRE et
   contenues dans une table peuvent être introduite directement (via python),
   dans la commande AFFE_CARA_ELEM pour un calcul de type poutre.
   Modifications:
    - suppression dans l'op0019 de l'appel a la routine jssect
    - suppression de la routine fortran jssect
    - suppression dans le catalogue affe_cara_elem.capy du mot clé CARA_SECT
    - Suppression dans le fichier accas.capy de la classe cara_pout
   RESU_FAUX_VERSION_EXPLOITATION    : NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   : NON
   RESTITUTION_VERSION_EXPLOITATION  : OUI
   RESTITUTION_VERSION_DEVELOPPEMENT : OUI
   VALIDATION :
      Passage des cas-tests utilisants AFFE_CARA_ELEM
   IMPACT_DOCUMENTAIRE : NON
   NB_JOURS_TRAV : 0.5



-----------------------------------------------------------------------
--- AUTEUR rezette C.REZETTE   DATE  le 27/01/2005 a 16:00:32

------------------------------------------------------------------------------
CORRECTION AL 2004-451
   POUR_LE_COMPTE_DE : J.PELLET
   INTERET_UTILISATEUR : OUI
   TITRE : LIRE_RESU FORMAT MED
   FONCTIONNALITE
    Possibilité de créer une SD résultat en restreignant la lecture des champs
    à certains instants ou numéros d'ordre.
   RESU_FAUX_VERSION_EXPLOITATION  :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION : zzzz162a + liste de cas-tests contenant la commande LIRE_RESU
    au format MED + liste restreinte
   NB_JOURS_TRAV  : 3.0
   DETAILS :
   La commande LIRE_RESU au format MED faisait l'objet de 2 problèmes:
   1) Les numérotations des PRNO étaient dupliquées à chaque pas de temps ce qui
      générait des bases de taille supérieure à ce qui était prévu.
      Nous avons corrigé ce problème en remplacant dans l'op150 à ligne700:
         GCNCON('_',NPRFCN)
      par
         NPRFCN=RESU
   2) La restriction à certains numéros d'ordre ou d'instants ne fonctionnait pas
      au format MED. En fait, elle n'avait pas été développée pour ce format bien que la
      documention U7.02.01 dise le contraire.
      Nous sommes intervenu dans l'op0150 pour développer cette fonctionnalité.
      Dorénavant les mots clés NUME_ORDRE,INST,LIST_INST,LIST_ORDRE,FREQ,LIST_FREQ
      peuvent etre utilisés.
      Remarque: Seuls les numéros d'ordre demandés sont exploités
               (cf message émis par JEDETC dans le .mess).
   Source modifiée  : op0150.f
   Cas-test modifié : zzzz162a

------------------------------------------------------------------------------
CORRECTION AL 2004-417
   POUR_LE_COMPTE_DE : C.DURAND
   INTERET_UTILISATEUR : OUI
   TITRE : MODI_REPERE / noeuds sur l'axe du repere cylindrique
   FONCTIONNALITE
   RESU_FAUX_VERSION_EXPLOITATION  :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : OUI
     DOC_U: U4.74.01
       EXPL_ : action des mots-cles GROUP_MA,MAILLE,GROUP_NO et NOEUD
               en fonction des types de champs à post-traiter.
   VALIDATION : liste de cas-tests contenant la commande MODI_REPERE
   + liste restreinte
   NB_JOURS_TRAV  : 4.5
   DETAILS :
   Anomalie:
      L'utilisateur souhaite changer son repère cartésien en repère cylindrique.
      Il utilise la commande MODI_REPERE. Or son étude aboutit en ERREUR FATALE
      justifiée par le fait que les noeuds de certaines mailles de son maillage
      se trouvent sur l'axe oz. Donc il restreint son maillage aux mailles ne
      contenant pas de noeuds sur l'axe oz en utilisant les mots-cles GROUP_MA
      et/ou MAILLE de la commande MODI_REPERE .
      Cette restriction n'a eu aucune incidence! l'étude se termine en erreur
      fatale. En fait, les mots-cles GROUP_MA, MAILLE ne filtrent pas bien la géométrie.
      A posteriori, les mots-clés NOEUD et GROUP_NO également!
   Reproduction du problème:
      En l'abscence de fichiers décrivant l'anomalie, nous avons reproduit la situation
      sur le cas-test sslv04a en fabriquant un maillage de quartier de camembert complet
      en plaçant un SEG2 sur l'axe d'axisymétrie.
      Ainsi nous avons pu utiliser les mots-clés GROUP_MA, MAILLE, NOEUD et GROUP_NO pour
      exclure la maille ou les noeuds de l'axe.
   Analyse:
      Nous avons observé que pour les champs aux noeuds (par exemple détermination de
      SIGM_NOEU_DEPL dans le repère cylindrique), l'utilisation des mots-cles MAILLE
      et GROUP_MA sont ignorés par aster. Aster considère la totalite des noeuds du maillage!
   Correction:
      - nous avons exclus l'utilisation des mots-cles NOEUD et GROUP_NO pour les champs aux éléments.
      - nous avons étendu l'action des mots-cles MAILLE et GROUP_MA aux champs aux noeuds.
      - nous avons corrigé une étourderie (remplacement de la variable NBNO par NBNOEU)
   Validation:
      Passage du cas-test sslv04a (maillage, condition aux limites ..) pour reproduire
      le problème de l'utilisateur.
      La validation a consisté à verifié à la main que les mots-clés ci-dessus filtraient bien
      la géomètrie et que le cas-test ne tombait plus en erreur fatale.
   Sources modifiées:
      op0191.f, chrpel.f, chrpno.f


-----------------------------------------------------------------------
--- AUTEUR romeo R.FERNANDES   DATE  le 31/01/2005 a 13:29:05

RESTITUTION HORS AREX
   EL 2004-249 (partielle)
   NB_JOURS_TRAV  : 5.0
   INTERET_UTILISATEUR : OUI
   TITRE  : Nouvelle modelisation THM : Correction uniquement des erreurs

   FONCTIONNALITE
   Corrections des erreurs constatees suivantes :
   ----------------------------------------------
   - Dans le cas avec AIR DISSOUS (modelisation LIQU_AD_GAZ_VAPE) le calcul
     de l'enthalpie etait faux (la doc R etant correcte).
     => Les resultats pourraient donc etre faux en presence de thermique.
     Cependant Pas de resultats NOOK sur les cas-tests de la base aster,
     Mais pas de reference sur le calcul des enthalpies.

   - Dans le cas avec AIR DISSOUS (modelisation LIQU_AD_GAZ_VAPE) le calcul
     de la derivee de l'apport massique d'air dissous par rapport a la
     temperature etait faux dans les cas non-satures.
     => Erreur possible dans le calcul de l'operateur tangent dans les cas
     non satures : Pas de consequence sur les resultats.

   - Dans le cas avec vapeur (modelisation LIQU_VAPE) le calcul de la porosite
     etait faux.
     => Les resultats pourraient donc etre faux en presence de mecanique.
     Pas de cas-tests avec la modelisation LIQU_VAPE et en presence de mecanique
     disponible sur la base aster.

   - Erreur dans la definition de la temperature finale pour la recuperation
     des donnees materiaux dans le cas mecanique pour toutes les lois de
     couplages.
     => Les donnees materiaux sont fausses pour la partie mecanique des lors
     qu'elles dependent de la thermique. Il n'y a pas de tests dont les donnees
     materiaux mecanique dependent de la temperature dans la base aster. Cas
     non testes aujourd'hui.

   DETAIL
   modification des routines : calcme, hmliga, hmliva, hmlvag, hmlvga

   VALIDATION
   Tests de la base aster.

   RESU_FAUX_VERSION_EXPLOITATION    :   OUI DEPUIS : 7.0.0
   RESU_FAUX_VERSION_DEVELOPPEMENT   :   OUI DEPUIS : 8.0.0
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI

   IMPACT_DOCUMENTAIRE : NON


-----------------------------------------------------------------------
--- AUTEUR vabhhts J.PELLET   DATE  le 01/02/2005 a 13:27:36

------------------------------------------------------------------------------
RESTITUTION HORS AREX   (H2)
   NB_JOURS_TRAV : 0
   INTERET_UTILISATEUR : NON

   FONCTIONNALITE
   Suite à la relecture par Nicolas Tadieu de la doc U de MACRO_MATR_ASSE,
   on améliore un peu son catalogue :
     - INST : O. par défaut
     - SIEF_ELGA obligatoire si RIGI_GEOM
     - THETA obligatoire si RIGI_MECA_LAGR

   RESU_FAUX_VERSION_EXPLOITATION   :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT  :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
   DETAILS
   Suite à cette amélioration du catalogue, on doit supprimer 3 petits blocs
   de programme dans macro_matr_asse_ops.py (vérifications devenues inutiles).
------------------------------------------------------------------------------
RESTITUTION HORS AREX   (H5)
   NB_JOURS_TRAV : 0.5
   INTERET_UTILISATEUR : NON

   FONCTIONNALITE
   Suite à la relecture de la doc de CALC_MATR_ELEM, je précise un peu le
   catalogue de la commande pour que le mot clé charge accepte une liste
   de charge (ou une seule charge) selon l'option calculée.

   RESU_FAUX_VERSION_EXPLOITATION   :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT  :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
   DETAILS
   Finalement, je suis obligé d'assouplir quand même un peu le catalogue de CALC_MATR_ELEM :
   Pour les options MASS_MECA* et MASS_FLUI_STRU j'accepte une liste de charges alors
   que la seule charge thermique est nécessaire.
   Si on ne fait pas cela, on ne peut pas faire :
   MACRO_MATR_ASSE(
      CHARGE=(chbloc,chtemp),
      NUME_DDL=CO("NDDL"),
      MATR_ASSE=(
               _F(  MATRICE = CO("MATK"), OPTION = 'RIGI_MECA'),
               _F(  MATRICE = CO("MATM"), OPTION = 'MASS_MECA'),
                )
   car la macro MACRO_MATR_ASSE n'a aucun  moyen de distinguer dans la liste des chages celle
   qui contient le chargement thermique.
   De même, pour les options ne nécessitant pas de charge, j'ajoute le mot clé CHARGE
   à cause de MACRO_MATR_ASSE.


========================================================================
=== Recapitulation des operations demandees pour toutes les restitutions
========================================================================


    TYPE Action    unite                      user      Auteur         nblg  ajout suppr.

       C MODIF supervis/astermodule           durand C.DURAND          3747      1     35
 CASTEST AJOUT miss06a                       acbhhcd G.DEVESA           557    557      0
 CASTEST AJOUT sensm14a                      f6bhhbo P.DEBONNIERES      644    644      0
 CASTEST MODIF ascou19a                     lebouvie F.LEBOUVIER        400      3      3
 CASTEST MODIF aspic08a                     lebouvie F.LEBOUVIER        154      5      7
 CASTEST MODIF efica01a                       durand C.DURAND           275      2      2
 CASTEST MODIF hsnv125d                       durand C.DURAND           486      1     15
 CASTEST MODIF hsnv125g                       durand C.DURAND           494      1     14
 CASTEST MODIF sdnl120a                       durand C.DURAND           528      1      1
 CASTEST MODIF sensd06a                       durand C.DURAND           435      1      8
 CASTEST MODIF ssla103d                       godard V.GODARD           206      3      5
 CASTEST MODIF sslv135a                      f1bhhaj J.ANGLES          1286      6      1
 CASTEST MODIF sslv135b                      f1bhhaj J.ANGLES          1266      6      1
 CASTEST MODIF sslv135c                      f1bhhaj J.ANGLES          1184      9      1
 CASTEST MODIF sslv135d                      f1bhhaj J.ANGLES           780      9      1
 CASTEST MODIF ssnl111a                       durand C.DURAND           552      1     16
 CASTEST MODIF ssnl111b                       durand C.DURAND           573      1     16
 CASTEST MODIF ssnp124c                       godard V.GODARD           294      2      8
 CASTEST MODIF ssnp124d                       godard V.GODARD           294      2      8
 CASTEST MODIF ssnp127a                       godard V.GODARD           151      2      5
 CASTEST MODIF ssnp127b                       godard V.GODARD           151      2      5
 CASTEST MODIF ssnv157a                       godard V.GODARD           135      2      5
 CASTEST MODIF ssnv157b                       godard V.GODARD           135      3      6
 CASTEST MODIF ssnv157c                       godard V.GODARD           135      3      5
 CASTEST MODIF ssnv157d                       godard V.GODARD           136      3      5
 CASTEST MODIF ssnv157e                       godard V.GODARD           139      3      5
 CASTEST MODIF ssnv157f                       godard V.GODARD           142      5      5
 CASTEST MODIF ssnv157g                       godard V.GODARD           139      4      5
 CASTEST MODIF ssnv158a                       durand C.DURAND           430      1     13
 CASTEST MODIF ssnv158b                       durand C.DURAND           428      1     13
 CASTEST MODIF ssnv158c                       durand C.DURAND           412      1     13
 CASTEST MODIF ssnv175a                       godard V.GODARD           146      4      5
 CASTEST MODIF ssnv503b                      cibhhpd L.SALMONA          425      3      2
 CASTEST MODIF zzzz162a                      rezette C.REZETTE          397    114      1
 CASTEST MODIF zzzz180a                       durand C.DURAND           888     37     61
CATALOGU MODIF compelem/phenomene_modelisation__     godard V.GODARD           767      6      1
CATALOGU MODIF typelem/gener_mecpg2           godard V.GODARD           361      2      2
CATALOPY MODIF commande/affe_cara_elem      lebouvie F.LEBOUVIER        425      1      2
CATALOPY MODIF commande/calc_fatigue         f1bhhaj J.ANGLES            79      2      1
CATALOPY MODIF commande/calc_matr_elem       vabhhts J.PELLET           180     27     17
CATALOPY MODIF commande/macro_matr_asse      vabhhts J.PELLET            94     22      5
CATALOPY MODIF entete/accas                 lebouvie F.LEBOUVIER        651      1      2
    DATG MODIF ascouf_fiss_v4.datg         E.GALENNE 12839              124     23      0
 FORTRAN MODIF algeline/fluimp                durand C.DURAND           463      4      3
 FORTRAN MODIF algorith/calcme                 romeo R.FERNANDES        861     17     17
 FORTRAN MODIF algorith/cfaca2               cibhhpd L.SALMONA          514     75      9
 FORTRAN MODIF algorith/chrpel               rezette C.REZETTE          548     37      4
 FORTRAN MODIF algorith/chrpno               rezette C.REZETTE          499     15     10
 FORTRAN MODIF algorith/crsdco               cibhhpd L.SALMONA          601      8      6
 FORTRAN MODIF algorith/elpiv1               cibhhpd L.SALMONA          172     26      8
 FORTRAN MODIF algorith/elpiv2               cibhhpd L.SALMONA          420     72     10
 FORTRAN MODIF algorith/hmliga                 romeo R.FERNANDES        455      4      4
 FORTRAN MODIF algorith/hmliva                 romeo R.FERNANDES        523      2      2
 FORTRAN MODIF algorith/hmlvag                 romeo R.FERNANDES        533      4      4
 FORTRAN MODIF algorith/hmlvga                 romeo R.FERNANDES        589      4      5
 FORTRAN MODIF algorith/nmconv              lebouvie F.LEBOUVIER        419      2      2
 FORTRAN MODIF algorith/nsdrpr               f6bhhbo P.DEBONNIERES      593     29      3
 FORTRAN MODIF algorith/op0191               rezette C.REZETTE          143      3      2
 FORTRAN MODIF elements/te0375                durand C.DURAND           819      2      8
 FORTRAN MODIF modelisa/op0019              lebouvie F.LEBOUVIER        518      1      6
 FORTRAN MODIF prepost/avcrit                f1bhhaj J.ANGLES           125     36     28
 FORTRAN MODIF prepost/avgrma                f1bhhaj J.ANGLES           833    186    186
 FORTRAN MODIF prepost/avgrno                f1bhhaj J.ANGLES           842     10      1
 FORTRAN MODIF prepost/deltau                f1bhhaj J.ANGLES           816    133    129
 FORTRAN MODIF prepost/dtauno                f1bhhaj J.ANGLES           840     14      5
 FORTRAN MODIF prepost/proax0                f1bhhaj J.ANGLES            85      5      5
 FORTRAN MODIF prepost/projax                f1bhhaj J.ANGLES           334     27     20
 FORTRAN MODIF prepost/raxini                f1bhhaj J.ANGLES           145      8      5
 FORTRAN MODIF prepost/rnomat                f1bhhaj J.ANGLES           204     35     34
 FORTRAN MODIF utilitai/op0150               rezette C.REZETTE          873     58      9
 FORTRAN SUPPR modelisa/jssect              lebouvie F.LEBOUVIER         99      0     99
  PYTHON MODIF Cata/ops                       durand C.DURAND           434      3      1
  PYTHON MODIF Macro/macr_fiab_impr_ops       durand C.DURAND           110      3      3
  PYTHON MODIF Macro/macro_matr_asse_ops     vabhhts J.PELLET           154     13     19


        nb unites  nb lignes  ajouts  suppr.  difference
 AJOUT :    2        1201      1201             +1201
 MODIF :   71       34489      1162     874      +288
 SUPPR :    1          99                99       -99
 DEPLA :    0           0 
         ----      ------     ------  ------   ------
 TOTAL :   74       35789      2363     973     +1390 
