

-----------------------------------------------------------------------
--- AUTEUR boiteau O.BOITEAU   DATE  le 24/01/2005 a 10:23:50

------------------------------------------------------------------------------
REALISATION EL 2005-016
   INTERET_UTILISATEUR : OUI
   TITRE
   ------
   Amelioration des performances CPU/memoire de FETI (part II)

   FONCTIONNALITE  SOLVEUR='FETI' dans MECA_STATIQUE
   --------------
   Point 1: Apres une etude de profiling (merci gprof et MA) sur un cube en
   elasticite lineaire (90 000 DDLs)

 taille A         1,7 Millions     1,9                     2,04
 taille A-1      70,5              21,2                     13
 taille GI        x                 1,4                     12,6

 il s'avere que si l'unite est la phase de calcul des matrices elementaires
  (1 proche de 6 Goperations) et si on ne tient pas compte des modifs
  recentes de CORDDL (appelee dans ASSMAM cf. AL)

             MULT_FRONT        FETI_16 SD       FETI_64_SD AVANT/ APRES
 ------------------------------------------------------------------------
 CALCUL          1                 1                      1 /  idem

 ASSMAM          0.4               0.4                0.45  / idem
 + ASSVEC

 NUMERO          0.8               1.25                2.85  / idem
   EXLIM1        x                 0.5                 1.15  / idem
   NUEFFE        0.05              0.35                0.45  / idem
   PROFMA        0.75              0.4                 1.25  / idem

 PRERES         1.65               1.1                 0.7   / idem

 RESOUD         0.1                3.15                6.25  /  4.4
------------------------------------------------------------------------
 TOTAL          4.3                7.5                 12.2  /  8.85

 DONT
 17 JEVEUX      0.15               0.8                 4.1   /  1.6
 + DISMOI

 Meme si il faut diviser, a terme, ces temps sequentiel par un nombre
 de processeurs pour tenir compte du parallelisme, il s'avere que
 beaucoup d'operations sont gaspillees dans
   * l'appel a EXLIM1 (a 95% JEVEUO, JELIRA, JECROC et JECREA) propre
     a la creation de LIGREL et qui est proportionnelle au nombre de
     mailles plus qu'au nombre de sous-domaines.
   * les appels JEVEUX de nombreuses routines FETI, dont FETREX,
   * les appels JEVEUX de la mult_front, de la factorisation symbolique
   des descente-remontées qui font que le cout est, en DD, peu indexe
    par les traitements numeriques

 On a optimise le point 2 et sous-traite l'optimisation du point 1 a JP
 car ce chantier interesse d'autres aspects du code (CALC_ELEM).
 D'ou des gains en temps CPU+SYS de quelques dizaines de % au prix d'un
 peu de memoire supplementaire.

   Cube en elasticite lineaire (90 000 DDLs)
        MULT_FRONT   FETI 16SD AVANT/APRES  FETI 64SD AVANT/APRES
 ------------------------------------------------------------------------
 CPU (S)       120     100/90               380/250     SI GI STOCKE
                                            540/280     SINON
 MEMOIRE (Mo)  400     70/70                 60/70      SI GI STOCKE
                                            256/300     SINON

  Details: on a limite les JEMARQ/JEDEMA au strict minimum, fait des JELIBE
  sur uniquement les gros objets et deporte les appels JEVEUO au dessus des
  boucles sur les sous-domaines et les iterations FETI.
  + quelques optimisations sur les appels a MRCONL, ASSERT...

   Point 2:
   Maintenance preventive: simplification des affichages qui deviennent trop
   verbeux avec plusieurs dizaines de SD et creation des routines suivantes
   permettant une meilleur lisibilite de ALFETI
    * FETARP gere le test de definie-positivite de P*FI*P
    * FETMON gere le monitoring principal de ALFETI

   RESU_FAUX_VERSION_EXPLOITATION  :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   NON
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON

   VALIDATION
   -----------
     Diverses combinaisons en 2D/3D en variant configurations de blocage et nbre
     de sous-domaines + cas_test FETI de la base.

   DETAILS
   --------
   routines modifiees <M>, nouvelles <N>
   <M> alfeti,assmam,assvec,creso1,exlim1,exlim2,fetccn,fetcrl,fetfac,fetfiv,fetggt,
       feting,fetinl,fetprc,fetprj,fetreo,fetrex,fetrin,fetsca,numero,vtcmbl,vtcre1,
       vtdefs,meca_statique.capy.
   <N> fetmon,fetarp.

   NB_JOURS_TRAV  : 5


-----------------------------------------------------------------------
--- AUTEUR cibhhlv L.VIVAN   DATE  le 25/01/2005 a 15:15:34

--------------------------------------------------------------------------
RESTITUTION HORS AREX
   SUITE EL 2004-266
   NB_JOURS_TRAV  : 0.5
   POUR_LE_COMPTE_DE   : J.PELLET
   INTERET_UTILISATEUR : NON
   TITRE : usage de JEVEUS et JEVEUT
   FONCTIONNALITE
     suite à des dégradations des performances dues à un JEVEUO mal placé,
     passage de 2 arguments à CORDDL et ENTCOD :
       - le LONCUM de '&CATA.TE.MODELOC'
       - l'adresse du premier vecteur de '&CATA.TE.MODELOC'
     Les instructions suivantes :
        CALL JEVEUO(JEXATR('&CATA.TE.MODELOC','LONCUM'),'L',LCMODL)
        CALL JEVEUO(JEXNUM('&CATA.TE.MODELOC',1),'L',ADMODL)
     sont faites dans les routines de plus haut niveau.
   RESU_FAUX_VERSION_EXPLOITATION    : NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   : NON
   RESTITUTION_VERSION_EXPLOITATION  : NON
   RESTITUTION_VERSION_DEVELOPPEMENT : OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
     passage de la liste complète
     passage de la liste validation


-----------------------------------------------------------------------
--- AUTEUR durand C.DURAND   DATE  le 24/01/2005 a 18:10:23

------------------------------------------------------------------------------
CLASSEMENT SANS SUITE  ED 2004-011

   INTERET_UTILISATEUR : OUI
   TITRE               : ANGL_VRIL pour les poutres
   FONCTIONNALITE

   Il y a deux façons d'indiquer l'angle de rotation d'une poutre autour
   de son axe (noté x2 §10.4) dans la commande AFFE_CARA_ELEM :
      * La 1ère que comprend bien l'utilisateur VECT_Y
      * La 2nd en utilisant l'opérande ANGL_VRIL
   Ces 2 méthodes sont complémentaires, à l'utilisateur de choisir la méthode
   qu'il maîtrise le mieux.

   Pour répondre à la question de Patrick (ANGL_VRIL=0.0), c'est à dire pas de
   rotation de la poutre autour de son axe, cela correspond à donner un
   VECT_Y = ( y1 , y2 , 0.0 )
   Dans tous les cas, ce vecteur doit être non colinéaire à x2, car sinon sa
   projection est nulle dans le plan orthogonal à l'axe x2.

   Cas d'une poutre dont l'axe local x2 n'est pas suivant l'axe global Z
   ---------------------------------------------------------------------
   L'axe y1 est toujours l'intersection du plan orthogonal à l'axe x2
   (figure 10.4-d) et du plan Z(global)=cte passant par le point P.
   Dans le cas d'une rotation nulle les axes y1 et y2 sont confondus.
   Il faut donc que le vecteur VECT_Y soit // au plan (OXY) donc
   VECT_Y = ( y1 , y2 , 0.0 )

   Cas d'une poutre dont l'axe local x2 est suivant l'axe global Z
   ---------------------------------------------------------------
   L'axe y1 est toujours l'axe global Y. Dans ce cas on doit donner
   VECT_Y = ( 0.0 , 1.0 , 0.0) pour être équivalent à ANGL_VRIL=0.0.
   VECT_Y est donc toujours // au plan (OXY)


   RESU_FAUX_VERSION_EXPLOITATION    :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   NON
   RESTITUTION_VERSION_DEVELOPPEMENT :   NON

   IMPACT_DOCUMENTAIRE : NON
   NB_JOURS_TRAV  : 0.1

------------------------------------------------------------------------------
CLASSEMENT SANS SUITE  ED 2004-005

   INTERET_UTILISATEUR : OUI
   TITRE               : Convention de signe poutres
   FONCTIONNALITE

   L'utilisateur fait 2 calculs avec le même chargement, mais change le sens d'orientation
   des mailles de certain des éléments de poutres.
   Le cas test est construit sur la base de ssll101b

   Le Code_Aster fait bien ce qui est écrit dans la doc de CALC_ELEM
   Extrait de la DOC U de CALC_ELEM : EFGE_ELNO_CART
   Changement de repère des efforts généralisés par élément aux noeuds du repère local
   au repère global de description du maillage ; cette option consiste à convertir un
   champ d'efforts généralisés du repère d'inertie principal d'un élément de poutre,
   pour les exprimer dans le repère global.

   Entre les 2 calculs l'orientation des mailles changent, donc le repère local, il est
   donc normal que la projection des efforts locaux dans le repère global soit différent.

   =====================================================================================
   Cas Initial
   -----------
   La maille E1 (N100-N200) est verticale     : (même convention que SYSPIPE VIII.7.2.b)
      son axe x local est // et de même sens que l'axe Z global
      son axe y local est // et de même sens que l'axe Y global
      son axe z local est // et de sens oposé à  l'axe X global
   On doit donc avoir N= FZ, Vy= FY, Vz= -FX, MT= MZ, MFy= MY, MFz= -MX au noeud N100
   C'est bien ce qu'Aster donne (Cf. résultats ci-dessous)

   La maille E1 (N1400-N1500) est horizontale : (même convention que SYSPIPE VIII.7.2.a)
      son axe x local est // et de même sens que l'axe X global
      son axe y local est // et de même sens que l'axe Y global
      son axe z local est // et de même sens que l'axe Z global
   On doit donc avoir N= FX, Vy= FY, Vz= FZ, MT= MX, MFy= MY, MFz= MZ au noeud N1500
   C'est bien ce qu'Aster donne (Cf. résultats ci-dessous)

   Efforts aux noeuds dans le repère local des éléments 'EFGE_ELNO_DEPL'
     N            VY           VZ           MT           MFY          MFZ          NOEUD
    -7.43054E+03 -7.61346E+03  2.79096E+03  1.61512E+03 -6.19262E+03 -1.47117E+04 N100
    -2.79096E+03 -7.61346E+03 -7.43054E+03  7.05196E+03 -1.04578E+04  8.86236E+03 N1500

   Efforts aux noeuds dans le repère global             'EFGE_ELNO_CART',
     FX           FY           FZ           MX           MY           MZ           NOEUD
    -2.79096E+03 -7.61346E+03 -7.43054E+03  1.47117E+04 -6.19262E+03  1.61512E+03 N100
    -2.79096E+03 -7.61346E+03 -7.43054E+03  7.05196E+03 -1.04578E+04  8.86236E+03 N1500

   =====================================================================================
   Cas avec des mailles inversées
   ------------------------------
   La maille E1 (N200-N100) est verticale     : (même convention que SYSPIPE VIII.7.2.b)
      son axe x local est // et de sens oposé à  l'axe Z global
      son axe y local est // et de même sens que l'axe Y global
      son axe z local est // et de même sens que l'axe X global
   On doit donc avoir N= -FZ, Vy= FY, Vz= FX, MT= -MZ, MFy= MY, MFz= MX au noeud N100
   C'est bien ce qu'Aster donne (Cf. résultats ci-dessous)

   La maille E1 (N1500-N1400) est horizontale : (même convention que SYSPIPE VIII.7.2.a)
      son axe x local est // et de sens oposé à  l'axe X global
      son axe y local est // et de sens oposé à  l'axe Y global
      son axe z local est // et de même sens que l'axe Z global
   On doit donc avoir N= -FX, Vy= -FY, Vz= FZ, MT= -MX, MFy= -MY, MFz= MZ au noeud N1500
   C'est bien ce qu'Aster donne (Cf. résultats ci-dessous)

   Efforts aux noeuds dans le repère local des éléments 'EFGE_ELNO_DEPL'
     N            VY           VZ           MT           MFY          MFZ          NOEUD
    -7.43054E+03  7.61346E+03  2.79096E+03  1.61512E+03  6.19262E+03 -1.47117E+04 N100
    -2.79096E+03 -7.61346E+03  7.43054E+03  7.05196E+03 -1.04578E+04 -8.86236E+03 N1500

   Efforts aux noeuds dans le repère global             'EFGE_ELNO_CART',
     FX           FY           FZ           MX           MY           MZ           NOEUD
     2.79096E+03  7.61346E+03  7.43054E+03 -1.47117E+04  6.19262E+03 -1.61512E+03 N100
     2.79096E+03  7.61346E+03  7.43054E+03 -7.05196E+03  1.04578E+04 -8.86236E+03 N1500

   =====================================================================================

   Si l'utilisateur veut calculer les forces ou réactions nodales, il faut utiliser les
   options 'FORC_NODA' ou 'REAC_NODA'. Ce résulat est exprimé dans le repère global et
   est indépendant du sens de parcours des mailles.
   Forces Nodales dans les 2 cas    : 'FORC_NODA'
     DX           DY           DZ           DRX          DRY          DRZ          NOEUD
     2.79096E+03  7.61346E+03  7.43054E+03 -1.47117E+04  6.19262E+03 -1.61512E+03 N100
    -2.79096E+03 -7.61346E+03 -7.43054E+03  7.05196E+03 -1.04578E+04  8.86236E+03 N1500

   Réactions Nodales dans les 2 cas : 'REAC_NODA'
     DX           DY           DZ           DRX          DRY          DRZ          NOEUD
     2.79096E+03  7.61346E+03  7.43054E+03 -1.47117E+04  6.19262E+03 -1.61512E+03 N100
    -2.79096E+03 -7.61346E+03 -7.43054E+03  7.05196E+03 -1.04578E+04  8.86236E+03 N1500


   RESU_FAUX_VERSION_EXPLOITATION    :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   NON
   RESTITUTION_VERSION_DEVELOPPEMENT :   NON

   IMPACT_DOCUMENTAIRE : NON
   NB_JOURS_TRAV  : 0.5


------------------------------------------------------------------------------
CORRECTION AL 2005-023
   INTERET_UTILISATEUR : NON
   TITRE suppression variable 'blan' dans astermodule.c, inutilisée.
   FONCTIONNALITE superviseur
   RESU_FAUX_VERSION_EXPLOITATION   :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT  :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
   néant
   DETAILS
   NB_JOURS_TRAV  : 0.

------------------------------------------------------------------------------
CORRECTION AL 2005-022
   INTERET_UTILISATEUR : NON
   TITRE cas test efica01a en INTRANET
   FONCTIONNALITE superviseur
   RESU_FAUX_VERSION_EXPLOITATION   :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT  :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
   néant
   DETAILS
   NB_JOURS_TRAV  : 0.

------------------------------------------------------------------------------
CORRECTION AL 2005-021
   INTERET_UTILISATEUR : NON
   TITRE impressions dans calc_flui_stru
   FONCTIONNALITE superviseur
   RESU_FAUX_VERSION_EXPLOITATION   :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT  :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
   cas test sdnl112c
   DETAILS
   modification de l'impression dans la routine fluimp.f.
   A la demande d'André Adobes, je fais écrire numéro de mode ET numéro
   d'ordre :

   MODE : NUMERO D'ORDRE: 7 / NUME_MODE: 21 / FREQ:  6.15376E+01

   au lieu de :

   MODE N   7     FREQUENCE =  6.153761D+01

   NB_JOURS_TRAV  : 0.
------------------------------------------------------------------------------
CORRECTION AL 2005-012
   INTERET_UTILISATEUR : NON
   TITRE scories impr_courbe dans les tests
   FONCTIONNALITE cas tests
   RESU_FAUX_VERSION_EXPLOITATION   :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT  :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
   cas tests concernés
   DETAILS
   Il subsiste des appels (en commentaire ou non) à IMPR_COURBE dans les
   fichiers de commandes des tests en version NEW8, alors que cette commande
   a été résorbée en 7.3.29
   NB_JOURS_TRAV  : 0.5
------------------------------------------------------------------------------
CLASSEMENT SANS SUITE  AL 2004-456
   INTERET_UTILISATEUR : NON
   TITRE depreciation warning
   FONCTIONNALITE superviseur
   RESU_FAUX_VERSION_EXPLOITATION   :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT  :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : OUI
     DOC_U  : U1.03.01
     EXPL_  : mention de la ligne -*- coding
   DETAILS
   A propos des warning python créés par les caractères français accentués,
   il faut placer en tête du fichier de module à importer :
        # -*- coding: iso-8859-1 -*-
   Comme c'est le cas pour tous les fichiers python d'Aster

   On ne peut pas passer outre le warning comme le suggérait JF Rit dans la
   fiche car cela deviendra une erreur fatale avec python2.4.
   Autant donc commencer à prendre les bonnes habitudes.
   NB_JOURS_TRAV  : 0.
------------------------------------------------------------------------------
CORRECTION AL 2005-007
   INTERET_UTILISATEUR : NON
   TITRE impressions parasites en poursuite, apres un include_materiau
   FONCTIONNALITE include_materiau
   RESU_FAUX_VERSION_EXPLOITATION   :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT  :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
   étude jointe
   DETAILS
   Les noms préfixés ET NON PREFIXES des concepts d'un include_materiau
   figurent dans le contexte global. Seuls les noms préfixés du nom de matériau
   ont un sens. Ca pose un pb à la relecture de la base (et depicklage)
   en poursuite.

   Dans la méthode Cata.ops.INCLUDE_MATERIAU, après la création du g_context,
   on le purge des références incohérentes avec le nom du concept pointé :

    self.make_contexte(f,self.text)
    for k,v in self.g_context.items() :
        if isinstance(v,ASSD) and k!=v.nom : del self.g_context[k]

   Ainsi, à la relecture et recréation du contexte lu dans le fichier pickle,
   pas de risque de message parasite sur nom incohérent.
   NB_JOURS_TRAV  : 0.5
------------------------------------------------------------------------------
REALISATION EL 2004-258
   NB_JOURS_TRAV  : 0.5
   INTERET_UTILISATEUR : NON
   TITRE  :  levée d'exception hors commande
   FONCTIONNALITE : superviseur
   DETAIL :
   Jean Luc essayait de trapper une exception qui aurait été émise par
   extr_comp :

   try:
      SIGY  = CONTR.EXTR_COMP('SAYY',[],0)
   except:
      SIGY  = CONTR.EXTR_COMP('SIYY',[],0)

   Plusieurs pbs : ca ne pouvait pas marcher de toute facon car
   EXTR_COMP (via prcoch.f) ne levait pas d'exception mais
   appellait UTMESS('F').

   Une fois activé l'appel à UTEXCP dans prcoch.f, on plantait car les
   routines UT* appellent systématiquement GETRES qui permet de fournir
   le nom de la commande en cours. Or, pour ces méthodes hors opxxxx,
   pas de commande, GETRES était bridée en conséquence.

   Je dévérouille GETRES pour renvoyer une chaine blanche en cas de non
   existence de l'étape courante.

   Pour finir, il a fallu shunter l'appel à EXSTAT.f dans UTCOMM.f, car
   UTTCPU n'a alors pas de sens puisqu'on est hors commande.

   RESU_FAUX_VERSION_EXPLOITATION    :  NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
   RESTITUTION_VERSION_EXPLOITATION  :  NON
   RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
   VALIDATION : étude fournie
   IMPACT_DOCUMENTAIRE : NON
-----------------------------------------------------------------------
REALISATION EL 2004-254
   NB_JOURS_TRAV  : 1.
   INTERET_UTILISATEUR : NON
   TITRE  :  suppression option sour_elga_elec de calc_cham_elem
   FONCTIONNALITE : calc_cham_elem
   DETAIL :
   On remplace par la construction d'un resu à partir des champs, si
   commandes éclatées. Puis appel à CALC_ELEM pour calculer l'option.

   Suppression de SOUR_ELGA_ELEC dans le catalogue de CALC_CHAM_ELEM

   RESU_FAUX_VERSION_EXPLOITATION    :  NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
   RESTITUTION_VERSION_EXPLOITATION  :  NON
   RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
   VALIDATION : ttna200a ttnp200a tpll101a
   IMPACT_DOCUMENTAIRE : OUI
     DOC_U :  U4.81.03
     EXPL_ : suppression option SOUR_ELGA_ELEC
-----------------------------------------------------------------------
CORRECTION AL 2005-010

INTERET_UTILISATEUR : OUI

TITRE : MACR_FIAB_IMPR

FONCTIONNALITE : Le couplage avec MEFISTO pour la mécanique fiabiliste
plante quand les gradients sont tous calculés par différences finies.

RESU_FAUX_VERSION_EXPLOITATION: NON
RESU_FAUX_VERSION_DEVELOPPEMENT: NON
RESTITUTION_VERSION_EXPLOITATION: OUI
RESTITUTION_VERSION_DEVELOPPEMENT: OUI

IMPACT_DOCUMENTAIRE:  NON
VALIDATION :
DETAILS :
Dans macr_fiab_impr_ops, programme python qui pilote la macro
MACR_FIAB_IMPR, on imprime les gradients calculés par Code_Aster.
Pour cela, on fait la boucle "for val in GRADIENTS :", la variable
GRADIENTS étant un mot-clé facteur. Quand aucun gradient n'a été calculé
par un calcul de sensibilité, la variable GRADIENTS vaut None. Et
l'instruction "for val in GRADIENTS :" ne marche plus ! Je corrige en
filtrant ces impressions sur la valeur None de la variable GRADIENTS.

NB_JOURS_TRAV : 0.5
-----------------------------------------------------------------------


-----------------------------------------------------------------------
--- AUTEUR lebouvie F.LEBOUVIER   DATE  le 24/01/2005 a 17:22:09

-------------------------------------------------------------------------------
CORRECTION AL 2005-011
   POUR LE COMPTE DE : J. PELLET
   INTERET_UTILISATEUR : NON
   TITRE : MECA_STATIQUE : mots clés nume_couche, nive_couche, angle,
           plan à supprimer
   FONCTIONNALITE :
   DETAIL :
   La seule option utilisée dans l'opérateur MECA_STATIQUE est l'option
   SIEF_ELGA_DEPL. Cette option n'utilise pas les mots clés NUME_COUCHE,
   NIVE_COUCHE, ANGLE et PLAN on les supprime donc de MECA_STATIQUE.
   Modifications effectuées
     - Catalogue :
        Suppression dans le meca_statique.capy des mots clés nume_couche,
        nive_couche, angle, plan
     - Fortran :
        Suppression de l'appel à mechnc dans les routines op0046, meacmv et
        mestat.
        Suppression de la variable CHNUMC des routines op0046, meacmv et
        mestat.
     - Cas-tests:
       18 Cas-tests ont été modifiés:
        hpla100a, hpla100b, hpla100c, hpla100d, hpla100e
        hpla100f, hpla100g, hpla100h, hpla100i, hpla100j
        ssls117c, ssls117d, ssls120a, ssls120b
        ssls120c, ssls120d, sslx100b, sslx100d
  RESU_FAUX_VERSION_EXPLOITATION : NON
  RESU_FAUX_VERSION_DEVELOPPEMENT : NON
  RESTITUTION_VERSION_EXPLOITATION : OUI
  RESTITUTION_VERSION_DEVELOPPEMENT : OUI
  VALIDATION : Passage des cas-tests utilisants MECA_STATIQUE
  IMPACT_DOCUMENTAIRE : OUI
      DOC_U : U4.51.01 MECA_STATIQUE
          EXPL_  : - supprimer les mots clés NUME_COUCHE, NIVE_COUCHE, ANGLE,
                     et PLAN
  NB_JOURS_TRAV : 1.5

-------------------------------------------------------------------------------
REALISATION EL 2005-007
   POUR LE COMPTE DE : J.PELLET
   INTERET_UTILISATEUR : NON
   TITRE : CALC_CHAR_CINE accepte plusieurs charges cinématiques
   FONCTIONNALITE :
   DETAIL :
   a) CALC_CHAR_CINE
     but: permettre d'affecter plusieurs charges cinématiques dans l'opérateur
          CALC_CHAR_CINE:
     on remplace dans le catalogue de la commande calc_char_cine.capy la ligne :
        CHAR_CINE =SIMP(statut='o',typ=(char_cine_meca,char_cine_ther,
                        char_cine_acou )),
     par :
        CHAR_CINE =SIMP(statut='o',typ=(char_cine_meca,char_cine_ther,
                        char_cine_acou ),validators=NoRepeat(),max='**' ),
     Le cas-test tpls101a est modifié pour tester cette évolution.
   b) AFFE_CHAR_CINE
     but : déterminer le comportement d'Aster quand on impose un déplacement sur
           un noeud deux fois (surcharge).
     - Cas-test: il s'agit d'un exemple 2D (plaque 1x0.5) modélisée en C_PLAN.
       Le coté gauche est encastré (AFFE_CHAR_MECA) et les déplacements sont
       imposés non nuls sur le coté droit. On "surcharge" les noeuds N27 et N28.
     - Vérifications effectuées: 3 tests ont été réalisés:
        * Test 1:  1  AFFE_CHAR_CINE (coté droit)
            COND_1=AFFE_CHAR_CINE(MODELE=MOD,MECA_IMPO=(
                      _F(NOEUD=('N3','N24','N25','N26','N27','N28',),DX=2.),
                      _F(NOEUD=('N27','N28','N29','N30','N31','N4'),DX=6.),),);
        * Test 2:  2  AFFE_CHAR_CINE (coté droit)
            COND_21=AFFE_CHAR_CINE(MODELE=MOD,MECA_IMPO=(
                      _F(NOEUD=('N3','N24','N25','N26','N27','N28',),DX=2.),),);
            COND_22=AFFE_CHAR_CINE(MODELE=MOD,MECA_IMPO=(
                      _F(NOEUD=('N27','N28','N29','N30','N31','N4'),DX=6.),),);
        * Test 3:  1  AFFE_CHAR_CINE et 1 AFFE_CHAR_MECA(coté droit)
            COND_31=AFFE_CHAR_CINE(MODELE=MOD,MECA_IMPO=(
                      _F(NOEUD=('N3','N24','N25','N26','N27','N28',),DX=2.),),);
            COND_32=AFFE_CHAR_MECA(MODELE=MOD,DDL_IMPO=(
                      _F(NOEUD=('N27','N28','N29','N30','N31','N4'),DX=6.),),);
      - Résultats
           Noeuds   Test 1        Test 2        Test 3
            N3    2.00000E+00   2.00000E+00   2.00000E+00
            N24   2.00000E+00   2.00000E+00   2.00000E+00
            N25   2.00000E+00   2.00000E+00   2.00000E+00
            N26   2.00000E+00   2.00000E+00   2.00000E+00
            N27   6.00000E+00   8.00000E+00   8.00000E+00
            N28   6.00000E+00   8.00000E+00   8.00000E+00
            N29   6.00000E+00   6.00000E+00   6.00000E+00
            N30   6.00000E+00   6.00000E+00   6.00000E+00
            N31   6.00000E+00   6.00000E+00   6.00000E+00
            N4    6.00000E+00   6.00000E+00   6.00000E+00
        - Commentaires
          * Test 1
            . Résultats corrects
            . Aucun message d'alarme n'est affiché pour informer l'utilisateur
              d'une "surcharge" sur les noeuds N27 et N28.
          * Test 2
            . Résultats faux, les déplacements imposés sur les neouds N27 et N28
              sont cumulés.
            . Aucun message d'alarme n'est affiché pour informer l'utilisateur
              d'une "surcharge" sur les noeuds N27 et N28.
          * test 3
            . Résultats faux, les déplacements imposés sur les noeuds N27 et N28
              sont cumulés.
            . Aucun message d'alarme n'est affiché pour informer l'utilisateur
              d'une"surcharge" sur les noeuds N27 et N28.

   RESU_FAUX_VERSION_EXPLOITATION    : OUI  DEPUIS: 6.0.0
   RESU_FAUX_VERSION_DEVELOPPEMENT   : OUI  DEPUIS: 7.0.0
   (voir l'effet des surcharges)
   RESTITUTION_VERSION_EXPLOITATION  : NON
   RESTITUTION_VERSION_DEVELOPPEMENT : OUI
   VALIDATION :
      Passage des cas-tests utilisant l'opérateur CALC_CHAR_CINE
   IMPACT_DOCUMENTAIRE : OUI
      DOC_U : U4.61.03 CALC_CHAR_CINE
          EXPL_  : - préciser que le mot clé CHAR_CINE accepte plusieurs charges
                     cinématiques.
                   - mentionner le comportement de Aster lorsque l'on utilise
                     AFFE_CHAR_CINE avec une "surcharge": ddl imposé deux fois
                     sur un même noeud.
      DOC_U : U4.41.04 AFFE_CHAR_MECA
           EXPL_  : - mentionner le comportement de Aster lorsque l'on combine
                     AFFE_CHAR_CINE et AFFE_CHAR_MECA avec une "surcharge": ddl
                     imposé deux fois sur un même noeud.
   NB_JOURS_TRAV : 1.0

------------------------------------------------------------------------------
REALISATION EL 2004-269
   POUR_LE_COMPTE_DE : J.P.LEFEBVRE
   INTERET_UTILISATEUR : NON
   TITRE : Cas-test tpll01h
   FONCTIONNALITE
   RESU_FAUX_VERSION_EXPLOITATION  :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   NON
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION : cas-tests modifiés
   NB_JOURS_TRAV  : 6.0
   DETAILS :
   L'objectif de cette fiche est:
   -la correction du cas-test tpll01h
   -le passage des cas-tests de thermique avec MACR_INFO_MAIL afin de déceler
   d'éventuels problèmes de maillage et de les corriger.

   1. correction du cas-test tpll01h
   --------------------------------
   Le maillage de ce cas-test est mauvais; globalement, c'est un cube découpé
   en 20 tétraèdres. Pour l'obtenir , la procédure a été la suivante:
   - création de 2 hexaèdres représentant la moitié du cube.
   - découpage de chaque hexaèdre en 5 tétraèdres,
   - duplication et translation de ces 10 tétraèdres,
   - recollage des 2 fois 10 tétraèdres.
   Le problème est que ce recollement est illicite: quand on découpe les
   hexaèdres, il y a création de diagonales altérées d'une face à l'autre.
   Comme on a translaté et non symétrisé, les diagonales ne coincident pas
   sur les faces internes (elles se chevauchent au lieu de se confondre).
   Cette anomalie a été detecté en introduisant la macro MACR_INFO_MAIL
   à la fin du fichier de commandes. Elle permet d'apporter des informations
   sur la qualité du maillage. Elle a permis de mettre en evidence la dissociation
   du maillage en 2 blocs de tetraèdres.
   La correction a consisté de reconstruire à la main les mailles TETRA4 et TRIA3
   du fichier de maillage.

   2. passage des cas-tests de thermique
   -------------------------------------

   2.1.Scripts
   Au préalable, nous avons conçu 2 scripts python permettant:
   - d'insérer la macro MACR_INFO_MAIL à la fin des fichiers
     de commandes de chaque cas-test de thermique (cas-tests t* et h*)
   - de filtrer les fichiers de messages afin de récupérer
     les informations sur la connexité du maillage.

   2.2.Bilan, résultats et analyse suite à l'intoduction de la macro MACR_INFO_MAIL
   Sur les 235 cas-tests:
     109 : se terminent en ERREUR_<F>
     126 : se terminent en ALARME ou OK, dont 7 ont un maillage dissocié:

   2.2.1 <ERREUR_F>
     Les erreurs fatales sont de 2 types:
     - celles survenues lors de l'exécution d'HOMARD(89 cas-tests):
       (Homard est activé par la macro MACR_INFO_MAIL)
        - HOMARD ne sait pas lire toutes les mailles.
        - HOMARD ne gère pas les mailles SEG en doubles:
	 en effet, dans plusieurs cas-tests,des mailles SEG ont été doublées
	 volontairement afin de permettre des conditions d'échanges ou encore
	 d'affecter des conditions de contact maitre/esclave...
     - celles survenues lors d'un IMPR_RESU au format MED:
         Cette commande ne sait pas imprimer les mailles quadratiques
	 TRIA7,QUAD9,PENTA27.
	
   2.2.2 <OK><ALARME>
     Parmis les 7 cas-tests présentant un maillage dissocié:
     - 5 cas-tests dont l'analyse à montré que la présence du maillage dissocié
       est justifiée (ttlp100a, ttlp100b, tpll01i, tpll01j,tplv101a)
     - 2 cas-tests ont nécessité une correction du maillage:
           - tpll01h: voir ci-dessus
	   - hpla310a: Le macro a décelé 2 blocs de faces: le maillage est
             constitué de 2 blocs adjacents de QUAD8 mal connectés
	     (présence de noeuds doubles à l'interface).
              La correction a consisté à modifier le fichier DATG en introduisant
              un ELIM (recollement de noeuds) entre les 2 groupes de QUAD8.
              Le cas-test aboutit désormais en ERREUR_<F> car des mailles SEG3
	      ont été volontairement doublées à l'interface( cf cas 2.2.1).
              Nous restituons donc ce cas-test sans la présence de la macro;
              Le fichier de commandes a été modifié car les identifiants des noeuds
              du maillage ont changés: nous avons donc remis à jour les TEST_RESU
              qui portaient sur le noeud N18 de la maille M2787.


   3. Restitution
   --------------
   cas-test tpll01h
   cas-test hpla310a


========================================================================
=== Recapitulation des operations demandees pour toutes les restitutions
========================================================================


    TYPE Action    unite                      user      Auteur         nblg  ajout suppr.

       C MODIF supervis/astermodule           durand C.DURAND          3752      8     37
 CASTEST MODIF efica01a                       durand C.DURAND           275      2      2
 CASTEST MODIF hpla100a                     lebouvie F.LEBOUVIER        255      1      5
 CASTEST MODIF hpla100b                     lebouvie F.LEBOUVIER        327      1     13
 CASTEST MODIF hpla100c                     lebouvie F.LEBOUVIER        537      1     13
 CASTEST MODIF hpla100d                     lebouvie F.LEBOUVIER        433      1     13
 CASTEST MODIF hpla100e                     lebouvie F.LEBOUVIER        384      1     11
 CASTEST MODIF hpla100f                     lebouvie F.LEBOUVIER        382      1     11
 CASTEST MODIF hpla100g                     lebouvie F.LEBOUVIER        294      1     12
 CASTEST MODIF hpla100h                     lebouvie F.LEBOUVIER        290      1     13
 CASTEST MODIF hpla100i                     lebouvie F.LEBOUVIER        407      1     16
 CASTEST MODIF hpla100j                     lebouvie F.LEBOUVIER        404      1     15
 CASTEST MODIF hpla310a                     lebouvie F.LEBOUVIER       1034      6      5
 CASTEST MODIF hsnv125d                       durand C.DURAND           486      1     15
 CASTEST MODIF hsnv125g                       durand C.DURAND           494      1     14
 CASTEST MODIF sdnl120a                       durand C.DURAND           528      1      1
 CASTEST MODIF sensd06a                       durand C.DURAND           435      1      8
 CASTEST MODIF ssls117c                     lebouvie F.LEBOUVIER        651      2      5
 CASTEST MODIF ssls117d                     lebouvie F.LEBOUVIER        636      2      5
 CASTEST MODIF ssls120a                     lebouvie F.LEBOUVIER        195      2      4
 CASTEST MODIF ssls120b                     lebouvie F.LEBOUVIER        243      2      4
 CASTEST MODIF ssls120c                     lebouvie F.LEBOUVIER        243      2      4
 CASTEST MODIF ssls120d                     lebouvie F.LEBOUVIER        240      2      4
 CASTEST MODIF sslx100b                     lebouvie F.LEBOUVIER        224      2      3
 CASTEST MODIF sslx100d                     lebouvie F.LEBOUVIER        229      2      3
 CASTEST MODIF ssnl111a                       durand C.DURAND           552      1     16
 CASTEST MODIF ssnl111b                       durand C.DURAND           573      1     16
 CASTEST MODIF ssnv158a                       durand C.DURAND           430      1     13
 CASTEST MODIF ssnv158b                       durand C.DURAND           428      1     13
 CASTEST MODIF ssnv158c                       durand C.DURAND           412      1     13
 CASTEST MODIF tpll01h                      lebouvie F.LEBOUVIER         97      8      1
 CASTEST MODIF tpll101a                       durand C.DURAND           129      8      7
 CASTEST MODIF tpls101a                     lebouvie F.LEBOUVIER        374     10      2
 CASTEST MODIF ttna200a                       durand C.DURAND           643     13      5
 CASTEST MODIF ttnp200a                       durand C.DURAND           641     12      5
 CASTEST MODIF zzzz180a                       durand C.DURAND           888     37     61
CATALOPY MODIF commande/calc_cham_elem        durand C.DURAND            85      3      4
CATALOPY MODIF commande/calc_char_cine      lebouvie F.LEBOUVIER         34      2      2
CATALOPY MODIF commande/meca_statique       lebouvie F.LEBOUVIER         83      1      5
 FORTRAN AJOUT algorith/fetarp               boiteau O.BOITEAU          150    150      0
 FORTRAN AJOUT algorith/fetmon               boiteau O.BOITEAU          126    126      0
 FORTRAN MODIF algeline/alfeti               boiteau O.BOITEAU          679    128    224
 FORTRAN MODIF algeline/fluimp                durand C.DURAND           463      4      3
 FORTRAN MODIF algeline/vtcmbl               boiteau O.BOITEAU          374      3     10
 FORTRAN MODIF algeline/vtdefs               boiteau O.BOITEAU          151      3     10
 FORTRAN MODIF algorith/cresol               boiteau O.BOITEAU          296      1      1
 FORTRAN MODIF algorith/fetccn               boiteau O.BOITEAU          186      3     10
 FORTRAN MODIF algorith/fetfac               boiteau O.BOITEAU          155      3     28
 FORTRAN MODIF algorith/fetfiv               boiteau O.BOITEAU          166     40     64
 FORTRAN MODIF algorith/fetggt               boiteau O.BOITEAU          264     19     35
 FORTRAN MODIF algorith/feting               boiteau O.BOITEAU          186      9     19
 FORTRAN MODIF algorith/fetinl               boiteau O.BOITEAU          244     19     31
 FORTRAN MODIF algorith/fetprc               boiteau O.BOITEAU          123     25     65
 FORTRAN MODIF algorith/fetprj               boiteau O.BOITEAU          230     35     66
 FORTRAN MODIF algorith/fetreo               boiteau O.BOITEAU          198      7     26
 FORTRAN MODIF algorith/fetrex               boiteau O.BOITEAU          155     38     71
 FORTRAN MODIF algorith/fetrin               boiteau O.BOITEAU          481     61     87
 FORTRAN MODIF algorith/fetsca               boiteau O.BOITEAU          135     21     42
 FORTRAN MODIF algorith/meacmv              lebouvie F.LEBOUVIER        466      3      4
 FORTRAN MODIF algorith/mestat              lebouvie F.LEBOUVIER        304      2      3
 FORTRAN MODIF algorith/op0046              lebouvie F.LEBOUVIER        272      3      4
 FORTRAN MODIF assembla/assmam               cibhhlv L.VIVAN            925     15     18
 FORTRAN MODIF assembla/assmat               cibhhlv L.VIVAN            694     15     12
 FORTRAN MODIF assembla/assmiv               cibhhlv L.VIVAN            650     11      8
 FORTRAN MODIF assembla/assmmn               cibhhlv L.VIVAN            870     13     10
 FORTRAN MODIF assembla/assmns               cibhhlv L.VIVAN            950     15     10
 FORTRAN MODIF assembla/assvec               cibhhlv L.VIVAN            862     12      8
 FORTRAN MODIF assembla/numero               boiteau O.BOITEAU          325      8     37
 FORTRAN MODIF calculel/corddl               cibhhlv L.VIVAN            110      5      7
 FORTRAN MODIF calculel/creprn               cibhhlv L.VIVAN            315      7      5
 FORTRAN MODIF calculel/entcod               cibhhlv L.VIVAN             87     46     25
 FORTRAN MODIF elements/creso1               boiteau O.BOITEAU          186      2     19
 FORTRAN MODIF elements/fetcrl               boiteau O.BOITEAU           93      1     20
 FORTRAN MODIF elements/te0375                durand C.DURAND           819      2      8
 FORTRAN MODIF elements/vtcre1               boiteau O.BOITEAU          155      3      9
 FORTRAN MODIF modelisa/exlim1               boiteau O.BOITEAU          136      1      1
 FORTRAN MODIF modelisa/exlim2               boiteau O.BOITEAU          313      6      7
 FORTRAN MODIF prepost/imelnm                cibhhlv L.VIVAN           1201      8      9
 FORTRAN MODIF prepost/imelnn                cibhhlv L.VIVAN           1405      8      9
 FORTRAN MODIF prepost/imelnv                cibhhlv L.VIVAN           1008      8      9
 FORTRAN MODIF prepost/imvelm                cibhhlv L.VIVAN            911      8      9
 FORTRAN MODIF prepost/imveln                cibhhlv L.VIVAN            829      8      9
 FORTRAN MODIF prepost/imvelv                cibhhlv L.VIVAN            799      8      9
 FORTRAN MODIF prepost/prcoch                 durand C.DURAND           329      7      7
 FORTRAN MODIF utilifor/utcomm                durand C.DURAND           147      3      2
 FORTRAN SUPPR calculel/entco0               cibhhlv L.VIVAN             86      0     86
  PYTHON MODIF Cata/ops                       durand C.DURAND           434      3      1
  PYTHON MODIF Macro/macr_fiab_impr_ops       durand C.DURAND           110      3      3


        nb unites  nb lignes  ajouts  suppr.  difference
 AJOUT :    2         276       276              +276
 MODIF :   85       38938       798    1473      -675
 SUPPR :    1          86                86       -86
 DEPLA :    0           0 
         ----      ------     ------  ------   ------
 TOTAL :   88       39300      1074    1559      -485 
