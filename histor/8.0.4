

-----------------------------------------------------------------------
--- AUTEUR cibhhpd L.SALMONA   DATE  le 18/01/2005 a 11:13:44

REALISATION EL 2004-108
   NB_JOURS_TRAV  : 7
   POUR_LE_COMPTE_DE   : R.FERNANDES
   INTERET_UTILISATEUR : OUI
   TITRE  :  Operateur tangent mecanique pour la THM
   
   FONCTIONNALITE : "Opérateur tangent mécanique non symétrique pour les lois
                     LAIGLE, MAZARS et CJS"
   "Activation de l'opérateur SYME dans STAT_NON_LINE"

   DETAIL : 
   
   La prise en compte d'une matrice non symetrique dans le solveur est desormais
   possible en mecanique. On profite de cette fiche pour enlever la
   symétrisation de la matrice dans les routines de calcul de la matrice
   tangente ( en mecanique pure et en THM car les routines sont partagés).
   Ceci ne concerne que les lois CJS, LAIGLE et MAZARS car seules ces lois peuvent 
   conduire a des matrices non symetriques et sont utilisées par la THM. 
   Pour ces trois lois l'opérateur tangent est donc désormais un opérateur non
   symétrique que ce soit en mécanique pure ou en THM. Le gain sur les
   performances peut etre résumé dans le tableau ci dessous
   
                                 Loi CJS
				
                              MECANIQUE PURE
			      
                    AVANT              APRES            GAIN
		    

  ssnv135a         41.82                33.92         18.89 %

  Le nombre d'itérations de Newton passe de 3 a 1 pour certains pas de temps ce
  qui justifie cette diminution du temps CPU.

  ssnv136a         42.87                43.25         -0.86 %         (REAC_ITER=0)
  
  Pas de changement sur le nombre d'itéré.

                                  THM

                    AVANT              APRES            GAIN

  wtnv100a          5.55                 5.37    non significatif     (REAC_ITER=0)

  Pas de changement sur le nombre d'itéré.

  wtnv100b         13.92                12.03         13.58 %


  Le nombre d'itérations de Newton passe de 2 a 1 pour certains pas de temps ce
  qui justifie cette diminution du temps CPU.

                                 Loi LAIGLE
				
                              MECANIQUE PURE
			      
                    AVANT              APRES            GAIN


  ssnv158d        153.92               148.40          3.5 %

  Le nombre d'itérations de Newton passe de 2 a 1 pour certains pas de temps ce
  qui justifie cette diminution du temps CPU.

                                  THM

                    AVANT              APRES            GAIN

  wtnv101a          9.80                 9.73    non significatif     (REAC_ITER=0)
                   16.85                15.23          9.6 %          (REAC_ITER=1)


  Dans le cas de la réactualisation de la matrice tangente à chaque itération de Newton,
  le  nombre d'itérations de Newton passe de 3 a 2 pour certains pas de temps ce qui
  justifie cette diminution du temps CPU.

                                 Loi MAZARS

                              MECANIQUE PURE
			      
                    AVANT              APRES            GAIN


  hsnv129a          8.92                8.85      non significatif    (REAC_ITER=0)
                    8.92                8.85      non significatif    (REAC_ITER=1)

Le nombre d'itérations de Newton est identique quel que soit la configuration.

                                  THM

                    AVANT              APRES            GAIN

  wtnv121b         49.95               46.18          7.55 %

  Le nombre d'itérations de Newton passe de 11 a 10 ce qui explique la diminution du
  temps CPU.
    
  
   On a profité de cette fiche pour activer le mot clé SYME='OUI' dans le mot clé
   facteur SOLVEUR de l'operateur STAT_NON_LINE, correspondant a la symetrisation de
   l'operateur tangent. En effet auparavant seul la THM pouvait bénéficier de ce mot
   clé car l'option de symétrisation SYME_MDNS_R n'était présente que dans les
   catalogues de THM.


   RESU_FAUX_VERSION_EXPLOITATION    :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   NON
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   VALIDATION : passage des cas tests CJS, MAZARS et LAIGLE
   + ssnv158d modifie pour prendre en compte le mot clé SYME='OUI'
   IMPACT_DOCUMENTAIRE : OUI

       DOC_R :  R7.01.13-A
       EXPL_ :  Loi CJS, on supprime la partie expliquant les raisons de
       symétriser la matrice

       DOC_R :  R7.01.08-A
       EXPL_ :  Loi Mazars, on supprime la partie expliquant les raisons de
       symétriser la matrice
       
       
   


-----------------------------------------------------------------------
--- AUTEUR lebouvie F.LEBOUVIER   DATE  le 17/01/2005 a 13:39:26

-------------------------------------------------------------------------------
REALISATION EL 2004-260
   POUR LE COMPTE DE : J. PELLET
   INTERET_UTILISATEUR : NON
   TITRE : Un petit ménage dans DYNA_TRAN_MODAL
   FONCTIONNALITE :  
   DETAIL :
    Les 5 routines suivantes(qui ne participent qu'à la commande 
    DYNA_TRAN_MODAL), :
       - mdadap, mddevo, mdeul1, mdnewm, op0074
    utilisent des objets dont le nom commence par '99999'.Celà viole la règle :
    un objet JEVEUX doit commencer :
      - soit par les 8 caractères du nom d'un concept,
      - soit par &&XXXXXX où XXXXXX est le nom d'une routine.
    on propose donc de renommer cette chaine en '&&op0074'.
   RESU_FAUX_VERSION_EXPLOITATION    : NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   : NON
   RESTITUTION_VERSION_EXPLOITATION  : NON
   RESTITUTION_VERSION_DEVELOPPEMENT : OUI
   VALIDATION : 
      Passage des cas-tests utilisant l'opérateur DYNA_TRAN_MODAL. 
   IMPACT_DOCUMENTAIRE : NON   
   NB_JOURS_TRAV : 0.5
-------------------------------------------------------------------------------
REALISATION EL 2004-268
   POUR LE COMPTE DE : J.M. PROIX
   INTERET_UTILISATEUR : NON
   TITRE : résorber COULOMB de C_COMP_INCR
   FONCTIONNALITE :  
   DETAIL :
   a) résorber COULOMB de C_COMP_INCR
      On enlève du catalogue de commande commun C_COMP_INCT les 2 lignes 
      suivantes:
        - pour la relation de comportement:
          "COULOMB",   
        - pour la définition du nombre de variables internes 
           COULOMB         =SIMP(statut='c',typ='I',defaut=4,into=(4,)),
      Aucune modification apportée dans les cas-tests, la relation COULOMB 
      n'est plus utilisée.
   b) ASSE_COMBU: cohérence entre le nombre de variables internes (5) définie 
      dans le catalogue C_COMP_INCR et la documentation U4.51.11 (2): Comportement
      non_linéaire. 
      L'analyse de la routine te0247 montre que l'on utilise effectivement les 5
      variables internes, seulement dans le seul cas de LMARC (MNLMAB).
      On fait donc aucune modification.
   RESU_FAUX_VERSION_EXPLOITATION    : NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   : NON
   RESTITUTION_VERSION_EXPLOITATION  : NON
   RESTITUTION_VERSION_DEVELOPPEMENT : OUI
   VALIDATION : 
      Passage de la liste restreinte 
   IMPACT_DOCUMENTAIRE : NON   
   NB_JOURS_TRAV : 1.0


-----------------------------------------------------------------------
--- AUTEUR rezette C.REZETTE   DATE  le 17/01/2005 a 15:12:48

------------------------------------------------------------------------------
CORRECTION AL 2004-451
   POUR_LE_COMPTE_DE : J.PELLET
   INTERET_UTILISATEUR : OUI
   TITRE : LIRE_RESU FORMAT MED
   FONCTIONNALITE 
    Possibilité de créer une SD résultat en restreignant la lecture des champs
    à certains instants ou numéros d'ordre.
   RESU_FAUX_VERSION_EXPLOITATION  :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION : zzzz162a + liste de cas-tests contenant la commande LIRE_RESU
    au format MED + liste restreinte
   NB_JOURS_TRAV  : 3.0
   DETAILS :
   La commande LIRE_RESU au format MED faisait l'objet de 2 problèmes:
   1) Les numérotations des PRNO étaient dupliquées à chaque pas de temps ce qui 
      générait des bases de taille supérieure à ce qui était prévu.
      Nous avons corrigé ce problème en remplacant dans l'op150 à ligne700:
         GCNCON('_',NPRFCN)
      par
         NPRFCN=RESU
   2) La restriction à certains numéros d'ordre ou d'instants ne fonctionnait pas
      au format MED. En fait, elle n'avait pas été développée pour ce format bien que la
      documention U7.02.01 dise le contraire.
      Nous sommes intervenu dans l'op0150 pour développer cette fonctionnalité.
      Dorénavant les mots clés NUME_ORDRE,INST,LIST_INST,LIST_ORDRE,FREQ,LIST_FREQ
      peuvent etre utilisés.
      Remarque: Seuls les numéros d'ordre demandés sont exploités 
               (cf message émis par JEDETC dans le .mess).
   Source modifiée  : op0150.f
   Cas-test modifié : zzzz162a

------------------------------------------------------------------------------
CORRECTION AL 2004-417
   POUR_LE_COMPTE_DE : C.DURAND
   INTERET_UTILISATEUR : OUI
   TITRE : MODI_REPERE / noeuds sur l'axe du repere cylindrique
   FONCTIONNALITE
   RESU_FAUX_VERSION_EXPLOITATION  :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : OUI
     DOC_U: U4.74.01
       EXPL_ : action des mots-cles GROUP_MA,MAILLE,GROUP_NO et NOEUD
               en fonction des types de champs à post-traiter.
   VALIDATION : liste de cas-tests contenant la commande MODI_REPERE 
   + liste restreinte 
   NB_JOURS_TRAV  : 4.5
   DETAILS :
   Anomalie:
      L'utilisateur souhaite changer son repère cartésien en repère cylindrique.
      Il utilise la commande MODI_REPERE. Or son étude aboutit en ERREUR FATALE 
      justifiee par le fait que les noeuds de certaines mailles de son maillage
      se trouvent sur l'axe oz. Donc il restreint son maillage aux mailles ne 
      contenant pas de noeuds sur l'axe oz en utilisant les mots-cles GROUP_MA
      et/ou MAILLE de la commande MODI_REPERE .
      Cette restriction n'a eu aucune incidence! l'étude se conclue toujours d'une erreur 
      fatale. En fait, les mots-cles GROUP_MA, MAILLE ne filtrent pas bien la géométrie.
      A postériori, les mots-clés NOEUD et GROUP_NO également!
   Reproduction du problème: 
      En l'abscence de fichiers décrivant l'anomalie, nous avons reproduit la situation
      sur le cas-test sslv04a en fabriquant un maillage de quartier de camembert complet
      en plaçant un SEG2 sur l'axe d'axisymétrie.
      Ainsi nous avons pu utiliser les mots-clés GROUP_MA, MAILLE, NOEUD et GROUP_NO pour
      exclure la maille ou les noeuds de l'axe.
   Analyse:
      Nous avons observé que pour les champs aux noeuds (par exemple détermination de 
      SIGM_NOEU_DEPL dans le repère cylindrique), l'utilisation des mots-cles MAILLE
      et GROUP_MA sont ignorés par aster. Aster considère la totalite des noeuds du maillage!
   Correction:
      - nous avons exclus l'utilisation des mots-cles NOEUD et GROUP_NO pour les champs aux éléments.
      - nous avons étendu l'action des mots-cles MAILLE et GROUP_MA aux champs aux noeuds.
      - nous avons corrigé une étourderie (remplacement de la variable NBNO par NBNOEU)
   Validation:
      Passage du cas-test sslv04a (maillage, condition aux limites ..) pour reproduire 
      le problème de l'utilisateur.
      La validation a consisté à verifier à la main que les mots-clés ci-dessus filtraient bien 
      la géomètrie et que le cas-test ne tombait plus en erreur fatale.
   Sources modifiées: 
      op0191.f, chrpel.f, chrpno.f


========================================================================
=== Recapitulation des operations demandees pour toutes les restitutions
========================================================================


    TYPE Action    unite                      user      Auteur         nblg  ajout suppr.

 CASTEST MODIF ssnv158d                      cibhhpd L.SALMONA          411      3      1
 CASTEST MODIF zzzz162a                      rezette C.REZETTE          397    114      1
CATALOGU MODIF typelem/gener_me2db1          cibhhpd L.SALMONA          198      4      1
CATALOGU MODIF typelem/gener_me3d_3          cibhhpd L.SALMONA          543      4      1
CATALOGU MODIF typelem/gener_me3di3          cibhhpd L.SALMONA          188      4      1
CATALOGU MODIF typelem/gener_meax_2          cibhhpd L.SALMONA          553      3      1
CATALOGU MODIF typelem/gener_meaxs2          cibhhpd L.SALMONA          522      3      1
CATALOGU MODIF typelem/gener_mebar1          cibhhpd L.SALMONA          196      4      1
CATALOGU MODIF typelem/gener_mecpl2          cibhhpd L.SALMONA          544      3      1
CATALOGU MODIF typelem/gener_mecq32          cibhhpd L.SALMONA          232      1      1
CATALOGU MODIF typelem/gener_mecqd1          cibhhpd L.SALMONA          188      4      1
CATALOGU MODIF typelem/gener_medkt2          cibhhpd L.SALMONA          302      4      1
CATALOGU MODIF typelem/gener_medpl2          cibhhpd L.SALMONA          560      3      1
CATALOGU MODIF typelem/gener_mepli2          cibhhpd L.SALMONA          177      4      1
CATALOGU MODIF typelem/gener_metu61          cibhhpd L.SALMONA          268      4      1
CATALOGU MODIF typelem/mecpqs4               cibhhpd L.SALMONA          497      4      1
CATALOGU MODIF typelem/mecptr3               cibhhpd L.SALMONA          530      3      1
CATALOGU MODIF typelem/mecptr6               cibhhpd L.SALMONA          526      3      1
CATALOGU MODIF typelem/medpqs4               cibhhpd L.SALMONA          503      4      1
CATALOGU MODIF typelem/medpqs8               cibhhpd L.SALMONA          507      3      1
CATALOGU MODIF typelem/met3seg3              cibhhpd L.SALMONA          259      4      1
CATALOGU MODIF typelem/met3seg4              cibhhpd L.SALMONA          266      4      1
CATALOPY MODIF commun/c_comp_incr           lebouvie F.LEBOUVIER        299      1      3
 FORTRAN MODIF algeline/calcds               cibhhpd L.SALMONA           82      2     10
 FORTRAN MODIF algorith/chrpel               rezette C.REZETTE          548     37      4
 FORTRAN MODIF algorith/chrpno               rezette C.REZETTE          499     15     10
 FORTRAN MODIF algorith/cjstde               cibhhpd L.SALMONA          268      8     12
 FORTRAN MODIF algorith/cjstid               cibhhpd L.SALMONA          318      7     11
 FORTRAN MODIF algorith/lcmaza               cibhhpd L.SALMONA          472      2      5
 FORTRAN MODIF algorith/mdadap              lebouvie F.LEBOUVIER        618      2      2
 FORTRAN MODIF algorith/mddevo              lebouvie F.LEBOUVIER        364      2      2
 FORTRAN MODIF algorith/mdeul1              lebouvie F.LEBOUVIER        448      2      2
 FORTRAN MODIF algorith/mdnewm              lebouvie F.LEBOUVIER        338      2      2
 FORTRAN MODIF algorith/nmtstm               cibhhpd L.SALMONA           57     12      1
 FORTRAN MODIF algorith/op0074              lebouvie F.LEBOUVIER         96      3      3
 FORTRAN MODIF algorith/op0191               rezette C.REZETTE          143      3      2
 FORTRAN MODIF utilitai/op0150               rezette C.REZETTE          873     58      9


        nb unites  nb lignes  ajouts  suppr.  difference
 AJOUT :    0           0         0                +0
 MODIF :   37       13790       343     100      +243
 SUPPR :    0           0                 0        +0
 DEPLA :    0           0 
         ----      ------     ------  ------   ------
 TOTAL :   37       13790       343     100      +243 
