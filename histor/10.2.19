

-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR abbas        ABBAS Mickael          DATE 10/11/2010 - 04:48:54

--------------------------------------------------------------------------------
RESTITUTION FICHE 014418 DU 2010-01-14 09:33:12
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
    Routine MMEXNO dangereuse
FONCTIONNALITE
   Diagnostic
   ==========
   
   La routine MMEXNO est dangereuse, enfin c'est plutôt la façon dont elle est appelée.
   Exemple dans MMMTCC : 
   
         ELSEIF (PHASE.EQ.'EXCL') THEN 
           CALL MMEXNO(TYPBAR,IBID  ,NDEXCL)
           DO 78 IEXCL = 1,9   
             IF (NDEXCL(IEXCL).EQ.1) THEN
               MATRCC(IEXCL,IEXCL) = - FFL(IEXCL)*FFL(IEXCL)
             ENDIF  
      78   CONTINUE 
           IF (TYPRAC.NE.0) THEN
             CALL MMEXNO(IBID  ,TYPRAC,NDEXCL)
             DO 79 IEXCL = 1,9   
               IF (NDEXCL(IEXCL).EQ.1) THEN
                 MATRCC(IEXCL,IEXCL) = - FFL(IEXCL)*FFL(IEXCL)
               ENDIF  
      79     CONTINUE
           ENDIF          
   
   Si jamais IBID a la malchance de valoir une valeur de 1 à 6 alors le 2ème appel à MMEXNO
   n'aura pas le comportement attendu.
   
   Réponse
   =======
   
   Le plus simple est de séparer la routine en deux:
   MMEXN1 s'occupera du cas GROUP_NO_FOND
   MMEXN2 s'occupera du cas GROUP_NO_RACC
   Il faut juste bien prendre garde à initialiser le vecteur de sortie avant de l'appeler
   
   Impacts: 
   mmexcl.f  mmexn2.f  mmmtcc.f  mmmtcm.f  mmmtmc.f
   mmexn1.f  mmmtce.f  mmmtec.f  mmmvcc.f
   
   Résorption mmexno.f
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    ssnp121n,ssnp121m
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------
RESTITUTION FICHE 014986 DU 2010-04-23 07:11:49
TYPE anomalie concernant Documentation (VERSION *)
TITRE
    Mot-cles dans OBSERVATION non documentes
FONCTIONNALITE
   Truc cocace (orthographe d'origine) :
   
   1. dans la doc de STAT_NON_LINE, au mot-clé OBSERVATION, on renvoit à la doc de DYNA_NON_LINE.
   2. dans la doc de DYNA_NON_LINE, aux mots-clés "LIST_ARCH / LIST_INST / INST / PAS_OBSE"
   de OBSERVATION, on renvoit au paragraphe du mot-clé ARCHIVAGE de la même doc.
   3. dans le paragraphe documentant ARCHIVAGE dans DYNA_NON_LINE, on renvoit à la doc de
   STAT_NON_LINE
   4. dans la doc de STAT_NON_LINE, au paragraphe sur ARCHIVAGE, "LIST_INST / INST /
   PAS_ARCH" sont bien documentés mais pas "LIST_ARCH".
   
   Il faut donc homogénéiser tout ça et documenter "LIST_ARCH" de OBSERVATION.
   Par ailleurs dans la doc de DYNA_NON_LINE sur OBSERVATION, on dit que PAS_OBSE a la même
   signification que PAS dans ARCHIVAGE, or PAS n'existe pas dans ce contexte (c'est PAS_ARCH).
   
   La doc a été ré-écrite proprement en basculant les mots-clefs génériques d'OP0070 à
   STAT_NON_LINE, ce qui évite des doubles renvois intempestifs (et faux, par la même
   occasion). LIST_ARCH est documenté
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : U4.51.03
VALIDATION
    documentaire
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 015537 DU 2010-09-14 11:38:20
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
    Compatibilitxc3xa9 mmnorm/mmmron en 2D
FONCTIONNALITE
   Problème (M.GUITON)
   ===================
   
   Dans un développement pour le lissage, j'ai besoin d'enchainer les 
   opérateurs MMMRON (calcul des tangentes à partir de la normale intérieure)
   et MMNORM (calcul de la normale interieure à partir des tangentes). 
   Il y a un problème de compatibilité entre ces deux routines pour le cas 2D 
   (à priori pas pour le 3D): 
   
   MMMRON donne :  
   tx = -ny 
   ty = nx
   tz = 0
   
   MMNORM donne: 
   nx = -ty = -nx
   ny = tx = -ny
   nz = 0
   
   Donc on se retrouve avec n = -n ! (ce qui va entrainer une situation non 
   contactante là ou on aurait du avoir du contact). 
   
   Solution
   ========
   
   On modifie MMMRON pour être cohérent.
   Ca ne change rien dans une utilisation standard du contact. Par acquis de conscience, j'ai
   quand même passé la liste complète des cas-tests du contact.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    liste complxc3xa8te contact
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------
RESTITUTION FICHE 015665 DU 2010-10-05 09:20:33
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
    ssnp306a casse en NEW10 + debug_JEVEUX sur Bull
FONCTIONNALITE
   Problème
   ========
   
   En faisant des tests je me suis aperçu que le cas-test SSNP306A est casse en NEW10 + 
   debug_JEVEUX sur Bull dans un STAT_NON_LINE + CRIT_FLAMB: non cv. La premiere resolution
   de systeme linéaire n'a pas les bonnes données, je pense.
   
   
   Solution
   ========
   
   Une erreur de débutant !
   La routine NMPCIN retourne l'adresse de l'objet CCID
   Or, il est stupide de renvoyer une adresse en paramètre d'une sous-routine (surtout
   parente !).
   L'adresse JEVEUX est locale (entre JEMARQ/JEDEMA).
   Dans 90% des cas, ça marche (car l'adresse ne change pas). En DBGJEVEUX, la libération est
   toujours faite. Pareil pour les problèmes qui occupent bcp de mémoire.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    sslp306a
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR courtois     COURTOIS Mathieu       DATE 10/11/2010 - 02:45:38

--------------------------------------------------------------------------------
RESTITUTION FICHE 015660 DU 2010-10-04 14:49:27
TYPE express concernant Code_Aster (VERSION 7.0)
TITRE
    Erreur de syntaxe avec message peu clair du superviseur
FONCTIONNALITE
   Problème
   ========
   
   Si on écrit dans un fichier de commande : 
   
   CHAPP=AFFE_CHAR_MECA(MODELE=MODELE,
                        PESANTEUR=_F(GRAVITE=9.81,
                                      DIRECTION=(0.,0.,-1.,),),);
   
   La validation du jeu de commandes s'arrête sans message pour 
   l'utilisateur.
   
   
   Correction
   ==========
   
   Il s'agit d'un piège dans lequel l'utilisateur peut facilement 
   tomber lors d'un changement de syntaxe d'une version à une 
   autre.
   
   Dans le cas où l'on fournit une liste de valeurs alors qu'un 
   mot-clé facteur est attendu, le message d'erreur est assez 
   clair :
   
   ___Etape : AFFE_CHAR_MECA    ligne : 31    fichier : 'fort.1'
   ______Mot-clé facteur multiple : PESANTEUR
   _________! L'occurrence n 1  du mot-clé facteur : PESANTEUR   
   n'est pas valide !
   
   
   Dans le cas inverse (on fournit un mot-clé facteur alors qu'on 
   attend une liste de valeurs), la remontée est du type :
   
     File "Python/Execution/E_SUPERV.py", line 371, in main
       ier=appli.main()
     File "Python/Execution/E_SUPERV.py", line 366, in main
       return self.Execute()
     File "Python/Execution/E_SUPERV.py", line 232, in Execute
       cr=j.report()
     File "./Python/Validation/V_JDC.py", line 53, in report
       self.cr.add(e.report())
     File "./Python/Validation/V_ETAPE.py", line 219, in report
       self.isvalid(cr='oui')
     File "./Python/Validation/V_ETAPE.py", line 116, in isvalid
       valid=self.valid_child()
     File "./Python/Validation/V_ETAPE.py", line 48, in 
   valid_child
       if not child.isvalid():
     File "./Python/Validation/V_MCSIMP.py", line 151, in isvalid
       for val in lval:
     File "/usr/lib/python2.6/UserDict.py", line 22, in 
   __getitem__
       raise KeyError(key)
   KeyError: 0
   
   
   Le problème est que l'on essaie de boucler sur les valeurs 
   d'un mot-clé simple et pour savoir si on a affaire à une 
   liste, on regarde si l'objet a la méthode 'len'.
   Or un mot-clé facteur (_F qui dérive de UserDict) a une 
   méthode 'len' mais on ne peut pas itérer sur un mot-clé 
   facteur.
   
   La solution consiste a permet cette itération. On pourra alors 
   vérifier chaque élément.
   On est alors arrêter avec un message peu plus clair pour 
   l'utilisateur :
   
   Mot-clé simple : PESANTEUR
     'GRAVITE' (de type <type 'str'>) n'est pas d'un type 
   autorisé: ('R',)
   
     Nombre d'arguments de {'GRAVITE': 9.8100000000000005, 
   'DIRECTION': (0.0, 0.0, -1.0)} incorrect (min = 4, max = 4)
   Fin Mot-clé simple : PESANTEUR
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  OUI
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    test xc3xa9lxc3xa9mentaire en erreur
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 015663 DU 2010-10-05 07:28:31
TYPE express concernant Code_Aster (VERSION 7.0)
TITRE
    Mauvaise initialisation de chaine fortran dans le C
FONCTIONNALITE
   Problème signalé par "maurel" sur le forum :
   
   Dans prepcompcham (astermodule.c), on initialise une chaine de 
   caractères fortran avec des blancs en utilisant strcpy.
   
   Comme l'a fait remarqué TdS, strcpy recopie une chaine de 
   caractères y compris dans le caractère de fin '\0'.
   
   On peut utiliser strncpy si on ne veut pas ajouter ce caractère 
   de fin de chaine.
   
   Mieux, il y a une macro faite pour çà (qui utilise memset) :
   
   BLANK(groups, long_nomcham);
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    asrest
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 011360 DU 2007-10-15 15:26:58
TYPE evolution concernant Rex (VERSION )
TITRE
    visibilite pave Gestion TMA
FONCTIONNALITE
   L'encart "Gestion TMA" n'était pas visible une fois la fiche 
   fermée.
   Pour l'intervenant extérieur, c'est pratique de consulter a 
   posteriori la charge chiffrée et réalisée.
   
   On modifie la visibilité du pavé pour qu'il soit toujours 
   consultable.
   NB : l'encart TMA n'est visible que par les développeurs EDF et 
   ceux dont l'organisme est égal au champ Intervenant.
   
   
   On profite de cette fiche pour ajouter une description du 
   circuit des fiches (avec et sans TMA) accessible depuis :
   - le menu aide,
   - la modification de l'état,
   - l'encart TMA.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    visuelle
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 015034 DU 2010-05-05 09:44:21
TYPE evolution concernant Code_Aster (VERSION )
TITRE
    regression polynomiale
FONCTIONNALITE
   Un utilisateur souhaite faire une régression polynomiale sur 
   une liste de valeurs issues d'une table.
   
   
   On propose d'ajouter cette possibilité à CALC_FONCTION :
   
   reg = CALC_FONCTION(REGR_POLYNOMIALE=_F(FONCTION=tg, DEGRE=5), 
   LIST_PARA=interp)
   
   Si les données sont dans une table, il suffira de passer par 
   RECU_FONCTION pour produire la fonction d'entrée.
   La régression polynomiale est réalisé par numpy.polyfit.
   
   
   On valide dans zzzz100b :
   - on crée la formule d'un polynôme de degré 5 avec des 
   coefficients exotiques,
   - on évalue cette formule sur une douzaine de points en 
   s'arrangeant pour passer par 0 et 1,
   - on appelle REGR_POLYNOMIALE en tabulant finement la fonction 
   résultat
   - on teste la fonction en 0, 1 et le dernier point de la 
   fonction initiale
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : u4.32.04
VALIDATION
    zzzz100b
NB_JOURS_TRAV  : 1.0
--------------------------------------------------------------------------------
RESTITUTION FICHE 015651 DU 2010-10-01 06:53:04
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
    mauvais usage des routines U2MESX
FONCTIONNALITE
   Problème
   ========
   
   Il y a des appels incorrects aux routines d'impression de 
   messages :
   
   capoco.f:CALL U2MESS('1','CONTACT3_37')
   chkcmp.f:CALL 
   U2MESG('TYPERR','UTILITAI5_95',2,VALK,0,0,0,0.D0)
   chkcmp.f:CALL 
   U2MESG('TYPERR','UTILITAI5_96',3,VALK,0,0,0,0.D0)
   irccmp.f:CALL U2MESG('TYP','PREPOST5_25',2,VALK,0,0,0,0.D0)
   nzcalc.f:CALL U2MESS('FPRIM','ALGORITH9_12')
   utchdl.f:CALL U2MESG('AOF','UTILITAI7_5',1,VALK,2,VALI,0,0.D0)
   utmasu.f:CALL U2MESK('L','PREPOST6_29',1,VALK)
   
   
   Solution
   ========
   
   On corrige ces appels. Parfois, il s'agit d'une variable 
   (TYPERR, TYP, AOF) passée en tant que chaîne...
   
   La vérification par as_run détectera ces erreurs d'appel 
   (prochaine version 1.8.4).
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
    nouvel as_run --messages check
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 015704 DU 2010-10-08 16:12:35
TYPE express concernant Code_Aster (VERSION 7.0)
TITRE
    Mauvais typage dans les arguments fournis aux routines MED
FONCTIONNALITE
   Problème
   ========
   
   Beaucoup de tests plantent en 32 bits avec gfortran (au moins avec gfortran 4.4.3).
   Point commun : il utilise un maillage med en donnée.
   
   
   Correction
   ==========
   
   On s'aperçoit que les coordonnées des noeuds lus valent 
   n'importe quoi.
   En regardant la documentation de référence de la routine 
   efcool, on lit que le nom des coordonnées et les unités des
   coordonnées (variables OUT de efcool) sont des chaînes de 16 caractères au lieu de 8
   depuis med 2.2.
   
   En modifiant la déclaration de ces tableaux de chaînes, le 
   test forma01a passe.
   
   Remarques : 
   - La doc MED présente les arguments OUT de type CHARACTER*(*), ce qui laisse supposer
   qu'il s'adapte aux variables qui lui 
   sont fournies. Il n'en est rien.
   
   - dans irmmno, le changement a déjà été fait.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    forma01a
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 015707 DU 2010-10-11 07:08:56
TYPE express concernant Code_Aster (VERSION 7.0)
TITRE
    Ecrasement dans xdecqu/vecini
FONCTIONNALITE
   Problème
   ========
   
   ssnv182l plante avec gfortran 4.4.3 dans MODI_MODELE_XFEM
   
   
   Correction
   ==========
   
   Dans la routine xdecqu, on dimensionne 3 tableaux en REAL*8 
   A(NDIM).
   Or dans l'appel à vecini, on demande à les initialiser jusqu'à 3 
   (au lieu de NDIM).
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    ssnv182l
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 015266 DU 2010-06-29 08:24:30
TYPE aide utilisation concernant Code_Aster (VERSION 7.0)
TITRE
    installation aster sur poste calibre
FONCTIONNALITE
   Cette AOM concerne l'utilisation de Code_Aster sur machines 
   locales au CIH.
   Le besoin est d'avoir les versions d'exploitation, et de 
   développement pour tester les évolutions demandées par le CIH.
   
   Finalement, la solution retenue est de dupliquer la version 
   locale construire à AMA.
   Pour cela, il est nécessaire que l'administrateur de la machine 
   donne un accès en écriture dans /local00/aster (que ce soit un 
   lien ou un vrai répertoire).
   
   En cas de changement de machine, il faut recréer ce répertoire 
   et nous fournir les informations de connexions (adresse ip, 
   login ayant les droits dans /local00/aster).
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    exxc3xa9cutions locales
NB_JOURS_TRAV  : 1.0
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR delmas       DELMAS Josselin        DATE 10/11/2010 - 07:07:45

--------------------------------------------------------------------------------
RESTITUTION FICHE 015664 DU 2010-10-05 08:41:42
TYPE express concernant Code_Aster (VERSION 7.0)
TITRE
    L'alarme UTILITAI5_93 ne devrait pas etre emise
FONCTIONNALITE
   Problème :
   =========
   L'alarme UTILITAI5_93 ne devrait pas être émise dans LIRE_RESU par les tests de la base.
   
   Elle prévient l'utilisateur que pour une SD evol_char on ne peut pas stocker le modèle, le
   cara_elem ou le cham_mater.
   
   Cette alarme est émise dans ces tests :
   sdlx100a
   sdnl102a
   shll100a
   shll100b
   ssla100a
   ssla100b
   ssla100c
   ssnl118a
   zzzz137a
   zzzz215c
   
   Analyse et correction :
   =====================
   Pour le format IDEAS, il suffit de remplacer le modèle par le maillage dans le .comm. Mais
   l'alarme apparait toujours : le test dans le source est mal fait. On le corrige.
   
   Pour le format ENSIGHT, la situation est paradoxale. On a besoin du modèle pour récupérer
   la dimension mais on ne peut pas le stocker. Dans ce cas, j'émets une information :
    "Pour une SD résultat de type %(k1)s, le modèle ne sera pas stocké."
   
   Impacts :
   =======
   op0150.f
   utilitai5.py
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    tests incriminxc3xa9s
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 015597 DU 2010-09-24 09:35:16
TYPE evolution concernant Code_Aster (VERSION )
TITRE
    Message ASSEMBLA_66 pas clair
FONCTIONNALITE
   Problème :
   ========
   Lors de la foramtion, un stagiaire est tombé sur le message ASSEMBLA_66. 
   ...!------------------------------------------------------------------!
   ...!.<EXCEPTION>.<ASSEMBLA_66>........................................!
   ...!..................................................................!
   ...!.Problème.dans.NULILI.F:.on.a.au.moins.deux.maillages.différents:.!
   ...!...-.maillage.1:.MAIL.............................................!
   ...!...-.maillage.2:.MAIL2............................................!
   ...!------------------------------------------------------------------!
   
   Le message n'est pas clair et n'aide pas l'utilisateur. Il faut le reformuler !
   
   Analyse :
   =======
   Les charges ont été construites sur un modèle différent (car le maillage est différent) de
   celui donné dans MECA_STATIQUE.
   
   Correction :
   ==========
   On reformule le message en donnant une piste :
   
   ...!-------------------------------------------------------------------------------!
   ...!.<EXCEPTION>.<ASSEMBLA_66>.....................................................!
   ...!...............................................................................!
   ...!..Il.faut.vérifier.la.cohérence.des.maillages.dans.les.structures.de.données...!
   ...!..MODE.et.CHAR..Les.maillages.devraient.être.les.mêmes.........................!
   ...!...............................................................................!
   ...!..On.trouve.au.moins.deux.maillages.différents:................................!
   ...!...-.maillage.1.:.MAIL.........................................................!
   ...!...-.maillage.2.:.MAIL2........................................................!
   ...!...............................................................................!
   ...!..Détails.:....................................................................!
   ...!... Le.maillage.1.:.MAIL.est lié.au.ligrel.1.:.MODE.....MODELE.................!
   ...!.. .Le.maillage.2.:.MAIL2.est lié.au.ligrel.2.:.CHAR.....CHME.LIGRE............!
   ...!-------------------------------------------------------------------------------!
   
   Impacts :
   =======
   nulili.f
   assembla.f
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  OUI
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    test elementaire
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 015306 DU 2010-07-06 17:07:27
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
    Passage des tests  INCLUDE_MATERIAU en intranet
FONCTIONNALITE
   Problème :
   ========
   Les tests comportant INCLUDE_MATERIAU doivent être en NIV_PUB_WEB = INTRANET
   
   Correction :
   ==========
   Les tests suivants contiennent INCLUDE_MATERIAU :
   efica01a.com0
   forma01c.comm
   hsnv131a.comm
   ssnv101c.comm
   zzzz118a.comm
   zzzz118b.comm
   zzzz118c.com1
   zzzz118c.comm
   zzzz118d.com1
   zzzz118d.comm
   zzzz262a.comm
   zzzz262b.comm
   
   Ils doivent être tous en NIV_PUB_WEB = INTRANET sauf lorsque le matériau est A42.
   
   C'est bien le cas sauf pour ssnv101c.comm (internet à la place d'intranet), zzzz262a.comm
   et zzzz262b.comm (intranet à la place d'internet).
   
   On ne modifie que ssnv101c car les zzzz262 (anciens yyyy106) sont historiquement en intranet.
   
   Impact :
   ======
   ssnv101c.comm
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    Nxc3xa9ant
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------
RESTITUTION FICHE 015241 DU 2010-06-22 07:44:20
TYPE anomalie concernant Documentation (VERSION *)
TITRE
    Docaster - renvois mal geres lors de l'export PDF
FONCTIONNALITE
   Problème :
   ==========
   Thomas a rencontré des problèmes en faisant des renvois dynamiques dans une doc. Il
   renvoyait vers des titres de paragraphes (du genre § 3.1.2). Mais à l'export pdf, à la
   place du numéro de paragraphe, le numéro d'ordre du renvoi était affiché.
   
   Correction :
   ============
   C'est une subtilité d'Open Office. Il fallait choisir "Chapitre" et non "Numéro".
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
    *
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 014874 DU 2010-03-29 14:33:47
TYPE anomalie concernant Documentation (VERSION *)
TITRE
    Probleme sur les equations de la doc V6.03.128
FONCTIONNALITE
   On corrige les équations. En réalité on les passe du format OLE au format Open Office.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
    *
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 014806 DU 2010-03-17 17:02:34
TYPE evolution concernant Site web (VERSION )
TITRE
    Diffusion de Salome-Meca sur www.code-aster.org
FONCTIONNALITE
   Suite à la décision de diffusion en libre de Salome-Meca, on apporte les modifications
   suivantes au site pour rendre cette diffusion effective.
   
   - Accueil du site : 
   On précise que le site est dédié à Code_Aster et Salome-Meca
   
   - Presentation : 
   Ajout d'une page de présentation de Salome-Meca reprenant le texte de la rubrique
   présentation et la page fonctionnalité du site intranet Salome-Meca.
   Ajout du film sur la pompe primaire dans la page exemple d'études.
   Ajout de Salome dans la page outils.
   
   - Documentation :
   Ajout d'une page Salome-Meca (avec une version 
   intranet et une version extranet limitée à doc U + forma01)
   
   - Forum :
   Ouverture des forums installation et usage pour Salome-Meca
   
   - Téléchargement : 
   Ajout page de téléchargement de Salome-Meca avec versions internes (hébergées sur le site)
   et versions externes (hébergement externe) avec mise en garde sur les versions à utiliser.
   
   - Support : 
   Formations : ajout Salome
   Précision sur AOM : cela est étendu à Salome-Meca
   
   Le site Salome-Meca est encore accessible mais est un coquille vide qui renvoie aux
   nouvelles pages. Son accès sera à supprimer.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
    *
NB_JOURS_TRAV  : 10.0
--------------------------------------------------------------------------------
RESTITUTION FICHE 014118 DU 2009-10-28 18:01:04
TYPE evolution concernant Documentation (VERSION )
TITRE
    V0.01.01 - Doc a mettre a jour
FONCTIONNALITE
   Suite au passage dans à la GED, on met à jour le document v0.01.001.
   
   On corrige les styles et précise certaine nouveautés (suppression du paragraphe
   "fonctionnalités testées", modification du tableau des valeurs testées).
   
   Par ailleurs, on met en conformité la doc a3.02.02 "Comment organiser un cas test et
   rédiger sa documentation".
   
   Un mail sera envoyé à IdentAster pour RE-dire que ce document est LE document à utiliser
   pour la rédaction de nouvelles doc de tests.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
    *
NB_JOURS_TRAV  : 1.0
--------------------------------------------------------------------------------
RESTITUTION FICHE 014038 DU 2009-10-14 09:39:42
TYPE evolution concernant Site web (VERSION )
TITRE
    Cle usb/site web
FONCTIONNALITE
   Le but de cette fiche était de s'assurer que les fichiers distribués sur la clé USB à
   l'occasion des 20 ans de Code_Aster étaient disponibles sur le site.
   
   On ajoute donc dans Présentation > Exemples d'études le document regroupant toutes les
   fiches études, classées par thème.
   
   Par ailleurs, lorsqu'on aura récupéré la plaquette "20 ans", on la déposera sur le site.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
    *
NB_JOURS_TRAV  : 1.0
--------------------------------------------------------------------------------
RESTITUTION FICHE 012178 DU 2008-06-10 15:30:29
TYPE evolution concernant Code_Aster (VERSION )
TITRE
    AR01 - Sauvegarde de bases modales dans un format stable et portable
FONCTIONNALITE
   Demande :
   =======
   On souhaite pouvoir stocker une base modale dans un format stable et portable.
   
   Proposition :
   ===========
   Le format stable et portable sera le format MED. Jusqu'ici le développement n'a pas été
   fait car on pensait pouvoir stocker dans le fichier MED les nombreux paramètres contenu
   dans les sd de la dynamique.
   
   On change notre fusil d'épaule et on décide de faire comme pour le format IDEAS. On ne
   stocke que les champs, les paramètres sont reconstruits à partir des données utilisateurs.
   
   Détails :
   =======
   Pour que ça marche il faut indiquer que 
   - dans le cas de la dynamique, la variable d'accès est la fréquence et non l'instant
   (sinon plantage dans op0150) ;
   - remplir le .REFD avec les données utilisateurs (sinon plantage à l'utilisation de la base).
   
   A l'occasion on a réorganisé op0150 en le découpant (1200 lignes avant, 450 lignes
   maintenant). Des routines dédiées existait déjà pour le format IDEAS (lridea et lect58).
   On introduit lrensi pour le format ENSIGHT et lrfmed pour le format MED. Enfin lrcomm est
   introduit pour le remplissage du modèle, du cara_elem et du cham_mater. On note que le
   remplissage du .REFD est maintenant fait dans lrrefd et est commun aux formats IDEAS et
   MED (comportement homogène).
   
   Pour le format MED, on a besoin de certaines caractéristique pour les champs à lire qui
   sont maintenant dans la routine carcha en attendant un enrichissement des catalogues.
   
   On risque de planter, comme pour le format IDEAS, dans certains opérateurs qui utilisent
   les paramètres de la SD. Ce problème sera complètement levé avec MED 3.
   
   Impacts :
   =======
   carcha.f
   lrcomm.f
   lrensi.f
   lrfmed.f
   lridea.f
   lrrefd.f
   op0150.f
   refe99.f
   
   sdnv107a.comm
   sdll14a.comm
   sdll14b.comm
   sdll14c.comm
   sdll113b.comm
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : U7.02.01
VALIDATION
    tests LIRE_RESU
NB_JOURS_TRAV  : 5.0
--------------------------------------------------------------------------------
RESTITUTION FICHE 008610 DU 2005-04-22 00:00:00
TYPE evolution concernant Documentation (VERSION 7.4)
TITRE
    consequences resorption des docs U5
FONCTIONNALITE
   Après la suppression de la doc U5, il restait des références à cette doc dans les
   documents suivants :
   u7.02.01
   u4.81.21
   u4.74.01
   u2.06.09
   u2.05.01
   u1.03.00
   u0.00.01
   r5.01.03
   r4.05.03
   d4.06.08
   
   Ces références ont été trouvées avec un script dézippant les odt et cherchant dans le
   content.xml.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : u7.02.01, u4.81.21, u4.74.01, u2.06.09, u2.05.01, u1.03.00, u0.00.01, r5.01.03, r4.05.03, d4.06.08
VALIDATION
    *
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR desroches    DESROCHES Xavier       DATE 10/11/2010 - 04:17:05

--------------------------------------------------------------------------------
RESTITUTION FICHE 015557 DU 2010-09-16 09:17:11
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
    En NEW10.2.15, le cas-test ssls126b s'arrete pour une erreur syntaxique sur Bull, Rocks et Calibre 5.
FONCTIONNALITE
   En NEW10.2.15, le cas-test ssls126b s'arrete pour une erreur syntaxique sur 
   Bull, Rocks et Calibre 5.
   Le message d'erreur obtenu sur Rocks est le suivant:
   
         ! Règle(s) non respectée(s) : - Il ne faut qu un mot cle parmi : 
   ('INST', ! 'NUME_ORDRE')  
   
   Correction : on enlève les défauts aux mots-clé INST et NUME_ORDRE dans le 
   catalogue de la commande et dans le python, si aucun des 2 mots-clé n'est 
   présent, on traite le premier numéro d'ordre calculé.
   
   Dans la doc U on enlève les défauts.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : U4.81.23
VALIDATION
    ssls126b
NB_JOURS_TRAV  : 1.0
--------------------------------------------------------------------------------
RESTITUTION FICHE 015545 DU 2010-09-15 14:17:25
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
    CALC_ELEM / EPOT_ELEM_DEPL pour elements de Fourier
FONCTIONNALITE
   Une anomalie découverte à l'occasion du chantier CALC_CHAMP :
   
   L'option EPOT_ELEM_DEPL a été programmée pour les éléments de Fourier, elle est 
   appelable par CALC_ELEM (par exemple dans sslv109c).
   
   Dans le catalogue de cette option, on utilise le numéro d'harmonique mais ce 
   numéro est mis à 0 dans le fortran et l'utilisateur n'a pas aucun mot clé pour 
   choisir son harmonique.
   
   Dans le fortran de te0286.f, on n'a pas l'impression que l'on se serve de NH. 
   Est-ce normal ?
   
   De façon plus générale, est-il normal que l'on puisse passer dans CALC_ELEM 
   avec une sd de type fourier_elas  sans fournir de numéro d'harmonique ?
   
   Réponse de Jacques :
   -------------------
   
   Après discussion avec Xavier :
   1) je m'étais trompé en regardant le te0286 : on utilise bien le numéro 
   d'harmonique de Fourier.
   2) La récupération de ce numéro d'harmonique a lieu dans la routine mecalm.f :
                 IF (TYSD.EQ.'FOURIER_ELAS'.OR.TYSD.EQ.'COMB_FOURIER') THEN
                   CALL RSADPA(RESUCO,'L',1,'NUME_MODE',IORDR,0,JNMO,K8B)
                   CALL MEHARM(MODELE,ZI(JNMO),CHHARM)
                 END IF 
   
   Cela veut dire que dans la nouvelle commande CALC_CHAMP, il faudra faire la 
   meme petite glute avant d'appeler CALCUL pour que le champ CHHARM soit bien 
   créé. 
   
   Cette fiche est donc "sans suite".
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
    aucune
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR devesa       DEVESA Georges         DATE 10/11/2010 - 03:28:35

--------------------------------------------------------------------------------
RESTITUTION FICHE 015518 DU 2010-09-09 08:50:15
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
    En NEW10.2.14, le cas-test miss06c est NOOK sur Bull.
FONCTIONNALITE
   Depuis la NEW10.2.14, le cas-test miss06c est NOOK sur Bull.
   Il y aussi problème sur calibre mais là on reste dans la 
   tolérance.
   Le problème intervient quand on doit recalculer l'accélération 
   initiale du résultat EVOL à partir des champs de déplacements et 
   vitesses résultats de EVOL0 donnés dans le mot clé facteur 
   ETAT_INIT de DYNA_LINE_TRAN. Cela revient à inverser par la 
   matrice M le second membre à l'instant initial:
   F = F0 - K.U0 - C.V0
   Or U0 et V0 sont obtenus à partir d'une copie via VTCOPY des 
   champs initiaux en donnée.
   Ce qui a changé entre les versions STA10 et NEW10 depuis la 
   10.2.14, c'est que U0 et V0 voyaient leurs termes de DDLs 
   Lagrange mis à zéro avant produit matriciel en STA10 et qu'ils 
   les conservent inchangés maintenant.
   Ceci est lié au fonctionnement de VTCOPY de sorte que cette 
   routine fait qu'on conserve les Lagrange quand les numérotations 
   sont semblables (pas nécessairement identiques), et qu'on les 
   ignore quand les numérotations sont clairement différentes. 
   La modif en NEW10.2.14 semble avoir élargi les conditions de 
   ressemblance entre numérotations d'où le piège.
   La correction de Jacques dans VTCOPY par remise à zéro 
   systématique des Lagrange via le traitement de la fiche 15633 a 
   permis de résoudre le problème.
   On remarquera qu'il suffisait de renseigner dans ETAT_INIT le 
   mot clé ACCE_INIT avec un champ extrait de EVOL0 pour ne pas 
   avoir à recalculer l'accélération initiale du résultat EVOL.
   Ainsi on n'aurait pas eu le bug mais on ne l'aurait pas détecté 
   non plus.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  OUI   DEPUIS : 10.2.14
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    test miss06c
NB_JOURS_TRAV  : 1.0
--------------------------------------------------------------------------------
RESTITUTION FICHE 015690 DU 2010-10-07 13:48:27
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
    problème avec EXCIT_GENE de DYNA_NON_LINE
FONCTIONNALITE
   Il y a un problème avec EXCIT_GENE de DYNA_NON_LINE.
   Il semble bien que depuis la V9.3.12, l'option EXCIT_GENE de 
   DYNA_NON_LINE ne fonctionne plus en V9 et en V10. Elle marche 
   toujours en V8 mais avec DYNA_TRAN_EXPLI.
   Pour mémoire cette option permet d'introduire des forces 
   généralisées sur un modèle condensé modalement alors qu'on 
   résout avec l'option PROJ_MODAL et MASS_GENE sur un modèle non 
   linéaire plus réduit mais non condensé modalement.
   De plus avec ces modifs, ça ne pouvait plus marcher avec 
   EXCIT_GENE pour diverses raisons:
   En V9: - dans NMRESG la variable FORGEN n'est plus définie avant 
   d'être utilisée.
   En V10: - dans NDYNKK il y a conflit de nom entre les variables 
   FORGEN et FONGEN dû à un suffixe commun .FOG (avant .FONG 
   et .FORG); 
           - dans NMRESG le nom de l'objet VALFON vient écraser 
   indûment sa valeur initiale et on a ensuite un problème 
   d'ouverture d'objet non créé.
   Enfin, c'est carrément l'option PROJ_MODAL et MASS_GENE qui est 
   en danger, ce qui n'est pas mis en évidence par le cas test 
   SDNV107A, car selon la taille du problème, on peut avoir un 
   débordement de mémoire dans MXMOAM où on recopie un vecteur de 
   la taille du problème réduit dans un vecteur de la taille du 
   problème global. Cela est dû au résultat de l'appel à MGINFO qui 
   ne renvoie pas la bonne taille, celle du problème réduit.
   Il faut donc aussi corriger MGINFO.
   En outre, il y a un autre bug nécessitant de corriger la routine 
   NDLOAM car dans les calculs avec l'option PROJ_MODAL et 
   MASS_GENE, la reprise d'un calcul précédent ne permet pas de 
   récupérer ses champs généralisés calculés et on repart avec des 
   champs généralisés nuls. Ce qui peut créer des résultats faux. 
   
   On valide le test du mot clé EXCIT_GENE par l'introduction d'une 
   nouvelle modélisation SDNV107C où on permute les rôles d'une 
   zone condensée et d'une zone non linéaire par rapport à 
   SDNV107A, ce qui permet d'introduire le chargement par 
   EXCIT_GENE sur la zone condensée. On compare un résultat de 
   déplacement par rapport à un résultat AUTRE_ASTER obtenu par un 
   calcul sur le modèle complet.
   La correction de la reprise de calcul est également testée par 
   ce cas test en fractionnant le calcul en 2 passes pour avoir une 
   reprise.
RESU_FAUX_VERSION_EXPLOITATION    :  OUI   DEPUIS : 9.3.12
RESU_FAUX_VERSION_DEVELOPPEMENT   :  OUI   DEPUIS : 9.3.12
RESTITUTION_VERSION_EXPLOITATION  :  OUI
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : V5.03.107
VALIDATION
    test sdnv107c
NB_JOURS_TRAV  : 2.5
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR flejou       FLEJOU Jean Luc        DATE 10/11/2010 - 05:39:40

--------------------------------------------------------------------------------
RESTITUTION FICHE 015604 DU 2010-09-27 12:20:20
TYPE evolution concernant Code_Aster (VERSION )
TITRE
    pouvoir creer le champ de geometrie et le champ neutre aux points de Gauss pour les elements de barre
FONCTIONNALITE
   Pour pouvoir créer des champs 'NEUT' aux points de Gauss des éléments BARRE, il suffit
   d'ajouter dans le catalogue des BARRE :
   
   EGGEOM_R = GEOM_R   ELGA__ RIGI    (X        Y        Z )
   EGINST_R = INST_R   ELGA__ RIGI    (INST     )
   EGNEUT_F = NEUT_F   ELGA__ RIGI    (X[30]    )
   EGNEUT_R = NEUT_R   ELGA__ RIGI    (X[30]    )
   
   TOU_INI_ELGA 99    IN__   NGEOMER  PGEOMER
                      OUT__  EEFGEGA  PSIEF_R  ZVARIPG  PVARI_R  EGGEOM_R PGEOM_R
                             EGINST_R PINST_R  EGNEUT_F PNEUT_F  EGNEUT_R PNEUT_R
   
   Validation : passage d'un cas test perso (ficher joint)
   
   La Fiche 15661, généralise la demande aux ELGA, ELNO, NOEU, et pour les
   POU_D_[E|EM|T|TG|TGM], POU_C_T, BARRE, CABLE.
   Les cas tests de validation seront réalisés lors de la fiche 15661.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    cas test perso
NB_JOURS_TRAV  : 0.3
--------------------------------------------------------------------------------
RESTITUTION FICHE 015602 DU 2010-09-27 09:14:26
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
    Message errone
FONCTIONNALITE
   Lorsque l'on utilise des éléments multi-fibres et que l'on oublie de mettre
   ALGO_1D="DEBORST" dans DEFI_COMPOR/MULTIFIBRE
   
   On a le message suivant :
      !-------------------------------------------------------------------------!
      ! <EXCEPTION> <ALGORITH6_81>                                              !
      !                                                                         !
      ! utiliser ALGO_1D="DEBORST" sous COMP_INCR pour le comportement  IRRAD3M !
      !-------------------------------------------------------------------------!
   
   Ce n'est pas sous COMP_INCR qu'il faut mettre ALGO_1D="DEBORST" mais dans
   DEFI_COMPOR/MULTIFIBRE
   
   Pour résoudre la fiche, ALGORITH6_81 doit avoir 2 arguments :
   - le nom du comportement comme avant
   - un argument contenant soit COMP_INCR soit DEFI_COMPOR/MULTIFIBRE
   
   
   Modif fortran : nmco1d.f comcq1.f pmfcom.f te0248.f
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    cas test perso
NB_JOURS_TRAV  : 0.2
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR geniaut      GENIAUT Samuel         DATE 10/12/2010 - 03:54:04

--------------------------------------------------------------------------------
RESTITUTION FICHE 013550 DU 2009-06-22 13:55:36
TYPE evolution concernant Code_Aster (VERSION )
TITRE
    DEF2 - Nouveau critere de divergence (event-driven)
FONCTIONNALITE
   Besoin :
   -------
   
   Dans de nombreuses études, on aimerait pourvoir re-découper le pas de temps lorsque l'on
   rencontre un  "problème". Il est déjà possible de provoquer un re-découpage en cas d'échec
   du contact, de l'intégration de la loi de comportement, du pilotage, de la factorisation
   (matrice singulière) ou bien du dépassement du nombre maximal d'itérations de Newton autorisé.
   On aimerait pouvoir étendre la notion de "problème" à quelque chose de plus général, et
   plus paramétrable.
   Notamment, la fiche 8088 souhaite qu'à convergence, certains critères physiques (porosité
   < 1...) soient également satisfaits, en plus de l'équilibre. Si ce n'est pas le cas, on
   aimerait re-découper.
   La fiche 9332 souhaite pouvoir re-découper en cas d'interpénétration lors d'impact.
   De manière générale, certains codes (Zébulon par ex) vérifient que certaines grandeurs
   n'est pas trop bougées entre 2 pas de temps. Si ce n'est pas le cas, on re-découpe.
   
   
   Problème :
   ----------
   
   En résumé, on souhaite pouvoir définir des nouveaux critères de divergence (cad des
   critères qui provoqueront un re-découpage).
   
   Le besoin est de s'assurer qu'à l'équilibre (à convergence donc) on vérifie des conditions
   supplémentaires, comme par ex dp <= dp_max, ou porosité < 1
   Si c'est le cas, on passe au pas de temps suivant.
   Si ce n'est pas le cas, on re-découpe le pas de temps et on recommence.
   
   Cette fiche a pour objectif de développer le cadre architectural pour l'ajout de
   nouveaux critères de divergence.
   - elle est un préalable à la fiche 8088 qui concerne l'ajout de critères de divergence
   pour la THM ainsi qu'à la fiche 9332 relative à un critère de divergence pour les collisions.
   - il faudra donc veiller à ce que l'architecture proposée soit suffisamment générale pour
   répondre aux besoins de chaque problématique (ainsi que celle énoncées à titre d'ex dans
   les précédents messages)
   
   
   
   Solution :
   ----------
   
   Lors de la RTA, il a été décidé que les critères supplémentaires à vérifier peuvent être
   de 2 types :
   
   - implicites (liés intrinsèquement aux fonctionnalités utilisées) : par ex en THM, pour
   certaines lois de comportement, que certains critères physiques soient vérifiés. Cette
   vérification sera faite dans la loi de comportement (au cas par cas) à toutes les
   itérations. En cas de violation des critères, un code retour = 2 sera émis par la LdC. Le
   controle du code retour et le re-découpage si codret = 2 sera automatique (de même manière
   que le re-découpage par dépassement du nombre d'itérations de Newton maxi).
   
   - explicites (spécifiés par l'utilisateur avec des mot-clés adéquats). La déclaration des
   ces critères supplémentaires se fait en même temps que la déclaration des méthodes de
   sous-découpage, dans la commande DEFI_LIST_INST / ECHEC. On peut définir autant
   d'occurrences du mot-clé ECHEC que l'on souhaite, avec à chaque fois la déclaration d'une
   cause d'échec et d'une méthode de sous-découpage. Remarque : les méthodes de
   sous-découpage peuvent être donc différentes entre 2 occurrences de ECHEC. Par contre, la
   notion de SUBD_NIVEAU est une notion globale. Donc on prend dans les faits le max des
   SUBD_NIVEAU définis comme unique SUBD_NIVEAU.
   
   
       ECHEC  =FACT(statut='d',max='**',
   
         EVENEMENT    
   =SIMP(statut='f',typ='TXM',into=("ERREUR","DELTA_GRANDEUR"),defaut="ERREUR",max=1 ),
   
            b_edelta           =BLOC(condition = "EVENEMENT == 'DELTA_GRANDEUR' ",fr=" ",   
          
   #      event-driven : on sous-decoupe si l'increment d'une composante d'un champ depasse
   le seuil
         VALE_REF          =SIMP(statut='o',typ='R',max=1),
         NOM_CHAM         
   =SIMP(statut='o',typ='TXM',into=("DEPL","VARI_ELGA","SIEF_ELGA",),max=1),
         NOM_CMP           =SIMP(statut='o',typ='TXM',max=1),
                                     ),
   
   
         SUBD_METHODE    =SIMP(statut='f',typ='TXM',into
   =("AUCUNE","UNIFORME","EXTRAPOLE"),defaut="UNIFORME",max=1,
                               fr="Méthode de subdivision des pas de temps en cas de
   divergence"),
   
             ....
   
   )    
   
   Les critères implicites sont gérés avec les causes d'erreur déjà existantes :
   DEFI_lIST_INT / ECHEC / EVENEMENT = 'ERREUR'.
   Cette cause d'échec est activée par défaut. Même si on ne trouve aucune occurrence de
   ECHEC / EVENEMENT = 'ERREUR', le code en rajoute automatiquement une avec les paramètres
   actuels par défaut. Ainsi, pour débrayer cette cause de re-découpage, il faut débrayer
   manuellement chacun des mot-clé associés (par exemple ARRET = 'NON' ou STOP_SINGULIER =
   'NON'), ou bien spécifier SUBD_METHODE = 'AUCUNE' lors de l'occurrence ECHEC / EVENEMENT =
   'ERREUR' .
   
   Le seul critère explicite pour le moment est le suivant :
   on re-découpe si l'increment d'une composante d'un champ dépasse un seuil fixé (EVENEMENT
   == 'DELTA_GRANDEUR', même syntaxe que pour les méthodes d'adaptation du pas de temps).
   L'utilisation doit alors remplir les mot-clés : VALE_REF (valeur du seuil), NOM_CHAM (nom
   du champ, parmi "DEPL", "VARI_ELGA" et "SIEF_ELGA") et NOM_CMP (nom de la composante).
   
   Exemple n°1 avec une loi VMIS_ISOT_LINE :
   
                            ECHEC=_F(EVENEMENT='DELTA_GRANDEUR',
                                     VALE_REF=0.1e-2,
                                     NOM_CHAM='VARI_ELGA',
                                     NOM_CMP ='V1'),
   
   permet de re-découper si l'incrément de la plasticité cumulée entre 2 pas de temps dépasse
   0,1%
   
   Exemple n°2 :
   
                            ECHEC=(
                                   _F(EVENEMENT='DELTA_GRANDEUR',
                                      VALE_REF=5.e-2,
                                      NOM_CHAM='DEPL',
                                      NOM_CMP ='DX',  
                                      SUBD_NIVEAU=10),
                                   _F(EVENEMENT='DELTA_GRANDEUR',
                                      VALE_REF=5.e-2,
                                      NOM_CHAM='DEPL',
                                      NOM_CMP ='DY'),
                                  )
   
   permet de re-découper si la norme (norme sup) du déplacement varie de plus de 5e-2 entre 2
   pas de temps.
   
   (Rq : dans les 2 ex précédents, bien que EVENEMENT='ERREUR' ne soit pas présent, il sera
   quand même activé en dur)
   
   
   Validation :
   ------------
   
   1) test ssnv138d : Plaque Cantilever en grandes rotations soumise à un moment.
   
   Dans le test initial, on prend une liste d'instants composée de 1200 instants (temps CPU
   =120s) pour atteindre une erreur finale de 30% sur la flèche.
   
   On définit une liste d'instant minimale :
   TEMPS=DEFI_LIST_REEL(DEBUT=0.,
                        INTERVALLE=(
                                _F( JUSQU_A =  0.005,   NOMBRE = 1),
                                _F( JUSQU_A =  0.3,   NOMBRE = 1),
                                _F( JUSQU_A =  0.6,   NOMBRE = 1),
                                _F( JUSQU_A =  1.0,   NOMBRE = 1),
                                _F( JUSQU_A =  3.0,   NOMBRE = 1),
                                _F( JUSQU_A =  6.0,   NOMBRE = 1),
                                ),
                              );
   
   On reste en gestion manuelle du pas de temps (pas d'accélération), car dans ce test
   l'intégration du comportement est immédiate, il n'y a donc pas interet à accélérer si le
   nombre d'itérations de Newton est faible (car cela sera toujours le cas).
   
   On remarque d'abord que cette liste d'instants simple permet de mener le calcul jusqu'au
   bout (en qq secondes). Cependant, l'erreur au denier instant sur la flèche atteint 950%
   (comparée à la solution analytique).
   
   En mettant en place le critère présenté dans l'exemple n°2, (max(DX,DY) < 5e-2), on
   réalise 880 calculs (temps CPU=80s) et on obtient 60% d'erreur. On a donc diminué l'erreur
   d'un facteur 15, mais on reste moins précis qu'avec la liste d'instants initiale.
   
   En restreignant le critère : max(DX,DY) < 3e-2, on réalise 2081 calculs (temps CPU=160s)
   et on obtient 35% d'erreur, précision comparable au test initial, mais en étant un peu
   plus plong.
   
   Bilan
   .....................nb de calculs...temps CPU.....erreur finale
   version initiale........1200...........120.............30
   max(DX,DY) < 5e-2........880............80.............60
   max(DX,DY) < 3e-2.......2080...........160.............35
   
   On propose de restituer ce test (ssnv138e) avec le critère max(DX,DY) < 3e-2
   
   
   2) ssnp15a : Plaque en traction-cisaillement - VMIS_ISOT_LINE et VMIS_ECMI_LINE
   
   Dans le test initial, on prend une liste d'instants assez détaillée :
   L_INST=DEFI_LIST_REEL(
                  DEBUT=0.0,INTERVALLE=(
                   _F( JUSQU_A = 0.1,     NOMBRE = 1),
                   _F( JUSQU_A = 0.9,     NOMBRE = 10),
                   _F( JUSQU_A = 1.0,     NOMBRE = 1),
                   _F( JUSQU_A = 2.0,     NOMBRE = 40),
                   _F( JUSQU_A = 3.0,     NOMBRE = 1))
                 )
   temps CPU pour un seul STAT_NON_LINE : 6s
   erreur finale sur EPSXY : 0,6% (comparé à une solution semi-analytique)
   
   On définit une liste d'instant minimale :
   L_INST=DEFI_LIST_REEL(
                  DEBUT=0.0,INTERVALLE=(
                   _F( JUSQU_A = 0.1,     NOMBRE = 1),
                   _F( JUSQU_A = 0.9,     NOMBRE = 1),
                   _F( JUSQU_A = 1.0,     NOMBRE = 1),
                   _F( JUSQU_A = 2.0,     NOMBRE = 1),
                   _F( JUSQU_A = 3.0,     NOMBRE = 1))
                 )
   
   Pour les mêmes raisons que tout à l'heure, on reste en gestion manuelle du pas de temps
   (pas d'accélération).
   
   On remarque d'abord que cette liste d'instants simple permet de mener le calcul jusqu'au
   bout (en qq secondes). Cependant, l'erreur au denier instant sur EPSXY atteint 16%.
    
   En mettant en place le critère présenté dans l'exemple n°1, (DP < 0,1%), on réalise 110
   calculs (temps CPU=10s) et on obtient 0.5% d'erreur. On est donc aussi précis qu'avec la
   liste d'instants initiale, mais pour un temps 2 fois plus long.
   
   Ce test ne sera pas restitué.
   
   
   Impact :
   --------
   
   op0070.f, nmcrsu.f, nmconv.f, nmdcin.f, nmdeco.f, dideco.f (impacts mineurs)
   dicrec.f (suppression)
   nmevdr.f (ajout : routine principale de la gestion des event-driven)
   extdch.f (ajout : calcul de l'extremum de l'increment d'un champ)
   nmadat.f (pour ajout des commentaires des variables I/O)
   nmcadt.f (mise en commun du calcul de l'extremum de l'incrément d'un champ)
   
   defi_list_inst.capy
   
   discretisation.py
   
   
   En résumé :
   ------------
   
   Cette fiche a permis de pouvoir re-découper le pas de temps lorsque certains critères ne
   sont pas vérifiés à convergence (critères implicites, physiques, liées aux loi de
   comportement par ex, mais aussi critères explicites définis par l'utilisateur).
   On a développé le critère basé sur le dépassement d'un seuil. 
   L'architecture est prête à recevoir d'autres critères (cf. fiches 8088, 9332...).
   Niveau performances, cette fonctionnalité est moins rapide (à précision finale fixée)
   qu'une définition in extenso d'une liste d'instants déjà adaptée.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : V6.04.138, U4.34.03
VALIDATION
    ssnv138e
NB_JOURS_TRAV  : 6.0
--------------------------------------------------------------------------------
RESTITUTION FICHE 015639 DU 2010-09-30 09:13:53
TYPE anomalie concernant Code_Aster (VERSION 10.2)
TITRE
    En NEW10.2.17, le cas-test sslv317a est NOOK sur Rocks et Calibre 5.
FONCTIONNALITE
   Problème :
   ----------
   
   En NEW10.2.17, le cas-test sslv317a est NOOK sur Rocks et Calibre 5.
   A titre d'exemple les tests NOOK sont les suivants:
   
   "--------------------------------------------------------------------------------
    ---- TABLE            NOM_PARA         TYPE_TEST
         TAB_KG           K1_LOCAL         MAX
         REFERENCE        LEGENDE          VALE_REF         VALE_CAL         ERREUR         
    TOLE            
   NOOK  NON_REGRESSION   XXXX             79267.8          79577.070328489  0.39%          
    0.010%          
     
   
   --------------------------------------------------------------------------------
    ---- TABLE            NOM_PARA         TYPE_TEST
         TAB_KG           K1_LOCAL         MIN
         REFERENCE        LEGENDE          VALE_REF         VALE_CAL         ERREUR         
    TOLE            
   NOOK  NON_REGRESSION   XXXX             45473.0          45895.096588929  0.93%          
    0.010%          
   
   
   
   
   Solution :
   ----------
   
   Le test porte sur les valeurs MAX et MIN de KI le long du fond de fissure au bout de 2
   itérations de propagation avec la méthode maillage.
   On augmente la tolérance jusqu'à 1%.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    sslv317a
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------
RESTITUTION FICHE 015331 DU 2010-07-13 10:30:12
TYPE anomalie concernant Code_Aster (VERSION 10.2)
TITRE
    X-FEM : plantage avec des PENTA15 (NEW 10.2.6)
FONCTIONNALITE
   Problème :
   ----------
   
   Ci-joint un calcul de sous-épaisseur en 3d avec X-FEM, avec des PENTA15.
   Ce calcul qui tourne en STA10 plante en NEW10 dans STAT_NON_LINE avec le message suivant :
   
   <EXCEPTION> <ALGORITH2_59>
    
   La transformation géométrique est singulière pour la maille : M11168
   (jacobien = 0.)
   
   
   
   Solution :
   ----------
   
   En NEW 10.2.17 sur bull, le calcul tourne.
   Pour preuve, en PJ, image de la déformée.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    etude fournie
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------
RESTITUTION FICHE 015679 DU 2010-10-05 16:11:10
TYPE anomalie concernant Code_Aster (VERSION 10.3)
TITRE
    RUPT : Bug dans POST_K1_K2_K3 en NEW10
FONCTIONNALITE
   Problème :
   ----------
   
   Plantage dans POST_K1_K2_K3 en NEW10, lors de l'impression d'un message d'Alarme.
   
   
   Solution :
   ----------
   
   Lors de ma dernière restit sur POST_K1_K2_K3, j'ai tout simplement oublier d'importer les
   UTMESS dans les sous-fonctions.
   Ce qui fait que dès que l'on veut écrire un message 'A' ou 'F', le code plante !
   Je corrige
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    test fourni
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------
RESTITUTION FICHE 015684 DU 2010-10-06 14:04:39
TYPE express concernant Code_Aster (VERSION 10.3)
TITRE
    X-FEM : meilleur critere d'erreur pour RAFF_XFEM
FONCTIONNALITE
   Contexte :
   ----------
   
   Dans la fiche 15272, un utilisateur se plaint que le champ de sortie de RAFF_XFEM n'est
   pas très parlant.
   
   En effet, pour une fissure, RAFF_XFEM calcule le champ 1/exp(r) où r est la distance au
   fond de fissure.
   
   Or 1/exp(r) n'a rien de physique. La raison de cette formule est liée aux contraintes
   d'Homard, qui veut en entrée un champ où les valeurs les plus grandes seront celles
   raffinées en 1er. Au début, j'avais introduit le champ err =
   -r, qui répond à cette contrainte (mais qui est négatif partout). Pierre Badel m'avait
   conseillé l'inverse de l'exp, ce que je trouvais plus élégant car borné entre 0 et 1. Mais
   à l'utilisation, c'est finalement moins pratique.
   De plus, pour des grandes valeurs de r, exp(r) explose et provoque un sale plantage.
   ex : maillage en mm, on peut avoir r = 710, et exp(710) provoque un overflow...
   
   ce bug est déjà apparu, et une solution d'urgence a été de faire une homothétie de 1/1000
   du maillage (CREA_MAILLAGE), de lancer RAFF_XFEM et MACR_ADAP_MAIL, puis refaire
   l'homothétie dans l'autre sens sur le maillage raffiné...
   
   En fait, l'idéal serait u = r et pouvoir
   dire à Homard de raffiner les mailles où les valeurs sont les plus petites -> fiche 15421
   Mais on me dit que ce dvt, aussi simple soit-il, ne sera pas réalisé avant la STA10.4, et
   même p-e pas du tout.
   
   
   Besoin : 
   --------
   
   Donc le but de cette fiche est simplement de changer la formule de l'erreur pour 
   1) qu'elle soit conforme aux exigences actuelles d'Homard
   2) qu'elle ne provoque pas de plantage (overflow, division par 0...)
   
   Cette fiche n'a pas pour but de répondre à toutes les attentes de la fiche 15272
   
   
   
   Solution :
   ----------
   
   Après avoir étudiés les différentes possibilités de formules, on revient à la formule
   initiale : 
   erreur = -r
   On a donc un champ d'erreur à valeurs négatives partout.
   Pour raffiner sur les valeurs proches de 0, donc les valeurs max (au sens mathématiques),
   il faut obligatoirement dire à MACR_ADAP_MAIL :
                        TYPE_VALEUR_INDICA = 'V_RELATIVE',
   
   sinon, par défaut,  TYPE_VALEUR_INDICA = 'V_ABSOLUE', et on raffine les valeurs max en
   valeur absolue (ce qui n'est pas du tout ce qu'on cherche à faire ici !).
   
   Impact :
   --------
   
   sslp317a.comm  sslv317a.comm  ssnv173k.comm  ssnv185r.comm
   pour rajouter TYPE_VALEUR_INDICA = 'V_RELATIVE'.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : U7.03.51
VALIDATION
    sslp317a  sslv317a  ssnv173k  ssnv185r
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 015642 DU 2010-09-30 13:16:05
TYPE anomalie concernant Code_Aster (VERSION 10.3)
TITRE
    X-FEM : Critere volumique d'elimination des ddls heaviside
FONCTIONNALITE
   Problème :
   ----------
   
   Suite à la restitution de la fiche 15392, Maximilien vient d'identifier 
   un problème sur l'élimination des ddls Heaviside néfastes
   (ceux qui pourraient conduire à des pertes de décimales lors de la facto).
   
   Le critère actuellement en place est calculé dans MODI_MODELE_XFEM (op0113 -> te0514).
   Puis la liste des ddls à éliminer est déterminer dans xstan2.f
   
   Si un maille est repérée comme maille à pb, alors on va re-calculer les lsn et lst suite à
   l'annulation du ddl H et au changement de statut du noeud.
   
   Pour cela, on boucle sur les mailles voisines.
   Si la maille à Pb est une maille de type XT, on risque de tomber sur une maille voisine
   classique.
   Cela était OK avant car le champ STANO (statut des noeuds) était défini partout, et valait
   0 sur les noeuds d'une maille classique.
   
   Depuis la restit 15392, le statut des noeuds n'est défini que sur les mailles X-FEM.
   
   D'ou plantage.
   
   
   Solution :
   ----------
   
   On retient la solution qui consiste à ne calculer le critère d'annulation des ddls H
   uniquement sur les mailles Heaviside. De cette manière, on est sur que les mailles
   voisines sont des mailles X-FEM.
   
   Dans le te0514, on utilise les attributs (comme cela est déjà fait dans ce TE) pour savoir
   si l'élément est un élément XH. Le test pour la calcul du critère devient alors :
         IF (NDIME.EQ.3 .AND. ENR(1:2).EQ.'XH') THEN
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    test perso
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------
RESTITUTION FICHE 015687 DU 2010-10-07 09:22:24
TYPE express concernant Code_Aster (VERSION 10.2)
TITRE
    X-FEM : cas test en diffusion intranet sans raison
FONCTIONNALITE
   Dans l'idée de la fiche 14271, je m'occupe des tests X-FEM en diffusion INTRANET alors
   qu'il n'y a aucune raison.
   
   passage en NIV_PUB_WEB='INTERNET' pour les tests suivants :
   
   ssnv173d.comm
   ssnv173e.comm
   ssnv173f.comm
   ssnv173g.comm
   ssnv173h.comm
   ssnv173j.comm
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    tests
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------
RESTITUTION FICHE 015242 DU 2010-06-22 07:48:41
TYPE anomalie concernant Code_Aster (VERSION 10.3)
TITRE
    X-FEM : bug probable dans le calcul de la contrainte pour la visu
FONCTIONNALITE
   Problème :
   -----------
   
   sur l'image ci-jointe, on visualise la contrainte de Von Mises après post-traitement
   spécifique pour X-FEM (POST_MAIL_XFEM  et POST_CHAM_XFEM).
   
   On voit des sauts de contraintes entre éléments qui peuvent paraître louches.
   
   Je crois que la validation de POST_CHAM_XFEM pour les contraintes laisse à désirer...
   
   
   
   Solution :
   ----------
   
   
   Le pb de visu ici vient du fait que l'on visualise des contraintes aux ELNO sur des TETRAs.
   Or les TETRA4 ont 1 seul point de Gauss, ce qui rend la contrainte assez changeante d'un
   élément à u autre.
   
   Un test 2D (basé sur le sslp318a) puis sa version 3d m'ont convaincu qu'il n'y avait pas
   de bug dans le calcul du champ de visu SIEF_ELGA par la commande POST_CHAM_XFEM.
   On a activé 5 couches d'éléments enrichis pour etre sur que la contrainte est OK, en
   comparant à la version 1 couche.
   (cf en PJ VMIS sur la plaque 3D en HEXA avec 5 couches d'éléments X-FEM en pointe de fissure)
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
    test perso
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 015695 DU 2010-10-08 09:33:24
TYPE express concernant Code_Aster (VERSION 10.3)
TITRE
    X-FEM : infos sur le fond de fissures
FONCTIONNALITE
   On ajoute les utilitaires suivants concernant les objets X-FEM
   
   
   Pour connaître le nombre d'objets fissures/interfaces X-FEM rattachés à un modèle :
   CALL DISMOI('F','NB_FISS_XFEM',MO,'MODELE',NFISS,K8B,IRET)
   
   Pour connaitre le nombre de fonds de fissure rattachés à une fissure X-FEM :
   CALL DISMOI('F','NB_FOND',FISS,'FISS_XFEM',NFON,K8B,IRET)
   
   Pour connaitre le nombre de points de tous les fonds de fissure rattachés à une fissure
   X-FEM :
   CALL DISMOI('F','NB_POINT_FOND',FISS,'FISS_XFEM',NBPTFF,K8B,IRET)
   
   
   
   impact : 
   dismmo.f, dismxf.f 
   xprcyc.f  xprdis.f  xprdom.f  xprvit.f (mise en oeuvre des appels)
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : D6.00.01
VALIDATION
    tests x-fem
NB_JOURS_TRAV  : 0.2
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR nistor       NISTOR Ionel           DATE 10/11/2010 - 04:55:12

--------------------------------------------------------------------------------
RESTITUTION FICHE 010976 DU 2007-06-13 13:05:26
TYPE evolution concernant Code_Aster (VERSION )
TITRE
    AR02 - sd_squelette et D4.06.01
FONCTIONNALITE
   Problème :
   ------------------------------------------------------------------------
   Lors d’un travail sur le catalogue de la sd_squelette, Jacques posait les questions suivantes sur son 
   contenu :                        
   1) Objet .CORRES :
      - quand existe-t-il ?
      - quelle longueur ?
      - quel contenu ?
   2) Objet .NOMSST :
      - quand existe-t-il ?
      - quelle longueur ?
      - quel contenu ? 
   
   Réponses :
   
   Après quelques recherches dans les sources et avec l’aide de quelques cas-tests, voilà les réponses :
   
   1.L’objet .CORRES :
   - c’est un objet facultatif, il existe seulement lorsqu’on crée un squelette en modifiant un ancien (mot clé 
   SQUELETTE est renseigné dans le catalogue de la commande). Dans ce cas, on va fusionner les nœuds des 
   interfaces (toutes les interfaces ou seulement celles données par l’utilisateur) selon un critère indiqué 
   derrière le mot-clé CRITERE. On effectue donc le « recollement »
   - La longueur de l’objet est  nbno-nbmoi avec nbno étant le nombre des nœuds du maillage inclus dans le 
   squelette ancien et nbmoi le nombre de nœuds fusionnés aux interfaces dynamiques (n’existe plus dans le 
   nouveau squelette)
   - Pour le nœud ino du squelette, .CORRES(ino) est le numéro du nœud du squelette initial 
   (avant "recollement").
   
   2. L’objet .NOMSST
   - c’est un objet facultatif , il existe dans le cas d ‘un squelette dit « classique » (squelette initial 
   lorsqu’on renseigne les sous-structures qui vont le former)
   - sa longueur est égale au nombre des sous-structures qui forment le squelette
   - Il contient les noms des sous-structures qui forment le squelette
   
   Ces informations seront insérées dans la doc d4.06.01
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : d4.06.01
VALIDATION
    neant
NB_JOURS_TRAV  : 0.3
--------------------------------------------------------------------------------
RESTITUTION FICHE 014190 DU 2009-11-17 10:19:15
TYPE evolution concernant Code_Aster (VERSION 10.2)
TITRE
    AR01 - troncature des noms de groupes de mailles dans DEFI_SQUELETTE
FONCTIONNALITE
   Problème :
   ----------------------------------
   Lorsqu'on met en oeuvre la technique de sous-structuration dynamique et on veut visualiser 
   les résultats sur un "squelette" on peut avoir le problème suivant qu'on présente à l'aide d'un 
   exemple:
   - Si SEC_1, SEC_2 sont des groupes de mailles dans le maillage initial, alors dans la construction 
   DEFI_SQUELETTE (si l’utilisateur indique TOUT=’OUI’ ou GROUPE_MA=( ‘SEC_1’, ‘SEC_2’), pour la sous-
   structure 'TABLE' on crée les noms correspondants pour les groupes de mailles du squelette TABLESEC_1 et 
   TABLESEC_2. Ensuite on tronque a 8 caractères ==> On crée donc TABLESEC et TABLESEC. Et voilà le conflit!
   
   Solution :
   
   On impacte tout d’abord la doc U4, l’emploi de l’option TOUT=’OUI’ fait l’objet d’une remarque car dangereux 
   si on exige de la performance plus tard dans la restitution sur base physique. On ajout donc un commentaire 
   pour attirer l’attention à l’utilisateur que la copie des noms des groupes de mailles vers le nouveau 
   squelette peut entraîner des conflit si la longueur totale nom_sous-structure + nom_groupe_maille dépasse 8 
   caractères.
   
   On blinde ensuite les sources :
   -pour chaque groupe de maille copié, on vérifie que la taille de la chaîne des caractères nom_sous-structure 
   + nom_groupe_maille. Si elle dépasse 8 caractères on va emettre une nouvelle alarme :
   
   SOUSTRUC2_10 :
   ‘Lors de la copie du groupe de mailles appartenant à la sous-structure, le nom qui lui sera affecté dans le 
   squelette dépasse 8 caractères. La troncature peut générer un conflit plus tard avec les noms des autres 
   groupes de mailles’
   
   Impact dans les sources :
   -------------------------------------
   -gma110.f
   -soustruc2.py
   
   Impact doc :
   --------------------------------------
   U4.24.01
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : U4.24.01
VALIDATION
    liste de cas-tests appelant DEFI_SQUELETTE
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR pellet       PELLET Jacques         DATE 10/11/2010 - 03:26:53

--------------------------------------------------------------------------------
RESTITUTION FICHE 015513 DU 2010-09-08 09:16:40
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
    la routine exlima est mal specifiee (et mal realisee)
FONCTIONNALITE
   Problème :
   ----------
   La routine exlima est imprudente : elle a en entrée le nom d'un mot clé facteur (MFAC)
   pour déterminer la liste des éléments finis définis sous MFAC/GROUP_MA et MFAC/MAILLE,
   mais comme elle n'a pas d'argument correspondant au numéro d'occurrence, elle se contente
   de scruter l'occurrence numéro 1.
                                                                                            
                                                                                            
                                          
   Corrections :
   -------------
   * On ajoute l'argument IOCC à la routine exlima.f et on modifie ses appelants.
   * On ajoute une nouvelle routine exlim3.f équivalente à exlima.f masi qui boucle sur
   toutes les occurrences du mot clé facteur pour fabriquer l'enveloppe de la liste des mailles.
     Cette routine est utilisée dans toutes les routines de POST_ELEM : peecin.f, peepot.f, ...
                                                                                            
                                                                                            
                                          
   Analyse pour les éventuels résultats faux :
   -------------------------------------------
   Les resultats ne peuvent etre faux que si le mots clé facteur est répétable. Ce cas ne
   concerne que les commandes POST_ELEM et RECA_WEYBULL.
                                                                                            
                                                                                            
                                          
   Validation :
   ------------
   passage de 138 tests variés utilisant les commandes impactées.
                                                                                            
                                                                                            
                                          
   Résultats faux :
   -----------------
   Les commandes suivantes donnent des résultats faux si elles sont utilisées avec plusieurs
   occurrences et si les mailles concernées par les occurrences 2, 3, ... ne sont pas
   incluses dans la liste des mailles de l'occurrence 1.
                                                                                            
                                                                                            
                                          
     * POST_ELEM    /CARA_GEOM
     * POST_ELEM    /ENER_CIN
     * POST_ELEM    /ENER_POT
     * POST_ELEM    /INDIC_ENER
     * POST_ELEM    /MASS_INER
     * POST_ELEM    /WEIBULL
     * RECA_WEIBULL /RESU
                                                                                            
                                                                                            
                                          
   Par exemple, si l'utilisateur demande :
                                                                                            
                                                                                            
                                          
   MAS1 = POST_ELEM(MODELE = MODELE, CHAM_MATER = CHMAT,
                      MASS_INER =(
                         _F(MAILLE=('M101')),
                         _F(MAILLE=('M101','M102',)),
                      ))
   IMPR_TABLE(TABLE=MAS1)
                                                                                            
                                                                                            
                                          
   Il obtiendra :
   #ASTER 10.02.15 CONCEPT MAS1 CALCULE LE 20/09/2010 A 15:19:17 DE TYPE
   #TABLE_SDASTER
    LIEU     ENTITE   MASSE        CDG_X        CDG_Y        CDG_Z         ...
    M101     MAILLE    9.93750E-02  5.06667E-01 -1.66667E-03  0.00000E+00
    M101     MAILLE    9.93750E-02  5.06667E-01 -1.66667E-03  0.00000E+00
    M102     MAILLE    0.00000E+00  0.00000E+00  0.00000E+00  0.00000E+00
                                                                                            
                                                                                            
                                          
   On voit que le calcul n'a pas été fait sur la maille M102. Le résultat est faux !
   
    
   Liste des fichiers impactés par la correction de la fiche:  15513
     eclpgr.f  exlim3.f  exlima.f  mecalm.f  medom2.f  nmdopi.f
     op0038.f  op0106.f  op0167.f  pecage.f  peecin.f  peenca.f
     peepot.f  peingl.f  pemain.f  peweib.f  rdtres.f  thaclm.f
RESU_FAUX_VERSION_EXPLOITATION    :  OUI   DEPUIS : 9.0
RESU_FAUX_VERSION_DEVELOPPEMENT   :  OUI   DEPUIS : 10.0
RESTITUTION_VERSION_EXPLOITATION  :  OUI
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    138 tests bien choisis
NB_JOURS_TRAV  : 0.8
--------------------------------------------------------------------------------
RESTITUTION FICHE 015565 DU 2010-09-17 13:34:53
TYPE evolution concernant Code_Aster (VERSION )
TITRE
    Post-traitement calcul de cartes de ferraillage
FONCTIONNALITE
   Demande (Septen) :
   -------------------------------
                                                                                            
                                                                                         
   On veut calculer les densités de ferraillage dans des éléments de COQUE en fonction des
   sollicitations (efforts généralisés), selon la méthode dite de CAPRA et MAURY [Annales de
   l'Institut Technique du Bâtiment et des travaux publics 1978].
                                                                                            
                                                                                         
   Les valeurs calculées sont, dans l'ordre, une densité de ferraillage longitudinal dans le
   sens X de l'élément pour la face inférieure de l'élément (DNSXI) ainsi que pour la face
   supérieure (DNSXS), et dans le sens Y de l'élément pour la face inférieure (DNSYI) ainsi
   que pour la face supérieure (DNSYS).
   Le repère XY est le repère orthonormé local tangent à la coque choisi par l'utilisateur
   dans la commande AFFE_CARA_ELEM / COQUE / ANGL_REP (ou VECTEUR)
                                                                                            
                                                                                         
   On calcule également la densité de ferraillage transversal (DNST). De plus, l'opérateur
   renvoie les valeurs de contrainte et de déformation du béton. Lors du calcul de la section
   soumise à la flexion composée, on effectue une vérification de non dépassement de la
   contrainte béton à l'ELS, et de non dépassement de la déformation du béton à l'ELU.
                                                                                            
                                                                                         
                                                                                            
                                                                                         
   Evolution proposée :
   --------------------
   On introduit une nouvelle commande de post-traitemen dédiée au calcul du ferraillage.
   La syntaxe est la suivante :
                                                                                            
                                                                                         
   Solution=CALC_FERRAILLAGE(reuse =Solution, RESULTAT=Solution,
                      TYPE_COMB='ELS', INST=(0., 1., 2. ),
                      AFFE  = (
                         _F( GROUP_MA='GM1', ENROBG=0.04,  CEQUI=15.E0, SIGM_ACIER=2.3E8,
   SIGM_BETON=3.5E7,
                                             PIVA= 1.0E-3, PIVB= 3.5E-3 ),
                         _F( GROUP_MA='GM2', ENROBG=0.03,  CEQUI=12.E0, SIGM_ACIER=2.5E8,
   SIGM_BETON=3.7E7,
                                             PIVA= 2.0E-3, PIVB= 4.5E-3 ),
                      )))
                                                                                            
                                                                                         
   Suite à l'exécution de cette commande, la sd_resultat Solution est enrichie d'un champ par
   elements de nom symbolique FERRAILLAGE dont le contenu est le suivant :
                                                                                            
                                                                                         
    CHAMP PAR ELEMENT CONSTANT SUR L'ELEMENT DE NOM SYMBOLIQUE  FERRAILLAGE
    NUMERO D'ORDRE: 1 INST:  0.00000E+00
    M201      DNSXI        DNSXS        DNSYI        DNSYS        DNST         SIGMBE
              EPSIBE
              0.00000E+00  8.87238E-04  0.00000E+00  1.88007E-04  2.03910E-04  3.21312E+06
              0.00000E+00
    M202      DNSXI        DNSXS        DNSYI        DNSYS        DNST         SIGMBE
              EPSIBE
              0.00000E+00  3.77867E-04  0.00000E+00  3.26762E-04  1.32903E-04  1.74811E+06
              0.00000E+00
    ...
                                                                                            
                                                                                         
                                                                                            
                                                                                         
                                                                                            
                                                                                         
   Remarques :
   -----------
     * La nouvelle option de calcul élémentaire (appelée également CALC_FERRAILLAGE) est
   disponible pour les modélisations DKT et COQUE_3D. La routine te00ij est commune.
     * Si la mise en donnée est faite dans le système d'unités SI, les densités de
   ferraillage DNSXI, ..., DNSYS sont obtenues en m2 /m, masi dans le métier, on préfère
   utliser le cm2 /m.
     * J'ai pu vérifier que la programmation ne dépendait pas du système d'unités en
   comparant un calcul exprimé en unités SI avec un autre calcul sur un maillage en mm (test
   ssls135a ci-dessous).
     * La programmation Fortran du calcul élémentaire (routine te0146.f et les routines
   qu'elle appelle) a été fournie par Ingérop. La seule modification que l'on y a apportée
   concerne la détermination de la "facette minimale" (routine clcopt.f). Lorsque la solution
   est trop symétrique (en X et Y), il peut y avoir plusieurs facettes correspondant au meme
   minimum. Pour éviter que le code ne choisisse l'une ou l'autre au gré des erreurs
   d'arrondi, l'algorithme ne change de facette minimale que si le nouveau minimum est
   significativement plus petit que le précédent, c'est à dire si le nouveau minimum est
   inférieur à 0.9999 fois le précédent.
                                                                                            
                                                                                         
                                                                                            
                                                                                         
   Validation :
   ------------
   On ajoute 2 nouveaux tests (Modélisation DKT):
      ssls134 :
      # TITRE FERRAILLAGE SELON LA METHODE DE CAPRA ET MAURY (CAS ANALYTIQUE)
      ssls135 :
      # TITRE FERRAILLAGE D'UNE CUVE CARREE SELON LA METHODE DE CAPRA ET MAURY
                                                                                            
                                                                                         
                                                                                            
                                                                                         
   On ajoute également le calcul du ferraillage dans le test sslx100d (modélisation COQUE_3D).
   Pour ce test, les TEST_RESU sont de non-régression.
                                                                                            
                                                                                         
                                                                                            
                                                                                         
   Impact documentaire :
   ---------------------
   V1.01.267 (ssls134)
   V1.01.270 (ssls135)
   R7.04.05   : Algorithme de calcul des densités de ferraillage
   U4.83.21   : commande CALC_FERRAILLAGE
                                                                                            
                                                                                         
                                                                                            
                                                                                         
   Performances :
   -----------------
   Essai sur machine calibre5 :
   Plaque élastique carrée de 100 000 éléments.
    * MECA_STATIQUE            :      56.36 :      19.81 :      76.17 :     177.06 *
    * CALC_ELEM                :       5.29 :       0.14 :       5.43 :       5.89 *
    * CALC_FERRAILLAGE         :       1.20 :       0.02 :       1.22 :       1.30 *
                                                                                            
                                                                                         
                                                                                            
                                                                                         
   Liste des fichiers impactés par la correction de la fiche:  15565
     calcul.f  clcels.f  clcelu.f  clcopt.f  clcplq.f  cmpcar.f
     expcar.f  op0175.f  rscrsd.f  rslesd.f  te0146.f  tecart.f
     trgfct.f  w175af.f  w175ca.f
     calculel.py
     calc_ferraillage.cata   gener_mecq32.cata       gener_medkt2.cata      
   grandeur_simple__.cata
     calc_ferraillage.capy  c_nom_cham_into.capy
     sslx100d.comm  ssls134a.comm  ssls135a.comm
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : V1.01.267 V1.01.270 R7.04.05 U4.83.21
VALIDATION
    ssls134 ssls135 sslx100d
NB_JOURS_TRAV  : 21.0
--------------------------------------------------------------------------------
RESTITUTION FICHE 015686 DU 2010-10-07 08:13:24
TYPE express concernant Code_Aster (VERSION 7.0)
TITRE
    un petit utilitaire "developpeur" dans la lecture des catalogues d'elements
FONCTIONNALITE
   Je propose d'ajouter dans le fichier Lecture_Cata_Ele/imprime.py une petite fonction :
   
   def impr_CMP(nomfic,capy):
   # pour imprimer tous les 6-uplets ( OPTION  TYPELEM  IN/OUT  PARAM  GRANDEUR  CMP ) 
   
   Cette fonction n'est pas appelée lors de la construction des catalogues d'éléments finis,
   mais on peut facilement l'appeler pour produire un fichier qui est une étape vers la
   construction automatique de doc sur les éléments finis.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    essai perso
NB_JOURS_TRAV  : 0.2
--------------------------------------------------------------------------------
RESTITUTION FICHE 015390 DU 2010-07-27 09:23:11
TYPE evolution concernant Code_Aster (VERSION )
TITRE
    Variables de commandes : que valent-elles ?
FONCTIONNALITE
   Problème :
   ----------
   Jean-Luc veut pouvoir récupérer les varaibles de commande que l'on a utilisées pour un
   calcul mécanique.
                                                                                            
                           
   Evolution :
   -----------
   On propose une nouvelle option de CALC_ELEM : 'VARC_ELGA'
                                                                                            
                           
   Sur chaque point de Gauss utilisés pour les calculs mécaniques, on calcule les 7 variables
   de commandes :
     TEMP  HYDR  SECH  IRRA  CORR  NEUT1  NEUT2
                                                                                            
                           
   Cette nouvelle option est disponible pour les modélisations :
     3D
     AXIS
     D_PLAN
     C_PLAN
                                                                                            
                           
                                                                                            
                           
   Valdation :
   -----------
   La nouvelle option est testée (variable HYDR) sur le test hpla101c
                                                                                            
                           
    
   Impact documentaire :
   ---------------------
   U4.81.01 : ajouter l'option VARC_ELGA
    
   Liste des fichiers impactés par la correction de la fiche:  15390
     mecalm.f  rscrsd.f  te0530.f
     gener_me3d_3.cata       gener_meax_2.cata       gener_mecpl2.cata      
   gener_medpl2.cata       grandeur_simple__.cata
     varc_elga.cata
     calc_elem.capy        c_nom_cham_into.capy
     hpla101c.comm
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : U4.81.01
VALIDATION
    hpla101c
NB_JOURS_TRAV  : 0.8
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR sellenet     SELLENET Nicolas       DATE 10/11/2010 - 02:16:53

--------------------------------------------------------------------------------
RESTITUTION FICHE 015574 DU 2010-09-21 09:38:06
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
    option quad_line de CREA_MAILLAGE tres long
FONCTIONNALITE
   Problème :
   ----------
   """
   j'ai un maillage quadratique composé de 1692000 noeuds et 1159000 tetras. 
   
   Je voudrais le convertir en maillage lineique avec l'option quad_line de CREA_MAILLAGE.
   Mais cette
   opération est très longue avec aster (plusieurs dizaines d'heures) alors qu'elle ne prend que
   quelques secondes lorsque j'utilise syrthes pour le faire.
   """
   
   
   Solution :
   ----------
   La routine CMQLNM (utilisée pour déterminer à partir d'une liste de mailles quadratiques
   quels noeuds doivent être supprimés) s'est révélée sous-optimale.
   
   Un test réalisé avec le maillage de perf003b (42 432 mailles) rendu quadratique montrait
   qu'il fallait plus de 40 secondes pour rendre à nouveau ce maillage linéique.
   
   Après reprogrammation de la routine, il faut moins de 2 secondes.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    unitaire
NB_JOURS_TRAV  : 0.7
--------------------------------------------------------------------------------
RESTITUTION FICHE 015570 DU 2010-09-20 12:16:41
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
    pb calc_elem option PROJ_ELEM_SIGM' avec CREA_RESU
FONCTIONNALITE
   Problème :
   ----------
   """
   Dans le cadre d'un calcul sismique, je réalise les opérations suivantes : 
   
    - analyse transitoire avec recombinaison modale
    - creation de champ de contrainte (SIGM_ELNO_DEPL) pour un instant fixé du séisme.
    - création du champ de déplacement pour cet instant
   
    - analyse statique
    - création des champs de contrainte et déplacement
   
    - combinaison des champs : séisme + statique pour contrainte et déplacement
    - CREA_RESU avec les deux champs
   
    - CALC_ELEM option PROJ_ELEM_SIGM sur la structure résultat créee
   
   --> message d'erreur : " erreur de programmation -  condition non respectée"  cf .mess
   ci-joint, 
   """
   
   
   Analyse :
   ---------
   Le plantage a lieu dans un "CALL ASSERT" dans te0411.f. Dans cette partie du code on
   vérifie qu'une variable (DELTA) est bien supérieure à zéro.
   
   Dans le cas de notre plantage DELTA (qui correspond au discriminant du polynome
   caractéristique d'une matrice 2x2) vaut 0. Or il n'y a pas de raisons d'interdire la valeur 0.
   
   
   Solution :
   ----------
   On autorise que DELTA vaille 0 dans te0411.f.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
    test unitaire
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------



========================================================================
=== Recapitulation des operations demandees pour toutes les restitutions
========================================================================


    TYPE Action    unite                      user      Auteur         nblg  ajout suppr.

 CASTEST AJOUT sdnv107c                       devesa G.DEVESA           652    652      0
 CASTEST AJOUT ssls134a                       pellet J.PELLET           118    118      0
 CASTEST AJOUT ssls135a                       pellet J.PELLET           389    389      0
 CASTEST AJOUT ssnp15f                       geniaut S.GENIAUT          440    440      0
 CASTEST AJOUT ssnv138e                      geniaut S.GENIAUT          333    333      0
 CASTEST MODIF hpla101c                       pellet J.PELLET           185      8      1
 CASTEST MODIF sdld102a                       nistor I.NISTOR           889      2      1
 CASTEST MODIF sdll113a                       nistor I.NISTOR           429      3      2
 CASTEST MODIF sdll113b                       delmas J.DELMAS           482     22      2
 CASTEST MODIF sdll14a                        delmas J.DELMAS           153     19      2
 CASTEST MODIF sdll14b                        delmas J.DELMAS           160     19      2
 CASTEST MODIF sdll14c                        delmas J.DELMAS           163     23      4
 CASTEST MODIF sdls01c                        nistor I.NISTOR           497      3      2
 CASTEST MODIF sdls106a                       nistor I.NISTOR           386      3      2
 CASTEST MODIF sdls106b                       nistor I.NISTOR           315      3      2
 CASTEST MODIF sdls106c                       nistor I.NISTOR           328      3      2
 CASTEST MODIF sdlv402a                       nistor I.NISTOR           350      3      2
 CASTEST MODIF sdnl104b                       nistor I.NISTOR           494      3      2
 CASTEST MODIF sdnl105d                       nistor I.NISTOR           560      2      1
 CASTEST MODIF sdns106a                      geniaut S.GENIAUT          372      3      2
 CASTEST MODIF sdnv107a                       delmas J.DELMAS           660     38      3
 CASTEST MODIF shll100a                       nistor I.NISTOR           702      3      2
 CASTEST MODIF shll100b                       nistor I.NISTOR           652      3      2
 CASTEST MODIF shll100c                       nistor I.NISTOR           586      3      2
 CASTEST MODIF sslp317a                      geniaut S.GENIAUT          238      2      2
 CASTEST MODIF sslv317a                      geniaut S.GENIAUT          481      7      7
 CASTEST MODIF sslx100d                       pellet J.PELLET           251     23      1
 CASTEST MODIF ssnp121m                        abbas M.ABBAS            290      1      1
 CASTEST MODIF ssnp121n                        abbas M.ABBAS            315      1      1
 CASTEST MODIF ssnp306a                        abbas M.ABBAS            175      6      3
 CASTEST MODIF ssnv138d                      geniaut S.GENIAUT          309      8      3
 CASTEST MODIF ssnv173d                      geniaut S.GENIAUT          254      2      2
 CASTEST MODIF ssnv173e                      geniaut S.GENIAUT          427      2      2
 CASTEST MODIF ssnv173f                      geniaut S.GENIAUT          241      2      2
 CASTEST MODIF ssnv173g                      geniaut S.GENIAUT          234      2      2
 CASTEST MODIF ssnv173h                      geniaut S.GENIAUT          224      2      2
 CASTEST MODIF ssnv173j                      geniaut S.GENIAUT          240      2      2
 CASTEST MODIF ssnv173k                      geniaut S.GENIAUT          281      2      3
 CASTEST MODIF ssnv185r                      geniaut S.GENIAUT          255      2      2
 CASTEST MODIF zzzz100b                     courtois M.COURTOIS         388     58      6
 CASTEST MODIF zzzz100d                     courtois M.COURTOIS         433     15      4
CATALOGU AJOUT options/calc_ferraillage       pellet J.PELLET            35     35      0
CATALOGU AJOUT options/varc_elga              pellet J.PELLET            25     25      0
CATALOGU MODIF compelem/grandeur_simple__     pellet J.PELLET          2081     17      1
CATALOGU MODIF options/flhn_elga           desroches X.DESROCHES         30      2      1
CATALOGU MODIF typelem/gener_me3d_3           pellet J.PELLET           655      3      1
CATALOGU MODIF typelem/gener_meax_2           pellet J.PELLET           563      3      1
CATALOGU MODIF typelem/gener_mebar1           flejou J-L.FLEJOU         231      7      2
CATALOGU MODIF typelem/gener_mecpl2           pellet J.PELLET           606      3      1
CATALOGU MODIF typelem/gener_mecq32           pellet J.PELLET           314      5      1
CATALOGU MODIF typelem/gener_medkt2           pellet J.PELLET           386      5      1
CATALOGU MODIF typelem/gener_medpl2           pellet J.PELLET           607      3      1
CATALOPY AJOUT commande/calc_ferraillage      pellet J.PELLET            95     95      0
CATALOPY MODIF commande/calc_elem             pellet J.PELLET           551      3      2
CATALOPY MODIF commande/calc_fonction       courtois M.COURTOIS         165     10      4
CATALOPY MODIF commande/defi_list_inst       geniaut S.GENIAUT          225     11      3
CATALOPY MODIF commande/lire_resu             delmas J.DELMAS           216      5      8
CATALOPY MODIF commande/post_coque         desroches X.DESROCHES         38      3      3
CATALOPY MODIF commun/c_nom_cham_into         pellet J.PELLET           197      3      1
       C MODIF supervis/astermodule         courtois M.COURTOIS        3902      3     58
 FORTRAN AJOUT algorith/extdch               geniaut S.GENIAUT          168    168      0
 FORTRAN AJOUT algorith/nmevdr               geniaut S.GENIAUT          182    182      0
 FORTRAN AJOUT calculel/op0175                pellet J.PELLET           110    110      0
 FORTRAN AJOUT calculel/w175af                pellet J.PELLET           132    132      0
 FORTRAN AJOUT calculel/w175ca                pellet J.PELLET            59     59      0
 FORTRAN AJOUT elements/clcels                pellet J.PELLET           122    122      0
 FORTRAN AJOUT elements/clcelu                pellet J.PELLET           117    117      0
 FORTRAN AJOUT elements/clcopt                pellet J.PELLET           201    201      0
 FORTRAN AJOUT elements/clcplq                pellet J.PELLET           152    152      0
 FORTRAN AJOUT elements/mmexn1                 abbas M.ABBAS             77     77      0
 FORTRAN AJOUT elements/mmexn2                 abbas M.ABBAS             55     55      0
 FORTRAN AJOUT elements/te0146                pellet J.PELLET           147    147      0
 FORTRAN AJOUT elements/te0530                pellet J.PELLET           120    120      0
 FORTRAN AJOUT elements/trgfct                pellet J.PELLET            63     63      0
 FORTRAN AJOUT modelisa/exlim3                pellet J.PELLET           154    154      0
 FORTRAN AJOUT prepost/carcha                 delmas J.DELMAS           199    199      0
 FORTRAN AJOUT prepost/lrcomm                 delmas J.DELMAS           161    161      0
 FORTRAN AJOUT prepost/lrensi                 delmas J.DELMAS           343    343      0
 FORTRAN AJOUT prepost/lrfmed                 delmas J.DELMAS           315    315      0
 FORTRAN AJOUT prepost/lrrefd                 delmas J.DELMAS           110    110      0
 FORTRAN MODIF algeline/op0167                pellet J.PELLET           976      2      2
 FORTRAN MODIF algorith/comp81                delmas J.DELMAS           362      6     23
 FORTRAN MODIF algorith/dyobs1              courtois M.COURTOIS         336      3      5
 FORTRAN MODIF algorith/gma110                nistor I.NISTOR           160      6      1
 FORTRAN MODIF algorith/mginfo                devesa G.DEVESA            89      3      3
 FORTRAN MODIF algorith/mmexcl                 abbas M.ABBAS            189      8      4
 FORTRAN MODIF algorith/ndloam                devesa G.DEVESA           150      8      8
 FORTRAN MODIF algorith/nmadat               geniaut S.GENIAUT          255      5      2
 FORTRAN MODIF algorith/nmcadt               geniaut S.GENIAUT          128     16     92
 FORTRAN MODIF algorith/nmcalm                 abbas M.ABBAS            218      1      2
 FORTRAN MODIF algorith/nmco1d                flejou J-L.FLEJOU         149      5      3
 FORTRAN MODIF algorith/nmconv               geniaut S.GENIAUT          529     30     16
 FORTRAN MODIF algorith/nmcrsu               geniaut S.GENIAUT          222      7     16
 FORTRAN MODIF algorith/nmdcin               geniaut S.GENIAUT           84      6     12
 FORTRAN MODIF algorith/nmdeco               geniaut S.GENIAUT          140     13     11
 FORTRAN MODIF algorith/nmdopi                pellet J.PELLET           307      2      2
 FORTRAN MODIF algorith/nmpcin                 abbas M.ABBAS             82      3      6
 FORTRAN MODIF algorith/nmprca                 abbas M.ABBAS            215      3      2
 FORTRAN MODIF algorith/nmresg                devesa G.DEVESA           226      1      2
 FORTRAN MODIF algorith/nmresi                 abbas M.ABBAS            354      3      2
 FORTRAN MODIF algorith/nzcalc              courtois M.COURTOIS         165      3      3
 FORTRAN MODIF algorith/op0028               geniaut S.GENIAUT          498     82     55
 FORTRAN MODIF algorith/op0070               geniaut S.GENIAUT          563      7      3
 FORTRAN MODIF algorith/pmdeco               geniaut S.GENIAUT          144     13     12
 FORTRAN MODIF algorith/refe99                delmas J.DELMAS           194     30     23
 FORTRAN MODIF algorith/utdidt               geniaut S.GENIAUT          367     65      6
 FORTRAN MODIF algorith/xdecqu              courtois M.COURTOIS         388      4      4
 FORTRAN MODIF algorith/xprcyc               geniaut S.GENIAUT          970      9     13
 FORTRAN MODIF algorith/xprdis               geniaut S.GENIAUT          224      7     10
 FORTRAN MODIF algorith/xprdom               geniaut S.GENIAUT          449      3      5
 FORTRAN MODIF algorith/xprvit               geniaut S.GENIAUT          761      4      6
 FORTRAN MODIF algorith/xstama               geniaut S.GENIAUT          177      5      4
 FORTRAN MODIF assembla/nulili                delmas J.DELMAS           235     10      4
 FORTRAN MODIF calculel/cmpcar                pellet J.PELLET           308     89     88
 FORTRAN MODIF calculel/eclpgr                pellet J.PELLET           137      2      2
 FORTRAN MODIF calculel/expcar                pellet J.PELLET           186     18     18
 FORTRAN MODIF calculel/mecalm                pellet J.PELLET          2610      3      4
 FORTRAN MODIF calculel/medom2                pellet J.PELLET           112      2      2
 FORTRAN MODIF calculel/op0038                pellet J.PELLET           163      2      2
 FORTRAN MODIF calculel/peenca                pellet J.PELLET           155      3     17
 FORTRAN MODIF calculel/rdtres                pellet J.PELLET           246      2      2
 FORTRAN MODIF calculel/tecart                pellet J.PELLET            83      2      2
 FORTRAN MODIF calculel/thaclm                pellet J.PELLET           863      2      2
 FORTRAN MODIF elements/comcq1                flejou J-L.FLEJOU         111      5      3
 FORTRAN MODIF elements/mmmron                 abbas M.ABBAS             86      3      3
 FORTRAN MODIF elements/mmmtcc                 abbas M.ABBAS            113      8      4
 FORTRAN MODIF elements/mmmtce                 abbas M.ABBAS            128      8      6
 FORTRAN MODIF elements/mmmtcm                 abbas M.ABBAS            127      8      6
 FORTRAN MODIF elements/mmmtec                 abbas M.ABBAS            137      8      6
 FORTRAN MODIF elements/mmmtmc                 abbas M.ABBAS            135      8      6
 FORTRAN MODIF elements/mmmvcc                 abbas M.ABBAS            110      7      4
 FORTRAN MODIF elements/mmnorm                 abbas M.ABBAS             69      1      1
 FORTRAN MODIF elements/pmfcom                flejou J-L.FLEJOU         302      5      3
 FORTRAN MODIF elements/te0248                flejou J-L.FLEJOU         444      5      3
 FORTRAN MODIF elements/te0514               geniaut S.GENIAUT          422      3      2
 FORTRAN MODIF modelisa/capoco              courtois M.COURTOIS         197      2      2
 FORTRAN MODIF modelisa/exlima                pellet J.PELLET           129      8     11
 FORTRAN MODIF modelisa/lrmmno              courtois M.COURTOIS         225      3      2
 FORTRAN MODIF prepost/cmqlnm               sellenet N.SELLENET         187     78    131
 FORTRAN MODIF prepost/cmqlql               sellenet N.SELLENET         156      9     10
 FORTRAN MODIF prepost/irccmp               courtois M.COURTOIS          72      3      3
 FORTRAN MODIF prepost/lridea                 delmas J.DELMAS           499     16     64
 FORTRAN MODIF prepost/op0106                 pellet J.PELLET           943      3      3
 FORTRAN MODIF prepost/utmasu               courtois M.COURTOIS         186      2      3
 FORTRAN MODIF utilitai/chkcmp              courtois M.COURTOIS         138      4      6
 FORTRAN MODIF utilitai/dismmo               geniaut S.GENIAUT          333     13      2
 FORTRAN MODIF utilitai/dismxf               geniaut S.GENIAUT          100     14      4
 FORTRAN MODIF utilitai/ndynkk                devesa G.DEVESA           229      2      2
 FORTRAN MODIF utilitai/op0150                delmas J.DELMAS           472    123    808
 FORTRAN MODIF utilitai/pecage                pellet J.PELLET           203      2      2
 FORTRAN MODIF utilitai/peecin                pellet J.PELLET           369      2      2
 FORTRAN MODIF utilitai/peepot                pellet J.PELLET           320      2      2
 FORTRAN MODIF utilitai/peingl                pellet J.PELLET           754      2      2
 FORTRAN MODIF utilitai/pemain                pellet J.PELLET           221      2      2
 FORTRAN MODIF utilitai/peweib                pellet J.PELLET           437      2      2
 FORTRAN MODIF utilitai/rscrsd                pellet J.PELLET           440      4      3
 FORTRAN MODIF utilitai/rslesd                pellet J.PELLET           359     29     47
 FORTRAN MODIF utilitai/utchdl              courtois M.COURTOIS         309      2      2
 FORTRAN SUPPR algorith/dicrec               geniaut S.GENIAUT           91      0     91
 FORTRAN SUPPR elements/mmexno                 abbas M.ABBAS            112      0    112
  PYTHON MODIF Lecture_Cata_Ele/imprime       pellet J.PELLET          1179     64      1
  PYTHON MODIF Macro/calc_fonction_ops      courtois M.COURTOIS         442     25      1
  PYTHON MODIF Macro/post_coque_ops        desroches X.DESROCHES        176      5      1
  PYTHON MODIF Macro/post_k1_k2_k3_ops       geniaut S.GENIAUT         1933     16      3
  PYTHON MODIF Macro/raff_xfem_ops           geniaut S.GENIAUT          198      5      5
  PYTHON MODIF Messages/algorith6             flejou J-L.FLEJOU         253      2      2
  PYTHON MODIF Messages/algorith              delmas J.DELMAS           222     13      1
  PYTHON MODIF Messages/assembla              delmas J.DELMAS           294     11      4
  PYTHON MODIF Messages/calculel              pellet J.PELLET           382     26      1
  PYTHON MODIF Messages/discretisation       geniaut S.GENIAUT          122      7      2
  PYTHON MODIF Messages/fonct0              courtois M.COURTOIS         372     11      1
  PYTHON MODIF Messages/prepost3              delmas J.DELMAS           218      1      6
  PYTHON MODIF Messages/prepost5            sellenet N.SELLENET         224      1      6
  PYTHON MODIF Messages/soustruc2             nistor I.NISTOR            88      7      1
  PYTHON MODIF Messages/utilitai2             delmas J.DELMAS           276      4     16
  PYTHON MODIF Messages/utilitai5             delmas J.DELMAS           305      4      6
  PYTHON MODIF Messages/utilitai8             delmas J.DELMAS           272      4      3
  PYTHON MODIF Noyau/N__F                   courtois M.COURTOIS          56      4      4
  PYTHON MODIF Noyau/N_VALIDATOR            courtois M.COURTOIS        1341    118      1
  PYTHON MODIF Validation/V_MCSIMP          courtois M.COURTOIS         196      3      1


        nb unites  nb lignes  ajouts  suppr.  difference
 AJOUT :   28        5074      5074             +5074
 MODIF :  150       57346      1614    1901      -287
 SUPPR :    2         203               203      -203
 DEPLA :    0           0 
         ----      ------     ------  ------   ------
 TOTAL :  180       62623      6688    2104     +4584 
