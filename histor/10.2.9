

-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR abbas        ABBAS Mickael          DATE 26/07/2010 - 14:50:47

--------------------------------------------------------------------------------
RESTITUTION FICHE 015387 DU 2010-07-26 07:01:03
TYPE express concernant Code_Aster (VERSION 7.0)
TITRE
   Nettoyage du code - Routine LCEGEO
FONCTIONNALITE
   En corrigeant des routines pour le pilotage, j'ai constaté que la routine LCEGEO
   comportait bcp de paramètres inutiles.
   
   Cette routine sert à "Calculer des éléments géométriques spécifiques de certaines lois de
   comportement"
   
   Pour BETON_DOUBLE_DP, elle évalue la longeur caractéristique
   Pour MONOCRISTAL, elle calcule une matrice de rotation du réseau cristallin
   Pour META_LEMA_ANI, je ne sais pas, elle semble calculer la matrice gradient symétrisé
   pour le cas axisymétrique !
   
   La paramètres ainsi calculés sont transmis à NMCOMP via une routine TAMPON dont le statut
   me parait peu clair (comportant des informations disparates).
   
   En nettoyant les arguments d'entrée, j'ai constaté que cette routine était appelée
   systématiquement dans les routines XFEM. Je pense qu'il s'agit d'un copier-coller.
   
   Je fais le nettoyage mais j'attire l'attention des développeurs sur le fait que cette
   routine n'est utile que dans les trois lois de comportement pré-citées.
   
   Routines imapctées:
   
   lcegeo.f  nmgc2d.f  nmgr3d.f  nmpl2d.f  nspl3d.f  te0544.f  xnmgr.f   xnmpl.f
   nmas2d.f  nmgc3d.f  nmgz2d.f  nmpl3d.f  te0539.f  xnmgr2.f  xnmpl2.f
   nmas3d.f  nmgr2d.f  nmgz3d.f  nspl2d.f  te0543.f  xnmgr3.f  xnmpl3.f
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   liste restreinte
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR geniaut      GENIAUT Samuel         DATE 26/07/2010 - 14:50:47

--------------------------------------------------------------------------------
RESTITUTION FICHE 015227 DU 2010-06-17 07:17:25
TYPE anomalie concernant Code_Aster (VERSION 10.3)
TITRE
   Plantage XFEM en version code coverage optimisxc3xa9
FONCTIONNALITE
   Problème :
   ----------
   
   Le passage du code coverage montre qu'un grand nombre de cas tests XFEM plantent en STA10.2
   en version code coverage optimisé. En debug cela fonctionne.
   
   Le plantage correspond à la détection d'un NaN dans nmrede.
   
   Ce bug avait déjà été observé lors du passage en STA10.1 en décembre dernier (cf. fiche
   14318).
   
   
   Analyse :
   ---------
   
   Pour les tests 2D, le problème a lieu dans xnmel2.f lors du calcul de DEF. Le comportement
   est bizarre :
   
                 IF (N.EQ.1.AND.CPT.EQ.3) THEN
                   write(6,*)'BUG ',N,CPT,DEF(1,N,CPT),DEF(1,1,3)
                 endif
   
   donne 
   
    BUG   1        3   -9.845025718231487E-002  5.363123171922164E+154
   
   cad que DEF(1,1,3) est différent de DEF(1,N,CPT) lorsque N=1 et CPT=3
   ce qui est assez étrange.
   
   Remarque :
   En descendant le niveau d'optimisation à O0 dans les options de compilation de la routine
   xnmel2.f l'exécution se déroule normalement. Avec le niveau d'optimisation O1 le plantage
   se produit.
   
   
   
   Solution :
   ----------
   
   Le calcul sur un tableau à 3 entrées, avec le dernier indice calculé
   par incrémentation (CPT=CPT+1) dans une boucle se passe mal (mais je ne comprends pas
   pourquoi).
   
   Je propose de modifier la facon de calculer CPT, en donnant la formule exacte    :
             CPT = NDIM+DDLH+NDIM*(IG-1)+I
   
   Cela suffit à refaire tourner les tests sans erreur.
   
   impact :
   xnmel2, xnmel3
   xnmpl2, xnmpl3
   xnmgr2, xnmgr3
   xbsig2, xbsig3
   
   Ceci dit, après cette correction, le plantage en version code coverage optimisé aura
   toujours lieu en STA10.2, puisque je ne peux corriger qu'en NEW10, donc pour la STA10.3
   
   (je remercie Nicolas S. et JPL pour leur aide)
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   test incriminxc3xa9s
NB_JOURS_TRAV  : 3.5
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR desoza       DE SOZA Thomas         DATE 27/07/2010 - 09:13:55

--------------------------------------------------------------------------------
RESTITUTION FICHE 015382 DU 2010-07-22 14:20:38
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
   CTC - Erreurs dans les matrices/vecteurs xc3xa9lxc3xa9mentaires pour la formulation continue
FONCTIONNALITE
   Anomalie
   ========
   
   Cette fiche trace des erreurs touchant la formulation continue dans :
   
   - la doc R : des expressions des matrices/vecteurs élémentaires sont erronées
   
   - le fortran : des expressions (seulement pour le frottement) sont fausses (confusion
   adhérent/glissant, signes, coefficients en trop, erreur dans un produit matrice-vecteur)
   
   Détails
   =======
   
   ** La doc R est revue entièrement pour la partie touchant aux expressions des matrices et
   des vecteurs. On corrige :
   - les copiés/collés malheureux
   - les erreurs de signe
   - les petits oublis
   
   Aucune de ces erreurs n'entraîne d'erreur directe dans le fortran (par recopie) mais la
   partie usure/compliance n'a pas encore été relue.
   
   ** Le fortran est lui aussi revu. On corrige : 
   - l'ordre de certaines expressions pour les rendre plus lisibles (pas de conséquence)
   - des coefficients en trop qui n'avaient en général pas d'influence (rho_n/h_n en trop
   mais rho_n=h_n en général)
   - une erreur de signe dans le cas contact/frottement inactif (sans influence)
   
   - une confusion entre adhérent et glissant au second membre (l'expression pour adhérent
   était la même que pour glissant)
   - une erreur dans un produit matrice (proj. tang.) et un vecteur (semi-multiplicateur 3D)
   (on faisait a(i)=m(i,j)*b(i) au lieu de b(j))
   - on rétablit la partie stabilisation du frottement au second membre qui était en commentaire
   
   On a par ailleurs remarqué que utiliser rho_t!=h_t pour la partie frottement n'était pas
   conseillé car ce n'est pas bien codé. On conseille d'ailleurs de toujours utiliser les
   mêmes coefficients rho et h. Par contre on peut jouer sur le terme de pénalisation
   (l'annuler en général) car son intérêt n'est pas avéré.
   
   ** On profite aussi de l'occasion pour corriger une petite coquille dans la formulation
   pénalisée de la méthode continue (non-symétrique) : 
   - les termes de couplage frottement-déplacement non symétriques étaient implémentés mais
   non appelés. Comme ce sont les mêmes que le cas non pénalisé, on factorise le code et
   ajoute l'appel ad-hoc dans MMMMAT.
   
   Validation
   ==========
   
   Un astout formulation continue ressort NOOK sur le seul test SSNV503H.
   Au passage à DEFI_CONTACT on avait ajusté les valeurs de non-régression de ce test (en
   fait elles sont analytiques) et on retrouve les valeurs antérieurs et donc les bons
   résultats : le cas glissant du patin-frottant était donc faux.
   
   Remarque : on note sur certains cas (par exemple Benchmark NAFEMS en cours) une
   convergence plus rapide en présence de frottement.
   
   Le report en 9 n'est pas évident dans la mesure où le code a beaucoup changé, de plus
   SSNV503H n'est pas cassé en V9, je propose donc de ne pas le faire.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : R5.03.52
VALIDATION
   astout contact continu
NB_JOURS_TRAV  : 5.0
--------------------------------------------------------------------------------
RESTITUTION FICHE 015312 DU 2010-07-08 09:14:26
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
   En NEW10.2.6, le cas-test ssnp121i s'arrete en <F>_ERROR sur Calibre 5.
FONCTIONNALITE
   Anomalie
   ========
   
   En NEW10.2.6, le cas-test ssnp121i s'arrete en <F>_ERROR sur Calibre 5.
   
   C'est un test de contact, formulation continue, qui atteint le nombre maxi d'itérations de
   géométrie.
   
   Analyse
   =======
   
   Ce test utilise CONTACT_INIT dont le comportement a été modifié en 10.2.6. Désormais seuls
   sont mis en contact initial les noeuds pour lequel le jeu initial est fermé ou interpénétré.
   
   Ce test d'interpénétration se fait comme d'habitude à R8PREM(). Ici sur Calibre 5 il n'est
   pas vérifié mais c'est à cause d'un problème subtil (lui aussi lié à R8PREM() sic !) :
   Les tangentes aux points de contact où le contact initial n'est pas détecté (sur Calibre
   5) ne sont pas les mêmes (elles sont tournées de 90°) que celles sur Bull. Du coup la
   normale (calculée par produit vectoriel) n'est pas tout à fait la même et on penche "du
   mauvais côté" de la tolérance machine.
   ==> les tangentes ne sont pas les mêmes car elles sont calculées dans MMMRON qui fait des
   tests à R8PREM() eux aussi variables selon la plate-forme.
   
   Solution proposée
   =================
   
   Je ne modifie pas le calcul des tangentes (par crainte de casser des tests) mais il faudra
   peut être se pencher sur ce problème.
   
   Je propose de rajouter un utilitaire fonction appelé ARMIN qui à partir de la donnée du
   maillage renvoie l'arête la plus petite.
   Dans la phase d'appariement je teste l'interpénétration pour la détection du contact
   initial non plus à R8PREM mais à 1.D-6*ARMIN. Cela résout le problème sur le cas-test
   SSNP121I.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   ssnp121i
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 015300 DU 2010-07-05 09:32:19
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
   Affichage du tableau de convergence en ALGO_CONT='VERIF' (xc3xa9pisode 4)
FONCTIONNALITE
   Anomalie
   ========
   
   Au grand dam de Mickaël, on a encore un problème d'affichage du tableau de convergence
   avec du contact.
   Ici c'est en méthode 'VERIF'. On l'observe dans le cas-test ZZZZ231A par exemple, pour le
   2ème STAT_NON_LINE.
   
   Il s'agit d'un double affichage, on le fait dans NMCONV et dans NMTBLE. On corrige en ne
   le faisant que dans NMCONV pour le contact VERIF.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   visuelle
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------
RESTITUTION FICHE 015286 DU 2010-07-01 09:29:25
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
   En NEW10.2.4, le cas-test ssnv129e s'arrete en <F>_ERROR sur Bull mpi
FONCTIONNALITE
   Anomalie
   ========
   
   En NEW10.2.4, le cas-test ssnv129e s'arrete en <F>_ERROR sur Bull mpi.
   
   Le message d'erreur est le suivant:
   "
      !----------------------------------------------------------------------------!
      ! <F> <ASSEMBLA_4>                                                           !
      !                                                                            !
      ! L'utilisation de MATR_DISTRIBUEE='OUI' nécessite que chaque processeur ait !
      !  au moins 1 degré de liberté qui lui soit alloué.                          !
      !  Ici, le processeur 0 ne s'est vu attribué aucun ddl.                      !
      !                                                                            !
      !  Conseil : Modifiez le partitionnement des mailles de votre modèle.        !
      !                                                                            !
      !                                                                            !
      ! Cette erreur est fatale. Le code s'arrete.                                 !
      !----------------------------------------------------------------------------!
   "
   
   Correction
   ==========
   
   Comme le fait remarquer Nicolas : 
   '''
   Le problème vient de la restit qui a fait passé le partitionnement par défaut de
   'MAIL_DISPERSE' à 'GROUP_ELEM'.
   Dans ce cas test, il n'y a qu'un seul GREL donc le partitionnement ne fournira du travail
   qu'à un seul proc.
   '''
   
   Je modifie donc le partitionnement pour repasser à 'MAIL_DISPERSE' sur ce test, en mettant
   un commentaire.
   Par ailleurs j'enrichis le message d'erreur pour préciser où faire le changement en cas
   d'erreur (dans AFFE_MODELE/PARTITION)
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   ssnv129e //
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------
RESTITUTION FICHE 015246 DU 2010-06-23 14:01:32
TYPE evolution concernant Code_Aster (VERSION )
TITRE
   Changement du point fixe gxc3xa9omxc3xa9trique/frottement en formulation continue
FONCTIONNALITE
   Évolution
   =========
   
   Cette fiche a pour but de changer les critères de convergence des 2 points fixes de la
   formulation continue du contact. L'état actuel est le suivant : 
   
   * critère géométrique : on vérifie que les déplacements ET les lagranges de contact sont
   fixes.
   
   * critère sur le seuil de frottement : on vérifie là encore que les déplacements et les
   lagranges de contact sont fixes.
   
   Détails
   =======
   
   On propose plutôt le fonctionnement suivant :
   
   * critère géométrique :  il suffit théoriquement de ne vérifier que les déplacements.
   
   * critère sur le seuil de frottement : il suffit de vérifier que les lagranges sont fixes.
   
   Validation
   ==========
   
   Un astout formulation continue ressort OK. On peut noter sur le cas-test SSNA102D que l'on
   est désormais cohérent entre formulation 'DISCRETE' et 'CONTINUE'.
   Avant sur ce test, on constatait qu'après la 2ème itération géométrique, le critère était
   vérifié à 7%, alors que maintenant il l'est à moins de 1%. L'explication de ce changement
   étant que ce sont les Lagranges qui bougent entre la première et la seconde itération
   géométrique mais ce n'est pas grave du tout (tant que la géométrie reste la même).
   
   En conséquence le critère automatique devrait être mieux vérifier qu'avant sur les études.
   
   
   Documentation
   =============
   
   Les thèses à la base de la formulation décrivent ce qui est fait actuellement dans le
   code, cependant la doc R décrit déjà l'évolution proposée, il n'y a donc pas d'impact doc.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   astout contact
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 014692 DU 2010-02-24 16:39:06
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
   CTC - Incohxc3xa9rence fortran-fortran et fortran-doc formulation 'CONTINUE'
FONCTIONNALITE
   Cette fiche signalait des incohérences fortran-doc pour la formulation continue, elles ont
   été traitées dans issue15382.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
   s/o
NB_JOURS_TRAV  : 0.01
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR geniaut      GENIAUT Samuel         DATE 26/07/2010 - 14:41:37

--------------------------------------------------------------------------------
RESTITUTION FICHE 015227 DU 2010-06-17 07:17:25
TYPE anomalie concernant Code_Aster (VERSION 10.3)
TITRE
   Plantage XFEM en version code coverage optimisxc3xa9
FONCTIONNALITE
   Problème :
   ----------
   
   Le passage du code coverage montre qu'un grand nombre de cas tests XFEM plantent en STA10.2
   en version code coverage optimisé. En debug cela fonctionne.
   
   Le plantage correspond à la détection d'un NaN dans nmrede.
   
   Ce bug avait déjà été observé lors du passage en STA10.1 en décembre dernier (cf. fiche
   14318).
   
   
   Analyse :
   ---------
   
   Pour les tests 2D, le problème a lieu dans xnmel2.f lors du calcul de DEF. Le comportement
   est bizarre :
   
                 IF (N.EQ.1.AND.CPT.EQ.3) THEN
                   write(6,*)'BUG ',N,CPT,DEF(1,N,CPT),DEF(1,1,3)
                 endif
   
   donne 
   
    BUG   1        3   -9.845025718231487E-002  5.363123171922164E+154
   
   cad que DEF(1,1,3) est différent de DEF(1,N,CPT) lorsque N=1 et CPT=3
   ce qui est assez étrange.
   
   Remarque :
   En descendant le niveau d'optimisation à O0 dans les options de compilation de la routine
   xnmel2.f l'exécution se déroule normalement. Avec le niveau d'optimisation O1 le plantage
   se produit.
   
   
   
   Solution :
   ----------
   
   Le calcul sur un tableau à 3 entrées, avec le dernier indice calculé
   par incrémentation (CPT=CPT+1) dans une boucle se passe mal (mais je ne comprends pas
   pourquoi).
   
   Je propose de modifier la facon de calculer CPT, en donnant la formule exacte    :
             CPT = NDIM+DDLH+NDIM*(IG-1)+I
   
   Cela suffit à refaire tourner les tests sans erreur.
   
   impact :
   xnmel2, xnmel3
   xnmpl2, xnmpl3
   xnmgr2, xnmgr3
   xbsig2, xbsig3
   
   Ceci dit, après cette correction, le plantage en version code coverage optimisé aura
   toujours lieu en STA10.2, puisque je ne peux corriger qu'en NEW10, donc pour la STA10.3
   
   (je remercie Nicolas S. et JPL pour leur aide)
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   test incriminxc3xa9s
NB_JOURS_TRAV  : 3.5
--------------------------------------------------------------------------------
RESTITUTION FICHE 014318 DU 2009-12-17 09:10:53
TYPE anomalie concernant Code_Aster (VERSION 10.3)
TITRE
   Bug X-FEM avec couverture de code
FONCTIONNALITE
   Cette fiche concerne en STA10.1 le même problème que la fiche 15227 en STA10.2.
   Voir donc la fiche 15227.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
   aucun
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------
RESTITUTION FICHE 015359 DU 2010-07-19 11:48:14
TYPE express concernant Code_Aster (VERSION 9.8)
TITRE
   X-FEM : bug affichage XFEM_20 en NEW9
FONCTIONNALITE
   Problème :
   ----------
   
   P. Le Delliou a repéré un bug d'affichage du message xfem_20 dans xlorie en NEW9.
   
   
   
   Solution :
   ----------
   
   En cause, un 'blanc' en trop (qui a déjà été corrigé en NEW10)
               CALL U2MESS('F','XFEM _20')
   On corrige.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  OUI
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
   test
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------
RESTITUTION FICHE 014952 DU 2010-04-15 12:52:12
TYPE evolution concernant Documentation (VERSION )
TITRE
   changement de nom du ssnp102
FONCTIONNALITE
   Pour des raisons de clarté,
   
   
   le nom du test ssnp102 change :
   "Taux de restitution d'énergie pour une plaque entaillée en élasto-plasticité"
   devient
   "Taux de restitution d'énergie pour une plaque entaillée en élasto-plasticité : approche GTP"
   
   
   ainsi que la doc R associée : 
   "Taux de restitution d'énergie en thermo-élasto-plasticité"
   devient 
   "Taux de restitution d'énergie en thermo-élasto-plasticité - approche GTP"
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : V6.03.102, R7.02.07
VALIDATION
   aucun
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------
RESTITUTION FICHE 014955 DU 2010-04-15 15:43:24
TYPE evolution concernant Documentation (VERSION )
TITRE
   la doc du test ssnp102 n'est pas xc3xa0 jour
FONCTIONNALITE
   Problème :
   ----------
   
   la doc du test ssnp102 (validation de la méthode GTP) n'est pas à jour :
   
   il manque dans la modélisation a : le 2eme STAT_NON_LINE (introduit en 6.0.38, EL 2001-024)
   il manque toute la modélisation b (introduite en 9.4.5, fiche 13112)
   
   
   Solution :
   ----------
   
   - le 2eme STAT_NON_LINE du ssnp102a correspond à un calcul avec VMSI_ECMI_TRACT et C=0
   puis à post-traiter l'énergie totale et vérifier qu'elle est bien égale à celle du 1er
   STAT_NON_LINE (VMSI_ISOT_TRAC).
   
   - le ssnp102b est une version 3D de la modélisation A, sur laquelle on test Gglobal.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : V6.03.102
VALIDATION
   aucun
NB_JOURS_TRAV  : 0.3
--------------------------------------------------------------------------------
RESTITUTION FICHE 015314 DU 2010-07-08 15:29:00
TYPE evolution concernant Code_Aster (VERSION )
TITRE
   X-FEM : validation de RAFF_XFEM pour les interfaces
FONCTIONNALITE
   Problème :
   ----------
   
   Dans la 10.0.14 on a restitué la distinction entre FISSURE et INTERFACE pour X-FEM.
   On a aussi modifié le sslp317 (RAFF_XFEM) pour introduire une interface et valider le
   raffinement automatique d'une interface.
   
   Cependant, en 10.0.25 (fiche 14144), les level sets ont été modifiées et on a transformé
   l'interface en fissure.
   Du coup, RAFF_XFEM n'est plus validé pour les interfaces.
   
   
   Solution :
   ----------
   
   On rebascule à nouveau la fissure n°2 en interface (inclusion circulaire).
   On modifie aussi la formule de la level set normale pour la fissure n°1 de manière à ce
   qu'elle soit la vraie fonction signée.
   On ajuste le % de mailles à raffiner à chaque passage dans Homard (12% -> 10%)
   On modifie en conséquence la doc.
   
   impact : sslp317a, V3.02.317
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : V3.02.317
VALIDATION
   sslp317a
NB_JOURS_TRAV  : 0.3
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR lefebvre     LEFEBVRE Jean-Pierre   DATE 26/07/2010 - 12:37:49

--------------------------------------------------------------------------------
RESTITUTION FICHE 015380 DU 2010-07-22 11:27:47
TYPE express concernant Code_Aster (VERSION 7.0)
TITRE
   Correction de l'affichage de l'alarme SUPERVIS_94
FONCTIONNALITE
   Suite à la restitution 15057, les messages d'alarme SUPERVIS_94 et SUPERVIS_95 ont été
   introduits pour alerler l'utilisateur quand le temps système devient grand.
   Le pourcentage affiché dans le message est erroné.
   On corrige la valeur qui vaut 50% et non 20%.
   
   On ajoute aussi quand c'est possible l'impression de la valeur de VmPeak à la fin de
   chaque commande (valeur maximale de la mémoire allouée par le processus au cours de
   l'exécution).
   
   Les différentes valeurs imprimées seront revues dans le cadre de la fiche 15363.
   
   Dans le cas du test perf009d, on voit apparaitre la consommation mémoire due à l'appel à
   MUMPS :
   
   
      DEP=MECA_STATIQUE(EXCIT=(_F(TYPE_CHARGE='FIXE',
                                 CHARGE=CHAR),
                              _F(TYPE_CHARGE='FIXE',
                                 CHARGE=PRES)),
                       INFO=1,
                       OPTION='SANS',
                       SOLVEUR=_F(STOP_SINGULIER='OUI',
                                  TYPE_RESOL='AUTO',
                                  OUT_OF_CORE='OUI',
                                  ELIM_LAGR2='OUI',
                                  PCENT_PIVOT=10,
                                  METHODE='MUMPS',
                                  NPREC=8,
                                  MATR_DISTRIBUEE='OUI',
                                  RENUM='AUTO',
                                  PRETRAITEMENTS='AUTO',
                                  POSTTRAITEMENTS='AUTO',
                                  RESI_RELA=-1.0),
                       INST=0.0,
                       MODELE=MODE,
                       CHAM_MATER=MATE,
                       );
   
   
    Le calcul est séquentiel, on ne peut donc pas utiliser MATR_DISTRIBUEE='OUI'.
    On force MATR_DISTRIBUEE='NON'.
    --- NOMBRE TOTAL DE NOEUDS :                 280312  DONT : 
                    18792  NOEUDS "LAGRANGE"
    --- NOMBRE TOTAL D'EQUATIONS :                 803352
    --- TAILLE DU PROFIL MORSE DE LA TRIANGULAIRE SUPERIEURE (FORMAT SCR):     28248009
    --- DONC LA TAILLE DE LA MATRICE EST:
    --- EN SYMETRIQUE     NNZ=     28248009
    --- EN NON SYMETRIQUE NNZ=     55692666
    
      CHAMP STOCKE :             DEPL INSTANT :  0.00000E+00  NUMERO D'ORDRE :     1
   #1 Resolution des systemes lineaires              CPU (USER+SYST/SYST/ELAPS):    221.39  
     15.80    217.96
   #2 Calculs elementaires et assemblages            CPU (USER+SYST/SYST/ELAPS):     27.10  
      0.45     27.09
   #4 DECHARGEMENT DE LA MEMOIRE SUR DIsque          CPU (USER+SYST/SYST/ELAPS):      1.34  
      1.26      1.34
     
       #  USAGE DE LA MEMOIRE JEVEUX
       #     - MEMOIRE DYNAMIQUE CONSOMMEE :        73.52 Mo (MAXIMUM ATTEINT :       966.06 Mo) 
       #     - MEMOIRE UTILISEE            :         7.58 Mo (MAXIMUM ATTEINT :       824.97 Mo) 
       #  USAGE DE LA MEMOIRE POUR LE PROCESSUS
       #     - VmPeak :      1591.44 Mo - VmData :       322.38 Mo - VmSize :       508.06 Mo
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
   Test personnel
NB_JOURS_TRAV  : 0.25
--------------------------------------------------------------------------------
RESTITUTION FICHE 015179 DU 2010-06-10 10:47:32
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
   Test perf001e en version STA10.2 sur Bull
FONCTIONNALITE
   En version STA10.2, le test perf001e s'arrête en erreur, Il s'agit d'un problème de manque
   de mémoire rencontré lors de l'appel au solveur MUMPS.
   Après 8 incréments de version deuis la stabilisation (10.2.8) le test a tourné sans
   problème en version NEW10. La seule différence constatée mais non élucidée concerne les
   valeurs de la mémoire affichées à la fin de chaque commande récupérées au niveau de /proc
   : VmSize est supérieure d'environ 65 Mo pour la version stabilisée.
   
   En relançant le test perf001e en version STA10 et en faisant passer la taille mémoire du
   job de 625 Mo (en NEW10) à 690 Mo l'exécution se déroule sans problème.
   
   L'exécutable de la version stabilisée étant figé, je classe la fiche sans-suite.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
   test perf001e
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------
RESTITUTION FICHE 015177 DU 2010-06-10 10:42:05
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
   Test sdnd121a en version STA10.2
FONCTIONNALITE
   Traitement identique à la fiche 15179.
   En version STA10.2, le test sdnd121a s'arrête en erreur, Il s'agit d'un problème la
   vérification des structures de données.
   Après 8 incréments de version depuis la stabilisation (10.2.8) le test a tourné sans
   problème en version NEW10. La seule différence constatée mais non élucidée concerne les
   valeurs de la mémoire affichées à la fin de chaque commande récupérées au niveau de /proc
   : VmSize est supérieure d'environ 65 Mo pour la version stabilisée.
   
   En relançant le test sdnd121a en version STA10 et en faisant passer la taille mémoire du
   job de 512 Mo (en NEW10) à 577 Mo l'exécution se déroule sans problème.
   
   L'exécutable de la version stabilisée étant figé, je classe la fiche sans-suite.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
   test sdnd121a
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------
RESTITUTION FICHE 015385 DU 2010-07-23 13:17:38
TYPE express concernant Code_Aster (VERSION 7.0)
TITRE
   Suprression des messages F ou A de type JEVEUX_01
FONCTIONNALITE
   But de la fiche:
   ================
   Résorber tous les messages du type JEVEUX_01 pour éviter de polluer le code avec des
   chaînes de caractères et pouvoir plus facilement offrit une traduction dans le catalogue
   python.
   
   Les 21 routines concernées sont les suivantes :  
   
   JELSTC JENUNO JEPRAT JERAZO JETYPR JEVEUO JEXATR
   JJANAL JJCODN JJCPSG JJCREC JJCROC JJIMHD JJIMPO
   JJLCHD JJLIBP JJLIRS JJVERN JXLIRO JXLOCS JXVEUO
   
   On complète le catalogue bibpyt/Messages/jeveux1.py par 52 nouveaux messages.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   liste restreinte
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR abbas        ABBAS Mickael          DATE 26/07/2010 - 12:37:50

--------------------------------------------------------------------------------
RESTITUTION FICHE 015379 DU 2010-07-22 09:25:52
TYPE express concernant Code_Aster (VERSION 7.0)
TITRE
   Messages d'erreur JEVEUX_1
FONCTIONNALITE
   Lors du post-traitement, des messages d'erreur sont de type JEVEUX_1
   avec une chaine en dur dans le fortran (pechli.f, pewext.f) 
   
   Pareil dans AFFE_CHAR_MECA (caliag.f, aflrch.f )
   Je corrige en créant des vrais messages.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   liste restreinte
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------



========================================================================
=== Recapitulation des operations demandees pour toutes les restitutions
========================================================================


    TYPE Action    unite                      user      Auteur         nblg  ajout suppr.

 CASTEST MODIF sslp317a                      geniaut S.GENIAUT          246      9     11
 CASTEST MODIF ssnp102a                      geniaut S.GENIAUT          494      2      2
 CASTEST MODIF ssnp102b                      geniaut S.GENIAUT          391      2      2
 CASTEST MODIF ssnv129e                       desoza T.DESOZA           215      4      2
 CASTEST MODIF ssnv503h                       desoza T.DESOZA           411      9      9
       C MODIF supervis/astermodule         lefebvre J-P.LEFEBVRE      4152      2      2
       C MODIF utilitai/mempid              lefebvre J-P.LEFEBVRE        79     11      3
 FORTRAN AJOUT utilitai/armin                 desoza T.DESOZA            91     91      0
 FORTRAN MODIF algorith/lcegeo                 abbas M.ABBAS            190     80     67
 FORTRAN MODIF algorith/mappar                desoza T.DESOZA           398      9      3
 FORTRAN MODIF algorith/mmconv                desoza T.DESOZA           228      5      5
 FORTRAN MODIF algorith/mmmcri                desoza T.DESOZA           189     18      5
 FORTRAN MODIF algorith/nmas2d                 abbas M.ABBAS            483      5      4
 FORTRAN MODIF algorith/nmas3d                 abbas M.ABBAS            418      4      3
 FORTRAN MODIF algorith/nmgc2d                 abbas M.ABBAS            330      6      5
 FORTRAN MODIF algorith/nmgc3d                 abbas M.ABBAS            333     13     12
 FORTRAN MODIF algorith/nmgr2d                 abbas M.ABBAS            374      4      3
 FORTRAN MODIF algorith/nmgr3d                 abbas M.ABBAS            363      4      3
 FORTRAN MODIF algorith/nmgz2d                 abbas M.ABBAS            325      7      6
 FORTRAN MODIF algorith/nmgz3d                 abbas M.ABBAS            312      7      6
 FORTRAN MODIF algorith/nmpl2d                 abbas M.ABBAS            296      5      5
 FORTRAN MODIF algorith/nmpl3d                 abbas M.ABBAS            303      4      3
 FORTRAN MODIF algorith/nmtble                desoza T.DESOZA           225      6      2
 FORTRAN MODIF algorith/nspl2d                 abbas M.ABBAS            233      5      4
 FORTRAN MODIF algorith/nspl3d                 abbas M.ABBAS            218      5      4
 FORTRAN MODIF algorith/pewext              lefebvre J-P.LEFEBVRE       138      6     11
 FORTRAN MODIF algorith/xnmgr2                 abbas M.ABBAS            383     12     14
 FORTRAN MODIF algorith/xnmgr3                 abbas M.ABBAS            413     11     13
 FORTRAN MODIF algorith/xnmgr                  abbas M.ABBAS            186     11     15
 FORTRAN MODIF algorith/xnmpl2                 abbas M.ABBAS            375      7      9
 FORTRAN MODIF algorith/xnmpl3                 abbas M.ABBAS            382     11     13
 FORTRAN MODIF algorith/xnmpl                  abbas M.ABBAS            202      5      6
 FORTRAN MODIF debug/memres                 lefebvre J-P.LEFEBVRE       125      2      2
 FORTRAN MODIF debug/memver                 lefebvre J-P.LEFEBVRE        69      2      2
 FORTRAN MODIF elements/mmmmat                desoza T.DESOZA           317     42     33
 FORTRAN MODIF elements/mmmtee                desoza T.DESOZA           276      5      5
 FORTRAN MODIF elements/mmmtem                desoza T.DESOZA           272      5      5
 FORTRAN MODIF elements/mmmtfe                desoza T.DESOZA           186     15     80
 FORTRAN MODIF elements/mmmtff                desoza T.DESOZA           163      4      4
 FORTRAN MODIF elements/mmmtfm                desoza T.DESOZA           187     17     78
 FORTRAN MODIF elements/mmmtfu                desoza T.DESOZA           110      6      8
 FORTRAN MODIF elements/mmmtme                desoza T.DESOZA           276      5      5
 FORTRAN MODIF elements/mmmtmm                desoza T.DESOZA           266      5      5
 FORTRAN MODIF elements/mmmtuu                desoza T.DESOZA           142      8      8
 FORTRAN MODIF elements/mmmvee                desoza T.DESOZA           231      9     12
 FORTRAN MODIF elements/mmmvff                desoza T.DESOZA           233     19     11
 FORTRAN MODIF elements/mmmvmm                desoza T.DESOZA           231      9     11
 FORTRAN MODIF elements/te0364                desoza T.DESOZA           440     49     49
 FORTRAN MODIF elements/te0539                 abbas M.ABBAS            326      5      5
 FORTRAN MODIF elements/te0543                 abbas M.ABBAS            143      3      4
 FORTRAN MODIF elements/te0544                 abbas M.ABBAS            126      3      4
 FORTRAN MODIF jeveux/jeinfo                lefebvre J-P.LEFEBVRE        65      9      3
 FORTRAN MODIF jeveux/jelstc                lefebvre J-P.LEFEBVRE       102      5      6
 FORTRAN MODIF jeveux/jenuno                lefebvre J-P.LEFEBVRE       154     13     19
 FORTRAN MODIF jeveux/jeprat                lefebvre J-P.LEFEBVRE       196     11     16
 FORTRAN MODIF jeveux/jerazo                lefebvre J-P.LEFEBVRE       198      5      8
 FORTRAN MODIF jeveux/jetypr                lefebvre J-P.LEFEBVRE       112      8     14
 FORTRAN MODIF jeveux/jeveuo                lefebvre J-P.LEFEBVRE       156      6     10
 FORTRAN MODIF jeveux/jexatr                lefebvre J-P.LEFEBVRE        75      7     12
 FORTRAN MODIF jeveux/jjanal                lefebvre J-P.LEFEBVRE        75      6     10
 FORTRAN MODIF jeveux/jjcodn                lefebvre J-P.LEFEBVRE       122      9     13
 FORTRAN MODIF jeveux/jjcpsg                lefebvre J-P.LEFEBVRE        87      3      4
 FORTRAN MODIF jeveux/jjcrec                lefebvre J-P.LEFEBVRE       137      8     14
 FORTRAN MODIF jeveux/jjcroc                lefebvre J-P.LEFEBVRE       215      6     13
 FORTRAN MODIF jeveux/jjimhd                lefebvre J-P.LEFEBVRE       177      5      8
 FORTRAN MODIF jeveux/jjimpo                lefebvre J-P.LEFEBVRE       208      6     11
 FORTRAN MODIF jeveux/jjlchd                lefebvre J-P.LEFEBVRE       235      3      4
 FORTRAN MODIF jeveux/jjlibp                lefebvre J-P.LEFEBVRE       122      3      5
 FORTRAN MODIF jeveux/jjlirs                lefebvre J-P.LEFEBVRE        67      6     16
 FORTRAN MODIF jeveux/jjvern                lefebvre J-P.LEFEBVRE        75      5      8
 FORTRAN MODIF jeveux/jxliro                lefebvre J-P.LEFEBVRE       104      3      4
 FORTRAN MODIF jeveux/jxlocs                lefebvre J-P.LEFEBVRE        79      3      5
 FORTRAN MODIF jeveux/jxveuo                lefebvre J-P.LEFEBVRE       259      4      6
 FORTRAN MODIF modelisa/aflrch              lefebvre J-P.LEFEBVRE       355      7     15
 FORTRAN MODIF modelisa/caliag              lefebvre J-P.LEFEBVRE       475      9     13
 FORTRAN MODIF utilitai/pechli              lefebvre J-P.LEFEBVRE       194      9     13
  PYTHON AJOUT Messages/affecharmeca        lefebvre J-P.LEFEBVRE        40     40      0
  PYTHON AJOUT Messages/postelem            lefebvre J-P.LEFEBVRE        53     53      0
  PYTHON MODIF Execution/E_ETAPE            lefebvre J-P.LEFEBVRE       318      9      4
  PYTHON MODIF Messages/algorith4              abbas M.ABBAS            238      1      4
  PYTHON MODIF Messages/assembla              desoza T.DESOZA           285      3      2
  PYTHON MODIF Messages/jeveux1             lefebvre J-P.LEFEBVRE       406    321      1
  PYTHON MODIF Messages/jeveux              lefebvre J-P.LEFEBVRE       545      1      5
  PYTHON MODIF Messages/supervis            lefebvre J-P.LEFEBVRE       420      2      2


        nb unites  nb lignes  ajouts  suppr.  difference
 AJOUT :    3         184       184              +184
 MODIF :   81       23660       998     851      +147
 SUPPR :    0           0                 0        +0
 DEPLA :    0           0 
         ----      ------     ------  ------   ------
 TOTAL :   84       23844      1182     851      +331 
