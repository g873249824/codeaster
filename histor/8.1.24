

-----------------------------------------------------------------------
--- AUTEUR assire A.ASSIRE   DATE  le 21/11/2005 a 15:51:21

------------------------------------------------------------------------------
CORRECTION AL 2005-438
   NB_JOURS_TRAV : 2. (AA+CD+MC)
   INTERET_UTILISATEUR : OUI
   TITRE :  Stanley et recuperation des erreurs Aster
   FONCTIONNALITE
     Depuis la derniere restitution de Stanley, on trappe les erreurs <F> des
     commandes Aster générées par Stanley afin de ne pas planter. Dans certains
     cas, la commande Aster qui echoue ne cree pas completement le concept, et
     le nettoyage n'etait potentiellement pas bien fait.
   DETAILS
     - Modification dans UTFINM.F : en cas de levée d'exception, le concept
       courant est maintenant détruit au niveau du fortran.
     - Dans Stanley, on a crée une classe ERREUR dans laquelle sont centralisées
       les operations effectuées apres une levée d'erreur des commandes Aster
       (destructions d'objets temporaires, affichage d'un message d'erreur, ..)

   RESU_FAUX_VERSION_EXPLOITATION    :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   NON
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
   Tests persos.


-----------------------------------------------------------------------
--- AUTEUR boyere E.BOYERE   DATE  le 22/11/2005 a 16:50:25

------------------------------------------------------------------------------
REALISATION EL 2005-293
   NB_JOURS_TRAV  : 0.5
   INTERET_UTILISATEUR : NON
   TITRE MACRO_MODE_MECA compte des frequences en double
   FONCTIONNALITE
     Un calcul modal avec MACRO_MODE_MECA a conduit a une base modale ou certains
     modes sont comptes deux fois. Bien sur cette base modale est fausse
     et l'utilisateur est stoppe un peu plus loin car il utilise une base
     incoherente.
     Tout d'abord pourquoi l'utilisateur n'a-t-il pas ete arrete des
     le calcul modal et empeche de poursuivre son calcul avec une base modale
     fausse ?
     Tout simplement, il a utilise l'option STOP_ERREUR='NON', qui est bien entendu
     tres fortement deconseillee.
     Ensuite comment faire aboutir le calul modal ?
     Comme l'utilisateur le rapporte, l'affichage de Code_Aster precise
     que l'algorithme a lance une recherche de modes sur une bande de frequences elargie
     par rapport a ce que l'utilisateur a demande et qu'il a trouve des frequences
     en dehors de la bande de frequence specifiee.
         VERIFICATION A POSTERIORI DES MODES
         LE MODE NUMERO  11  DE FREQUENCE   1.4497E+01 EST EN DEHORS DE
         L'INTERVALLE DE RECHERCHE :  1.5000E+01 ,   3.0000E+01
     Il y a donc probleme et, en fonctionnement normal (STOP_ERREUR='OUI'),
     l'utilisateur est arrete.
     Dans ce cas, il faut relancer le calcul en diminuant la tolerance sur
     la largeur de l'intervalle de recherche.
     Elle est reglable avec le parametre PREC_SHIFT du bloc CALC_FREQ :
        CALC_FREQ=_F( FREQ=(0.1,15.0,30.0,45.0,55.0,),
                      PREC_SHIFT=0.005,),
     Ici, on a reduit a 0,05% la valeur du shift, qui vaut par defaut 0,5%.
     On evite ainsi d'accrocher des modes qui sont en dehors de la bande
     de frequence de recherche et le calcul modal passe sans probleme,
     sans avoir recours au barbare STOP_ERREUR='NON'.

   RESU_FAUX_VERSION_EXPLOITATION    :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   NON
   RESTITUTION_VERSION_DEVELOPPEMENT :   NON
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION


-----------------------------------------------------------------------
--- AUTEUR cibhhlv L.VIVAN   DATE  le 22/11/2005 a 16:58:36

--------------------------------------------------------------------------
CLASSEMENT SANS SUITE AL 2005-421
   NB_JOURS_TRAV  : 0.5
   POUR_LE_COMPTE_DE   : O.NICOLAS
   INTERET_UTILISATEUR : NON
   TITRE :  IMPR_RESU format IDEAS
   FONCTIONNALITE
     Dans le cas de modes complexes, il semble que IMPR_RESU n'imprime que
     la partie reelle et une partie imaginaire toujours nulle au format IDEAS.
   DETAIL
     Apres vérification, il n'y a pas d'anomalie.
     Pour le RECORD 8, on imprime bien
       FIELD 1: REAL PART EIGENVALUE
       FIELD 2: IMAGINARY PART EIGENVALUE
       FIELD 3: REAL PART EIGENVALUE
       FIELD 4: IMAGINARY PART EIGENVALUE
       ...
     La première ligne correspond aux ddl de translation (3*2=6valeurs)
     La première ligne correspond aux ddl de rotation (3*2=6valeurs)
     Dans le cas de l'étude associé, comme il n'y a pas de ddl de rotation
     le code imprime une ligne de 0.

   RESU_FAUX_VERSION_EXPLOITATION    :  NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
   RESTITUTION_VERSION_EXPLOITATION  :  NON
   RESTITUTION_VERSION_DEVELOPPEMENT :  NON
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
     validation deja implanté dans sdld21c :
       IMPR_RESU au format IDEAS puis relecture via un LIRE_RESU


-----------------------------------------------------------------------
--- AUTEUR cibhhpd L.SALMONA   DATE  le 22/11/2005 a 14:33:07

--------------------------------------------------------------------------------
CORRECTION AL 2005-427
   NB_JOURS_TRAV  : 3.
   INTERET_UTILISATEUR : OUI
   POUR_LE_COMPTE_DE   : E.GALENNE
   TITRE :  AFFE_CHAR_MECA routine canort et éléments de Barsoum
   FONCTIONNALITE
     La réécriture de la routine canort en prenant en compte des éléments
     quadratiques ne prenait pas en compte les éléments de Barsoum ( a
     Jacobien singulier ). Il fallait donc traiter ce problème de facon
     particulière.
   DETAILS :
     Pour dépasser la sigularité de la matrice jacobienne, on choisi dans le cas
     ou on détecte des élements de Barsoum de calculer les normales en
     considérant la maille comme linéaire. La singularité est donc
     automatiquement levé.
     Pour détecter si l'élément est de Barsoum, on fait un test sur la norme du
     vecteur normal ainsi obtenu. Dans le cas où celui-ci est trop faible, on
     passe en linéaire.
     La norme est considéré comme trop faible si elle est inférieure à 10E-6
     fois la taille de la plus petite arete du maillage.
     Nouvelle routine crée : NORLIN pour calculer la normale en linéaire a
     partir d'un maillage quadratique.
     Modification de dernière minute :
     =================================
     Un bug dans la routine canort introduit dans la version 8.1.22 m'oblige à
     modifier les cas tests ssnv112b et ssnv112c déja modifiés pour cette
     restitution. Il s'agit de valeurs de non régression ( valeur pour le
     champ ERRE_ELNO_ELGA ).

   RESU_FAUX_VERSION_EXPLOITATION    :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   NON
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION : passage de tous les cas tests utilisant canort + sslv134b
     modifié pour prendre en compte le mélange Barsoum calcul de normale


-----------------------------------------------------------------------
--- AUTEUR d6bhhjp J.P.LEFEBVRE   DATE  le 21/11/2005 a 11:36:51

------------------------------------------------------------------------
CORRECTION AL 2005-404
   NB_JOURS_TRAV  : 0.5
   INTERET_UTILISATEUR : NON
   TITRE :  MEMOIRE
   FONCTIONNALITE
   DETAILS
     Je modifie la taille mémoire affectée dans le fichier ssnp121i
     pour la faire passer de 100 a 128 Mo.
     Les autres tests fonctionnent normalement suite à la suppression
     de la base Locale.

   RESU_FAUX_VERSION_EXPLOITATION    :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   NON
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
     ssnp121i


-----------------------------------------------------------------------
--- AUTEUR durand C.DURAND   DATE  le 21/11/2005 a 17:32:52

------------------------------------------------------------------------
CLASSEMENT SANS SUITE AL 2005-221
   NB_JOURS_TRAV  : 0.
   IMPACT_DOCUMENTAIRE : NON
   INTERET_UTILISATEUR : NON
   TITRE DEFI_FONCTION
   FONCTIONNALITE
     pb dans DEFI_FONCTION avec des listes d'abscisses et d'ordonnées
     de longueurs différentes. Désormais, le message d'erreur est OK :
       <F> <DEFI_FONCTION> IL MANQUE DES VALEURS DANS abs,
       LISTE PLUS PETITE QUE A15_V


-----------------------------------------------------------------------
--- AUTEUR f1bhhaj J.ANGLES   DATE  le 21/11/2005 a 11:30:40

-----------------------------------------------------------------------------------
CORRECTION AL 2005-416
   NB_JOURS_TRAV : 1
   INTERET_UTILISATEUR : NON
   TITRE :  CALC_FATIGUE
   FONCTIONNALITE : Cela concerne la commande CALC_FATIGUE
   DETAILS : L'arrêt fatal avait lieu dans la routine paqnoe.f après un test
     trop sévère qui interdisait des cas licites. Ce test a été modifié ainsi
     que le calcul de la valeur testée. Nous avons également modifié la routine
     paqmai.f pour les mêmes raisons.

   RESU_FAUX_VERSION_EXPLOITATION    :  NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
   RESTITUTION_VERSION_EXPLOITATION  :  OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION : SSLV135E et calcul FATHER sur 1000 pas de temps.

-----------------------------------------------------------------------------------
CORRECTION AL 2005-429
   NB_JOURS_TRAV : 1
   INTERET_UTILISATEUR : NON
   TITRE : CALC_FATIGUE et POST_FATIGUE
   FONCTIONNALITE : Cela concerne la commande CALC_FATIGUE
   DETAILS : Les routines fgpic2 et avpic2 doivent réaranger l'historique de chargement
   de tel sorte que le chargement débute par la valeur maximale, en valeur absolue.
   Cela n'était pas fait dans le cas où le pic de plus grande valeur absolue
   était négatif.
   IMPACT SUR LES RESULTATS.
   - Il y a un impact uniquement pour les critères qui utilisent la méthode RAINFLOW.
   - Si le chargement est périodique et symétrique l'impact est nul, les résultats sont OK.
   - Si le chargement est non périodique et long (beaucoup de sous-cycles), l'impact sur les
     résultats est négligeable.
   - Si le chargement est non périodique et court (peu de sous-cycles), l'impact sur
     les résultats reste faible. Dans ce cas un certain nombre de sous-cyles auront une
     amplitude différente et leur nombre modifié de quelques unités.

   RESU_FAUX_VERSION_EXPLOITATION    :  OUI   DEPUIS : 3.03.28
                     POUR POST_FATIGUE ET CALC_FATIGUE (chargement uniaxial)
                                              DEPUIS : 7.02.05
                     POUR CALC_FATIGUE (chargement multiaxial)
   RESU_FAUX_VERSION_DEVELOPPEMENT   :  OUI   DEPUIS : 8.0.0
                     POUR CALC_FATIGUE (chargement multiaxial)
   RESTITUTION_VERSION_EXPLOITATION  :  OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION : SDNL112B SZLZ100A SZLZ101A SZLZ102A SZLZ103A SZLZ107A SZLZ108A
                SZLZ109A SZLZ111A SZLZ111B SSLV135C SSLV135D SSLV135E


-----------------------------------------------------------------------
--- AUTEUR galenne E.GALENNE   DATE  le 21/11/2005 a 11:25:48

-------------------------------------------------------------------------
CORRECTION AL 2005-379
   NB_JOURS_TRAV  : 1
   INTERET_UTILISATEUR : NON
   TITRE : cas test hplv103b sous Linux
   FONCTIONNALITE
     Avec la version NEW8.1.17 compilée sous linux Calibre3 et Rocks le test hplv103b
     s'arrete en NOOK :
       ---- TABLE: GKLOC1   NOM_PARA: K1_LOCAL
       REFERENCE: NON_REGRESSION
       NOOK GKLOC1       RELA    -0.049 % VALE: 1.5873850600550E+05
       K1_LOCAL          TOLE     0.001 % REFE: 1.5881571155563E+05
   Sur l'ensemble des cas test du calcul de G local, une grande majorité (sslv110,sslv1112,
   sslv310,sslv311) ne présentent pas de différence entre plateformes de calcul ; quelques
   uns (hplp103,sslv134) ont un écart inférieur à 0.5 %.
   Cet écart assez faible ne semble donc pas traduire un problème dans la programmation
   du calcul de G local : pour le cas test hplv103b, le nombre de mailles retenues dans
   les couronnes d'intégration théta est très légèrement différent entre linux et clayastr,
   ce qui peut expliquer la différence de résultat. On se contente de modifier la tolérance
   du test.

   RESU_FAUX_VERSION_EXPLOITATION    :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   NON
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION


-----------------------------------------------------------------------
--- AUTEUR mcourtoi M.COURTOIS   DATE  le 21/11/2005 a 11:26:30

------------------------------------------------------------------------------
CORRECTION AL 2005-431
   NB_JOURS_TRAV  : 1
   INTERET_UTILISATEUR : NON
   TITRE :  Tests zzzz208 a et b en erreur
   FONCTIONNALITE
      L'appel à PUTCON dans putcolljev était mal écrit : on passait au
      fortran la valeur des entiers au lieu de passer le pointeur.

   RESU_FAUX_VERSION_EXPLOITATION    :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   NON
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION

------------------------------------------------------------------------------
CORRECTION AL 2005-433
   NB_JOURS_TRAV  : 0.5
   INTERET_UTILISATEUR : NON
   TITRE :  Impression d'une courbe à partir d'une table contenant des trous
   FONCTIONNALITE
      Lorsque l'on extrait deux colonnes d'une table pour tracer une courbe,
      il faut supprimer les lignes dont une des deux "cellules" est vide.

   RESU_FAUX_VERSION_EXPLOITATION    :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
      étude jointe


-----------------------------------------------------------------------
--- AUTEUR mjbhhpe J.L.FLEJOU   DATE  le 21/11/2005 a 11:34:52

-----------------------------------------------------------------------------------
CORRECTION AL 2005-434
   NB_JOURS_TRAV  : 0.15
   INTERET_UTILISATEUR : OUI
   TITRE :  AFFE_CARA_ELEM
   FONCTIONNALITE :
     Blindage du comportement de AFFE_CARA_ELEM lorsque des éléments ne sont pas affectés
     Emission d'alarmes supplémentaires
   DETAILS
     Analyse du cas fourni par l'utilisateur
     Le 1er AFFE_CARA_ELEM émet l'alarme suivante : Un discret n'est pas affecté
       LE MODELE MO       CONTIENT :  808 ELEMENT(S) POUTRE
                                        1 ELEMENT(S) DISCRET
       <A> <AFFE_CARA_ELEM> LE NOEUD G02Q02   N'A PAS ETE AFFECTE PAR UNE MATRICE.

     Le 2nd AFFE_CARA_ELEM n'a pas le temps d'émettre l'alarme il plante avant.
     En fait AFFE_CARA_ELEM analyse le modèle et trouve 808 poutres et 1 discret.
     On s'attend donc a affecter 808 poutres or ce n'est pas le cas.
     Il faut donc blinder le source.
     Ajout d'alarmes dans AFFE_CARA_ELEM
     S'il existe des POUTRES ou des BARRES ou des CABLES dans le modèle et qu'aucune
     occurence d'affectation n'existe pour ces éléments on émet une alarme.
     !!!! POUR LA SUITE CA PLANTE QUAND MEME !!!!
     Par la suite le calcul risque de planter car des éléments ne seront pas affectés.
     Liste des fichiers modifiés:  op0019.f

   RESU_FAUX_VERSION_EXPLOITATION    :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : OUI
     DOC_U : U4.42.01
       EXPL_ : Indiquer que la commande AFFE_CARA_ELEM doit être exhaustive pour
               tous les éléments de structure du modèle.
   VALIDATION
     Passage de l'étude liée à la fiche

-----------------------------------------------------------------------------------
REALISATION EL 2005-303
   NB_JOURS_TRAV  : 0.05
   INTERET_UTILISATEUR : OUI
   TITRE :  Poutres Multi-Fibres
   FONCTIONNALITE :
     La limite de 1000 mailles dans une section n'a pas de raison d'exister
     !!! CECI N'EST PAS UNE EL, MAIS UNE AL !!!
   DETAILS
     On enlève le test de vérification, le dimensionnement du vecteur était
     fait avec un WKVECT.
     Liste des fichiers modifiés: pmfitg.f

   RESU_FAUX_VERSION_EXPLOITATION    :   NON
   RESU_FAUX_VERSION_DEVELOPPEMENT   :   NON
   RESTITUTION_VERSION_EXPLOITATION  :   OUI
   RESTITUTION_VERSION_DEVELOPPEMENT :   OUI
   IMPACT_DOCUMENTAIRE : NON
   VALIDATION
     Passage du cas test ssnl119a en augmentant le nombre de maille


========================================================================
=== Recapitulation des operations demandees pour toutes les restitutions
========================================================================


    TYPE Action    unite                      user      Auteur         nblg  ajout suppr.

       C MODIF supervis/astermodule         mcourtoi M.COURTOIS        4072      7     12
 CASTEST MODIF hplv103b                      galenne E.GALENNE          369      2      2
 CASTEST MODIF sdnl112b                      f1bhhaj J.ANGLES           490      1      1
 CASTEST MODIF sslv134b                      cibhhpd L.SALMONA          702     20     11
 CASTEST MODIF sslv135c                      f1bhhaj J.ANGLES          1184      1      1
 CASTEST MODIF sslv135d                      f1bhhaj J.ANGLES           780      1      1
 CASTEST MODIF sslv135e                      f1bhhaj J.ANGLES          1057      1      1
 CASTEST MODIF ssnp121i                      d6bhhjp J.P.LEFEBVRE       251      1      1
 CASTEST MODIF ssnv112b                      cibhhpd L.SALMONA          233      3      3
 CASTEST MODIF ssnv112c                      cibhhpd L.SALMONA          182      3      3
 CASTEST MODIF szlz100a                      f1bhhaj J.ANGLES           314      1      1
 CASTEST MODIF szlz101a                      f1bhhaj J.ANGLES           153      1      1
 CASTEST MODIF szlz102a                      f1bhhaj J.ANGLES           335      1      1
 CASTEST MODIF szlz103a                      f1bhhaj J.ANGLES           258      1      1
 CASTEST MODIF szlz105a                      f1bhhaj J.ANGLES           299      1      1
 CASTEST MODIF szlz105b                      f1bhhaj J.ANGLES           302      1      1
 CASTEST MODIF szlz107a                      f1bhhaj J.ANGLES           147      1      1
 CASTEST MODIF szlz108a                      f1bhhaj J.ANGLES           298      1      1
 CASTEST MODIF szlz109a                      f1bhhaj J.ANGLES           178      1      1
 CASTEST MODIF szlz111a                      f1bhhaj J.ANGLES           202      1      1
 CASTEST MODIF szlz111b                      f1bhhaj J.ANGLES           202      1      1
 FORTRAN AJOUT modelisa/norlin               cibhhpd L.SALMONA          212    212      0
 FORTRAN MODIF elements/pmfitg               mjbhhpe J.L.FLEJOU          70      1      5
 FORTRAN MODIF modelisa/canort               cibhhpd L.SALMONA          661     60     46
 FORTRAN MODIF modelisa/op0019               mjbhhpe J.L.FLEJOU         534     19      3
 FORTRAN MODIF prepost/avpic2                f1bhhaj J.ANGLES           164     30     31
 FORTRAN MODIF prepost/fgpic2                f1bhhaj J.ANGLES            98     33     25
 FORTRAN MODIF prepost/paqmai                f1bhhaj J.ANGLES           613     24      9
 FORTRAN MODIF prepost/paqnoe                f1bhhaj J.ANGLES           444     14      8
 FORTRAN MODIF utilifor/utfinm                assire A.ASSIRE           122     16      6
  PYTHON MODIF Macro/impr_table_ops         mcourtoi M.COURTOIS         247      1      1
  PYTHON MODIF Stanley/stanley                assire A.ASSIRE          2369    109    115
  PYTHON MODIF Utilitai/Table               mcourtoi M.COURTOIS         841     23     20


        nb unites  nb lignes  ajouts  suppr.  difference
 AJOUT :    1         212       212              +212
 MODIF :   32       18171       381     316       +65
 SUPPR :    0           0                 0        +0
 DEPLA :    0           0 
         ----      ------     ------  ------   ------
 TOTAL :   33       18383       593     316      +277 
