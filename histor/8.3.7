

-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR vabhhts      PELLET Jacques         DATE 11/07/2006 - 13:27:57

--------------------------------------------------------------------------------
RESTITUTION FICHE 009849 DU 2006-06-16 10:45:05
TYPE anomalie concernant Code_Aster (VERSION 2.x)
TMA : CS
TITRE
   COPISD ne fonctionne pas sur des MAILLAGEs
FONCTIONNALITE
   Un developpeur se plaint :
   COPISD ne copie pas tous les objets d'un maillage !
   
   En effet certains objets ne sont pas dupliques :
   exemple de la table de caracteristiques du maillage.
   Il faut boucler sur les objets stockes dans '.LTNT' et les
   dupliquer.
   Dans la routine copisd.f pour le type MAILLAGE
   rajout d'une boucle sur les objets de .LTNT et duplication
   de ces objets.
   
   De plus il manque les objets .COORDO
   
   Un developpeur a restitue en 8.2.16 la modificaion suivante
   dans la routine copich :
   <       CH1=CH1Z
   <       CH2=CH2Z
   ---
   >       CH1=CH1Z(1:19)
   >       CH2=CH2Z(1:19)
   CH1Z et CH2Z sont declare *(*)
   
   Dans la routine copisd, l'appel a copich est :
   CALL COPICH(BAS2,MAIL1//'.COORDO',MAIL2//'.COORDO')
   Les champs .COORDO ne sont pas dupliques.
   
   Correction dans copich :
   CH1 = CH1Z
   CH2 = CH2Z
   En v7, cette modification n'est pas a faire.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   test perso
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR galenne      GALENNE E.             DATE 11/07/2006 - 16:11:15

--------------------------------------------------------------------------------
RESTITUTION FICHE 009874 DU 2006-06-27 13:58:21
TYPE anomalie concernant Code_Aster (VERSION 7.7)
NB_JOURS_TRAV  : 0.2
TITRE
   calcul de charge limite
FONCTIONNALITE
   Probleme : calcul elastoplastique sur un coude (maillage genere par
   macr_ascouf_mail) qui
   plante au debut de STAT_NON_LINE avec le message suivant :
   <E> <STAT_NON_LINE> <CALCUL>  LE TYPE_ELEMENT: MECA_DIS_TR_N NE SAIT PAS ENCORE CALCULER
   L'OPTION: REFE_FORC_NODA. ON ARRETE TOUT.
   
   Explication : le critere de convergence defini dans STAT_NON_LINE est "RESI_REFE_RELA".
   Or
   le maillage comporte des elements discrets (points P1 et P2 pour l'application des CL),
   pour lesquels cette option n'est pas autorisee.
   
   Solution : utiliser un autre critere de convergence (RESI_GLOB_RELA ou RESI_GLOB_MAXI)
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
   /
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR kham         KHAM MARC              DATE 11/07/2006 - 10:39:59

--------------------------------------------------------------------------------
RESTITUTION FICHE 009712 DU 2006-04-27 05:31:19
TYPE anomalie concernant Code_Aster (VERSION 8.2)
NB_JOURS_TRAV  : 0.5
TITRE
   test sdnl111e sous linux Rocks et Calibre 3 en version NEW8.2.18
FONCTIONNALITE
   pb resorbe avec la correction de la fiche 9881 sur un plantage sous linux du a la
   methode
   continue
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   cas-test
--------------------------------------------------------------------------------
RESTITUTION FICHE 009881 DU 2006-06-29 08:40:36
TYPE anomalie concernant Code_Aster (VERSION 8.3)
NB_JOURS_TRAV  : 0.5
TITRE
   contact methode continue en version new8.3.3 SOUS LINUX
FONCTIONNALITE
   probleme d'initialisation de variables dans mappar.f
   
   avant d'entrer dans la boucle if, on realise l'initialisation des variables suivantes:
   
   BARSOU = .FALSE.
   IMABAR = 0
   TYPBAR = 0
   INIBA1 = 0
   INIBA2 = 0
   INIBA3 = 0
   NOQBA1 = 0
   NOQBA2 = 0
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   non
--------------------------------------------------------------------------------
RESTITUTION FICHE 009792 DU 2006-05-23 08:55:45
TYPE evolution concernant Code_Aster (VERSION )
NB_JOURS_TRAV  : 1.0
TITRE
   CONTACT FROTTANT + GLISSIERE
FONCTIONNALITE
   il y a un blocage a ce qu'on utilise la glissiere sur telle zone de contact et pas sur
   telle autre DANS TOUTES LES METHODES DE CONTACT.
   ce blocage se trouve dans cazoco.f, a cause des lignes suivantes:
   
   IF (IWRITE .GT. 1) THEN
   OLDMET = ZI(JMETH+ZMETH*(IWRITE-2)+6)
   NEWMET = ZI(JMETH+ZMETH*(IWRITE-1)+6)
   IF ((TYPM(1:8).EQ.'CONTRAIN') .OR. (TYPM(1:5).EQ.'VERIF') .OR.
   &     (TYPM(1:8).EQ.'CONTINUE') .OR. (TYPM(1:3).EQ.'GCP')) THEN
   IF (OLDMET .NE. NEWMET) THEN
   CALL UTMESS('F','CAZOCO',
   &                 'METHODE DE CONTACT DIFFERENTES POUR'//
   &                 ' LES ZONES DE CONTACT')
   END IF
   END IF
   END IF
   
   Pour faire plaisir a Franck, on leve ce blocage pour la methode continue.
   
   **************************
   
   CAS-TEST
   --------
   
   On ajoute les cas-tests suivants:
   
   - ssnv504i: extrusion d'un lopin
   modele axisymetrique (elements quadratiques) avec contact glissiere le long du
   lopin et
   contact normal sur la butee.
   
   - ssnv504j: extrusion d'un lopin
   modele 3D (elements lineaires) avec contact glissiere le long du lopin et contact
   normal
   sur la butee.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : V6.04.504-B
VALIDATION
   cas-test
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR pabhhhh      TARDIEU N.             DATE 11/07/2006 - 09:44:39

--------------------------------------------------------------------------------
RESTITUTION FICHE 009893 DU 2006-07-03 15:29:33
TYPE anomalie concernant Code_Aster (VERSION 8.3)
NB_JOURS_TRAV  : 1.0
TITRE
   CONTACT - Elements TRIA6
FONCTIONNALITE
   Dans le source du code, il etait dit explicitement que l'on creait une liaison
   cinematique
   entre les noeuds milieux et sommets pour les elements de peau QUAD8, TRIA6 et pour les
   elements COQUE_3D bases sur des mailles QUAD9 et TRIA7.
   
   Or tout ce travail est inutile pour les TRIA6 et les TRIA7 comme il est dit dans la doc.
   On modifie donc le code pour se mettre au carre.
   
   Sources :
   --------
   calico.f  exnoel.f  nbnoel.f
   
   Cas test :
   ---------
   Modification du SSNV128K
   - pour resserer les tolerances
   - pour modifier l'imposition de conditions de Dirichlet qui n'etait appliquees qu'aux
   noeuds sommets pour eviter des pivots nuls
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  OUI
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   Test SSNV128K
--------------------------------------------------------------------------------
RESTITUTION FICHE 009848 DU 2006-06-16 09:10:20
TYPE anomalie concernant Code_Aster (VERSION 2.x)
NB_JOURS_TRAV  : 0.1
TITRE
   NEW8.3.1, le test sdll133a manque de MEMOIRE
FONCTIONNALITE
   Je passe la memoide du test de 110 a 150 Mo.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   Passage du test
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR vabhhts      PELLET Jacques         DATE 11/07/2006 - 09:40:19

--------------------------------------------------------------------------------
RESTITUTION FICHE 009813 DU 2006-06-01 09:23:06
TYPE anomalie concernant Code_Aster (VERSION 8.2)
NB_JOURS_TRAV  : 0.3
TITRE
   ASSE_MAILLAGE : macro-element / maillage elements finis
FONCTIONNALITE
   L'etude s'arrete sur le message :
   
   <F> <ASSE_MAILLAGE> <OP0105> LES 2 MAILLAGES DOIVENT
   ETRE DU MEME TYPE : 2D (OU 3D).
   
   De mon point de vue, il y a 2 problemes distincts que je
   propose de corriger :
   
   
   
   1) Je modifie l'erreur fatale d'ASSE_MAILLAGE en alarme.
   Apres tout, pourquoi interdire un tel maillage mixte ?
   En effet, le caractere 2D/3D d'un maillage tient
   uniquement au fait que dans le fichier .mail, on utilise
   le mot cle COOR_3D ou le mot cle COOR_2D. Mais rien
   n'empeche de placer un treillis de poutre dans le plan
   Z=0. (C'est d'ailleurs le cas de cette etude).
   
   2) L'utilisateur etait persuade d'assembler 2
   maillages "3D". Mais en realite, la commande
   DEFI_MAILLAGE/MACR_ELEM_STAT avait cru bien faire en
   declarant le maillage resultat "2D" puisque tous ses
   noeuds se trouvaient dans un plan Z=cste.
   Je corrige DEFI_MAILLAGE (routine ssdmdm.f) pour
   remplacer l'usage de DISMOI/Z_CST par DISMOI/DIM_GEOM.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   passage de l'etude associee
--------------------------------------------------------------------------------
RESTITUTION FICHE 009856 DU 2006-06-20 13:42:01
TYPE anomalie concernant Code_Aster (VERSION 8.3)
NB_JOURS_TRAV  : 0.5
TITRE
   MUMPS version 4.6.1 moins performante que 4.3.2
FONCTIONNALITE
   Le sur-cout observe (sur clpaster_intel) de MUMPS pour le test ssnv185h
   (83s -> 226s) est du a SCALING='AUTO' (defaut)
   Si on force SCALING='SANS', on retrouve le meme temps qu'en 4.3.2.
   
   Je modifie le test pour forcer SCALING='SANS' et gagner ainsi un peu de
   temps dans les astout.
   
   Remarques :
   ------------
   Apres discussion avec O. Boiteau, je ne modifie pas la valeur par defaut de
   SCALING ('AUTO'), meme si sur ce cas test, le sur-cout est important.
   Le defaut 'AUTO' a ete conseille a Olivier par le CERFACS dans le but
   d'ameliorer le conditionnement des matrices et donc la qualite de la
   solution. Comme ce que l'on cherche (pour l'instant) avec MUMPS c'est avant
   tout la qualite numerique des resolution, ce choix parait le plus adapte.
   
   Par ailleurs, les chiffres donnes par Jean-Pierre (reaction precedente sur
   cette fiche) montrent que le choix 'AUTO' n'est pas systematiquement plus
   couteux. Pour le test ssnv182b, ce choix permet meme gagner beaucoup de
   temps.
   
   IMPACT_DOC : U4.50.01 (mot cle SOLVEUR) :
   - dire que SCALING='AUTO'/'SANS' peut avoir un impact signifactif sur le
   cout CPU.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : U4.50.01
VALIDATION
   test incrimine
--------------------------------------------------------------------------------
RESTITUTION FICHE 009865 DU 2006-06-22 17:28:58
TYPE anomalie concernant Code_Aster (VERSION 8.3)
NB_JOURS_TRAV  : 0.2
TITRE
   NEW8.3.2, les tests sdll101a et b s'arretent en ERREUR
FONCTIONNALITE
   sdll101a/b casses en version 8.3.2 :
   --------------------------------------
   
   Le probleme venait du fait que j'avais oublie que la
   commande COMB_MATR_ASSE pouvait etre reentrante.
   Je modifie op0031 pour tenir compte de ce fait.
   
   validation : passage des 2 tests casses.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   tests incrimines
--------------------------------------------------------------------------------
RESTITUTION FICHE 009869 DU 2006-06-23 12:08:19
TYPE anomalie concernant Code_Aster (VERSION 8.3)
NB_JOURS_TRAV  : 0.1
TITRE
   MODI_MAILLAGE/ORIE_NORM_COQUE
FONCTIONNALITE
   Apres la correction 9602, cette etude ne "boucle" plus dans ORIE_NORM_COQUE.
   Mais la mise en donnee est a revoir car le noeud N645 n'appartient pas au
   GROUP_MA 'TOUTQUAD' et on ne peut donc pas se servir ce noeud pour
   reorienter le groupe.
   
   Le nouveau message d'erreur est maintenant :
   TRAITEMENT DU GROUP_MA: TOUTQUAD DE     181 MAILLES
   
   <F> <MODI_MAILLAGE> <ORVLMA>  PROBLEME D''ORIENTATION: AUCUNE MAILLE NE
   TOUCHE LE NOEUD INDIQUE.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   rien
--------------------------------------------------------------------------------
RESTITUTION FICHE 009880 DU 2006-06-29 05:44:23
TYPE evolution concernant Code_Aster (VERSION )
NB_JOURS_TRAV  : 0.1
TITRE
   Remise en conformite du dismoi sur PROF_CHNO
FONCTIONNALITE
   Anomalie :
   ----------
   Dans la routine DISMPN de DISMOI.F, on obtient le nbre d'equation par :
   
   CALL JEVEU0(NOMOB//'.NEQU','L',IDNEQU)
   NEQU=ZI(IDNEQU)
   
   Hors, selon la doc D, le '.NEQU' appartient a NUME_EQUA et pas a PROF_CHNO.
   Il faut recuperer l'info par un jeveuo sur la LONMAX de l'objet .NUEQ
   
   Correction :
   ----------------
   Il y avait effectivement un petit bug qui est maintenant corrige.
   
   Remarque: ce bug ne pouvait se voir qu'en "dynamique" car il concerne la
   question 'NB_DDLACT'.
   
   Pour la NEW7 : le fichier dismpn.f est identique en 7 et en 8
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  OUI
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   rien
--------------------------------------------------------------------------------
RESTITUTION FICHE 009890 DU 2006-07-03 12:33:58
TYPE express concernant Code_Aster (VERSION 2.x)
NB_JOURS_TRAV  : 0.5
TITRE
   2 petites ameliorations pour le  solveur MUMPS
FONCTIONNALITE
   1) On "trappe" l'erreur MUMPS "%INFOG(1)=-13" pour donner
   le conseil de
   diminuer le parametre "mem_aster" d'ASTK.
   2) On modifie le defaut de %CNTL(2) de Mumps : 1.d-8 -> 1.d-
   14
   Ce nombre sert a arreter les iterations de raffinement
   de Mumps. Quand le
   conditionnement de la matrice est superieur a 1.d8, le
   defaut de mumps
   empeche en general les iterations de raffinement. L'erreur
   affichee par
   MUMPS (%RINFOG(9)) ne peut plus alors etre petite et
   l'utilisateur n'est pas
   rassure.
   Au passage, on modifie le nombre (max) d'iterations de
   raffinement :
   10 -> 4.
   La doc de Mumps laisse entendre qu'une seule iteration est
   en general
   suffisante pour ameliorer la solution.
   
   Impact doc_U (mot cle SOLVEUR) :
   --------------------------------
   Verifier que l'on parle bien de la concurrence JEVEUX/F90
   pour l'allocation memoire. Ajouter le conseil de
   d'utiliser "mem_aster" d'ASTK pour donner des ressources a
   F90.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : U4.50.01
VALIDATION
   essai perso (hsns100b)
--------------------------------------------------------------------------------
RESTITUTION FICHE 009910 DU 2006-07-07 10:59:49
TYPE express concernant Code_Aster (VERSION 2.x)
NB_JOURS_TRAV  : 0.1
TITRE
   ameliorations de la routine TECACH
FONCTIONNALITE
   Suite a une AL regardee recemment par Aimery et Jean-
   Pierre, je propose de faire 2 petites corrections dans la
   routine TECACH :
   
   1) si l'argument NVAL est hors bornes ( 1<= NVAL <=8), on
   s'arrete maintenant en erreur fatale : c'est une erreur de
   programmation.
   
   2) Si NVAL < 8 et que le champ est incomplet (=> IRET=3) on
   rend ITAB(1)=0 car l'adresse du champ local incomplet est
   en fait inexploitable. Cela permet (par exemple te0496) de
   se contenter de tester la non-nullite de ITAB(1)pour etre
   sur que le champ local est bien complet (sans regarder
   IRET).
   
   Remarque : je joins pour CS le fichier tecach.f corrige
   pour la NEW7
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  OUI
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   rien
--------------------------------------------------------------------------------



========================================================================
=== Recapitulation des operations demandees pour toutes les restitutions
========================================================================


    TYPE Action    unite                      user      Auteur         nblg  ajout suppr.

 CASTEST AJOUT ssnv504i                         kham M.KHAM             215    215      0
 CASTEST AJOUT ssnv504j                         kham M.KHAM             264    264      0
 CASTEST MODIF fiab001a                      vabhhts J.PELLET           127      1      1
 CASTEST MODIF sdls114b                      cibhhlv L.VIVAN            329      1      1
 CASTEST MODIF ssnv128k                      pabhhhh N.TARDIEU          292     37     43
 CASTEST MODIF ssnv185h                      vabhhts J.PELLET           223      2      3
 CASTEST MODIF wtnp113c                      cibhhlv L.VIVAN            493      5      5
 CASTEST MODIF wtnp113d                      cibhhlv L.VIVAN            502      5      5
 CASTEST MODIF wtnp116a                      vabhhts J.PELLET           444      2      2
 CASTEST MODIF wtnp116b                      vabhhts J.PELLET           508      2      2
 CASTEST MODIF zzzz186a                      vabhhts J.PELLET            40      1      1
 FORTRAN MODIF algeline/amogen               vabhhts J.PELLET           172     12     12
 FORTRAN MODIF algeline/op0031               vabhhts J.PELLET           200     29      7
 FORTRAN MODIF algorith/mappar                  kham M.KHAM             595     25     26
 FORTRAN MODIF algorith/mmmbca                  kham M.KHAM             328      8      8
 FORTRAN MODIF calculel/tecach               vabhhts J.PELLET           327      5      3
 FORTRAN MODIF modelisa/calico               pabhhhh N.TARDIEU          431      5      5
 FORTRAN MODIF modelisa/cazoco                  kham M.KHAM             518      2      2
 FORTRAN MODIF modelisa/elimco                  kham M.KHAM             485      1      2
 FORTRAN MODIF modelisa/exnoel               pabhhhh N.TARDIEU          277    104    105
 FORTRAN MODIF modelisa/nbnoel               pabhhhh N.TARDIEU          227     33     26
 FORTRAN MODIF modelisa/orvlma               vabhhts J.PELLET           260     12     12
 FORTRAN MODIF soustruc/asmael               vabhhts J.PELLET           421      3      3
 FORTRAN MODIF soustruc/ssdmdm               vabhhts J.PELLET           248      3      8
 FORTRAN MODIF utilitai/copich               cibhhlv L.VIVAN            174      4      4
 FORTRAN MODIF utilitai/copisd               cibhhlv L.VIVAN            332     33     13
 FORTRAN MODIF utilitai/dismpn               vabhhts J.PELLET            93      8      6
FORTRAN90 MODIF mumps/amumpc                  vabhhts J.PELLET           510      7      3
FORTRAN90 MODIF mumps/amumpr                  vabhhts J.PELLET           515      8      2


        nb unites  nb lignes  ajouts  suppr.  difference
 AJOUT :    2         479       479              +479
 MODIF :   27        9071       358     310       +48
 SUPPR :    0           0                 0        +0
 DEPLA :    0           0 
         ----      ------     ------  ------   ------
 TOTAL :   29        9550       837     310      +527 
