

-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR assire       ASSIRE Aimery          DATE 29/09/2009 - 09:28:40

--------------------------------------------------------------------------------
RESTITUTION FICHE 013932 DU 2009-09-24 08:55:27
TYPE express concernant Code_Aster (VERSION 7.0)
TITRE
   Couplage Aster-Ecrevisse : mot-cle tortuosite
FONCTIONNALITE
   Après utilisation pendant quelques mois du couplage Aster-Ecrevisse par Septen, il s'avere
   qu'une fonctionnalité n'avait pas été prévue dans la macro-commande de couplage : la
   possibilité de définir dans Ecrevisse une fissure plus grande que le massif traversé
   (possibilité de prendre en compte une fissure non rectiligne).
   
   On décide d'ajouter cette possibilité dans la macro par l'intermediaire du mot-clé
   facultatif TORTUOSITE (valeur comprise entre 0 et 1).
   
   Nota : intégré en NEW10 et NEW9.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  OUI
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : U7.03.41, A0.02.29
VALIDATION
   zzzz218a et zzzz218b
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR boiteau      BOITEAU Olivier        DATE 29/09/2009 - 07:46:32

--------------------------------------------------------------------------------
RESTITUTION FICHE 013946 DU 2009-09-25 12:21:41
TYPE evolution concernant Code_Aster (VERSION )
TITRE
   Solveur linxc3xa9aire MUMPS: MIXER_PRECISION et FILTRAGE_MATRICE
FONCTIONNALITE
   Contexte
   ========
   Cette fiche d'évolution repose sur une idée simple. 
   En non linéaire, le calcul de la matrice
   tangente peut être entaché d'erreur. Cela va 
   potentiellement ralentir le processus de Newton (il
   va alors faire plus d'itérations), mais si la manipu
   lation (construction et/ou "inversion") de la matrice 
   tangente approximée est moins couteuse , on peut être 
   globalement gagnant (temps elapsed/RAM/disque).
   Actuellement différents paramètres des op. non 
   linéaires d'Aster  permettent de mettre en oeuvre ce
   type d'astuce: REAC_ITER, SYME et MATRICE... Ils sont
   indépendants des solveurs linéaires.
   
   Objectif de la fiche
   ====================
   Je propose d'en rajouter deux autres (pour l'instant
   liés au solveur linéaire MUMPS):
    - FILTRAGE_MATRICE: on ne transmet à MUMPS que les
      termes dont le module est supérieur à un certain   
      seuil (en relatif).
    - MIXER_PRECISION: on n'utilise qu'une version
      simple precision de MUMPS (réelle ou complexe).
      Aster continue à travailler en double.
   
   Détails fonctionnels
   =====================
    * Ces deux potards ne sont accessibles que dans 
   STAT/DYNA/THER_NON_LINE. Ils sont utilisables en
    séquentiel et en parallèle. Ils sont compatibles
    avec tous les autres paramètres liés au solveur.
   
      b_mumps     =BLOC(condition
   ......             
   FILTRAGE_MATRICE=SIMP(statut='f',typ='R',
                  defaut=-1.0,),
   MIXER_PRECISION=SIMP(statut='f',typ='TXM',
                  defaut="NON",into=("OUI","NON")),
                ),....
   
    * Si FILTRAGE_MATRICE=eps<=0 on transmet, comme 
   d'habitude, tous les termes non nuls de la matrice 
   Aster à MUMPS. Sinon, on teste le terme en relatif
   par rapport aux termes diagonaux associés
       si (ABS(Kij) < eps * (abs(Kii)+abs(Kjj)))
          Kij=0.d0
       finsi
   
    * Si MIXER_PRECISION='OUI', on transmet les matrices
   et RHS Aster 64bits à MUMPS 32bits. Attention,
   ds le cas de matrices dont le conditionnement est
   important (>10E6) ou avec des matrices presque 
   singulières cette technique peut être
   contre-productive. 
   
    * Pour une résolution donnée, ils peuvent permettent 
   de  gagner:
    - en CPU (2 fois plus d'op. flottante par cycle
   d'horloge en simple precision),
    - en mémoire (effet cache, RAM et, disque, si OOC),
     - bande passante (moins de volume de données à
   déplacer).
   
    * Ils sont cumulables entre eux et avec les 3 autres
   paramètres déjà présent. Mais comme eux, ces 2
    nouveaux paramètres n'amènent pas systématiquement
   un gain. Parfois le fait de passer en simple préci
   sion la résolution ou de trop filtrer de termes de la
   matrice, empêche la convergence du processus de
   Newton avec le paramétrage initial. Il faut alors
   renoncer à activer ces potards ou adapter les autres
   (nbre d'itérations max de Newton, RESI_RELA Newton
   ou MUMPS...).
   
   Détails informatiques
   =====================
     * Le travail de refonte des sources Aster appelant
   MUMPS nécessité par cette EL, pourra bénéficier à 
   tous. Désormais on peut appeler MUMPS en simple ou
   en double précision, en réel ou en complexe. Et on
   peux mixer les approches au cours d'une même exécu
   tion Aster (limitation en dur à 5 occurences MUMPS
   simultanées quelque soit sa nature).
   MUMPS devient donc un peu plus le "couteau suisse" 
   des solveurs linéaires pour Aster !
   
    * Cette refonte des sources a permis de debusquer un 
   bug vicieux ds Aster concernant l'appel à MUMPS 
   (confusion du linker entre un common Aster et
   une fonction MUMPS de même nom). Ce bug nous a fait
    perdre une semaine !
   
    * Adoptions d'une régle de nommage des routines 
     Aster d'appels à MUMPS, des commons, des targets
    et pointeurs F90: les S,D,C et Z usuels pour
    R32bits, R64, C32 et C64.
   
   Divers et perspectives
   =======================
    * Ces 2 stratégies sont dans "à la mode": Librairie
   PLASMA de J.Dongarra, ANR SOLSTICE, travaux de 
   N.Tardieu au GIREF (CR-AMA-09.066) et du stage de
   N.Leliot-Seve (SINETICS/ESILV)... On s'était
    engagé à les tester lors du workshop EDF/CERFACS 
   d'avril 2009 (CRI23-2009-021). Elles sont dans la
   lignées des scénarios de type "solveurs emboités et
   calcul quantitatifs" qui ont été expérimentés avec
   le CERFACS par le passé.
    
    * Cette refonte des sources va permettre à N.Tardieu 
    d'implanter un préconditionneur IC(k) (basé sur 
    MUMPS simple précision) pour le GCPC d'Aster
    (CR-AMA-09.066).
   
    * On pourrait imaginer étendre ce scénario de préci
    sion mixte aux pbs linéaires bien conditionnés. En
   complétant cette résolution "approximée" (vu du 64
   bits Aster) par un processus de raffinement itératif
   ou un GMRES. Ce processus correctif étant soit inté
   gré à MUMPS, soit hors MUMPS, ds Aster.
   
   Quelques résultats et validation 
   =================================
     * Non régression sur les 106 cas-tests de la base
     utilisant MUMPS (Bull NEW10 nodebug).
   
     * Enrichissement des cas-tests:
    - mumps02a: mumps centralisé symetrique réel
        STAT_NON_LINE +  MIXER_PRECISION,
        STAT_NON_LINE +  FILTRAGE_MATRICE,
    - mumps04a: mumps centralisé non symétrique réel
       panachage d'un
           STAT_NON_LINE + MIXER_PRECISION
       et d'un STAT_NON_LINE + FILTRAGE_MATRICE.
     
     * Cas-test du palier du CR de NT.
      Encastré à une extrémité, pression imposée à
    l'autre extrémité. Loi de comportement élastoplas
    tique à écrouissage isotrope linéaire. 
     Maillage en TETRA10: 61141 noeuds et 0 Lagrange.
    N=0.18M, NNZ=7.3M.
    Mesures effectuées sur la Bull en 10.00.18 seq
     nodebug avec MUMPS 4.8.4 surchargé.
    On a laissé tous les paramètres du cas-test méca
    nique et du solveur linéaire par défaut. On a
    juste rajouté, suivant les cas, l'un ou l'autre des
    nouveaux paramètres.
   
   ===================================================
                    Avant  MIXER_PREC FILTRAGE  les 2
                                       (10-6)
   ____________________________________________________
   Iter_Newton         10      10      11      10
   Résidu              10-8    10-8    10-8    10-7
   NNZ_MUMPS (en M)     7.2    7.2     7.1     7.1
   Telapsed_solveur(s) 534     461     598     506
   Telapsed_total(s)   712     642     780     689
   RAM MUMPS_IC (Mo)  1163     597    1184     618
   RAM MUMPS_OOC (Mo)  259     147     281     167
   RAM ASTER Min (Mo)  425     425     425     425
   Termes filtrés(%)    -       -       1       1
   
   Donc, sur ce cas-test, le fait de mixer les 
   précisions apporte un vrai gain (10% en CPU et 50%
   en RAM MUMPS) sans dégradation de qualité. 
   Ce gain CPU devrait s'accroitre avec
   la taille car le cout algorithmique des opérations 
   est à gros trait:
      - N exp 3 pour le 32bits (facto numerique)
      - N exp 2 pour le 64bits (residu)
   De plus ,en //, les communications vont être plus
   brèves.
   Par contre, le fait de filtrer la matrice fait 
   évidemment diminuer la taille de la matrice transmise 
   à MUMPS, mais pas forcément celle de la factorisée. 
   D'autre part,  le filtrage induit ici une augmen
   tation du nbre d'itérations de Newton signicative:
   10%. Les 2 phénomènes se cumulant, la statégie de 
   filtrage n'est pas intéressante ici.
   Avec la prochaine version de MUMPS et sa phase 
   d'analyse // (qui traite des pbs plus gros mais qui
   est plus imprécise), cette technique de filtrage
   sera peut-être plus intéressante.
   
    * Je continuerai la campagne de tests (en particu
   lier en //) pour étoffer le Rex et la base de 
   cas-test sur l'emploi de ces 2 nouvelles stratégies.
   
   Sources modifiées
   ==================
    * CAPY: c_solveur.capy  dyna_non_line.capy  
   ther_non_line.capy
    * F90: amumpc.F  amumpd.F  amumph.F  amumpi.F  
   amumpm.F  amumpp.F  amumps.F  amumpt.F  amumpz.F
    * F77: creso3.f  crsolv.f  crsvmu.f  crsvpe.f  
   detrsd.f  op0014.f  preres.f  resoud.f
    * TEST: mumps02a et mumps04a.
    * UNIGEST: amumpr.F.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : R6.02.03,U4.50.01
VALIDATION
   informatique, fonctionnelle, non-rxc3xa9gression
NB_JOURS_TRAV  : 10.0
--------------------------------------------------------------------------------
RESTITUTION FICHE 013450 DU 2009-05-22 16:41:58
TYPE evolution concernant Code_Aster (VERSION )
TITRE
   MN13 - Mumps centralise plus efficace pour les calculs explicites
FONCTIONNALITE
   Probleme
   ========
   Homogeneiser le transfert de données entre Aster et 
   MUMPS pour qu'il soit independant du mode de 
   distribution des mailles: centralise ou distribue...
   Ce distinguo n'a pas lieu d'etre:
     - il est sous-optimal en terme de CPU/RAM,
     - il peut impliquer des comportements differents de
       MUMPS. 
   En l'occurence on ne veut transferer a MUMPS que les
   termes rigoureusement non nuls
    (comparaison .EQ.0.D0).
   
   Solution
   ========
   La restitution des sources modifiees effectuant ce
   filtre a ete fait la semaine derniere (10.0.15) avec
   l'AL13650. Il ne s'agit ici que de tracer quelques 
   resultats sur les gains potentiels d'une telle 
   demarche.
   
   Quelques resultats de tests
   ============================
   * Concernant les 106 cas-tests de la base utilisant 
   MUMPS. Si on fait un astout sequentiel (tout passe 
   alors en mode parallele='CENTRALISE' par defaut)
     Avant ils consommaient 9652s (temps_elapsed)
     Maintenant             9300s
     soit 3% de gain CPU (et sans doute un peu en RAM,
   je n'ai pas teste).
   
    * Mais il s'agit souvent de petits cas sollicitant
   peu MUMPS. Sur de plus gros cas (en nbre de ddls ou 
   en nbre de pas de temps), on peut penser que les 
   gains sont potentiellement plus interessants. 
   Sachant toutefois que le mode d'utilisation 
   privilegie, dans ce cas, est alors plutot DISTRIBUE ! 
   
   Avec le cas-test MUMPS05b (N=0.7M), un des plus  gros 
   cas de la base (et utilisant MUMPS par defaut)
   on a les résultats suivant en seq sur la Bull: 
            AVANT       |     APRES    |  delta (en %)
       -----------------------------------------------
           NNZ= 27M     |      26.96M  |  +0.1% (gain)
      facteur=1570M     |    1571M     |  -0.1% (perte)
      elapsed=2288s     |     2254s    |  +1.5%
      RAM_IC=15279Mo    |    15271Mo   |  +0.1%
      RAM_OOC=4068Mo    |    3995Mo    |  +1.7%
   
   * Bref, des gains quasi nuls qui viennent contre-
   balancer l'idee reçue precedente.
   C'est donc une petite evolution logicielle qui ne 
   coute rien et rapporte peu (si ce n'est en coherence 
   informatique pour la maintenance et l'ergo
   nomie). 
   Sauf ds certains cas de figures extremes. Par 
   exemple:
     - CAS 1: les matrices quasi-diagonales de la 
   dynamique explicite.
     - CAS2 : les matrices comportant une majorite de 
   Lagranges (double gradient de la THM...) + l'option
    SOLVEUR/ELIM_LAGR2'='OUI' (valeur par defaut).
   
     CAS1
     ====
   * Ainsi sur le cas-test servant a benchmarcker Aster 
   et Europlexus, au lieu de transmettre 8.2M de termes 
   a MUMPS, on n'en transmet que ... 25215 (/325). 
   D'où un gain en temps elapsed d'un facteur:
    - 16 sur la phase de factorisation numérique,
    - 2 sur la resolution. 
   Sur le cas-test on factorise 2 fois et on resoud 400 
   fois, d'ou le gain grosso-modo x2 en temps elapsed:
   Avant :
    -nbre de termes founis à Mumps : 869106
    - temps ds MUMPS : 42s  (elapsed)
    - memoire requise en IC/OOC (Mo): 101/28
   Après :
    - nbre de termes founis à Mumps :  25215
    - temps ds MUMPS :  21s  (elapsed)
    - memoire requise en IC/OOC (Mo): 5/7
   
   RQ1: en memoire les gains (en RAM) sont aussi tres 
   probants:  x20 en IC et x4 en OOC.
   RQ2: Un travail plus numerique doit etre fait via la 
   fiche 13352 pour adapter vraiment les solveurs 
   lineaires a cette structure de matrice particuliere: 
   quasi-diagonale sauf sur quelques blocs (Lagranges).
   
     CAS2
     ====
   * Sur le cas-test de la base MAC3C01A, on a
   les gains suivant (187 facto + solve). On diminue
   le nbre de termes transmis d'un facteur 2 et on
   obtient un gain en temps elapsed d'un facteur
   presque 2 et en RAM (pour MUMPS) d'un bon facteur 3.
   Avant :
    -nbre de termes founis à Mumps : 389000 (moy)
    - temps ds MUMPS : 395s  (elapsed)
    - memoire requise en IC/OOC (Mo): 57/25
   Après :
    - nbre de termes founis à Mumps :  209000 (moy)
    - temps ds MUMPS :  240s  (elapsed)
    - memoire requise en IC/OOC (Mo): 14/9 
   
    RQ3: Ce cas-test passe beaucoup mieux avec l'option
   SOLVEUR/ELIM_LAGR2='NON'. Cette valeur est a conseil
   le pour tous las cas comportant beaucoup de 
   Lagranges.  On gagne a nouveau 40% en temps elapsed
   sur MUMPS.
   Termes non nuls + ELIM_LAGR2='NON :
    -nbre de termes founis à Mumps : 258000 (moy)
    - temps ds MUMPS : 150s  (elapsed)
    - memoire requise en IC/OOC (Mo): 20/13
   Comme il n'y a pas de cas-test ds la base
   illustrant ce comportement, je le restitue en
   passant cette option de 'OUI' à 'NON' et en diminuant
   le .para des 350s gagnes. 
   Comme quoi il y'a toujours a faire pour "tuner" au 
   mieux un solveur lineaire compte-tenu de la richesse
   de modelisation du code !
   
   RQ4: J'attends une reponse de la core-team MUMPS sur
   ces variations importantes de perf en temps. Je pense
   que le delta provient du nbre de pivots: de l'ordre
   de 7000 avec ELIM_LAGR2, 800 sans.
   Donc meme si la premiere option fait gagner en 
   remplissage, ce facteur l'emporte et plombe la phase
   d'analyse. Sur un autre cas-test de Romeo, la valeur
   par defaut ELIM_LAGR2 fait quadrupler le cout des
   appels à MUMPS. Apres la reponse de la core-team on
   statura de la conduite a tenir pour eventuellement
   detecter ces configurations et prendre une decision
   (Alarme, changement de valeur du parametre...).
   
   Sources restitues
   ==================
   Cas-test mac3c01a modifie (ELIM_LAGR2='NON' + diminu
   tion du temps du .para).
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : R6.02.03,U4.50.01
VALIDATION
   informatique,non-regression
NB_JOURS_TRAV  : 2.0
--------------------------------------------------------------------------------
RESTITUTION FICHE 013841 DU 2009-09-09 12:23:39
TYPE anomalie concernant Code_Aster (VERSION 10.1)
TITRE
   Le message FACTOR_73 n'a pas pu etre formate correctement
FONCTIONNALITE
   Probleme
   =========
     Dans la routine AMUMPC.F, Le message d'erreur 
         CALL U2MESS('A','FACTOR_73'  )
     est mal formate et ce defaut apparait ds le cas-test ssnv112c.
   
   Solution
   =========
     En effet, c'est moi qui ai introduit cette erreur cette semaine
     (10.0.16). J'ai deplace et modifie cet appel mais j'ai oublie
     de detruire cette ligne.
     Le bon appel au msg est quelques lignes plus haut, sous la forme
           VALR(1)=(XMPSK%INFOG(13)*100.D0)/XMPSK%N
           VALR(2)=XMPSK%ICNTL(14)*1.D0
           IF (VALR(1).GE.VALR(2)) THEN
   C     PROBLEME DU TROP GRAND NBRE DE PIVOTS NUMERIQUES
             CALL U2MESR('I','FACTOR_73',2,VALR)
           ENDIF
   
   Source modifiee
   ===============
      * AMUMPC.F
   RQ: Ds la routine "soeur" de AMUMPC, AMUMPR, tout etait OK. Donc rien
   a modifier.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  OUI   DEPUIS : 10.0.16
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : R6.02.03, U4.50.01
VALIDATION
   informatique, non-regression
NB_JOURS_TRAV  : 0.1
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR courtois     COURTOIS Mathieu       DATE 28/09/2009 - 17:59:44

--------------------------------------------------------------------------------
RESTITUTION FICHE 013835 DU 2009-09-09 08:08:57
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
   test zzzz159f sous Rocks en version NEW10.0.16
FONCTIONNALITE
   Le test échoue sur ImportError: Utilitai.Utmess
   
   C'est dû à ma dernière restit dans laquelle j'ai utilisé le "vrai" UTMESS pour les messages.
   Comme ce test utilise macr_recal_ops.py en dehors d'aster, le PYTHONPATH n'est pas complet.
   Je complète PYTHONPATH dans le "__main__" de macr_recal_ops.py pour qu'il trouve Utmess.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   zzzz159f
NB_JOURS_TRAV  : 0.5
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR gnicolas     NICOLAS Gérald         DATE 29/09/2009 - 10:10:22

--------------------------------------------------------------------------------
RESTITUTION FICHE 013016 DU 2009-01-05 10:04:53
TYPE anomalie concernant Code_Aster (VERSION 9.5)
TITRE
   Indicateur d'erreur en residu pour les pyramides
FONCTIONNALITE
   Contexte
   ========
   Depuis la version 9.3.17, HOMARD sait raffiner des maillages comportant des hexaèdres.
   Pour raccorder les zones de niveaux de raffinement différents, il y a découpage des
   hexaèdres concernés en tétraèdres et/ou pyramides. Mais le calcul des indicateurs d'erreur
   ne fonctionnait pas sur les pyramides.
   La correction est simple. Il a suffit d'inclure la description des voisins d'une pyramide
   pour que les programmes fonctionnent.
   Attention : une inconnue reste : la constante présente dans tous les calculs d'indicateurs
   d'erreur. Cette constante est définie dans les travaux amont pour un type unique de
   maille. Avec du mélange (QUAD/TRIA ou HEXA/TETR/PYRA par exemple), à notre connaissance,
   aucun résultat n'existe.
   
   
   Sous-programmes modifiés
   ========================
   Des programmes de calcul élémentaire sont modifiés, pour inclure la définition des voisins.
   te0003 : nouveau tableau 'NOE' des voisins par noeuds. On a ajouté un commentaire detaillé
   avec des croquis pour expliquer les conventions retenues.
   Dans les programmes suivants, on inclut la nouvelle définition du tableau 'NOE', avec un
   commentaire léger et une référence à te0003 pour les détails.
   Sont concernés : te0368, te0375, uthk, utno3d, ermeb3, ermes3
   
   resvoi : nouveau tableau 'SOM' des voisins par sommets
   
   Des programmes ont des corrections locales :
   ermeb3 : prise en compte des pyramides en tant que voisin
   
   
   Cas-tests créé
   ==============
   Un nouveau cas-test est créé pour l'occasion : sslv150a. C'est un maillage formé de 4
   mailles volumiques de chacun des types : tétraèdre, pentaèdre, hexaèdre et pyramide, avec
   tous les voisinages possibles. Il n'a évidemment aucun autre intérêt que de tester la non
   régression sur la prise en compte des pyramides.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  OUI
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   sslv150a
NB_JOURS_TRAV  : 2.0
--------------------------------------------------------------------------------
RESTITUTION FICHE 013789 DU 2009-08-28 12:48:26
TYPE anomalie concernant Code_Aster (VERSION 9.5)
TITRE
   Indicateur d'erreur - mauvais choix de points de Gauss
FONCTIONNALITE
   Contexte
   ========
   Un examen attentif du source des programmes de calculs des indicateur d'erreur en résidu
   et en quantité d'intérêt a montré une erreur dans le calcul. Il faut se souvenir que, sur
   une maille donnée, de tels indicateurs sont formés de deux termes :
   - un terme volumique, qui mesure un écart de la solution au sein de la maille
   - un terme surfacique regroupant les écarts entre les contraintes dans la maille courante
   et l'état au dehors, face par face. Cela recouvre deux situations. Pour une face limitant
   une autre maille voisine de même dimension, on mesure le saut du champ de contraintes
   entre la maille courante et cette voisine ; pour une face bordant le domaine de calcul, on
   mesure l'écart entre les contraintes dans la maille courante et les contraintes imposées
   ce bord.
   Pour ces termes surfaciques, la contribution est une intégrale sur la face. En 3D,
   l'intégration se fait par une formule aux points de Gauss, ces points étant choisis aux
   noeuds de la face (sp. intega). Malheureusement, les champs étaient calculés sur d'autres
   points. Le travail a consisté à modifier la programmation de telle sorte que tous les
   champs à intégrer soient calculés aux noeuds de la face.
   Par la même occasion, on a constaté que pour le pentaèdre une erreur apparaissait car le
   changement de nature de face triangle/quadrangle était mal géré.
   Inévitablement, les résultats sont modifiés car la valeur des termes de saut a changé.
   Cela justifie la modification des valeurs retenues pour la non-régression, sachant que
   l'on a pris soin de vérifier que les termes volumiques n'étaient pas impactés.
   
   
   Sous-programmes modifiés
   ========================
   Des programmes de calcul élémentaire sont modifiés, essentiellement pour gérer la bonne
   famille de points de Gauss.
   Sont concernés : te0003, te0368, te0375, te0377, te0378, te0382, te0497
   
   ermes3, le programme de saut entre deux mailles volumiques 3D est modifié pour faire la
   distinction entre points de Gauss et noeuds.
   
   Des programmes ont des corrections locales :
   ermeb2 : erreur dans le décodage du nombre d'aretes en degré 2
   ermes2 : erreur dans le décodage du nombre d'aretes en degré 2
   intega : erreur dans le parcours des points de Gauss pour les pentaèdres
   resvoi : utilisation du programme utilitaire elref7
   utvois : utilisation du programme utilitaire elref7
   xrmev2 : erreur en axisymétrique
   
   Des programmes ont subi des corrections dans les commentaires ou les description des
   arguments.
   Sont concernés : calnor, ermev3
   
   
   Sous-programme créé
   ===================
   Un programme est créé, elref7, pour fournir les caractéristiques d'un type d'element.
   Entrée : dénomination de l'élément  : 'QU4', 'QU8', ..., 'HE8', 'H20', etc.
   Sorties :
   - Type de la maille volumique -2:quadrangle, -1 : triangle, 1 : hexaedre, etc.
   - Degré de l'élément
   - Nombre de faces de la maille
   - Famille des faces
   - Seconde famille de faces pour les cas mixtes (pentaèdre ou pyramide)
   
   
   
   Modification annexe
   ===================
   Un oubli faisait que l'on ne pouvait pas calculer le champ d'indicateurs d'erreur en
   quantité d'intérêt aux noeuds par l'option CALC_NO. La correction est simple : il a suffit
   d'ajouter le nom de champ QIRE_NOEU_ELEM au catalogue c_nom_cham_into.capy
   
   Les messages CALCULEL5_28 et CALCULEL5_29 sont supprimés de calculel5.py
   
   
   Cas-tests modifiés
   ==================
   Plusieurs motivations aux modifications des cas-tests.
   A - Suppression du calcul de l'indicateur d'erreur.
   B - Ajout du calcul de l'indicateur d'erreur.
   C - Ajout des groupes de mailles de bord dans le maillage
   D - Applications des conditions aux limites sur les groupes de faces de bord.
   E - Suppression de créations de groupes de noeuds inutiles.
   F - Reorientation des mailles de bord.
   G - Correction des valeurs de non régression pour l'indicateur d'erreur.
   H - Correction des valeurs de non régression pour des valeurs déduites de l'indicateur
   d'erreur.
   
   forma08b : D, E, F
   sslp316a : A
   sslp316b : A
   ssls09b  : D, E
   ssls09c  : D, E
   sslv07a  : G
   sslv07b  : G
   sslv07d  : G
   sslv113c : D, F, G
   sslv113d : D, F, G
   sslv130a : A, D, G
   sslv130b : A
   sslv130c : A
   sslv130d : A, D
   sslv130e : A, D, G
   sslv134d : D, E, F, G
   ssnp130a : E, G, H
   ssnp130d : E
   ssnp130e : D, F, G, H
   ssnp130f : D, F, G, H
   ssnv112a : D, E, F, G
   ssnv112b : D, E, F, G
   ssnv112c : D
   ssnv112d : D, G
   ssnv124d : D, G
   tpll01j  : C, D, F, G
   zzzz121b : C, D, F, G
   zzzz121e : B, D
RESU_FAUX_VERSION_EXPLOITATION    :  OUI   DEPUIS : 9.0.20
RESU_FAUX_VERSION_DEVELOPPEMENT   :  OUI   DEPUIS : 10.0.0
RESTITUTION_VERSION_EXPLOITATION  :  OUI
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : V7.15.101, V3.03.109, V3.04.113, V3.04.130, V3.04.134, V6.04.112, V4.21.001, V1.01.121
VALIDATION
   forma08a, sslp316a/b, ssls09b/c, sslv07a/b/c, sslv113c, sslv130a/b/c/d/e, sslv134d, ssnp130a/d/e/f, ssnv112a/b/c/d, tpll01j, zzzz121b/e
NB_JOURS_TRAV  : 10.0
--------------------------------------------------------------------------------
RESTITUTION FICHE 013881 DU 2009-09-15 14:21:51
TYPE anomalie concernant Code_Aster (VERSION 9.5)
TITRE
   ERRE_ELEM_SIGM ne marche pas avec des fonctions
FONCTIONNALITE
   Contexte
   ========
   Le calcul d'indicateur d'erreur ne savait pas prendre en compte des chargements volumiques
   sous forme de fonctions. Cela n'avait pas forcément un impact énorme auparavant, mais
   l'usage des indicateurs en quantité d'intérêt impose la résolution d'un problème dit
   'dual' avec un chargement de force interne volumique. Il faut donc être capable de digérer
   un tel chargement dans le calcul de l'indicateur d'erreur.
   Pour cela, il faut procéder à un décodage correct des composantes des chargements retenus
   et transmettre de façon optionnelle des fonctions à la routine 'calcul'. ensuite, dans le
   traitement élémentaire, il faut faire le tri entre les chargements de type réel/fonctions
   et décoder en conséquence.
   
   
   Sous-programmes modifiés
   ========================
   Les programmes amont des calculs des indicateurs d'erreur pour transmettre la fonction
   éventuelle du chargement.
   Sont concernés :
   - qires1, pour l'indicateur en quantité d'intérêt
   - resloc, pour l'indicateur par résidu
   
   Les programmes de calcul élémentaire sont modifiés, pour décoder la présence de force
   volumique, réel ou fonction.
   Sont concernés : te0368, te0375, te0377, te0378, te0497
   
   Les programmes de calcul de la contribution volumique sont modifiés pour tenir compte de
   la possibilité d'avoir une fonction.
   Sont concernés : ermev2, ermev3, erhmv2
   
   
   Catalogues modifiés
   ===================
   Les catalogues des options ERRE_ELEM_SIGM et QIRE_ELEM_SIGM sont enrichis pour accepter
   une force interne volumique.
   Tous les catalogues d'éléments invoquant ERRE_ELEM_SIGM ou QIRE_ELEM_SIGM sont modifiés
   pour ajouter la force volumique à la liste des arguments possibles.
   Sont concernés : gener_me3d_3, gener_me3di3, gener_me3gi3
                    gener_meagi2, gener_meax_2, gener_meaxs2, gener_mecpl2, gener_medpl2,
   gener_mepgi2, gener_mepli2
                    meca_hexs8.cata
                    mecpqs4, medpqs4, medpqs8
                    gener_mecpl2_xh, gener_mecpl2_xht, gener_mecpl2_xt
                    gener_medpl2_xh, gener_medpl2_xht, gener_medpl2_xt
                    gener_medh22, gener_medhb2
   
   
   Cas-tests créé
   ==============
   Un nouveau cas-test est créé pour l'occasion : sslv150a. C'est un maillage formé de 4
   mailles volumiques de chacun des types : tétraèdre, pentaèdre, hexaèdre et pyramide, avec
   tous les voisinages possibles. Il n'a évidemment aucun autre intérêt que de la non
   régression sur la prise en compte des fonctions. Le même calcul est lancé avec des
   chargements réels, d'une part, des chargements sous forme de fonctions, d'autre part. Les
   résultats sont les mêmes.
RESU_FAUX_VERSION_EXPLOITATION    :  OUI   DEPUIS : 9.0.20
RESU_FAUX_VERSION_DEVELOPPEMENT   :  OUI   DEPUIS : 10.0.0
RESTITUTION_VERSION_EXPLOITATION  :  OUI
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   sslv150a
NB_JOURS_TRAV  : 4.0
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR lefebvre     LEFEBVRE Jean-Pierre   DATE 28/09/2009 - 13:49:49

--------------------------------------------------------------------------------
RESTITUTION FICHE 013838 DU 2009-09-09 09:30:21
TYPE evolution concernant Code_Aster (VERSION )
TITRE
   rxc3xa9sorption de bibfor/from_c
FONCTIONNALITE
   Réorganisation des sources : suppression du répertoire bibfor/from_c.
   
   Les routines FETMER, FETAM, MPICM1A et MUMAM sont déplacées dans le répertoire bibf90.
   Elles sont instrumentées avec la directive #ifdef _USE_MPI. On modifie le fichier de
   configuration config.mpi pour ajouter -D_USE_MPI aux paramètres passés au compilateur
   fortran90.
   
   La routine TRACEB est renommée en TRABCK pour être déposée dans trabck.F.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   construction de l'exxc3xa9cutable et passage des tests MPI
NB_JOURS_TRAV  : 1.0
--------------------------------------------------------------------------------
RESTITUTION FICHE 008206 DU 2004-11-04 00:00:00
TYPE evolution concernant Code_Aster (VERSION 7.3)
TITRE
   AR01 - jeveux et nombres d'entrees trop grand dans la base
FONCTIONNALITE
   Alerter lorsque la taille du répertoire de la base GLOBALE ou de la base VOLATILE devient
   trop importante.
   La routine JJPREM renvoie maintenant un code retour lorsque l'on atteint l'entier premier
   maximum (le dernier de la liste codéee en dur dans la fonction, il vaut tout de même
   50000017), ce qui permet d'alerter l'utilisateur par un message du type :
   
      !-------------------------------------------------------------------------------!
      ! <A> <JEVEUX_64>                                                               !
      !                                                                               !
      !                                                                               !
      !                                                                               !
      !  ATTENTION la taille de répertoire de noms atteint 38461551 pour la base      !
      !  GLOBALE.                                                                     !
      !  Il sera impossible de l'agrandir.                                            !
      !   -> Conseil :                                                                !
      !  Il faut réduire le nombre de concepts sur la base GLOBALE en utilisant       !
      !  la commande DETRUIRE.                                                        !    
      !                                                                               !
      !                                                                               !
      !                                                                               !
      !                                                                               !
      ! Ceci est une alarme. Si vous ne comprenez pas le sens de cette                !
      ! alarme, vous pouvez obtenir des résultats inattendus !                        !
      !-------------------------------------------------------------------------------!
   
   Ou bien :
   
      !-------------------------------------------------------------------------------!
      ! <A> <JEVEUX_65>                                                               !
      !                                                                               !
      !                                                                               !
      !                                                                               !
      !  ATTENTION la taille de répertoire de noms atteint 38461551 pour la base      !
      !  VOLATILE.                                                                    !
      !  Il sera impossible de l'agrandir.                                            !
      !   -> Conseil :                                                                !
      !  Il y a trop d'objets créés sur la base VOLATILE, cela peut provenir d'une    !
      !  erreur dans la programmation de la commande.                                 !
      !                                                                               !
      !                                                                               !
      !                                                                               !
      !                                                                               !
      ! Ceci est une alarme. Si vous ne comprenez pas le sens de cette                !
      ! alarme, vous pouvez obtenir des résultats inattendus !                        !
      !-------------------------------------------------------------------------------!
   
   Si ce message apparaît et concerne la base GLOBALE, l'utilisateur peut éventuellement
   intervenir en détruisant des concepts ou des parties de résultats. Si cela concerne la
   base VOLATILE, il faut remonter une erreur de programmation vers l'équipe de développement.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   liste restreinte + test perso
NB_JOURS_TRAV  : 0.2
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR audebert     AUDEBERT Sylvie        DATE 29/09/2009 - 14:52:48

--------------------------------------------------------------------------------
RESTITUTION FICHE 012005 DU 2008-04-18 12:39:41
TYPE evolution concernant Code_Aster (VERSION )
TMA : CS
TITRE
   Modification de l'ordre des combinaisons dans COMB_SISM_MODAL en multi-appui decorrele
FONCTIONNALITE
   Objectif :
   ----------
   L?objectif de ces fiches (12005 et 13599) est de permettre dans le cas d?excitations
   décorrélées la combinaison quadratique intra-groupes. Par la même occasion, des
   modifications sur l?emplacement des mots-clés MONO_APPUI et MULTI_APPUI sont 
   réalisées afin de simplifier leur utilisation.
   
   Modifications :
   ----------------
   La commande COMB_SISM_MODAL a été remaniée. Les mot-clés MONO_APPUI et MULTI_APPUI
   jusqu?alors présents sous EXCIT ont été remontés au niveau de COMB_SISM_MODAL.
   1. Si MONO_APPUI est renseigné alors, dans le mot-clé EXCIT, N?UD et GROUP_NO sont 
   absents.
   2. Si MULTI_APPUI vaut CORRELE, alors :
   -	COMB_MULT_APPUI est utilisé
   -	N?UD et GROUP_NO sont présents dans le mot-clé EXCIT
   3. Si MULTI_APPUI vaut DECORRELE, alors :
   -	GROUP_APPUI peut être utilisé pour définir, s'il y a lieu, les groupes 
   décorrélés d'appuis ; s'il ne l?est pas, alors toutes les excitations sont
   décorrélées entre elles.
   -	N?UD e GROUP_NO sont présents dans le mot-clé EXCIT
   
   Tous les cas-tests faisant appel à comb_sism_modal ont été mis à jour.
   Le mot-clé facteur GROUP_APPUI est nouveau dans la commande COMB_SISM_MODAL. Il 
   permet de construire des groupes d?appuis à partir de groupes d?excitations 
   décorrélés entre eux, les exitations d'un même froupe étant supposées corrélées entre 
   elles.
   
   Sous ce mot-clé, les mots-clés GROUP_NO et/ou N?UD permettent de définir les groupes
   d?appuis. La somme inter-groupe des groupes d?appuis étant, dans le cas décorrélé,
   toujours quadratique, le mot-clé TYPE_COMBI n?est plus nécessaire. Si GROUP_APPUI est
   absent, alors il n?existe pas de groupe d?appuis, tous les appuis étant considérés 
   dans ce cas décorrélés entre eux. 
   Dans le cas où l?utilisateur constitue un groupe d?appuis avec l?ensemble des appuis, 
   ceci signifierait que les appuis sont tous corrélés entre eux : dans ce cas, le code 
   échoue en erreur fatale avec le message suivant :
   31: _("""
     La définition du groupe d'appuis n'est pas correcte dans le cas décorrélé.
     Un seul groupe d'appuis a été constitué contenant tous les appuis. 
   """),
   
   Dans le cas où l?utilisateur définit un n?ud ou un groupe de n?ud appartenant à 
   plusieurs groupes d?appuis, le code échoue en erreur fatale avec le message suivant :
   
   30: _("""
     Les groupes d'appuis ne sont pas correctement constitués. 
     Un noeud ou un groupe de noeud appartient à plusieurs groupes d'appuis.
   """),
   
   Un travail de vérification des outils d?impression IMPR_RESU et POST_RELEVE_T de 
   resultats issus de COMB_SISM_MODAL a montré que la valeur de la fréquence et celle du 
   numéro de mode n?est correctement récupéré lors de l?utilisation de IMPR_RESU (fiche 
   émise 13714). Le cas-test sdld30a a été enrichi. Il concerne le cas d?excitation uni-
   directionnelle pour les cas multi-appui décorrélés.
   
   Impacts:
   -------
   Fortran:
   ascalc.f  ascarm.f  ascorm.f  asefen.f  asexci.f  asmsup.f  op0109.f
   
   Catalogue python:
   comb_sism_modal.capy
   
   Python messages:
   seisme.py
   
   Cas-tests:
   forma12c rccm02a rccm02b rccm02c rccm03a
   sdld25a  sdld301a sdld301b sdld30a sdll108b 
   sdll112a sdll112b sdll131a sdll23a sdls300a 
   sdlx02a sdlx300a sdlx301a zzzz102a 
   
   Nouveau cas-test: 
   sdld33a
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : U4.84.01, V2.01.033, U2.06.09, R4.05.03
VALIDATION
   Les cas-tests avec COMB_MULT_APPUI + un nouveau cas-test
--------------------------------------------------------------------------------
RESTITUTION FICHE 013599 DU 2009-07-06 15:16:55
TYPE evolution concernant Code_Aster (VERSION )
TMA : CS
TITRE
   COMB_SISM_MODAL : Demandes compl?ntaires ?a fiche 12005
FONCTIONNALITE
   Les travaux effectués sont présentés dans la fiche 12005.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   sdld33a
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR pellet       PELLET Jacques         DATE 29/09/2009 - 14:52:49

--------------------------------------------------------------------------------
RESTITUTION FICHE 013702 DU 2009-08-10 13:57:29
TYPE evolution concernant Code_Aster (VERSION )
TMA : CS
TITRE
   Ajout d'un paramxc3xa8tre dans TBAJLI
FONCTIONNALITE
   Objectif :
   ---------
   Cette évolution fait suite à la fiche 13649 d'amélioration des performances 
   de POST_RELEVE_T où X. Desroches a été amené à modifier la constante NDIM dans la routine
   TBAJLI. Cette constante valait 10 et a été mise à 1000 afin de limiter les appels à JUVECA
   très coûteux en temps de calcul.
   Suite à une concertation entre Jacques et Xavier, il a été décidé d'adopter une stratégie
   d'agrandissement de la table par un facteur multiplicatif de 1.5. Ainsi, on perd (au plus)
   50% de la place mais on passe d'une table de 1 ligne à une table de 10**6 lignes en 34
   aggrandissements (avec juveca.f) ce qui reste acceptable pour le CPU.
   
   
   
   Modification:
   ------------
   Dans la routine tbajli.f, la ligne 97 est modifiée telle que:
   
   97c97
   <          NDIM = NDIM + 1000
   ---
   >          NDIM = NINT((NDIM*3.D0)/2.D0)
   
   Impact:
   ------
   tbajli.f
   
   Validation:
   ----------
   yyyy106a + liste-restreinte
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   yyyy106a+liste restreinte
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR proix        PROIX Jean-Michel      DATE 28/09/2009 - 17:44:40

--------------------------------------------------------------------------------
RESTITUTION FICHE 013939 DU 2009-09-24 14:46:39
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TITRE
   En NEW10.0.18, le cas-test comp002g s'arrete par manque de temps sur Bull.
FONCTIONNALITE
   La dérive en temps CPU de ce test n'est pas négligable:
   en NEW9 :  
    *  . part Superviseur      :      18.94 :       0.37 :      19.31 :      19.88 *
    *  . part Fortran          :      93.39 :       1.00 :      94.39 :      96.02 *
    ********************************************************************************
    * TOTAL_JOB                :     112.43 :       1.38 :     113.81 :     115.96 *
    ********************************************************************************
   
   en NEW10 :
    *  . part Superviseur      :      20.42 :       0.62 :      21.04 :      21.49 *
    *  . part Fortran          :     124.39 :       2.05 :     126.44 :     130.09 *
    ********************************************************************************
    * TOTAL_JOB                :     144.91 :       2.67 :     147.58 :     151.64 *
    ********************************************************************************
   
   le .para était à  180s, je l'augmente à 240s.
    TOUTEFOIS, on constate une dérive en temps sans STAT_NON_LINE
   
   en version 9, pour le dernier SIMU_POINT_MAT :
   ---------------------------------------------------------------------
   STATISTIQUES SUR LE TRANSITOIRE 
   ---------------------------------------------------------------------
      NOMBRE DE PAS DE TEMPS                  :    200
      NOMBRE D'ITERATIONS DE NEWTON           :    400
      NOMBRE DE CREATION DE NUMEROTATION      :      1
      NOMBRE DE FACTORISATION DE MATRICE      :    400
      NOMBRE D'INTEGRATION DE COMPORTEMENT    :    600
      NOMBRE DE RESOLUTION K.U = F            :    400
      TEMPS POUR CREATION NUMEROTATION        :  0 s                    
      TEMPS POUR FACTORISATION MATRICE        :  0 s                    
      TEMPS POUR INTEGRATION COMPORTEMENT     :  5 s                    
      TEMPS POUR RESOLUTION K.U = F           :  0 s                    
   ---------------------------------------------------------------------
       #  FIN COMMANDE NO : 0839   USER+SYST: 49.38s (SYST:   0.58s, ELAPS:  50.99s)
   ---------------------------------------------------------------------
   
   en version 10, pour le dernier SIMU_POINT_MAT :STATISTIQUES SUR LE TRANSITOIRE 
   ---------------------------------------------------------------------
      NOMBRE DE PAS DE TEMPS                  :    200
      NOMBRE D'ITERATIONS DE NEWTON           :    400
      NOMBRE DE CREATION DE NUMEROTATION      :      1
      NOMBRE DE FACTORISATION DE MATRICE      :    400
      NOMBRE D'INTEGRATION DE COMPORTEMENT    :    600
      NOMBRE DE RESOLUTION K.U = F            :    400
      TEMPS POUR CREATION NUMEROTATION        :  0 s                    
      TEMPS POUR FACTORISATION MATRICE        :  0 s                    
      TEMPS POUR INTEGRATION COMPORTEMENT     :  4 s                    
      TEMPS POUR RESOLUTION K.U = F           :  0 s                    
   ---------------------------------------------------------------------
   #1 Resolution des systemes lineaires   CPU (USER+SYST/SYST/ELAPS):      0.74      0.03   
     2.01
   #2 Calculs elementaires et assemblages CPU (USER+SYST/SYST/ELAPS):     33.25      0.35   
    34.18
   #2 Calculs elementaires et assemblages CPU (USER+SYST/SYST/ELAPS):      4.32      0.28   
     4.11
       #  USAGE DE LA MEMOIRE JEVEUX
       #     - MEMOIRE DYNAMIQUE CONSOMMEE :        25.03 Mo (MAXIMUM ATTEINT :        25.25 Mo) 
       #     - MEMOIRE UTILISEE            :        11.46 Mo (MAXIMUM ATTEINT :        21.07 Mo) 
       #  USAGE DE LA MEMOIRE POUR LE PROCESSUS
       #     - VmData :       236.44 Mo - VmSize :       404.62 Mo 
   
       #  FIN COMMANDE NO : 0846   USER+SYST:       61.59s (SYST:        0.94s, ELAPS:      
   64.70s)
       # 
   ------------------------------------------------------------------------------------------
   
   On a donc le meme nombre d'iterations, mais un temsp CPU augmenté de 26%. A quoi est-ce dû ?
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   comp002g
NB_JOURS_TRAV  : 0.2
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR sellenet     SELLENET Nicolas       DATE 28/09/2009 - 15:46:26

--------------------------------------------------------------------------------
RESTITUTION FICHE 013821 DU 2009-09-04 09:37:20
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TMA : DeltaCad
TITRE
   Impossible d'imprimer au format MED (MED_31)
FONCTIONNALITE
   Problème :
   ----------
   L'impression au format MED d'un champ dont le nombre de composante varie en
   fonction du temps n'est pas traite. 
   C'est le cas par exemple lorsque le chargement est de nature differente lors 
   d'une reprise de calcul (charges + contact methode continue).
   Dans ce cas precis, aux premiers instants le champ DEPL dispose des 3
   composantes DX,DY,DZ, et aux instants de reprise, on 
   a la presence de la composante supplementaire LAGS_C en certains noeuds.
   
   
   Solution :
   ----------
   Actuellement, Code-Aster detectait ce probleme et avertissait l'utilisateur 
   par un message peu explicite. Nous avons remanier ce message : 
   
     -> Ce champ existe deja dans le fichier MED avec un nombre de composantes
        different a un instant precedent. On ne peut pas le creer de nouveau.
   
        Nom MED du champ : xxxx
   
     -> Risque & Conseil :
        On ne peut pas imprimer un champ dont le nombre de composantes varie en
        fonction du temps. Plusieurs possibilites s'offrent a vous:
        - si vous souhaitez disposer d'un champ disposant des memes composantes
        a chaque instant, il faut renseigner derriere le mot-cle NOM_CMP le nom 
        des composantes commun aux differents instants.
        - si vous souhaitez imprimer un champ avec l'ensemble des composantes
        Aster qu'il contient, il suffit de faire plusieurs IMPR_RESU et de 
        renseigner pour chaque impression une liste d'instants adoc.
   
   
   Validation :
   ------------
   Passage de l'etude fournie avec la demande.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   etude fournie
--------------------------------------------------------------------------------
RESTITUTION FICHE 013202 DU 2009-03-11 15:00:09
TYPE anomalie concernant Code_Aster (VERSION 7.0)
TMA : DeltaCad
TITRE
   Validation aster avec valgrind
FONCTIONNALITE
   Cette fiche a eu pour objectif de pister les fuites memoires, les variables 
   non initialisees, les ecritures/lectures invalides grace a Valgrind.
   Nous avons donc passe la liste restreinte sur Calibre5 (claut682) avec la
   complementarite de Valgrind pour détecter ces eventuelles erreurs.
   
   Un travail important a ete réalise pour :
   - récupérer les information de Valgrind ecrites dans les .mess,
   - filtrer les informations de Valgrind en fonction de certains
   critères,et
   - supprimer les messages doublons.
   La conception et l'utilisation de scripts python ont ete requises pour ce 
   travail.
   
   Nous avons donc prepare 3 fichiers a exploiter, un par type d'anomalie:
   - "conditional_jump_sans_doublon.txt" : fichier qui recueille le nom des
   fichiers et la localisation des variables non initialisées.
   - "invalid_read_sans_doublon.txt":fichier qui recueille le nom des
   fichiers et la localisation des problèmes d'écritures et de lecture.
   - "definitely_lost_sans_doublon.txt":fichier qui recueille le nom des
   fichiers et la localisation des fuites mémoires.
   
   Trois fiches d'anomalies seront emises, une par type d'erreur, afin d'apporter
   des corrections dans Code_Aster.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  NON
IMPACT_DOCUMENTAIRE : 
VALIDATION
   aucune
--------------------------------------------------------------------------------



-----------------------------------------------------------------------

--------------------------------------------------------------------------------
--- AUTEUR sellenet     SELLENET Nicolas       DATE 28/09/2009 - 16:45:37

--------------------------------------------------------------------------------
RESTITUTION FICHE 013935 DU 2009-09-24 12:10:37
TYPE express concernant Code_Aster (VERSION 7.0)
TITRE
   Suppression de messages inutiles
FONCTIONNALITE
   Suite à ma restitution de la semaine dernière, les messages MODELISA9_58, MODELISA9_91 et
   MODELISA9_92 sont devenus inutiles, je les supprime.
RESU_FAUX_VERSION_EXPLOITATION    :  NON
RESU_FAUX_VERSION_DEVELOPPEMENT   :  NON
RESTITUTION_VERSION_EXPLOITATION  :  NON
RESTITUTION_VERSION_DEVELOPPEMENT :  OUI
IMPACT_DOCUMENTAIRE : 
VALIDATION
   aucune
NB_JOURS_TRAV  : 0.01
--------------------------------------------------------------------------------



========================================================================
=== Recapitulation des operations demandees pour toutes les restitutions
========================================================================


    TYPE Action    unite                      user      Auteur         nblg  ajout suppr.

 CASTEST AJOUT sdld33a                       macocco K.MACOCCO          460    460      0
 CASTEST AJOUT sslv153a                     gnicolas G.NICOLAS          509    509      0
 CASTEST MODIF comp002g                        proix J-M.PROIX          233      2      1
 CASTEST MODIF forma08b                     gnicolas G.NICOLAS          517     24     18
 CASTEST MODIF forma12c                      macocco K.MACOCCO          775      3      2
 CASTEST MODIF mumps02a                      boiteau O.BOITEAU          164     37      3
 CASTEST MODIF mumps04a                      boiteau O.BOITEAU          423     62      1
 CASTEST MODIF perf001a                     sellenet N.SELLENET          67      1      1
 CASTEST MODIF rccm02a                       macocco K.MACOCCO          342      1      1
 CASTEST MODIF rccm02b                       macocco K.MACOCCO          343      1      1
 CASTEST MODIF rccm02c                       macocco K.MACOCCO          332      1      1
 CASTEST MODIF rccm03a                       macocco K.MACOCCO         4171      1      1
 CASTEST MODIF sdld25a                       macocco K.MACOCCO          208      3      3
 CASTEST MODIF sdld301a                      macocco K.MACOCCO          552     28    258
 CASTEST MODIF sdld301b                      macocco K.MACOCCO          846     40     85
 CASTEST MODIF sdld30a                       macocco K.MACOCCO         1669   1338   1943
 CASTEST MODIF sdll108b                      macocco K.MACOCCO          453      5      5
 CASTEST MODIF sdll112a                      macocco K.MACOCCO          758     16     23
 CASTEST MODIF sdll112b                      macocco K.MACOCCO          788     15     19
 CASTEST MODIF sdll131a                      macocco K.MACOCCO         1518     54     13
 CASTEST MODIF sdll23a                       macocco K.MACOCCO          587     13     13
 CASTEST MODIF sdls300a                      macocco K.MACOCCO          654      5      5
 CASTEST MODIF sdlx02a                       macocco K.MACOCCO          456      5      5
 CASTEST MODIF sdlx300a                      macocco K.MACOCCO          968      3      3
 CASTEST MODIF sdlx301a                      macocco K.MACOCCO         4890      7      7
 CASTEST MODIF sslp316a                     gnicolas G.NICOLAS          193      2     20
 CASTEST MODIF sslp316b                     gnicolas G.NICOLAS          161      2     20
 CASTEST MODIF ssls09b                      gnicolas G.NICOLAS          335      3     10
 CASTEST MODIF ssls09c                      gnicolas G.NICOLAS          191      2      9
 CASTEST MODIF sslv07a                      gnicolas G.NICOLAS          900     25     13
 CASTEST MODIF sslv07b                      gnicolas G.NICOLAS          155     20      9
 CASTEST MODIF sslv07d                      gnicolas G.NICOLAS          315     14      5
 CASTEST MODIF sslv113c                     gnicolas G.NICOLAS          189     33     20
 CASTEST MODIF sslv113d                     gnicolas G.NICOLAS          189     29     16
 CASTEST MODIF sslv130a                     gnicolas G.NICOLAS          365      7     42
 CASTEST MODIF sslv130b                     gnicolas G.NICOLAS          338      1     34
 CASTEST MODIF sslv130c                     gnicolas G.NICOLAS          316      1     33
 CASTEST MODIF sslv130d                     gnicolas G.NICOLAS          777      8     32
 CASTEST MODIF sslv130e                     gnicolas G.NICOLAS          354      8     43
 CASTEST MODIF sslv134d                     gnicolas G.NICOLAS         1344     23     13
 CASTEST MODIF ssnp130a                     gnicolas G.NICOLAS          317     50     46
 CASTEST MODIF ssnp130d                     gnicolas G.NICOLAS          277      1      5
 CASTEST MODIF ssnp130e                     gnicolas G.NICOLAS          236     78     36
 CASTEST MODIF ssnp130f                     gnicolas G.NICOLAS          235     92     49
 CASTEST MODIF ssnv112a                     gnicolas G.NICOLAS          316     15     14
 CASTEST MODIF ssnv112b                     gnicolas G.NICOLAS          355     14     11
 CASTEST MODIF ssnv112c                     gnicolas G.NICOLAS          300      2      2
 CASTEST MODIF ssnv112d                     gnicolas G.NICOLAS          307     12      8
 CASTEST MODIF ssnv124b                     gnicolas G.NICOLAS          186     15     10
 CASTEST MODIF tpll01j                      gnicolas G.NICOLAS          126     21     10
 CASTEST MODIF ttnl03b                      courtois M.COURTOIS         358      4      4
 CASTEST MODIF zzzz102a                      macocco K.MACOCCO         1495     19     19
 CASTEST MODIF zzzz121b                     gnicolas G.NICOLAS          688     75     49
 CASTEST MODIF zzzz121e                     gnicolas G.NICOLAS          323     62     11
 CASTEST MODIF zzzz159f                     courtois M.COURTOIS         174      1      4
 CASTEST MODIF zzzz218a                       assire A.ASSIRE           370      1      3
 CASTEST MODIF zzzz218b                       assire A.ASSIRE           359      1      3
CATALOGU MODIF options/erre_elem_sigm       gnicolas G.NICOLAS           71      6      4
CATALOGU MODIF options/qire_elem_sigm       gnicolas G.NICOLAS           70     11      7
CATALOGU MODIF typelem/gener_me3d_3         gnicolas G.NICOLAS          650      9      9
CATALOGU MODIF typelem/gener_me3di3         gnicolas G.NICOLAS          232      9      9
CATALOGU MODIF typelem/gener_me3gi3         gnicolas G.NICOLAS          204      9      9
CATALOGU MODIF typelem/gener_meagi2         gnicolas G.NICOLAS          195      9      9
CATALOGU MODIF typelem/gener_meax_2         gnicolas G.NICOLAS          577      9      9
CATALOGU MODIF typelem/gener_meaxs2         gnicolas G.NICOLAS          506      9      9
CATALOGU MODIF typelem/gener_mecpl2         gnicolas G.NICOLAS          616      9      9
CATALOGU MODIF typelem/gener_mecpl2_xh      gnicolas G.NICOLAS          284      4      3
CATALOGU MODIF typelem/gener_mecpl2_xht     gnicolas G.NICOLAS          279      4      3
CATALOGU MODIF typelem/gener_mecpl2_xt      gnicolas G.NICOLAS          275      4      3
CATALOGU MODIF typelem/gener_medh22         gnicolas G.NICOLAS          250      7      5
CATALOGU MODIF typelem/gener_medhb2         gnicolas G.NICOLAS          217      7      4
CATALOGU MODIF typelem/gener_medpl2         gnicolas G.NICOLAS          620      9      9
CATALOGU MODIF typelem/gener_medpl2_xh      gnicolas G.NICOLAS          282      4      3
CATALOGU MODIF typelem/gener_medpl2_xht     gnicolas G.NICOLAS          274      4      3
CATALOGU MODIF typelem/gener_medpl2_xt      gnicolas G.NICOLAS          273      4      3
CATALOGU MODIF typelem/gener_mepgi2         gnicolas G.NICOLAS          195      9      9
CATALOGU MODIF typelem/gener_mepli2         gnicolas G.NICOLAS          219      9      9
CATALOGU MODIF typelem/meca_hexs8           gnicolas G.NICOLAS          526      4      4
CATALOGU MODIF typelem/mecpqs4              gnicolas G.NICOLAS          496      9      9
CATALOGU MODIF typelem/medpqs4              gnicolas G.NICOLAS          505      9      9
CATALOGU MODIF typelem/medpqs8              gnicolas G.NICOLAS          509      9      9
CATALOPY MODIF commande/calc_ecrevisse        assire A.ASSIRE           173      3      1
CATALOPY MODIF commande/comb_sism_modal      macocco K.MACOCCO          128     28     19
CATALOPY MODIF commande/dyna_non_line        boiteau O.BOITEAU          370      3      1
CATALOPY MODIF commande/macr_ecre_calc        assire A.ASSIRE           180      1      1
CATALOPY MODIF commande/macr_ecrevisse        assire A.ASSIRE           280      7     12
CATALOPY MODIF commande/ther_non_line        boiteau O.BOITEAU          169      3      1
CATALOPY MODIF commun/c_nom_cham_into       gnicolas G.NICOLAS          197      2      1
CATALOPY MODIF commun/c_solveur              boiteau O.BOITEAU           83      3      1
FORTRAN90 AJOUT mumps/amumpd                  boiteau O.BOITEAU          364    364      0
FORTRAN90 AJOUT mumps/amumph                  boiteau O.BOITEAU          377    377      0
FORTRAN90 AJOUT mumps/amumpz                  boiteau O.BOITEAU          365    365      0
FORTRAN90 AJOUT mumps/mumam                  lefebvre J-P.LEFEBVRE       354    354      0
FORTRAN90 AJOUT utilitai/fetam               lefebvre J-P.LEFEBVRE       436    436      0
FORTRAN90 AJOUT utilitai/fetmer              lefebvre J-P.LEFEBVRE        54     54      0
FORTRAN90 AJOUT utilitai/mpicm1a             lefebvre J-P.LEFEBVRE       219    219      0
FORTRAN90 MODIF mumps/amumpc                  boiteau O.BOITEAU          364     81     85
FORTRAN90 MODIF mumps/amumpi                  boiteau O.BOITEAU          408     88     34
FORTRAN90 MODIF mumps/amumpm                  boiteau O.BOITEAU          648    307    100
FORTRAN90 MODIF mumps/amumpp                  boiteau O.BOITEAU          361    116     50
FORTRAN90 MODIF mumps/amumps                  boiteau O.BOITEAU          362    284    212
FORTRAN90 MODIF mumps/amumpt                  boiteau O.BOITEAU          422     74     34
FORTRAN90 SUPPR mumps/amumpr                  boiteau O.BOITEAU          371      0    371
FORTRAN90 SUPPR utilitai/traceb              lefebvre M.ADMINISTRATEUR     37      0     37
 FORTRAN AJOUT elements/elref7              gnicolas G.NICOLAS          195    195      0
 FORTRAN MODIF algeline/ascarm               macocco K.MACOCCO          124     14      6
 FORTRAN MODIF algeline/ascorm               macocco K.MACOCCO          258     31     19
 FORTRAN MODIF algeline/creso3               boiteau O.BOITEAU          126     19     61
 FORTRAN MODIF algeline/crsvpe               boiteau O.BOITEAU           95      4      2
 FORTRAN MODIF algeline/op0014               boiteau O.BOITEAU          267     13      7
 FORTRAN MODIF algeline/preres               boiteau O.BOITEAU          257      3      3
 FORTRAN MODIF algeline/resoud               boiteau O.BOITEAU          287      4      4
 FORTRAN MODIF algorith/ascalc               macocco K.MACOCCO          332    121      8
 FORTRAN MODIF algorith/asefen               macocco K.MACOCCO          249     23      5
 FORTRAN MODIF algorith/asexci               macocco K.MACOCCO          156     18      8
 FORTRAN MODIF algorith/asmsup               macocco K.MACOCCO          232     10      1
 FORTRAN MODIF algorith/crsolv               boiteau O.BOITEAU           92      4      3
 FORTRAN MODIF algorith/crsvmu               boiteau O.BOITEAU          191     39     26
 FORTRAN MODIF algorith/op0109               macocco K.MACOCCO          428     25     12
 FORTRAN MODIF calculel/qires1              gnicolas G.NICOLAS          559    164    124
 FORTRAN MODIF calculel/resloc              gnicolas G.NICOLAS          571    115     57
 FORTRAN MODIF calculel/uthk                gnicolas G.NICOLAS          416     70     14
 FORTRAN MODIF calculel/utno3d              gnicolas G.NICOLAS          144     14     12
 FORTRAN MODIF calculel/utvois              gnicolas G.NICOLAS          113     21    176
 FORTRAN MODIF elements/erhmv2              gnicolas G.NICOLAS          367      6      6
 FORTRAN MODIF elements/ermeb2              gnicolas G.NICOLAS          351      7      5
 FORTRAN MODIF elements/ermeb3              gnicolas G.NICOLAS          343    204    148
 FORTRAN MODIF elements/ermes2              gnicolas G.NICOLAS          206     12      6
 FORTRAN MODIF elements/ermes3              gnicolas G.NICOLAS          213    103     69
 FORTRAN MODIF elements/ermev3              gnicolas G.NICOLAS          139      2      2
 FORTRAN MODIF elements/intega              gnicolas G.NICOLAS           78      4      6
 FORTRAN MODIF elements/resvoi              gnicolas G.NICOLAS          380     97     37
 FORTRAN MODIF elements/te0003              gnicolas G.NICOLAS         1169    529    270
 FORTRAN MODIF elements/te0368              gnicolas G.NICOLAS          777    574    402
 FORTRAN MODIF elements/te0375              gnicolas G.NICOLAS          583    377    303
 FORTRAN MODIF elements/te0377              gnicolas G.NICOLAS          588    351    158
 FORTRAN MODIF elements/te0378              gnicolas G.NICOLAS          687    482    241
 FORTRAN MODIF elements/te0382              gnicolas G.NICOLAS          471    127    108
 FORTRAN MODIF elements/te0497              gnicolas G.NICOLAS          672    225    144
 FORTRAN MODIF elements/xrmev2              gnicolas G.NICOLAS          134      7      5
 FORTRAN MODIF jeveux/jedebu                lefebvre J-P.LEFEBVRE       283      4      3
 FORTRAN MODIF jeveux/jeecra                lefebvre J-P.LEFEBVRE       282      5      4
 FORTRAN MODIF jeveux/jeinif                lefebvre J-P.LEFEBVRE       598     13      3
 FORTRAN MODIF jeveux/jelihd                lefebvre J-P.LEFEBVRE       602      3      2
 FORTRAN MODIF jeveux/jjarep                lefebvre J-P.LEFEBVRE       303     14      3
 FORTRAN MODIF jeveux/jjcrec                lefebvre J-P.LEFEBVRE       143      5      3
 FORTRAN MODIF jeveux/jjcroc                lefebvre J-P.LEFEBVRE       222      5      4
 FORTRAN MODIF jeveux/jjprem                lefebvre J-P.LEFEBVRE        91      5      3
 FORTRAN MODIF jeveux/jxveuo                lefebvre J-P.LEFEBVRE       261      4      3
 FORTRAN MODIF utilifor/u2mesg              lefebvre J-P.LEFEBVRE       143      2      3
 FORTRAN MODIF utilitai/calnor              gnicolas G.NICOLAS          366     98     75
 FORTRAN MODIF utilitai/detrsd               boiteau O.BOITEAU          625      2      2
 FORTRAN MODIF utilitai/tbajli               macocco K.MACOCCO          294      2      2
 FORTRAN SUPPR from_c/fetam                 lefebvre M.ADMINISTRATEUR    437      0    437
 FORTRAN SUPPR from_c/fetmer                lefebvre M.ADMINISTRATEUR     58      0     58
 FORTRAN SUPPR from_c/mpicm1a               lefebvre M.ADMINISTRATEUR    220      0    220
 FORTRAN SUPPR from_c/mumam                 lefebvre M.ADMINISTRATEUR    354      0    354
  PYTHON MODIF Macro/calc_ecrevisse_ops       assire A.ASSIRE           799      2      2
  PYTHON MODIF Macro/macr_ecre_calc_ops       assire A.ASSIRE           638      1      1
  PYTHON MODIF Macro/macr_ecrevisse_ops       assire A.ASSIRE           711     17      8
  PYTHON MODIF Macro/macr_recal_ops         courtois M.COURTOIS        1033     10      1
  PYTHON MODIF Messages/algorith16          courtois M.COURTOIS         484      1      8
  PYTHON MODIF Messages/calculel5           gnicolas G.NICOLAS          349      7      7
  PYTHON MODIF Messages/jeveux              lefebvre J-P.LEFEBVRE       337     21      1
  PYTHON MODIF Messages/med                  rezette C.REZETTE          553     12      6
  PYTHON MODIF Messages/modelisa9           sellenet N.SELLENET         437      1     14
  PYTHON MODIF Messages/seisme               macocco K.MACOCCO          172     18      1


        nb unites  nb lignes  ajouts  suppr.  difference
 AJOUT :   10        3333      3333             +3333
 MODIF :  151       68509      7553    6343     +1210
 SUPPR :    6        1477              1477     -1477
 DEPLA :    0           0 
         ----      ------     ------  ------   ------
 TOTAL :  167       73319     10886    7820     +3066 
